{"version":3,"sources":["webpack://LineUpJS/webpack/universalModuleDefinition","webpack://LineUpJS/webpack/bootstrap","webpack://LineUpJS/./node_modules/fast-deep-equal/index.js","webpack://LineUpJS/./node_modules/lodash.get/index.js","webpack://LineUpJS/./node_modules/detect-browser/index.js","webpack://LineUpJS/./node_modules/reflect-metadata/Reflect.js","webpack://LineUpJS/./node_modules/tslib/tslib.es6.js","webpack://LineUpJS/./src/internal/interable.ts","webpack://LineUpJS/./src/internal/worker.ts","webpack://LineUpJS/./src/internal/math.ts","webpack://LineUpJS/./src/internal/utils.ts","webpack://LineUpJS/./node_modules/d3-dispatch/src/dispatch.js","webpack://LineUpJS/./src/internal/AEventDispatcher.ts","webpack://LineUpJS/./src/model/interfaces.ts","webpack://LineUpJS/./src/model/Column.ts","webpack://LineUpJS/./src/model/annotations.ts","webpack://LineUpJS/./src/model/INumberColumn.ts","webpack://LineUpJS/./src/model/ValueColumn.ts","webpack://LineUpJS/./src/model/CompositeColumn.ts","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/colors.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://LineUpJS/./node_modules/d3-color/src/define.js","webpack://LineUpJS/./node_modules/d3-color/src/color.js","webpack://LineUpJS/./node_modules/d3-color/src/math.js","webpack://LineUpJS/./node_modules/d3-color/src/lab.js","webpack://LineUpJS/./node_modules/d3-color/src/cubehelix.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/basis.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/constant.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/color.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/rgb.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/number.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/basisClosed.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/string.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/parse.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/value.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/date.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/array.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/object.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/round.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/index.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/zoom.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/hsl.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/hcl.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/cubehelix.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/quantize.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/ramp.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://LineUpJS/./src/internal/OrderedSet.ts","webpack://LineUpJS/./src/model/internal.ts","webpack://LineUpJS/./src/model/Ranking.ts","webpack://LineUpJS/./src/internal/debounce.ts","webpack://LineUpJS/./src/model/RankColumn.ts","webpack://LineUpJS/./src/model/AggregateGroupColumn.ts","webpack://LineUpJS/./src/model/SelectionColumn.ts","webpack://LineUpJS/./src/model/ActionColumn.ts","webpack://LineUpJS/./src/model/missing.ts","webpack://LineUpJS/./src/model/StringColumn.ts","webpack://LineUpJS/./src/internal/mathInterfaces.ts","webpack://LineUpJS/./src/model/AnnotateColumn.ts","webpack://LineUpJS/./src/model/CategoricalColorMappingFunction.ts","webpack://LineUpJS/./src/model/internalCategorical.ts","webpack://LineUpJS/./src/model/CategoricalColumn.ts","webpack://LineUpJS/./src/model/BooleanColumn.ts","webpack://LineUpJS/./src/model/ArrayColumn.ts","webpack://LineUpJS/./src/model/BooleansColumn.ts","webpack://LineUpJS/./node_modules/d3-format/src/formatDecimal.js","webpack://LineUpJS/./node_modules/d3-format/src/exponent.js","webpack://LineUpJS/./node_modules/d3-format/src/formatSpecifier.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTrim.js","webpack://LineUpJS/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://LineUpJS/./node_modules/d3-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatRounded.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTypes.js","webpack://LineUpJS/./node_modules/d3-format/src/identity.js","webpack://LineUpJS/./node_modules/d3-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatGroup.js","webpack://LineUpJS/./node_modules/d3-format/src/formatNumerals.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionFixed.js","webpack://LineUpJS/./node_modules/d3-array/src/ascending.js","webpack://LineUpJS/./node_modules/d3-array/src/bisector.js","webpack://LineUpJS/./node_modules/d3-array/src/bisect.js","webpack://LineUpJS/./node_modules/d3-array/src/cross.js","webpack://LineUpJS/./node_modules/d3-array/src/array.js","webpack://LineUpJS/./node_modules/d3-array/src/ticks.js","webpack://LineUpJS/./node_modules/d3-scale/src/init.js","webpack://LineUpJS/./node_modules/d3-collection/src/map.js","webpack://LineUpJS/./node_modules/d3-collection/src/set.js","webpack://LineUpJS/./node_modules/d3-scale/src/array.js","webpack://LineUpJS/./node_modules/d3-scale/src/constant.js","webpack://LineUpJS/./node_modules/d3-scale/src/number.js","webpack://LineUpJS/./node_modules/d3-scale/src/continuous.js","webpack://LineUpJS/./node_modules/d3-scale/src/tickFormat.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionPrefix.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionRound.js","webpack://LineUpJS/./node_modules/d3-scale/src/linear.js","webpack://LineUpJS/./node_modules/d3-scale/src/nice.js","webpack://LineUpJS/./node_modules/d3-scale/src/log.js","webpack://LineUpJS/./node_modules/d3-scale/src/pow.js","webpack://LineUpJS/./node_modules/d3-time/src/interval.js","webpack://LineUpJS/./node_modules/d3-time/src/millisecond.js","webpack://LineUpJS/./node_modules/d3-time/src/duration.js","webpack://LineUpJS/./node_modules/d3-time/src/second.js","webpack://LineUpJS/./node_modules/d3-time/src/minute.js","webpack://LineUpJS/./node_modules/d3-time/src/hour.js","webpack://LineUpJS/./node_modules/d3-time/src/day.js","webpack://LineUpJS/./node_modules/d3-time/src/week.js","webpack://LineUpJS/./node_modules/d3-time/src/month.js","webpack://LineUpJS/./node_modules/d3-time/src/year.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMinute.js","webpack://LineUpJS/./node_modules/d3-time/src/utcHour.js","webpack://LineUpJS/./node_modules/d3-time/src/utcDay.js","webpack://LineUpJS/./node_modules/d3-time/src/utcWeek.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMonth.js","webpack://LineUpJS/./node_modules/d3-time/src/utcYear.js","webpack://LineUpJS/./node_modules/d3-time-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-time-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/d3-time-format/src/isoFormat.js","webpack://LineUpJS/./node_modules/d3-time-format/src/isoParse.js","webpack://LineUpJS/./src/model/MappingFunction.ts","webpack://LineUpJS/./src/model/internalNumber.ts","webpack://LineUpJS/./src/model/NumberColumn.ts","webpack://LineUpJS/./src/model/BoxPlotColumn.ts","webpack://LineUpJS/./src/model/MapColumn.ts","webpack://LineUpJS/./src/model/CategoricalMapColumn.ts","webpack://LineUpJS/./src/model/CategoricalsColumn.ts","webpack://LineUpJS/./src/model/internalDate.ts","webpack://LineUpJS/./src/model/DateColumn.ts","webpack://LineUpJS/./src/model/DatesColumn.ts","webpack://LineUpJS/./src/model/DatesMapColumn.ts","webpack://LineUpJS/./src/model/GroupColumn.ts","webpack://LineUpJS/./src/model/HierarchyColumn.ts","webpack://LineUpJS/./src/model/ColorMappingFunction.ts","webpack://LineUpJS/./src/model/ImpositionCompositeColumn.ts","webpack://LineUpJS/./src/model/NumbersColumn.ts","webpack://LineUpJS/./src/model/ImpositionBoxPlotColumn.ts","webpack://LineUpJS/./src/model/ImpositionCompositesColumn.ts","webpack://LineUpJS/./src/model/CompositeNumberColumn.ts","webpack://LineUpJS/./src/model/ReduceColumn.ts","webpack://LineUpJS/./src/model/StackColumn.ts","webpack://LineUpJS/./src/model/MultiLevelCompositeColumn.ts","webpack://LineUpJS/./src/model/NestedColumn.ts","webpack://LineUpJS/./src/model/NumberMapColumn.ts","webpack://LineUpJS/./src/model/OrdinalColumn.ts","webpack://LineUpJS/./src/model/ScriptColumn.ts","webpack://LineUpJS/./src/model/SetColumn.ts","webpack://LineUpJS/./src/model/StringMapColumn.ts","webpack://LineUpJS/./src/model/StringsColumn.ts","webpack://LineUpJS/./src/model/LinkColumn.ts","webpack://LineUpJS/./src/model/LinkMapColumn.ts","webpack://LineUpJS/./src/model/LinksColumn.ts","webpack://LineUpJS/./node_modules/lineupengine/src/abortAble.js","webpack://LineUpJS/./src/provider/interfaces.ts","webpack://LineUpJS/./src/internal/accessor.ts","webpack://LineUpJS/./src/provider/utils.ts","webpack://LineUpJS/./src/provider/ADataProvider.ts","webpack://LineUpJS/./src/model/models.ts","webpack://LineUpJS/./src/provider/ACommonDataProvider.ts","webpack://LineUpJS/./src/provider/sort.ts","webpack://LineUpJS/./src/internal/scheduler.ts","webpack://LineUpJS/./src/provider/tasks.ts","webpack://LineUpJS/./src/provider/DirectRenderTasks.ts","webpack://LineUpJS/./src/model/IArrayColumn.ts","webpack://LineUpJS/./src/model/ICategoricalColumn.ts","webpack://LineUpJS/./src/model/IDateColumn.ts","webpack://LineUpJS/./src/provider/ScheduledTasks.ts","webpack://LineUpJS/./src/renderer/interfaces.ts","webpack://LineUpJS/./src/provider/LocalDataProvider.ts","webpack://LineUpJS/./src/constants.ts","webpack://LineUpJS/./src/styles/index.ts","webpack://LineUpJS/./src/renderer/utils.ts","webpack://LineUpJS/./src/renderer/ActionRenderer.ts","webpack://LineUpJS/./src/provider/internal.ts","webpack://LineUpJS/./src/renderer/AggregateGroupRenderer.ts","webpack://LineUpJS/./src/ui/missing.ts","webpack://LineUpJS/./src/renderer/missing.ts","webpack://LineUpJS/./src/renderer/StringCellRenderer.ts","webpack://LineUpJS/./src/renderer/AnnotationRenderer.ts","webpack://LineUpJS/./src/renderer/impose.ts","webpack://LineUpJS/./src/renderer/BarCellRenderer.ts","webpack://LineUpJS/./src/renderer/DefaultCellRenderer.ts","webpack://LineUpJS/./src/renderer/BooleanCellRenderer.ts","webpack://LineUpJS/./src/renderer/BoxplotCellRenderer.ts","webpack://LineUpJS/./src/renderer/BrightnessCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalHeatmapCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalStackedDistributionlCellRenderer.ts","webpack://LineUpJS/./src/renderer/CircleCellRenderer.ts","webpack://LineUpJS/./src/renderer/DotCellRenderer.ts","webpack://LineUpJS/./src/renderer/GroupCellRenderer.ts","webpack://LineUpJS/./src/renderer/ANumbersCellRenderer.ts","webpack://LineUpJS/./node_modules/popper.js/dist/esm/popper.js","webpack://LineUpJS/./src/renderer/HeatmapCellRenderer.ts","webpack://LineUpJS/./src/internal/merge.ts","webpack://LineUpJS/./src/ui/dialogs/ADialog.ts","webpack://LineUpJS/./src/ui/dialogs/APopup.ts","webpack://LineUpJS/./src/ui/dialogs/InputNumberDialog.ts","webpack://LineUpJS/./src/internal/drag.ts","webpack://LineUpJS/./src/renderer/histogram.ts","webpack://LineUpJS/./src/renderer/HistogramCellRenderer.ts","webpack://LineUpJS/./src/renderer/ImageCellRenderer.ts","webpack://LineUpJS/./src/renderer/AAggregatedGroupRenderer.ts","webpack://LineUpJS/./src/renderer/MultiLevelCellRenderer.ts","webpack://LineUpJS/./src/renderer/InterleavingCellRenderer.ts","webpack://LineUpJS/./src/renderer/LinkCellRenderer.ts","webpack://LineUpJS/./src/renderer/TableCellRenderer.ts","webpack://LineUpJS/./src/renderer/LinkMapCellRenderer.ts","webpack://LineUpJS/./src/renderer/LoadingCellRenderer.ts","webpack://LineUpJS/./src/renderer/MapBarCellRenderer.ts","webpack://LineUpJS/./src/renderer/RankCellRenderer.ts","webpack://LineUpJS/./src/renderer/SelectionRenderer.ts","webpack://LineUpJS/./src/renderer/SetCellRenderer.ts","webpack://LineUpJS/./src/renderer/SparklineCellRenderer.ts","webpack://LineUpJS/./src/renderer/UpSetCellRenderer.ts","webpack://LineUpJS/./src/renderer/VerticalBarCellRenderer.ts","webpack://LineUpJS/./src/renderer/DateCellRenderer.ts","webpack://LineUpJS/./src/ui/dialogs/InputDateDialog.ts","webpack://LineUpJS/./src/renderer/DateHistogramCellRenderer.ts","webpack://LineUpJS/./src/renderer/renderers.ts","webpack://LineUpJS/./src/ui/dialogs/BooleanFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CategoricalColorMappingDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CategoricalFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CategoricalMappingFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ChangeRendererDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ColorMappingDialog.ts","webpack://LineUpJS/./src/internal/dnd.ts","webpack://LineUpJS/./src/ui/dialogs/MoreColumnOptionsDialog.ts","webpack://LineUpJS/./src/ui/header.ts","webpack://LineUpJS/./src/ui/dialogs/CompositeChildrenDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CutOffHierarchyDialog.ts","webpack://LineUpJS/./src/ui/dialogs/DateFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/EditPatternDialog.ts","webpack://LineUpJS/./src/ui/dialogs/GroupDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MappingLineDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MappingDialog.ts","webpack://LineUpJS/./src/ui/dialogs/NumberFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/utils.ts","webpack://LineUpJS/./src/ui/dialogs/ReduceDialog.ts","webpack://LineUpJS/./src/ui/dialogs/RenameDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ScriptEditDialog.ts","webpack://LineUpJS/./src/ui/dialogs/SearchDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ShowTopNDialog.ts","webpack://LineUpJS/./src/ui/dialogs/SortDialog.ts","webpack://LineUpJS/./src/ui/dialogs/StringFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/WeightsEditDialog.ts","webpack://LineUpJS/./src/ui/toolbar.ts","webpack://LineUpJS/./src/ui/dialogs/groupNumber.ts","webpack://LineUpJS/./src/ui/dialogs/groupString.ts","webpack://LineUpJS/./src/ui/dialogs/groupDate.ts","webpack://LineUpJS/./src/config.ts","webpack://LineUpJS/./src/browser.ts","webpack://LineUpJS/./src/ui/dialogs/DialogManager.ts","webpack://LineUpJS/./node_modules/lineupengine/src/animation/index.js","webpack://LineUpJS/./src/ui/ALineUp.ts","webpack://LineUpJS/./node_modules/lineupengine/src/animation/KeyFinder.js","webpack://LineUpJS/./node_modules/lineupengine/src/internal/scroll.js","webpack://LineUpJS/./node_modules/lineupengine/src/internal/index.js","webpack://LineUpJS/./node_modules/lineupengine/src/logic.js","webpack://LineUpJS/./node_modules/lineupengine/src/mixin/IMixin.js","webpack://LineUpJS/./node_modules/lineupengine/src/styles/index.js","webpack://LineUpJS/./node_modules/lineupengine/src/ARowRenderer.js","webpack://LineUpJS/./node_modules/lineupengine/src/style/StyleManager.js","webpack://LineUpJS/./node_modules/lineupengine/src/style/GridStyleManager.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/MultiTableRowRenderer.js","webpack://LineUpJS/./node_modules/lineupengine/src/mixin/PrefetchMixin.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/internal/ACellAdapter.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/ACellTableSection.js","webpack://LineUpJS/./src/ui/animation.ts","webpack://LineUpJS/./src/ui/RenderColumn.ts","webpack://LineUpJS/./src/ui/MultiLevelRenderColumn.ts","webpack://LineUpJS/./src/ui/interfaces.ts","webpack://LineUpJS/./src/ui/SelectionManager.ts","webpack://LineUpJS/./src/ui/EngineRanking.ts","webpack://LineUpJS/./src/ui/SlopeGraph.ts","webpack://LineUpJS/./src/ui/EngineRenderer.ts","webpack://LineUpJS/./src/ui/domElementCache.ts","webpack://LineUpJS/./src/ui/dialogs/ChooseRankingDialog.ts","webpack://LineUpJS/./src/ui/panel/SearchBox.ts","webpack://LineUpJS/./src/ui/dialogs/RenameRankingDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MoreRankingOptionsDialog.ts","webpack://LineUpJS/./src/ui/dialogs/AddonDialog.ts","webpack://LineUpJS/./src/ui/panel/Hierarchy.ts","webpack://LineUpJS/./src/ui/panel/SidePanelEntryVis.ts","webpack://LineUpJS/./src/ui/panel/SidePanelRanking.ts","webpack://LineUpJS/./src/ui/panel/SidePanel.ts","webpack://LineUpJS/./src/ui/LineUp.ts","webpack://LineUpJS/./src/ui/taggle/rules.ts","webpack://LineUpJS/./src/ui/taggle/TaggleRenderer.ts","webpack://LineUpJS/./src/ui/taggle/Taggle.ts","webpack://LineUpJS/./src/builder/column/ColumnBuilder.ts","webpack://LineUpJS/./src/builder/LineUpBuilder.ts","webpack://LineUpJS/./src/builder/RankingBuilder.ts","webpack://LineUpJS/./src/builder/column/CategoricalColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/NumberColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/StringColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/DateColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/HierarchyColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/ActionsColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/BooleanColumnBuilder.ts","webpack://LineUpJS/./src/builder/DataBuilder.ts","webpack://LineUpJS/./src/builder/adapter/column.ts","webpack://LineUpJS/./src/builder/adapter/ranking.ts","webpack://LineUpJS/./src/builder/adapter/utils.ts","webpack://LineUpJS/./src/builder/adapter/lineup.ts","webpack://LineUpJS/./src/builder/adapter/builderAdapter.ts","webpack://LineUpJS/./src/model/index.ts","webpack://LineUpJS/./src/provider/RemoteDataProvider.ts","webpack://LineUpJS/./src/renderer/index.ts","webpack://LineUpJS/./src/index.ts","webpack://LineUpJS/./src/bundle.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","Array","keyList","keys","hasProp","equal","a","b","length","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","FUNC_ERROR_TEXT","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeGlobal","global","freeSelf","self","Function","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","IE_PROTO","funcToString","objectToString","reIsNative","replace","splice","Map","getNative","nativeCreate","symbolProto","undefined","symbolToString","Hash","entries","index","this","clear","entry","set","ListCache","MapCache","assocIndexOf","array","other","baseGet","path","type","isSymbol","test","isKey","stringToPath","toKey","baseIsNative","isObject","func","tag","isFunction","result","e","isHostObject","toSource","getMapData","map","data","__data__","getValue","has","pop","push","hash","string","memoize","baseToString","match","number","quote","resolver","TypeError","memoized","args","arguments","apply","cache","Cache","isObjectLike","defaultValue","BrowserInfo","version","os","NodeInfo","process","platform","BotInfo","bot","REQUIRED_VERSION_PARTS","userAgentRules","operatingSystemRules","parseUserAgent","ua","matchedRule","reduce","matched","_a","browser","regex","uaMatch","versionParts","split","slice","concat","count","output","ii","createVersionParts","join","detectOS","getNodeVersion","detect","navigator","userAgent","Reflect","exporter","makeExporter","target","previous","configurable","writable","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","getPrototypeOf","usePolyfill","env","_Map","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","next","done","throw","error","return","_cacheKey","_cacheIndex","_find","delete","size","getKey","getEntry","insert","indexOf","_","CreateMapPolyfill","_Set","Set","_map","add","Metadata","WeakMap","UUID_SIZE","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","Uint8Array","crypto","getRandomValues","msCrypto","GenRandomBytes","offset","byte","toLowerCase","CreateWeakMapPolyfill","GetOrCreateMetadataMap","O","P","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasOwnMetadata","MetadataKey","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryOwnMetadataKeys","keysObj","obj","method","GetMethod","IsCallable","IsObject","GetIterator","k","IteratorStep","nextValue","IteratorClose","Type","x","IsNull","ToPrimitive","input","PreferredType","hint","exoticToPrim","toString_1","valueOf","toString_2","OrdinaryToPrimitive","ToPropertyKey","argument","ToString","IsArray","IsConstructor","V","f","OrdinaryGetPrototypeOf","proto","prototypeProto","constructor","__","decorators","propertyKey","attributes","decorator","decorated","DecorateConstructor","descriptor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","OrdinaryHasMetadata","parent","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","_i","ownKeys_1","hasKey","parentKeys_1","extendStatics","setPrototypeOf","__extends","__assign","assign","__decorate","desc","getOwnPropertyDescriptor","decorate","isSeqEmpty","seq","every","isIndicesAble","it","Uint16Array","Uint32Array","Float32Array","Int8Array","Int16Array","Int32Array","Float64Array","LazyFilter","filters","_length","forEach","filter","callback","interable_LazyMap1","outer","i_1","v_1","valid","v","_b","_c","_this","some","i_2","v_2","i_3","v_3","initial","acc","j","i_4","v_4","ALazyMap","mapV","acc_1","_super","LazyMap1","map12","interable_LazyMap2","LazyMap2","map23","interable_LazyMap3","LazyMap3","map34","LazySeq","iterable","_arr","from","arr","acc_2","lazySeq","ConcatSequence","seqs","shift","MIN_WORKER_THREADS","MAX_WORKER_THREADS","max","hardwareConcurrency","WorkerTaskScheduler","blob","workers","cleanUpWorkerTimer","workerTaskCounter","cleanUpWorker","toFree","findIndex","tasks","worker","terminate","finshedTask","w","Worker","refs","checkOutWorker","clearTimeout","emptyWorker","find","setTimeout","pushStats","refData","refIndices","indices","Promise","resolve","receiver","msg","removeEventListener","stats","addEventListener","postMessage","transferAbles","toResult","setRef","ref","broadCast","deleteRef","startsWith","deleteRefs","getNumberOfBins","ceil","log","LN2","math_min","min","Number","POSITIVE_INFINITY","values_1","math_max","NEGATIVE_INFINITY","values_2","extent","values_3","math_empty","fill","quantile","NaN","floor","math_median","sort","pushAll","vs","boxplotBuilder","fixedLength","sum","missing","isNaN","pushAndSave","invalid","mean","whiskerHigh","whiskerLow","outlier","median","q1","q3","buildImpl","iqr","left","right","reversedOutliers","reverse","build","buildArr","normalizedStatsBuilder","numberOfBins","hist","x0","binWidth","x1","bin1","binN","low","high","center","toBin","maxBin","computeGranularity","histGranularity","getFullYear","minYear","maxYear","x0_1","getMonth","getDay","setDate","getDate","setMonth","pushDateHist","dateStatsBuilder","template","byDay","templateHist","h","categoricalStatsBuilder","categories","cat","math_round","precision","round","scale","pow","similar","delta","abs","isPromiseLike","then","createIndexArray","dataSize","toIndexArray","maxDataIndex","joinIndexArrays","groups","total","createLike","groups_1","g","math_asc","math_desc","sortComplex","comparators","c_1","asc","cLookup_1","lookup","c1_1","c1Lookup_1","c2_1","c2Lookup_1","l_1","fs_1","l_2","dateValueCache2Value","categoricalValueCache2Value","sortWorkerMain","wself","resolveRefs","msgHandlers","sortOrders","order","dateStats","categoricalStats","cats","numberStats","boxplotStats","evt","createWorkerBlob","fs","source","lastIndexOf","sources","Blob","URL","createObjectURL","equalArrays","ai","fixCSS","id","node","lastChild","removeChild","arrs","arrs_1","a_1","getSortLabel","String","noop","dispatch","Error","Dispatch","on","typename","types","T","trim","copy","that","src_dispatch","AEventDispatcher_suffix","suffix","prefix","ECompareValueType","AEventDispatcher","events","createEventList","listenerEvents","listeners","forwarder","fireImpl","primaryType","origin","listener","listenersChanged","Boolean","_type","_active","fire","context","forward","unforward","DEFAULT_COLOR","defaultGroup","color","othersGroup","interfaces_isGroup","item","group","isMultiLevelColumn","col","model_Column","Column","width","renderer","groupRenderer","summaryRenderer","visible","metadata","label","summary","description","fixed","frozen","assignNewId","idGenerator","fqid","fqpath","EVENT_WIDTH_CHANGED","EVENT_LABEL_CHANGED","EVENT_METADATA_CHANGED","EVENT_VISIBILITY_CHANGED","EVENT_SUMMARY_RENDERER_TYPE_CHANGED","EVENT_RENDERER_TYPE_CHANGED","EVENT_GROUP_RENDERER_TYPE_CHANGED","EVENT_DIRTY","EVENT_DIRTY_HEADER","EVENT_DIRTY_VALUES","EVENT_DIRTY_CACHES","getWidth","hide","setVisible","show","isVisible","getVisible","flatten","_levelsToGo","_padding","setWidth","setWidthImpl","setMetaData","bak","getMetaData","sortByMe","ascending","priority","isSortingAscByDefault","findMyRanker","sortBy","groupByMe","toggleGrouping","isGroupedBy","getGroupCriteria","toggleMySorting","toggleSorting","isSortedByMeImpl","ranker","criterias","isSortedByMe","getSortCriteria","groupSortByMe","groupSortBy","toggleMyGroupSorting","toggleGroupSorting","isGroupSortedByMe","getGroupSortCriteria","removeMe","remove","attach","detach","insertAfterMe","insertAfter","dump","toDescRef","getRenderer","getGroupRenderer","getSummaryRenderer","restore","_factory","rendererType","getLabel","row","_row","getExportValue","format","getColor","toCompareValue","_valueCache","toCompareValueType","UINT8","toCompareGroupValue","_rows","toCompareGroupValueType","STRING","isFiltered","clearFilter","setRenderer","setGroupRenderer","setSummaryRenderer","markDirty","FLAT_ALL_COLUMNS","internal_AEventDispatcher","supportType","for","category","SupportType","SortByDefault","clazz","hasMetadata","ESortMethod","EAdvancedSortMethod","Categories","featureLevel","categorical","date","composite","support","annotations_categories","Category","getSortType","categoryOf","annotations_toolbar","dialogAddons","isSupportType","getMetadata","categoryOfDesc","models","isMapAbleColumn","getMapping","isNumberColumn","getNumber","isBoxPlotColumn","getBoxPlotData","isNumbersColumn","getNumbers","model_ValueColumn","ValueColumn","accessor","loaded","lazyLoaded","EVENT_DATA_LOADED","isLoaded","getRaw","setLoaded","RENDERER_LOADING","model_CompositeColumn","CompositeColumn","_children","CompositeColumn_1","EVENT_FILTER_CHANGED","EVENT_ADD_COLUMN","EVENT_MOVE_COLUMN","EVENT_REMOVE_COLUMN","levelsToGo","padding","children","child","canJustAddNumbers","insertImpl","move","old","moveImpl","oldIndex","at","moveAfter","removeImpl","src_colors","specifier","colors","category10","Accent","Dark2","Pastel1","Pastel2","Set1","Set2","Set3","extend","definition","Color","reI","reN","reP","reHex3","reHex6","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_color","Rgb","parseInt","rgbn","rgba","hsla","rgbConvert","rgb","opacity","color_rgb","hex","Hsl","hsl","hslConvert","hsl2rgb","m1","m2","displayable","brighter","darker","deg2rad","PI","rad2deg","Xn","Yn","Zn","lab_t0","lab_t1","lab_t2","t3","labConvert","Lab","Hcl","cos","sin","z","rgb2lrgb","y","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","atan2","sqrt","hcl","A","B","C","D","E","ED","EB","BC_DA","cubehelix_cubehelix","Cubehelix","bl","cubehelixConvert","basis","t1","v0","v1","v2","v3","t2","cosh","sinh","constant","linear","color_hue","gamma","nogamma","exponential","src_rgb","rgbGamma","start","end","rgbSpline","spline","rgbBasis","reA","reB","cssNode","cssRoot","cssView","svgNode","src_value","am","bm","bs","bi","lastIndex","q","string_one","string_zero","setTime","nb","na","src_round","degrees","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","decompose","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","document","createElement","documentElement","defaultView","style","transform","getComputedStyle","appendChild","getPropertyValue","createElementNS","setAttribute","baseVal","consolidate","matrix","SQRT2","hsl_hsl","hue","hcl_hcl","src_cubehelix_cubehelix","cubehelixGamma","cubehelix","cubehelixLong","ramp","scheme","BrBG","PRGn","PiYG","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral","BuGn","BuPu","GnBu","OrRd","PuBuGn","PuBu","PuRd","RdPu","YlGnBu","YlGn","YlOrBr","YlOrRd","Blues","Greens","Greys","Purples","Reds","Oranges","sequential_multi_cubehelix","warm","cool","rainbow_c","rainbow","ts","viridis_ramp","range","viridis","magma","inferno","plasma","OrderedSet","list","addAll","console","assert","deleteAll","act","callbackfn","thisArg","integrateDefaults","defaults","typed","patternFunction","pattern","joinGroups","parents","gparents","unshift","subGroups","duplicateGroup","clone","isGroupParent","toGroupID","groupRoots","roots","internal_OrderedSet","groups_2","EDirtyReason","internal_colors","MAX_COLORS","colorPool","mapIndices","everyIndices","forEachIndices","chooseUIntByDataLength","dataLength","UINT32","UINT16","model_Ranking","Ranking","sortCriteria","groupColumns","groupSortCriteria","columns","dirtyOrder","reason","EVENT_DIRTY_ORDER","dirtyOrderSortDirty","SORT_CRITERIA_DIRTY","dirtyOrderGroupDirty","GROUP_CRITERIA_DIRTY","dirtyOrderGroupSortDirty","GROUP_SORT_CRITERIA_DIRTY","dirtyOrderFiltering","FILTER_CHANGED","index2pos","EVENT_GROUPS_CHANGED","EVENT_GROUP_CRITERIA_CHANGED","EVENT_GROUP_SORT_CRITERIA_CHANGED","EVENT_COLUMN_VISIBILITY_CHANGED","EVENT_SORT_CRITERIA_CHANGED","EVENT_ORDER_CHANGED","setLabel","setGroups","dirtyReason","oldGroups","unifyGroups","offsets","subarray","subs","gi","roots_1","getRank","dataIndex","getOrder","getOrderLength","getGroups","sortColumn","help","setGroupCriteria","restoreSortCriteria","dumped","setSortCriteria","setGroupSortCriteria","getPrimarySortCriteria","toggleSortingLogic","newSort","current","defaultAsc","newGroupings","hierarchyLogic","groupBy","equalCriteria","COLUMN_SORT_DIRTY","triggerResort","column","cols","groupColumn","COLUMN_GROUP_DIRTY","COLUMN_GROUP_SORT_DIRTY","triggerGroupResort","sortCriterias","bakMulti","FORWARD_COLUMN_EVENTS","oldValue","newValue","reference","findByPath","isSortCriteria","sortCriteriaChanged","isGroupSortCriteria","groupSortCriteriaChanged","newGrouping","isGroupColumn","removed","idOrFilter","r_1","flatColumns","clearFilters","debounce","timeToDelay","choose","tm","ctx","createRankDesc","EAggregationState","model_RankColumn","RankColumn","ranking","createAggregateDesc","model_AggregateGroupColumn","AggregateGroupColumn","AggregateGroupColumn_1","EVENT_AGGREGATE","isAggregated","setAggregated","EXPAND","COLLAPSE","createSelectionDesc","model_SelectionColumn","SelectionColumn","SelectionColumn_1","EVENT_SELECT","setValue","setImpl","setValues","rows","setterAll","setter","toggleValue","BINARY","isSelected","SELECTED_GROUP","NOT_SELECTED_GROUP","createActionDesc","actions","groupActions","model_ActionColumn","ActionColumn","compare","isMissingValue","isUnknown","EAlignment","EStringGroupCriteriaType","FIRST_IS_NAN","FIRST_IS_MISSING","missingGroup","fast_deep_equal","model_StringColumn","StringColumn","currentFilter","currentGroupCriteria","alignment","escape","StringColumn_1","EVENT_GROUPING_CHANGED","type_1","groupCriteria","filterMissing","FILTER_MISSING","type_2","ff","includes","getFilter","setFilter","was","groupValue","_group","valueCache","model_AnnotateColumn","AnnotateColumn","annotations","EVENT_VALUE_CHANGED","DEFAULT_CATEGORICAL_COLOR_FUNCTION","toJSON","eq","ReplacmentColorMappingFunction","restoreCategoricalColorMapping","toCategory","nextColor","COMPARE_CATEGORY_VALUE_TYPES","FLOAT_ASC","toGroupCompareCategoryValue","mostFrequent","topCat","topCount","findMostFrequent","getCategory","COMPARE_GROUP_CATEGORY_VALUE_TYPES","FLOAT","compareCategory","aNull","bNull","localeCompare","toCategories","isEmptyFilter","isEqualCategoricalFilter","al","arrayEquals","isCategoryIncluded","filterObj","model_CategoricalColumn","CategoricalColumn","colorMapping","CategoricalColumn_1","EVENT_COLOR_MAPPING_CHANGED","getCategories","getValues","getLabels","getMap","getMapLabel","getSet","iterCategory","categoricalColorMappingFunction","getColorMapping","setColorMapping","mapping","model_BooleanColumn","BooleanColumn","trueMarker","BooleanColumn_1","GROUP_TRUE","GROUP_FALSE","enabled","model_ArrayColumn","ArrayColumn","_dataLength","originalLabels","labels","_d","model_BooleansColumn","BooleansColumn","getColors","BooleansColumn_1","formatDecimal","toExponential","coefficient","src_exponent","re","formatSpecifier","FormatSpecifier","align","sign","symbol","zero","comma","prefixExponent","defaultLocale_locale","defaultLocale_format","defaultLocale_formatPrefix","formatTrim","out","i1","i0","formatRounded","exponent","formatTypes","%","toFixed","toPrecision","X","toUpperCase","src_identity","prefixes","locale","grouping","thousands","substring","currency","decimal","numerals","formatNumerals","percent","newFormat","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","charCodeAt","Infinity","formatPrefix","src_locale","src_ascending","bisector","lo","hi","mid","ascendingBisect","bisectRight","bisect","array_array","e10","e5","e2","ticks","stop","step","tickIncrement","isFinite","power","LN10","tickStep","step0","step1","initRange","domain","map_Map","map_map","each","empty","src_map","set_Set","set_set","src_array_array","src_array_map","array_slice","d3_scale_src_constant","d3_scale_src_number","continuous_unit","continuous_identity","normalize","clamper","bimap","interpolate","d0","d1","r0","r1","polymap","continuous_copy","clamp","unknown","transformer","untransform","piecewise","rescale","invert","rangeRound","u","continuous","src_tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","tickFormat","nice","linear_linear","interval","transformLog","transformExp","exp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","base","log10","log2","logp","powp","transformPow","transformSqrt","transformSquare","powish","interval_t0","interval_t1","newInterval","floori","offseti","field","millisecond_millisecond","durationMinute","durationWeek","second_second","getMilliseconds","getUTCSeconds","src_second","minute_minute","getSeconds","getMinutes","src_minute","hour_hour","getHours","src_hour","day_day","setHours","getTimezoneOffset","src_day","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","month_month","src_month","year_year","setFullYear","src_year","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","src_utcDay","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","src_utcYear","localDate","H","M","S","L","utcDate","UTC","newYear","src_defaultLocale_locale","timeFormat","timeParse","utcFormat","utcParse","pads","-","0","numberRe","percentRe","requoteRe","locale_pad","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","day","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","locale_formatYear","formatFullYear","formatZone","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","I","Y","utcFormats","parses","parseSpecifier","pad","charAt","newParse","newDate","week","formatLocale","defaultLocale_defaultLocale","toISOString","toScale","MappingFunction_isSame","fixDomain","ScaleMappingFunction","getRange","ScriptMappingFunction","code","value_min","value_max","value_range","value_domain","mi","ma","restoreMapping","mappingFunction","mappingFunctions","script","pow1.1","pow2","pow3","DEFAULT_FORMATTER","toCompareBoxPlotValue","getSortMethod","getBoxPlotNumber","getRawBoxPlotData","numberCompare","aMissing","bMissing","isEqualNumberFilter","isNumberIncluded","isDummyNumberFilter","restoreNumberFilter","model_NumberColumn","NumberColumn","numberFormat","currentGroupThresholds","groupSortMethod","original","colorMappingFunction","getNumberFormat","stratifyThreshholds","stratifyThresholds","NumberColumn_1","EVENT_MAPPING_CHANGED","EVENT_SORTMETHOD_CHANGED","raw","getRawValue","iterNumber","iterRawNumber","getRawNumber","sortMethod","getOriginalMapping","setMapping","getGroupThresholds","setGroupThresholds","threshold","treshholdIndex","setSortMethod","model_BoxPlotColumn","BoxPlotColumn","BoxPlotColumn_1","model_MapColumn","MapColumn","byKey","toKeyValue","model_CategoricalMapColumn","CategoricalMapColumn","CategoricalMapColumn_1","parseValue","getCategoryMap","model_CategoricalsColumn","CategoricalsColumn","CategoricalsColumn_1","shiftFilterDateDay","setMinutes","setSeconds","setMilliseconds","toDateGroup","grouper","granularity","centuryP","circular","century","decadeP","decade","year","chooseAggregatedDate","dates","trueMedian","EDateSort","model_DateColumn","DateColumn","currentGrouper","dateFormat","DateColumn_1","DEFAULT_DATE_FORMAT","dateParse","getFormatter","iterDate","DOUBLE_ASC","getDateGrouper","setDateGrouper","model_DatesColumn","DatesColumn","DatesColumn_1","getDates","av","DatesColumn_compute","EGroupSortMethod","model_DatesMapColumn","DatesMapColumn","DatesMapColumn_1","getDateMap","createGroupDesc","model_GroupColumn","GroupColumn","GroupColumn_1","COUNT","model_HierarchyColumn","HierarchyColumn","currentMaxDepth","currentLeaves","currentLeavesNameCache","currentLeavesPathCache","hierarchySeparator","hierarchy","initHierarchy","currentNode","computeLeaves","updateCaches","path_1","HierarchyColumn_1","EVENT_CUTOFF_CHANGED","maxDepth","cutOffNode","act_1","getCutOff","setCutOff","leaves","visit","depth","resolveInnerNodes","queue","isHierarchical","deriveHierarchy","ColorMappingFunction_SequentialColorFunction","SequentialColorFunction","FUNCTIONS","interpolateBlues","interpolateGreens","interpolateGreys","interpolateOranges","interpolatePurples","interpolateReds","interpolateCool","interpolateCubehelixDefault","interpolateWarm","interpolatePlasma","interpolateMagma","interpolateViridis","interpolateInferno","interpolateYlOrRd","interpolateYlOrBr","interpolateBuGn","interpolateBuPu","interpolateGnBu","interpolateOrRd","interpolatePuBuGn","interpolatePuBu","interpolatePuRd","interpolateRdPu","interpolateYlGnBu","interpolateYlGn","interpolateRainbow","ColorMappingFunction_DivergentColorFunction","DivergentColorFunction","interpolateBrBG","interpolatePRGn","interpolatePiYG","interpolatePuOr","interpolateRdBu","interpolateRdGy","interpolateRdYlBu","interpolateRdYlGn","interpolateSpectral","UnknownColorFunction","SolidColorFunction","QuantizedColorFunction","steps","perStep","ColorMappingFunction_quantize","ColorMappingFunction_CustomColorMappingFunction","CustomColorMappingFunction","DEFAULT_COLOR_FUNCTION","createImpositionDesc","model_ImpositionCompositeColumn","ImpositionCompositeColumn","wrapper","rest","ImpositionCompositeColumn_1","model_NumbersColumn","NumbersColumn","getRawNumbers","data_1","data_2","NumbersColumn_1","CENTER","createImpositionBoxPlotDesc","model_ImpositionBoxPlotColumn","ImpositionBoxPlotColumn","ImpositionBoxPlotColumn_1","createImpositionsDesc","model_ImpositionCompositesColumn","ImpositionCompositesColumn","ImpositionCompositesColumn_1","model_CompositeNumberColumn","CompositeNumberColumn","compute","createReduceDesc","model_ReduceColumn","ReduceColumn","selected","ReduceColumn_1","EVENT_REDUCE_CHANGED","getReduce","setReduce","createStackDesc","model_StackColumn","StackColumn","collapsed","adaptChange","adaptWidthChange","weights","getWeights","StackColumn_1","EVENT_COLLAPSE_CHANGED","EVENT_WEIGHTS_CHANGED","EVENT_MULTI_LEVEL_CHANGED","setCollapsed","getCollapsed","weight","full","oldWeight","factor","widths","guess","setWeights","COLLAPSED_RENDERER","model_MultiLevelCompositeColumn","MultiLevelCompositeColumn","MultiLevelCompositeColumn_1","createNestedDesc","model_NestedColumn","NestedColumn","model_NumberMapColumn","NumberMapColumn","NumberMapColumn_1","model_OrdinalColumn","OrdinalColumn","OrdinalColumn_1","DEFAULT_SCRIPT","createScriptDesc","ColumnWrapper","ScriptColumn_LazyColumnWrapper","LazyColumnWrapper","ColumnContext","allFactory","_all","byName","byID","byIndex","model_ScriptColumn","ScriptColumn","ScriptColumn_1","EVENT_SCRIPT_CHANGED","setScript","getScript","clean","raws","model_SetColumn","SetColumn","separator","SetColumn_1","getSortedSet","sv","cardinality","model_StringMapColumn","StringMapColumn","getMapValue","model_StringsColumn","StringsColumn","model_LinkColumn","LinkColumn","patternTemplates","setPattern","LinkColumn_1","EVENT_PATTERN_CHANGED","getPattern","getLink","href","transformValue","alt","model_LinkMapColumn","LinkMapColumn","getLinkMap","model_LinksColumn","LinksColumn","LinksColumn_1","getLinks","abortAble_isPromiseLike","ABORTED","thenFactory","loader","isAborted","abort","onfulfilled","_onrejected","loadedOrAborted","res","abortAble_abortAble","aborted","aborter","race","abortAbleAll","all","isAbortAble","abortAble","isAsyncUpdate","update","ready","SCHEMA_REF","isComplexAccessor","resolveValue","lodash_get_default","rowComplexGetter","rowGetter","rowGuessGetter","cleanCategories","isEmpty","deriveBaseType","options","warn","formats_1","datePattern","treatAsCategorical","categoricalThreshold","deriveType","primitive","cats_1","value_1","vi","first","mapAll","vii","sameLength","hasDifferentSizes","vi_1","p_1","deriveColumnDescriptions","config","math_range","existing","exclude","selectColumns","foundRow","toLabel","deriveColors","exportRanking","opts","newline","header","quoteChar","verboseColumnHeaders","rangeSelection","provider","rankingId","relIndex","ctrlKey","getRankings","selection","getSelection","nearest","distance","setSelection","toDirtyReason","UNKNOWN","SORT_CRITERIA_CHANGED","GROUP_CRITERIA_CHANGED","GROUP_SORT_CRITERIA_CHANGED","mergeDirtyOrderContext","currentReason","nextReason","combined","nextReason_1","provider_ADataProvider","ADataProvider","rankings","aggregations","columnTypes","colorMappingFunctionTypes","mappingFunctionTypes","singleSelection","showTopN","aggregationStrategy","aggregate","annotate","boolean","booleans","boxplot","categoricalMap","categoricals","dateMap","imposition","impositionBoxPlot","impositions","nested","numbers","numberMap","ordinal","rank","stack","stringMap","strings","link","linkMap","links","quantized","custom","colorMappingFunctions","typeFactory","createTypeFactory","fromDescRef","fixDesc","instantiateColumn","typeName","createColorMappingFunction","getTypeFactory","EVENT_DATA_CHANGED","EVENT_BUSY","EVENT_SHOWTOPN_CHANGED","EVENT_ADD_RANKING","EVENT_REMOVE_RANKING","EVENT_SELECTION_CHANGED","EVENT_ADD_DESC","EVENT_CLEAR_DESC","EVENT_JUMP_TO_NEAREST","EVENT_GROUP_AGGREGATION_CHANGED","pushRanking","cloneRanking","insertRanking","fireBusy","busy","takeSnapshot","hasString","hasColumn","toClone","FORWARD_RANKING_EVENTS","triggerReorder","paths","removeDuplicates","level","real","unifyParents","initAggregateState","removeRanking","cleanUpRanking","clearRankings","getFirstRanking","getLastRanking","ensureOneRanking","destroy","_ranking","nextId","select","deselect","selectAll","deselectAll","getAggregationState","setAggregationState","cleanDesc","dumpColumn","restoreColumn","$schema","descRef","restoreRanking","object2Map","deriveDefault","addSupportType","getColumns","getTopNAggregated","EXPAND_TOP_N","setTopNAggregated","unaggregateParents","getAggregationStrategy","aggregateAllOf","aggregateAll","getShowTopN","setShowTopN","jumpToNearest","selectAllOf","clearSelection","toggleSelection","additional","selectedRows","view","exportTable","injectAccessor","provider_ACommonDataProvider","ACommonDataProvider","rankingIndex","nextRankingId","pushDesc","clearColumns","findDesc","missingBinary","missingUInt16","missingUInt32","missingInt8","missingInt16","missingInt32","missingFloat","missingFloatAsc","missingString","toCompareLookUp","rawLength","INT8","INT16","INT32","DOUBLE","createSetter","missingCount","sort_CompareLookup","CompareLookup","isSorting","valueCaches","criteria","chooseMissingByLength","ri","pushValues","free","ANOTHER_ROUND","oneShotIterator","calc","scheduler_thenFactory","wrappee","onrejected","TaskScheduler","taskId","runTasks","deadline","task","didTimeout","timeRemaining","requestAnimationFrame","reSchedule","ww","requestIdleCallback","pushMulti","abortOrDummy","isAbortedOrDummy","abortAll","abort_1","clearIdleCallback","TaskNow","onfullfilled","taskNow","TaskLater","taskLater","tasksAll","tasks_MultiIndices","MultiIndices","_joined","tasks_ARenderTasks","ARenderTasks","valueCacheData","byOrder","byOrderAcc","builder","orders","currentChunkSize","chunkCounter","actOrder","builderForEach","numberStatsBuilder","key_1","dacc","vs_1","setValueCacheData","cache_1","vs_2","dateValueCacheBuilder","cache_2","vs_3","name2index","categoricalValueCacheBuilder","cache_3","dirtyColumn","sortDirect","lookups","DirectRenderTasks_DirectRenderTasks","DirectRenderTasks","setData","dirtyRanking","preCompute","preComputeData","preComputeCol","copyData2Summary","copyCache","fromPrefix","tkey","_singleCall","groupCompare","rg","rg_1","groupRows","_col","groupExampleRows","groupBoxPlotStats","summaryBoxPlotStatsD","groupNumberStats","summaryNumberStatsD","groupCategoricalStats","summaryCategoricalStatsD","groupDateStats","summaryDateStatsD","summaryBoxPlotStats","summaryNumberStats","summaryCategoricalStats","summaryDateStats","cached","dataNumberStats","dataBoxPlotStats","dataCategoricalStats","dataDateStats","creator","dontCache","isMapColumn","endsWith","isArrayColumn","isCategoricalLikeColumn","isSetColumn","isCategoricalColumn","isCategoricalsColumn","isCategory","isDateColumn","isDatesColumn","ERenderMode","ScheduledTasks_ScheduleRenderTasks","ScheduleRenderTasks","scheduler","checker","this_1","cols_1","ogroups","cols_3","ogroups_1","ogroups_2","_e","ogroups_3","multi","cols_2","chainCopy","chain","joined","canAbort","isValidCacheEntry","subTask","created","subTask_1","valueCacheKey","singleCall","indexArray","toTransfer","LocalDataProvider","_data","ooptions","filterGlobally","jumpToSearchResult","taskExecutor","mapToDataRow","_dataRows","toRows","reorderAll","getTotalNumberOfRows","getTaskExecutor","dataChanged","clearData","appendData","trackRanking","addKey","removeKey","removeCol","addCol","resolveFilter","noSorting","createSorter","needsFiltering","needsGrouping","needsSorting","groupOrder","pushGroup","groupKey","groupCaches","filterCaches","toGroup","fc","before","sortGroup","groupLookup","singleGroup","sortTask","groupSortTask","groupC","sortGroups","enforceSorting","groupIndices","reasons","needsGroupSorting","isSortedBy","isGroupedSortedBy","sortedGroups","viewRaw","viewRawRows","getRow","mappingSample","searchAndJump","search","DENSE_HISTOGRAM","MIN_LABEL_WIDTH","HOVER_DELAY_SHOW_DETAIL","styles","getStyle","COLUMN_PADDING","FILTERED_OPACITY","parseFloat","DASH","height","UPSET","inactive","DOT","BOX_PLOT","box","stroke","AGGREGATE","strokeWidth","levelOffset","levelWidth","SLOPEGRAPH_WIDTH","CANVAS_HEIGHT","CSS_PREFIX","ENGINE_CSS_PREFIX","RESIZE_SPACE","RESIZE_ANIMATION_DURATION","cssClass","engineCssClass","aria","text","utils_noop","noRenderer","setText","textContent","querySelectorAll","forEachChild","matchColumns","childElementCount","dataset","columnId","rendererId","idsAndRenderer","idAndRenderer","cnode","querySelector","asElement","classList","innerHTML","children_1","wideEnough","wideEnoughCat","adaptColorCache","adaptTextColorToBgColor","bgColor","adaptDynamicColorToBgColor","title","adapt","innerText","span","ownerDocument","uniqueId","idCounter","NUM_EXAMPLE_VALUES","exampleText","examples","multiLevelGridCSSClass","idPrefix","utils_colorOf","ActionRenderer","canRender","SUMMARY","className","icon","ni","onclick","event","preventDefault","stopPropagation","action","createGroup","createSummary","isAlwaysShowingGroupStrategy","strategy","toItemMeta","relativeIndex","topN","groupParents","meta","prev","prevMeta","groupEndLevel","topNGetter","last","isSummaryGroup","matchNodes","addTopN","doc","renderGroups","isRow","isLeafGroup","alwaysShowGroup","isSummary","hasTopN","hasTopNStrategy","lastParent","state","isLastGroup","toggle","isCollapsed","isFirst","isShowAll","childTopN","nextState","isDummyGroup","AggregateGroupRenderer","render","fillStyle","fillRect","filterMissingText","filterMissingMarkup","bakMissing","filterMissingNumberMarkup","findFilterMissing","getElementsByClassName","previousElementSibling","updateFilterMissingNumberMarkup","element","getElementsByTagName","disabled","lastElementChild","renderMissingValue","dashX","dashY","renderMissingDOM","renderMissingCanvas","StringCellRenderer","interactiveSummary","form","isRegex","checked","onchange","oninput","onsubmit","actCol","_context","interactive","StringCellRenderer_toString","AnnotationRenderer","firstElementChild","renderer_StringCellRenderer","impose_colorOf","imposer","valueHint","BarCellRenderer","renderValue","CELL","colWidth","bar","backgroundColor","DefaultCellRenderer_DefaultCellRenderer","DefaultCellRenderer","groupTitle","summaryTitle","_mode","BooleanCellRenderer","BOXPLOT","MAPPED_BOXPLOT","BoxplotCellRenderer","sortedByMe","renderDOMBoxPlot","topPadding","strokeStyle","beginPath","rect","bottomPos","middlePos","moveTo","lineTo","renderBoxPlot","isMissing","_interactive","mappedSummary","rawSummary","range_1","hasRange","computeLabel","whiskers","nextElementSibling","leftWhisker","rightWhisker","display","outliers","numOutliers","insertAdjacentElement","toHeatMapColor","valueColor","BrightnessCellRenderer","CategoricalCellRenderer","CategoricalCellRenderer_hist","filterUpdate","interactiveHist","staticSummary","showLabels","bins","gHist","inner","gCount","relY","background","inner_1","setCategoricalFilter","markFilter","bin","included","contained","parentElement","CategoricalHeatmapCellRenderer","createContext","cellDimension","mover","offsetX","getContext","canvas","clearRect","onmousemove","onmouseleave","maps","toMostFrequentCategoricals","templateRows","labels_1","CategoricalStackedDistributionlCellRenderer","stackedBar","CategoricalStackedDistributionlCellRenderer_interactiveSummary","CategoricalStackedDistributionlCellRenderer_staticSummary","selectedCol","gBins","flexGrow","total_1","CircleCellRenderer","DotCellRenderer","getCanvasRenderer","pi2","radius","save","globalAlpha","arc","getDOMRenderer","dots","tmp","top","formatter","seq1","seq2","concatSeq","GroupCellRenderer_isDummyGroup","GroupCellRenderer","_ctx","ANumbersCellRenderer_ANumbersCellRenderer","ANumbersCellRenderer","normalized","bbn_1","bbr_1","templateRow","HeatmapCellRenderer","_hist","isBrowser","longerTimeoutBrowsers","timeoutDuration","popper_i","popper_debounce","fn","called","scheduled","functionToCheck","getStyleComputedProperty","nodeType","css","getParentNode","nodeName","parentNode","host","getScrollParent","body","_getStyleComputedProp","overflow","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","getOffsetParent","noOffsetParent","offsetParent","getRoot","findCommonOffsetParent","element1","element2","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","createRange","setStart","setEnd","commonAncestorContainer","contains","element1root","getScroll","upperSide","html","scrollingElement","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","classCallCheck","instance","Constructor","createClass","defineProperties","props","protoProps","staticProps","_extends","getClientRect","bottom","getBoundingClientRect","scrollTop","scrollLeft","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","subtract","modifier","includeScroll","getFixedPositionOffsetParent","el","getBoundaries","popper","boundariesElement","boundaries","excludeScroll","relativeOffset","innerWidth","innerHeight","getViewportOffsetRectRelativeToArtbitraryNode","boundariesNode","isFixed","_getWindowSizes","isPaddingNumber","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","_ref","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","getOuterSizes","marginBottom","marginRight","getOppositePlacement","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","check","runModifiers","modifiers","ends","prop","cur","isModifierEnabled","modifierName","getSupportedPropertyName","upperProp","toCheck","getWindow","setupEventListeners","updateBound","passive","scrollElement","attachToScrollParents","scrollParents","isBody","eventsEnabled","disableEventListeners","cancelAnimationFrame","scheduleUpdate","isNumeric","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","isRequired","_requesting","requested","placements","validPlacements","clockwise","counter","BEHAVIORS","FLIP","CLOCKWISE","COUNTERCLOCKWISE","parseOffset","basePlacement","useHeight","fragments","frag","divider","splitRegex","ops","op","mergeWithPrevious","str","toValue","index2","Defaults","positionFixed","removeOnDestroy","onCreate","onUpdate","shiftvariation","_data$offsets","isVertical","side","shiftOffsets","preventOverflow","transformProp","popperStyles","primary","escapeWithReference","secondary","keepTogether","opSide","arrow","_data$offsets$arrow","arrowElement","len","sideCapitalized","altSide","arrowElementSize","popperMarginSide","popperBorderSide","sideValue","flip","flipped","originalPlacement","placementOpposite","flipOrder","behavior","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","subtractLength","bound","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","position","shouldRound","noRound","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","willChange","invertTop","invertLeft","x-placement","arrowStyles","applyStyle","removeAttribute","onLoad","modifierOptions","Popper","isDestroyed","isCreated","jquery","enableEventListeners","Utils","PopperUtils","TYPE_OBJECT","merge_merge","bKeys","bKeys_1","dialogContext","attachment","currentTarget","manager","dialogManager","dialogs_ADialog","ADialog","dialog","livePreview","popup","toggleDialog","cancelSubDialogs","autoClose","showLivePreviews","livePreviews","enableLivePreviews","submitter","submit","equals","appendDialogButtons","insertAdjacentHTML","open","removeLike","closest","auto","focus","reset","triggerSubmit","cancel","removeAboveLevel","checkValidity","findInput","cleanUp","triggerDialogClosed","dialogs_APopup","APopup","InputNumberDialog","ioptions","valueAsNumber","dragHandle","handle","container","onStart","onDrag","onEnd","minDelta","ueberElement","toContainerRelative","elem","clientLeft","handleShift","mouseMove","clientX","mouseUp","onmousedown","filteredColor","histogramTemplate","guessedBins","histogramUpdate","unfiltered","colorOf","nodes","matchBins","mappingHintTemplate","mappingHintUpdate","filteredHistTemplate","filterMin","filterMax","formatRaw","initFilter","minHint","maxHint","minValue","parseRaw","maxValue","minImpl","edit","shiftKey","ondblclick","maxImpl","button","px","unpercent","HistogramCellRenderer","getHistDOMRenderer","n_1","HistogramCellRenderer_staticSummary","updateFilter","fContext","createFilterContext","createFilterInfo","HistogramCellRenderer_interactiveSummary","dialogCtx","maxLevel","dialogs_InputNumberDialog","ImageCellRenderer","backgroundImage","src","image","Image","onload","AAggregatedGroupRenderer_AAggregatedGroupRenderer","AAggregatedGroupRenderer","single","aggregatedIndex","createData","stacked","GROUP","MultiLevelCellRenderer","toWait","missingWeight","ci","gridColumnStart","stackShift","col_1","cr","callbacks","sorted","medianIndex","InterleavingCellRenderer","rr","summaries","grouped","sample","dummyBin","groupedHist","LinkCellRenderer","TableCellRenderer","createFixed","example","createFixedGroup","groupByKey","LinkMapCellRenderer","arr_1","LoadingCellRenderer","MapBarCellRenderer","RankCellRenderer","fromTSpan","toTSpan","SelectionRenderer","unselected","unchecked","SetCellRenderer","createDOMContext","categories_1","posx","categories_2","SparklineCellRenderer_line","moveNext","SparklineCellRenderer","yPos","repeat","matchRows","UpSetCellRenderer","calculateSetPath","catindexes","line","hasTrueValues","VerticalBarCellRenderer","tooltipPrefix","one","xpos","DateCellRenderer","chosen","InputDateDialog","valueAsDate","DateHistogramCellRenderer","DateHistogramCellRenderer_getHistDOMRenderer","dummyDomain","DateHistogramCellRenderer_createFilterContext","DateHistogramCellRenderer_createFilterInfo","now","DateHistogramCellRenderer_interactiveSummary","DateHistogramCellRenderer_staticSummary","createDateFilter","applyFilter","summaryNode","rerender","dialogs_InputDateDialog","defaultCellRenderer","renderers_renderers","renderer_ActionRenderer","renderer_AggregateGroupRenderer","renderer_AnnotationRenderer","renderer_BooleanCellRenderer","renderer_BoxplotCellRenderer","brightness","renderer_BrightnessCellRenderer","catdistributionbar","renderer_CategoricalStackedDistributionlCellRenderer","renderer_CategoricalCellRenderer","circle","renderer_CircleCellRenderer","renderer_DateCellRenderer","default","dot","renderer_DotCellRenderer","renderer_GroupCellRenderer","heatmap","renderer_HeatmapCellRenderer","catheatmap","renderer_CategoricalHeatmapCellRenderer","histogram","renderer_HistogramCellRenderer","datehistogram","renderer_DateHistogramCellRenderer","renderer_ImageCellRenderer","interleaving","renderer_InterleavingCellRenderer","renderer_LinkCellRenderer","renderer_LinkMapCellRenderer","loading","renderer_LoadingCellRenderer","renderer_MultiLevelCellRenderer","renderer_BarCellRenderer","mapbars","renderer_MapBarCellRenderer","renderer_RankCellRenderer","renderer_SelectionRenderer","renderer_SetCellRenderer","sparkline","renderer_SparklineCellRenderer","renderer_TableCellRenderer","upset","renderer_UpSetCellRenderer","verticalbar","renderer_VerticalBarCellRenderer","BooleanFilterDialog","isTrue","isFalse","sets","schemeCategory10","schemeAccent","schemeDark2","schemePastel1","schemePastel2","schemeSet1","schemeSet2","schemeSet3","CategoricalColorMappingDialog","CategoricalFilterDialog","someMode","noFilter","CategoricalMappingFilterDialog","joint","items","ChangeRendererDialog","currentGroup","currentSummary","getPossibleRenderer","ColorMappingDialog","createTemplate","wrapped","refColor_1","has_1","renderColor_1","gradient","isCustom","applyColor","s0","s1","dm1","toColor","content","toggles","toggles_2","toggles_1","customs","updateColor","customs_1","updateSelectedColor","continuouos","continuouos2","quantized2","steps2","updateGradients","steppedGradient","di","stepSize","half","hasDnDType","typesToCheck","available","dataTransfer","dndTransferStorage","isEdgeDnD","updateDropEffect","dT","effectAllowed","copyDnD","dropEffect","dropAble","mimeTypes","onDrop","onDragOver","canDrop","effect","getData","mime","MoreColumnOptionsDialog","colId","addIcon","addIconDOM","getToolbar","isActionMode","createToolbarMenuItems","updateIconState","createHeader","dragAble","mergeDropAble","rearrangeAble","resizeable","extraPrefix","extra","createShortcutMenuItems","toggleToolbarIcons","dragAbleColumn","resolveDrop","MIMETYPE_PREFIX","alternative","JSON","pushChild","mergeImpl","mergeWith","numberish","draginfo","toInsertParent","rearrangeDropAble","sizeHelper","currentFooterTransformation","originalWidth","dragWidth","updateHeader","minWidth","sublabel","typeCat","updateMoreDialogIcons","groupedBy","active","actionCSSClass","showLabel","featureCategory","setHighlightColumn","onClick","willAutoHide","toolbar","shortcuts","hybrids","moreEntries","dialogs_MoreColumnOptionsDialog","defaultVisibleClientWidth","rotated","scrollWidth","toggleRotatedHeader","availableWidth","shortCuts","moreIcon","needMore","actions_1","onDragStart","draggable","payload","over","stringify","text/plain","CompositeChildrenDialog","substr","createChildren","CutOffHierarchyDialog","innerNodes","innerNodePaths","setCustomValidity","newNode","newNodeIndex","maxDepthText","DateFilterDialog","handler","EditPatternDialog","templates","GroupDialog","handlers","addons_1","getToolbarDialogAddons","addon","append","updateDisabled","disable","elems","sortOrder","MappingLineDialog_clamp","MappingLineDialog_MappingLineDialog","MappingLineDialog","adapter","unnormalizeRaw","normalizeRaw","MappingLineDialog_MappingLine","MappingLine","beforeDomain_1","beforeRange_1","shiftDomain_1","shiftRange_1","normalize_1","common","updated","openDialog","handled","destroyed","trigger","MappingDialog","mappingLines","mappingAdapter","updateLines","computeScale","rawDomain","scaleType","others","bb","textarea_1","copyMapping","createMappings","scaleType_1","selectedIndex","patchedDomain","getAttribute","NumberFilterDialog","createNumberFilter","sortMethods","methods","ReduceDialog","RenameDialog","ScriptEditDialog","SearchDialog","checkbox","ShowTopNDialog","SortDialog","SortDialog_sortOrder","StringFilterDialog","toInput","WeightsEditDialog","inputs","updateBar","distributeWeights","missingIndices","sum_1","missingIndices_1","missingIndices_2","validWeights","inputs_1","buttons","inputs_2","reportValidity","ui","uiDialog","dialogClass","extraArgs","uiSortMethod","toolbar_sort","isAscByDefault","dialogs_SortDialog","sortGroupBy","rename","dialogs_RenameDialog","vis","dialogs_ChangeRendererDialog","_evt","removeAll","toolbar_group","dialogs_GroupDialog","toggleCompressExpand","mcol","compress","expand","dialogs_ShowTopNDialog","toolbarDialogAddons","sortNumber","sortNumbers","sortBoxPlot","sortDates","groupNumber","isThreshold","thresholds","groupString","valueRadioButton","startsWithRadioButton","regexRadioButton","showOrHideTextarea","newType","groupDate","toolbarActions","dialogs_SearchDialog","filterNumber","dialogs_NumberFilterDialog","filterDate","dialogs_DateFilterDialog","filterString","dialogs_StringFilterDialog","filterCategorical","dialogs_CategoricalFilterDialog","filterOrdinal","dialogs_CategoricalMappingFilterDialog","filterBoolean","dialogs_BooleanFilterDialog","colorMapped","dialogs_ColorMappingDialog","colorMappedCategorical","dialogs_CategoricalColorMappingDialog","dialogs_ScriptEditDialog","dialogs_ReduceDialog","cutoff","dialogs_CutOffHierarchyDialog","editMapping","dialogs_MappingDialog","editPattern","dialogs_EditPatternDialog","editWeights","dialogs_WeightsEditDialog","compositeContained","dialogs_CompositeChildrenDialog","splitCombined","invertSelection","ss","sortActions","getFullToolbar","caches","toolbarIcon","getOwnMetadata","m_1","getAllToolbarActions","possible","resolveToolbarActions","flags","advancedModelFeatures","advancedRankingFeatures","advancedUIFeatures","cacheKey","cacheAddon","toolbarAddons","m_2","getAllToolbarDialogAddons","resolveToolbarDialogAddons","defaultOptions","renderers","labelRotation","summaryHeader","animated","expandLineOnHover","sidePanel","sidePanelCollapsed","hierarchyIndicator","defaultSlopeGraphMode","overviewMode","groupSort","onDialogBackgroundClick","rowHeight","groupHeight","groupPadding","rowPadding","levelOfDetail","customRowUpdate","dynamicHeight","disableFrozenColumns","ignoreUnsupportedBrowser","SUPPORTED_FIREFOX_VERSION","SUPPORTED_CHROME_VERSION","SUPPORTED_EDGE_VERSION","getUnsupportedBrowserError","info","detect_browser","fVersion","EAnimationMode","dialogs_DialogManager","DialogManager","escKeyListener","which","removeLast","openDialogs","EVENT_DIALOG_CLOSED","EVENT_DIALOG_OPENED","setHighlight","mask","clipPath","webkitClipPath","clearHighlight","takeDown","setUp","ALineUp_ALineUp","ALineUp","ignoreIncompatibleBrowser","highlightListeners","isBrowserSupported","EVENT_HIGHLIGHT_CHANGED","setDataProvider","dataIndices","enableHighlightListening","_enable","NO_CHANGE_DELTA","defaultPhases","delay","nodeY","animation","SHOW","HIDE","UPDATE_REMOVE","animation_KeyFinder","KeyFinder","lastFilled","key2index","exceptions","findValidStart","posByKey","pos","fillCacheTillKey","defaultRowHeight","fillCache","heightOf","exceptionsLookup","exceptionHeightOf","returnDefault","numberOfRows","positions","defaultMode","ScrollHandler","sync","timer","handleAnimationImpl","handleAnimation","handleTimeouts","asInfo","isWaiting","addScroll","scroller","__le_scroller__","isScrollEventWaiting","internal_clear","EScrollResult","RowHeightException","nonUniformContext","rowHeights","mostFrequentValue","totalHeight","between","logic_range","heightExceptions","firstRowPos","endPos","y2","offset2","indexShift","offsetShift","isGuess","shifted2","lastPos","heightExceptions_1","firstException","lastException","updateFrozen","oldLast","added","PREFIX","styles_cssClass","CSS_CLASS_LOADING","CSS_CLASS_FROZEN","CSS_CLASS_HIDDEN","CSS_CLASS_MULTI","CSS_CLASS_EVEN","CSS_CLASS_SHIFTED","CSS_CLASS_SCROLLBAR_TESTER","CSS_CLASS_HEADER","CSS_CLASS_BODY","CSS_CLASS_FOOTER","CSS_CLASS_THEAD","CSS_CLASS_TBODY","CSS_CLASS_TR","CSS_CLASS_TH","CSS_CLASS_TD","CSS_CLASS_SCROLLING","CSS_CLASS_ROW_ANIMATION","isLoadingCell","src_ARowRenderer","ARowRenderer","pool","loadingPool","forcedFirst","forcedLast","visibleFirstRowPos","scrollListener","lastScrollInfo","abortAnimation","async","minScrollDelta","mixins","scrollingHint","batchSize","striped","viewportOversize","createAdapter","mixinClass","fragment","createDocumentFragment","addMixin","addAtBeginning","addAtBottom","removeFromBeginning","removeFromBottom","updateOffset","bodyScroller","scrollOffset","scrollTotal","sizer","tagName","insertBefore","firstChild","init","isGoingDown","onScrolledVertically","recreate","updateRow","createRow","selectProxy","proxy","recycle","replaceChild","ex","perform","torecycle","forEachRow","inplace","to","fromBeginning","nextSibling","previousSibling","updateSizer","setTransform","bodySizer","recreateAnimated","recreatePure","clearPool","previousKey","currentKey","rows_1","UPDATE","UPDATE_CREATE","nodeYCurrentHeight","nextPos","prevHeight","animate","phases","previousFinder","currentFinder","currentTimer","actPhase","executePhase","phase","anim","run","offsetTop","dummyAnimation","previousHeight","currentHeight","curr","revalidate","shiftTop","scrollResult","onScrolledImpl","onScrolled","shiftLast","currentDelta","shiftFirst","currentFirstRow","NONE","toadd","SOME","toaddBottom","ALL","SOME_TOP","SOME_BOTTOM","manipulate","toRecycle","toAdd","toRecycle_1","anyelem","__transform__","assignStyles","plain","hyphen","setProperty","tableIds","tableId","thead","tbody","tr","th","td","tableCSSClasses","ids","style_GridStyleManager","GridStyleManager","cssClasses","headerScroller","measureScrollbar","updateRule","borderRight","frozenShift","selectors","updateColumns","deleteRule","rules","ruleNames","cssSelectors","thStyles","tdStyles","StyleManager","testVerifyTimeout","createTextNode","verifySheet","sheet","cssRules","selectorText","rule","insertRule","cssRule","getSheetRule","addRule","stored","table_MultiTableRowRenderer","MultiTableRowRenderer","htmlId","sections","columnPadding","main","isGoingRight","onScrolledHorizontally","scrollEnd","headerFooter","bodyFooter","maxHeight","pushTable","extras","pushSeparator","section","widthChanged","mixin_PrefetchMixin","PrefetchMixin","prefetchTimeout","cleanupTimeout","prefetchRows","cleanUpRows","prefetchDown","nextLast","prefetchUp","syncFrozen","triggerPrefetch","prefetchDownPossible","prefetchUpPossible","isLast","cleanUpTop","newFirst","cleanUpBottom","newLast","triggerCleanUp","internal_ACellAdapter","ACellAdapter","mixinClasses","cellPool","visibleColumns","visibleFirstColumnPos","horizontallyShifted","columnAdapter","createColumnAdapter","columnMixins","columnFragment","leftShift","addColumnMixin","addColumnAtStart","addColumnAtEnd","removeColumnFromStart","removeColumnFromEnd","updateColumnOffset","onScrolledHorizontallyImpl","removeCellFromStart","recycleCell","removeCellFromEnd","removeFrozenCells","columnIndices","columnIndices_1","columnIndex","removeFrozenColumns","removeAllColumns","includingFrozen","removeAllCells","frozen_1","frozen_2","selectProxyCell","columnObj","pooled","updateCell","createCell","updateShiftedState","handleCellReady","selectCell","rowIndex","addCellAtStart","cell","insertFrozenCells","columnIndices_2","insertFrozenColumns","addCellAtEnd","verifyRows","verifyRow","updateHeaders","fragment_1","document_1","ids_1","firstColumnPos","changed","id_1","mergeColumns","updateImpl","cell_1","byId","updateShiftedStates","shifted","headers","bodies","headers_1","bodies_1","headers_2","bodies_2","shiftingChanged","colObjs","ACellTableSection_ACellTableSection","ACellTableSection","LocalCell","hidden","onVisibilityChanged","updateShifts","_left","_visible","wasHidden","updateColumnWidths","oldLeft","toGroupLookup","item2groupIndex","group2firstItemIndex","lineupAnimation","previousData","currentData","prevHelper","currHelper","currentRowIndex","referenceIndex","appearPosition","_previousFinder","previousRowIndex","removePosition","RenderColumn","singleRenderer","singleTemplate","cloneNode","singleId","groupTemplate","groupId","summaryTemplate","summaryId","hasSummaryLine","isGroup","oldRenderer","currentRenderer","oldGroup","getGroup","chainAbortAble","renderCell","mapper","mapped","EMode","MultiLevelRenderColumn","mc","updateNested","matchChildren","cc","updateWidthRule","gridTemplateColumns","sub","ui_RenderColumn","ui_SelectionManager","SelectionManager","hr","showHint","startNode","elementFromPoint","clientY","endNode","xShift","yShift","EVENT_SELECT_RANGE","startIndex","endIndex","sy","ey","MIN_DISTANCE","selectRange","updateState","selectedDataIndices","EngineRanking_RankingEvents","RankingEvents","EVENT_UPDATE_DATA","EVENT_RECREATE","PASSIVE","ui_EngineRanking","EngineRanking","roptions","loadingCanvas","highlight","canvasPool","currentCanvasShift","currentCanvasWidth","canvasMouseHandler","hoveredRows","unhover","enter","leave","updateHoveredRow","isCanvasRenderedRow","highlightHandler","delayedUpdate","updateBody","delayedUpdateAll","updateAll","delayedUpdateColumnWidths","createCol","reindex","disableListener","_oldValue","renderCtx","ui_MultiLevelRenderColumn","createRenderer","visibility","updateCanvasRule","updateColumnSummaryFlag","_document","createCellHandled","initCellClasses","selectCanvas","rowFlags","rowany","__lu__","visibleRenderedWidth","pushLazyRedraw","renderRow","imageSmoothingEnabled","domColumns","renderCellImpl","visibleElements","firstDOM","updateCellImpl","domColumns_1","updateCanvasCell","me","me_1","needDOM","updateHeaderOf","toRowMeta","agg","hoverLod","computedLod","wasLow","wasGroup","recycleCanvas","canvas2","updateCanvasBody","level_1","enable","hover","updateSelection","updateColumn","after","groupData","pushItem","ordered","gparent","rowContext","findNearest","lookFor","firstBeforePos","firstAfterPos","nearestPos","scrollIntoView","regular","posOf","scrollHeight","found","getHighlight","debounceUpdate","replacement","SlopeGraph_ItemSlope","ItemSlope","SlopeGraph_GroupSlope","GroupSlope","SlopeGraph","leftSlopes","rightSlopes","chosenSelectionOnly","ITEM","BAND","initHeader","scroll","icons","rebuild","leftRanking","leftContext","rightRanking","rightContext","prepareRightSlopes","computeSlopes","fakeGroups","padded","slopes","gr","heightPerRow","fakeGroup","createFakeGroup","intersection","filterIndices","chooseSelection","leftVisibleFirst","leftVisibleLast","rightVisibleFirst","rightVisibleLast","alreadyVisible","selectionLookup","updatePath","selectionSlopes","ownerSVGElement","matchLength","addPath","openDataIndices","paths_2","ss_1","paths_1","ui_EngineRenderer","EngineRenderer","slopeGraphs","updateAbles","zoomFactor","enabledHighlightListening","helper","chooseRenderer","chooseGroupRenderer","chooseSummaryRenderer","footer","toDisable","initProvider","zoomOut","updateZoomFactor","zoomIn","fontSize","pushUpdateAble","updateAble","takeDownProvider","addRanking","setHighlightToNearest","updateHist","rankings_1","updateUpdateAbles","ui_SlopeGraph","updateRotatedHeaderState","slope","round2","impl_1","f_1","defaultHeight","heightsFor","rankings_2","updateSlopeGraphs","ChooseRankingDialog","panel_SearchBox","SearchBox","formatItem","placeholder","onfocus","onblur","blur","onkeydown","handleKey","itemTemplate","buildDialog","li","isItem","onmouseenter","highlighted","KEYS","click","highlightPrevious","highlightNext","filterResults","ul","allChildrenHidden","RenameRankingDialog","MoreRankingOptionsDialog","dialogs_RenameRankingDialog","AddonDialog","addons","Hierarchy","groupAdder","groupSortAdder","sortAdder","renderSorting","renderGroupSorting","toColumn","addonKey","onChange","prevent","customize","addGroupAdder","addSortAdder","addGroupSortAdder","addAdder","adder","onSelect","used","dialogs_AddonDialog","SidePanelEntryVis","summaryUpdater","recreateSummary","appendSummary","updateSummary","SidePanelRanking","dropdown","dialogs_MoreRankingOptionsDialog","panel_Hierarchy","updateHierarchy","updateList","panel_SidePanelEntryVis","isWrapper","SidePanel","additionalDescs","chooser","collapseable","descs","dialogs_ChooseRankingDialog","initChooser","changeDataStorage","panel","wrapDesc","updateChooser","updateStats","createEntry","makeActive","panel_SidePanelRanking","updateRanking","resetButton","groupByType","ui_LineUp","LineUp","panel_SidePanel","spaceFillingRule","availableHeight","visibleHeight","groupSeparators","violation","itemHeight","taggle_TaggleRenderer","TaggleRenderer","isDynamicLeafHeight","resizeListener","violationChanged","switchRule","taggle_Taggle","Taggle","_rule","setViolation","spaceFilling","spaceFilling_1","updateLodRules","ColumnBuilder","_color","asArray","asMap","buildColumn","LineUpBuilder","rotation","registerRenderer","registerToolbarAction","registerToolbarDialogAddon","groupRowHeight","disableAdvancedRankingFeatures","disableAdvancedModelFeatures","disableAdvancedUIFeatures","RankingBuilder_RankingBuilder","RankingBuilder","columns_1","supportTypes","allColumns","impose","colorColumn","scripted","mixed_1","weightedSum","numberColumn","numberColumn1","weight1","numberColumn2","weight2","numberColumnAndWeights","post","operation","numberColumns","ALL_MAGIC_FLAG","addColumn","col2","sorts_1","sorts_2","buildRanking","CategoricalColumnBuilder_CategoricalColumnBuilder","CategoricalColumnBuilder","asOrdinal","asSet","derive","isSet","val","column_ColumnBuilder","buildCategoricalColumn","NumberColumnBuilder_NumberColumnBuilder","NumberColumnBuilder","asBoxPlot","ext","buildNumberColumn","StringColumnBuilder_StringColumnBuilder","StringColumnBuilder","editable","buildStringColumn","DateColumnBuilder_DateColumnBuilder","DateColumnBuilder","buildDateColumn","HierarchyColumnBuilder_HierarchyColumnBuilder","HierarchyColumnBuilder","buildHierarchicalColumn","ActionsColumnBuilder_ActionsColumnBuilder","ActionsColumnBuilder","groupAction","buildActionsColumn","BooleanColumnBuilder_BooleanColumnBuilder","BooleanColumnBuilder","marker","falseMarker","buildBooleanColumn","DataBuilder_DataBuilder","DataBuilder","providerOptions","rankBuilders","_deriveColors","scheduledTaskExecutor","deriveColumns","registerColumnType","defaultRanking","addSupportTypes","buildData","oldPos","provider_LocalDataProvider","buildTaggle","builder_LineUpBuilder","DataBuilder_builder","asTaggle","asLineUp","column_build","ranking_buildRanking","si","pick","utils_isSame","lineupOptions","lineup_Adapter","Adapter","prevRankings","prevColumns","prevHighlight","onSelectionChanged","onHighlightChanged","componentDidMount","buildProvider","createInstance","resolveColumnDescs","columnDescs","deriveColumnNames","resolveRankings","builders","rankingBuilders","buildColumns","derived_1","buildRankings","updateLineUp","changeDetector","providerChanged","changedLineUpOptions","updateProvider","columnsChanged","componentDidUpdate","componentWillUnmount","builderAdapter","buildString","buildNumber","buildHierarchy","buildDate","buildCategorical","missingCategory","buildActions","buildGeneric","buildWeightedSumRanking","buildSupportRanking","buildScriptRanking","buildReduceRanking","buildNestedRanking","buildImposeRanking","buildAllColumnsRanking","isSame","isTypeInstance","superClass","defineColumn","functions","CustomColumn","_args","createIndex2Pos","RemoteDataProvider","server","maxCacheSize","loadFromServer","fetch","computeMissing","union","unionAdd","_v","loadInCache","_m","toLoad","rendererClasses","rendererUtils","createLocalDataProvider","createLineUp","createTaggle","__webpack_exports__","buildId","license","provider_RemoteDataProvider"],"mappings":"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sU,GAAAX,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESuU,GAAAZ,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESwU,GAAAb,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESyU,GAAAd,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES0U,GAAAf,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES2U,GAAAhB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES4U,GAAAjB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES6U,GAAAlB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES8U,GAAAnB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCES+U,GAAApB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESgV,GAAArB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESiV,GAAAtB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACA/C,IAAM6pB,KCESkV,GAAAvB,GAVE,IAAA5iC,MAAA,GAAAmI,OACjB,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","file":"LineUpJS.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LineUpJS\"] = factory();\n\telse\n\t\troot[\"LineUpJS\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n    }\n    return BrowserInfo;\n}());\nexports.BrowserInfo = BrowserInfo;\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexports.NodeInfo = NodeInfo;\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexports.BotInfo = BotInfo;\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['vivaldi', /Vivaldi\\/([0-9\\.]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /Edg\\/([0-9\\.]+)/],\n    ['chromium-webview', /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FBAV\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n    ['Search Bot', SEARCHBOT_OS_REGEX],\n];\nfunction detect() {\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nexports.detect = detect;\nfunction parseUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    var matchedRule = ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    var versionParts = match[1] && match[1].split(/[._]/).slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = versionParts.concat(createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length));\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    return new BrowserInfo(name, versionParts.join('.'), detectOS(ua));\n}\nexports.parseUserAgent = parseUserAgent;\nfunction detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.test(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexports.detectOS = detectOS;\nfunction getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nexports.getNodeVersion = getNodeVersion;\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nexport interface IForEachAble<T> extends Iterable<T> {\n  forEach(callback: (v: T, i: number) => void): void;\n}\n\n/**\n * @internal\n */\nexport function isForEachAble<T>(v: IForEachAble<T> | any): v is IForEachAble<T> {\n  return typeof v.forEach === 'function';\n}\n\n/**\n * generalized version of Array function similar to Scala ISeq\n */\nexport interface ISequence<T> extends IForEachAble<T> {\n  readonly length: number;\n  filter(callback: (v: T, i: number) => boolean): ISequence<T>;\n  map<U>(callback: (v: T, i: number) => U): ISequence<U>;\n\n  some(callback: (v: T, i: number) => boolean): boolean;\n  every(callback: (v: T, i: number) => boolean): boolean;\n  reduce<U>(callback: (acc: U, v: T, i: number) => U, initial: U): U;\n}\n\n/**\n * @internal\n */\nexport function isSeqEmpty(seq: ISequence<any>) {\n  return seq.every(() => false); // more efficent than counting length\n}\n\n/**\n * helper function for faster access to avoid function calls\n * @internal\n */\nexport function isIndicesAble<T>(it: Iterable<T>): it is ArrayLike<T> & Iterable<T> {\n  return Array.isArray(it) || it instanceof Uint8Array || it instanceof Uint16Array || it instanceof Uint32Array || it instanceof Float32Array || it instanceof Int8Array || it instanceof Int16Array || it instanceof Int32Array || it instanceof Float64Array;\n}\n\ndeclare type ISequenceBase<T> = ISequence<T> | (ArrayLike<T> & Iterable<T>);\n\n/**\n * sequence implementation that does the operation lazily on the fly\n */\nclass LazyFilter<T> implements ISequence<T> {\n  private _length = -1;\n\n  constructor(private readonly it: ISequenceBase<T>, private readonly filters: ((v: T, i: number) => boolean)[]) {\n\n  }\n\n  get length() {\n    // cached\n    if (this._length >= 0) {\n      return this._length;\n    }\n    let l = 0;\n    this.forEach(() => l++);\n    this._length = l;\n    return l;\n  }\n\n  filter(callback: (v: T, i: number) => boolean): ISequence<T> {\n    // propagate filter\n    return new LazyFilter(this.it, this.filters.concat(callback));\n  }\n\n  map<U>(callback: (v: T, i: number) => U): ISequence<U> {\n    // create lazy map out of myself\n    return new LazyMap1(this, callback);\n  }\n\n  forEach(callback: (v: T, i: number) => void) {\n    if (isIndicesAble(this.it)) {\n      // fast array version\n      outer: for (let i = 0; i < this.it.length; ++i) {\n        const v = this.it[i];\n        for (const f of this.filters) {\n          if (!f(v, i)) {\n            continue outer;\n          }\n        }\n        callback(v, i);\n      }\n      return;\n    }\n\n    // iterator version\n    let valid = 0;\n    const it = this.it[Symbol.iterator]();\n    let v = it.next();\n    let i = 0;\n    outer: while (!v.done) {\n      for (const f of this.filters) {\n        if (f(v.value, i)) {\n          continue;\n        }\n        v = it.next();\n        i++;\n        continue outer;\n      }\n      callback(v.value, valid++);\n      v = it.next();\n      i++;\n    }\n  }\n\n  [Symbol.iterator]() {\n    const it = this.it[Symbol.iterator]();\n    const next = () => {\n      let v = it.next();\n      let i = -1;\n      outer: while (!v.done) {\n        i++;\n        for (const f of this.filters) {\n          if (f(v.value, i)) {\n            continue;\n          }\n          // invalid go to next\n          v = it.next();\n          continue outer;\n        }\n        return v;\n      }\n      return v;\n    };\n    return {next};\n  }\n\n  some(callback: (v: T, i: number) => boolean) {\n    if (isIndicesAble(this.it)) {\n      // fast array version\n      outer: for (let i = 0; i < this.it.length; ++i) {\n        const v = this.it[i];\n        for (const f of this.filters) {\n          if (!f(v, i)) {\n            continue outer;\n          }\n        }\n        if (callback(v, i)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    let valid = 0;\n    const it = this.it[Symbol.iterator]();\n    let v = it.next();\n    let i = 0;\n    outer: while (!v.done) {\n      for (const f of this.filters) {\n        if (f(v.value, i)) {\n          continue;\n        }\n        v = it.next();\n        i++;\n        continue outer;\n      }\n      if (callback(v.value, valid++)) {\n        return true;\n      }\n      v = it.next();\n      i++;\n    }\n    return false;\n  }\n\n  every(callback: (v: T, i: number) => boolean) {\n    if (isIndicesAble(this.it)) {\n      // fast array version\n      outer: for (let i = 0; i < this.it.length; ++i) {\n        const v = this.it[i];\n        for (const f of this.filters) {\n          if (!f(v, i)) {\n            continue outer;\n          }\n        }\n        if (!callback(v, i)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    let valid = 0;\n    const it = this.it[Symbol.iterator]();\n    let v = it.next();\n    let i = 0;\n    outer: while (!v.done) {\n      for (const f of this.filters) {\n        if (f(v.value, i)) {\n          continue;\n        }\n        v = it.next();\n        i++;\n        continue outer;\n      }\n      if (!callback(v.value, valid++)) {\n        return false;\n      }\n      v = it.next();\n      i++;\n    }\n    return true;\n  }\n\n  reduce<U>(callback: (acc: U, v: T, i: number) => U, initial: U) {\n    if (isIndicesAble(this.it)) {\n      // fast array version\n      let acc = initial;\n      let j = 0;\n      outer: for (let i = 0; i < this.it.length; ++i) {\n        const v = this.it[i];\n        for (const f of this.filters) {\n          if (!f(v, i)) {\n            continue outer;\n          }\n        }\n        acc = callback(acc, v, j++);\n      }\n      return acc;\n    }\n\n    let valid = 0;\n    const it = this.it[Symbol.iterator]();\n    let v = it.next();\n    let i = 0;\n    let r = initial;\n    outer: while (!v.done) {\n      for (const f of this.filters) {\n        if (f(v.value, i)) {\n          continue;\n        }\n        v = it.next();\n        i++;\n        continue outer;\n      }\n      r = callback(r, v.value, valid++);\n      v = it.next();\n      i++;\n    }\n    return r;\n  }\n}\n\n/**\n * lazy mapping operation\n */\nabstract class ALazyMap<T, T2> implements ISequence<T2> {\n  constructor(protected readonly it: ISequenceBase<T>) {\n\n  }\n\n  get length() {\n    return this.it.length;\n  }\n\n  filter(callback: (v: T2, i: number) => boolean): ISequence<T2> {\n    return new LazyFilter(this, [callback]);\n  }\n\n  abstract map<U>(callback: (v: T2, i: number) => U): ISequence<U>;\n  protected abstract mapV(v: T, i: number): T2;\n\n\n  forEach(callback: (v: T2, i: number) => void) {\n    if (isIndicesAble(this.it)) {\n      for (let i = 0; i < this.it.length; ++i) {\n        callback(this.mapV(this.it[i], i), i);\n      }\n      return;\n    }\n    const it = this.it[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      callback(this.mapV(v.value, i), i);\n    }\n  }\n\n  [Symbol.iterator]() {\n    const it = this.it[Symbol.iterator]();\n    let i = 0;\n    const next = () => {\n      const v = it.next();\n      if (v.done) {\n        return {\n          value: <T2><any>undefined,\n          done: true\n        };\n      }\n      const value = this.mapV(v.value, i);\n      i++;\n      return {\n        value,\n        done: false\n      };\n    };\n    return {next};\n  }\n\n  some(callback: (v: T2, i: number) => boolean) {\n    if (isIndicesAble(this.it)) {\n      for (let i = 0; i < this.it.length; ++i) {\n        if (callback(this.mapV(this.it[i], i), i)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    const it = this.it[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      if (callback(this.mapV(v.value, i), i)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  every(callback: (v: T2, i: number) => boolean) {\n    if (isIndicesAble(this.it)) {\n      for (let i = 0; i < this.it.length; ++i) {\n        if (!callback(this.mapV(this.it[i], i), i)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    const it = this.it[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      if (!callback(this.mapV(v.value, i), i)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  reduce<U>(callback: (acc: U, v: T2, i: number) => U, initial: U) {\n    if (isIndicesAble(this.it)) {\n      let acc = initial;\n      for (let i = 0; i < this.it.length; ++i) {\n        acc = callback(acc, this.mapV(this.it[i], i), i);\n      }\n      return acc;\n    }\n\n    const it = this.it[Symbol.iterator]();\n    let acc = initial;\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      acc = callback(acc, this.mapV(v.value, i), i);\n    }\n    return acc;\n  }\n}\n\nclass LazyMap1<T1, T2> extends ALazyMap<T1, T2> implements ISequence<T2> {\n  constructor(it: ISequenceBase<T1>, protected readonly map12: (v: T1, i: number) => T2) {\n    super(it);\n  }\n\n  protected mapV(v: T1, i: number) {\n    return this.map12(v, i);\n  }\n\n  map<U>(callback: (v: T2, i: number) => U): ISequence<U> {\n    return new LazyMap2(this.it, this.map12, callback);\n  }\n}\n\nclass LazyMap2<T1, T2, T3> extends ALazyMap<T1, T3> implements ISequence<T3> {\n  constructor(it: ISequenceBase<T1>, private readonly map12: (v: T1, i: number) => T2, private readonly map23: (v: T2, i: number) => T3) {\n    super(it);\n  }\n\n  map<U>(callback: (v: T3, i: number) => U): ISequence<U> {\n    return new LazyMap3(this.it, this.map12, this.map23, callback);\n  }\n\n  protected mapV(v: T1, i: number) {\n    return this.map23(this.map12(v, i), i);\n  }\n}\n\n\nclass LazyMap3<T1, T2, T3, T4> extends ALazyMap<T1, T4> implements ISequence<T4> {\n  constructor(it: ISequenceBase<T1>, private readonly map12: (v: T1, i: number) => T2, private readonly map23: (v: T2, i: number) => T3, private readonly map34: (v: T3, i: number) => T4) {\n    super(it);\n  }\n\n  map<U>(callback: (v: T4, i: number) => U): ISequence<U> {\n    const map1U = (v: T1, i: number) => callback(this.map34(this.map23(this.map12(v, i), i), i), i);\n    return new LazyMap1(this.it, map1U);\n  }\n\n  protected mapV(v: T1, i: number) {\n    return this.map34(this.map23(this.map12(v, i), i), i);\n  }\n}\n\nclass LazySeq<T> implements ISequence<T> {\n  private _arr: ISequenceBase<T> | null = null;\n\n  constructor(private readonly iterable: Iterable<T>) {\n\n  }\n\n  get arr() {\n    if (this._arr) {\n      return this._arr;\n    }\n    if (isIndicesAble(this.iterable)) {\n      this._arr = this.iterable;\n    } else {\n      this._arr = Array.from(this.iterable);\n    }\n    return this._arr!;\n  }\n\n  [Symbol.iterator]() {\n    return this.iterable[Symbol.iterator]();\n  }\n\n  filter(callback: (v: T, i: number) => boolean) {\n    return new LazyFilter(this.arr, [callback]);\n  }\n\n  map<U>(callback: (v: T, i: number) => U) {\n    return new LazyMap1(this.arr, callback);\n  }\n\n  forEach(callback: (v: T, i: number) => void) {\n    if (isIndicesAble(this.iterable)) {\n      for (let i = 0; i < this.iterable.length; ++i) {\n        callback(this.iterable[i], i);\n      }\n      return;\n    }\n    const it = this[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      callback(v.value, i);\n    }\n  }\n\n  some(callback: (v: T, i: number) => boolean) {\n    if (isIndicesAble(this.iterable)) {\n      for (let i = 0; i < this.iterable.length; ++i) {\n        if (callback(this.iterable[i], i)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    const it = this[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      if (callback(v.value, i)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  every(callback: (v: T, i: number) => boolean) {\n    if (isIndicesAble(this.iterable)) {\n      for (let i = 0; i < this.iterable.length; ++i) {\n        if (!callback(this.iterable[i], i)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    const it = this[Symbol.iterator]();\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      if (!callback(v.value, i)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  reduce<U>(callback: (acc: U, v: T, i: number) => U, initial: U) {\n    if (isIndicesAble(this.iterable)) {\n      let acc = initial;\n      for (let i = 0; i < this.iterable.length; ++i) {\n        acc = callback(acc, this.iterable[i], i);\n      }\n      return acc;\n    }\n\n    const it = this[Symbol.iterator]();\n    let acc = initial;\n    for (let v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n      acc = callback(acc, v.value, i);\n    }\n    return acc;\n  }\n\n  get length() {\n    const it = this.iterable;\n    if (isIndicesAble(it)) {\n      return it.length;\n    }\n    if (it instanceof Set || it instanceof Map) {\n      return it.size;\n    }\n    return this.arr.length;\n  }\n}\n\n/**\n * @internal\n */\nexport function lazySeq<T>(iterable: Iterable<T>): ISequence<T> {\n  return new LazySeq(iterable);\n}\n\n\nclass ConcatSequence<T> implements ISequence<T> {\n  constructor(private readonly seqs: ISequence<ISequence<T>>) {\n    //\n  }\n\n  [Symbol.iterator]() {\n    const seqs = Array.from(this.seqs);\n    let it = seqs.shift()![Symbol.iterator]();\n    const next = (): {value: T, done: boolean} => {\n      const v = it.next();\n      if (!v.done) {\n        return v;\n      }\n      if (seqs.length === 0) {\n        // last last\n        return v;\n      }\n      // next iterator and compute next element\n      it = seqs.shift()![Symbol.iterator]();\n      return next();\n    };\n    return {next};\n  }\n\n  filter(callback: (v: T, i: number) => boolean): ISequence<T> {\n    return new LazyFilter(this, [callback]);\n  }\n\n  map<U>(callback: (v: T, i: number) => U): ISequence<U> {\n    return new LazyMap1(this, callback);\n  }\n\n  forEach(callback: (v: T, i: number) => void) {\n    this.seqs.forEach((s) => s.forEach(callback));\n  }\n\n  some(callback: (v: T, i: number) => boolean) {\n    return this.seqs.some((s) => s.some(callback));\n  }\n\n  every(callback: (v: T, i: number) => boolean) {\n    return this.seqs.every((s) => s.every(callback));\n  }\n\n  reduce<U>(callback: (acc: U, v: T, i: number) => U, initial: U) {\n    return this.seqs.reduce((acc, s) => s.reduce(callback, acc), initial);\n  }\n\n  get length() {\n    return this.seqs.reduce((a, b) => a + b.length, 0);\n  }\n}\n\n/**\n * @internal\n */\nexport function concatSeq<T>(seqs: ISequence<ISequence<T>>): ISequence<T>;\nexport function concatSeq<T>(seq1: ISequence<T>, seq2: ISequence<T>, ...seqs: ISequence<T>[]): ISequence<T>;\nexport function concatSeq<T>(seq1: ISequence<T>[] | ISequence<T>, seq2?: ISequence<T>, ...seqs: ISequence<T>[]): ISequence<T> {\n  if (seq2) {\n    return new ConcatSequence([<ISequence<T>>seq1, seq2].concat(seqs));\n  }\n  return new ConcatSequence(<ISequence<T>[]>seq1);\n}\n","import {IWorkerMessage, INumberStatsMessageRequest, IAdvancedBoxPlotData, ICategoricalStatistics, IDateStatistics, IStatistics, ICategoricalStatsMessageRequest, IDateStatsMessageRequest, IBoxPlotStatsMessageRequest} from './';\nimport {UIntTypedArray, IndicesArray} from '../model';\n\n/**\n * @internal\n */\nexport interface IPoorManWorkerScopeEventMap {\n  message: MessageEvent;\n  error: ErrorEvent;\n}\n\ndeclare type IPoorManTransferAble = ArrayBuffer | MessagePort | ImageBitmap;\n\n/**\n * @internal\n */\nexport interface IPoorManWorkerScope {\n  onmessage: ((this: IPoorManWorkerScope, ev: MessageEvent) => any) | null;\n  onerror: ((this: IPoorManWorkerScope, ev: ErrorEvent) => any) | null;\n  close(): void;\n  postMessage(message: any, transfer?: IPoorManTransferAble[]): void;\n  addEventListener<K extends keyof IPoorManWorkerScopeEventMap>(type: K, listener: (this: IPoorManWorkerScope, ev: IPoorManWorkerScopeEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;\n  removeEventListener<K extends keyof IPoorManWorkerScopeEventMap>(type: K, listener: (this: IPoorManWorkerScope, ev: IPoorManWorkerScopeEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;\n}\n\n// function workerMain(self: IPoorManWorkerScope) {\n//   self.addEventListener('message', (evt) => {\n//     self.postMessage(`Worker: ${evt.data} - Polo`);\n//   });\n// }\n\n/**\n * @internal\n */\nexport function toFunctionBody(f: Function) {\n  const source = f.toString();\n  return source.slice(source.indexOf('{') + 1, source.lastIndexOf('}'));\n}\n\n/**\n * create a blob out of the given function or string\n * @internal\n */\nexport function createWorkerCodeBlob(fs: (string | Function)[]) {\n  const sources = fs.map((d) => d.toString()).join('\\n\\n');\n\n  const blob = new Blob([sources], {type: 'application/javascript'});\n  return URL.createObjectURL(blob);\n}\n\nconst MIN_WORKER_THREADS = 1;\nconst MAX_WORKER_THREADS = Math.max(navigator.hardwareConcurrency - 1, 1); // keep one for the ui\n\nconst THREAD_CLEANUP_TIME = 10000; // 10s\n\ninterface ITaskWorker {\n  /**\n   * worker index\n   */\n  index: number;\n  /**\n   * worker itself\n   */\n  worker: Worker;\n  /**\n   * set of active task numbers\n   */\n  tasks: Set<number>;\n  /**\n   * list of references that are stored on this worker\n   */\n  refs: Set<string>;\n}\n\n/**\n * task scheduler based on web worker\n * @internal\n */\nexport class WorkerTaskScheduler {\n  private readonly workers: ITaskWorker[] = [];\n  private cleanUpWorkerTimer: number = -1;\n  /**\n   * worker task id\n   */\n  private workerTaskCounter = 0;\n\n  constructor(private readonly blob: string) {\n    for (let i = 0; i < MIN_WORKER_THREADS; ++i) {\n      const w = new Worker(blob);\n      this.workers.push({worker: w, tasks: new Set(), refs: new Set(), index: i});\n    }\n  }\n\n  terminate() {\n    this.workers.splice(0, this.workers.length).forEach((w) => w.worker.terminate());\n  }\n\n  private readonly cleanUpWorker = () => {\n    // delete workers when they are not needed anymore and empty\n    while(this.workers.length > MIN_WORKER_THREADS) {\n      const toFree = this.workers.findIndex((d) => d.tasks.size === 0);\n      if (toFree < 0) {\n        break;\n      }\n      const w = this.workers.splice(toFree, 1)[0]!;\n      w.worker.terminate();\n    }\n    // maybe reschedule\n    this.finshedTask();\n  }\n\n  private checkOutWorker() {\n    if (this.cleanUpWorkerTimer >= 0) {\n      clearTimeout(this.cleanUpWorkerTimer);\n      this.cleanUpWorkerTimer = -1;\n    }\n\n    const emptyWorker = this.workers.find((d) => d.tasks.size === 0);\n\n    if (emptyWorker) {\n      return emptyWorker;\n    }\n\n    if (this.workers.length >= MAX_WORKER_THREADS) {\n      // find the one with the fewest tasks\n      return this.workers.reduce((a, b) => a == null || a.tasks.size > b.tasks.size ? b : a, <ITaskWorker | null>null)!;\n    }\n\n    // create new one\n    const r: ITaskWorker = {\n      worker: new Worker(this.blob),\n      tasks: new Set<number>(),\n      refs: new Set(),\n      index: this.workers.length,\n    };\n    this.workers.push(r);\n    return r;\n  }\n\n  private finshedTask() {\n    if (this.cleanUpWorkerTimer === -1 && this.workers.length > MIN_WORKER_THREADS) {\n      this.cleanUpWorkerTimer = self.setTimeout(this.cleanUpWorker, THREAD_CLEANUP_TIME);\n    }\n  }\n\n  pushStats(type: 'numberStats', args: Partial<INumberStatsMessageRequest>, refData: string, data: Float32Array, refIndices?: string, indices?: IndicesArray): Promise<IStatistics>;\n  pushStats(type: 'boxplotStats', args: Partial<IBoxPlotStatsMessageRequest>, refData: string, data: Float32Array, refIndices?: string, indices?: IndicesArray): Promise<IAdvancedBoxPlotData>;\n  pushStats(type: 'categoricalStats', args: Partial<ICategoricalStatsMessageRequest>, refData: string, data: UIntTypedArray, refIndices?: string, indices?: IndicesArray): Promise<ICategoricalStatistics>;\n  pushStats(type: 'dateStats', args: Partial<IDateStatsMessageRequest>, refData: string, data: Float64Array, refIndices?: string, indices?: IndicesArray): Promise<IDateStatistics>;\n  pushStats(type: 'numberStats' | 'boxplotStats' | 'categoricalStats' | 'dateStats', args: any, refData: string, data: Float32Array | UIntTypedArray | Float64Array, refIndices?: string, indices?: IndicesArray) {\n    return new Promise((resolve) => {\n      const uid = this.workerTaskCounter++;\n      const {worker, tasks, refs} = this.checkOutWorker();\n\n      const receiver = (msg: MessageEvent) => {\n        const r = <IWorkerMessage>msg.data;\n        if (r.uid !== uid || r.type !== type) {\n          return;\n        }\n        // console.log('worker', index, uid, 'finish', r);\n        worker.removeEventListener('message', receiver);\n        tasks.delete(uid);\n        this.finshedTask();\n        resolve((<any>r).stats);\n      };\n\n      worker.addEventListener('message', receiver);\n\n      tasks.add(uid);\n\n      const msg: any = Object.assign({\n        type,\n        uid,\n        refData,\n        refIndices: refIndices || null\n      }, args);\n\n      if (!refData || !refs.has(refData)) {\n        // need to transfer to worker\n        msg.data = data;\n        if (refData) { // save that this worker has this ref\n          refs.add(refData);\n        }\n        // console.log(index, 'set ref (i)', refData);\n      }\n      if (indices && (!refIndices || !refs.has(refIndices))) {\n        // need to transfer\n        msg.indices = indices!;\n        if (refIndices) {\n          refs.add(refIndices);\n        }\n        // console.log(index, 'set ref (i)', refIndices);\n      }\n      // console.log('worker', index, uid, msg);\n\n      worker.postMessage(msg);\n    });\n  }\n\n  push<M, R>(type: string, args: M, transferAbles: ArrayBuffer[]): Promise<R>;\n  push<M, R, T>(type: string, args: M, transferAbles: ArrayBuffer[], toResult: (r: R) => T): Promise<T>;\n  push<M, R, T>(type: string, args: M, transferAbles: ArrayBuffer[], toResult?: (r: R) => T): Promise<T> {\n    return new Promise<T>((resolve) => {\n      const uid = this.workerTaskCounter++;\n      const {worker, tasks} = this.checkOutWorker();\n\n      const receiver = (msg: MessageEvent) => {\n        const r = <IWorkerMessage>msg.data;\n        if (r.uid !== uid || r.type !== type) {\n          return;\n        }\n        // console.log('worker', index, uid, 'finish', r);\n        worker.removeEventListener('message', receiver);\n        tasks.delete(uid);\n        this.finshedTask();\n        resolve(toResult ? toResult(<any>r) : <any>r);\n      };\n\n      worker.addEventListener('message', receiver);\n      tasks.add(uid);\n      const msg = Object.assign({\n        type,\n        uid\n      }, args);\n      // console.log('worker', index, uid, msg);\n\n      worker.postMessage(msg, transferAbles);\n    });\n  }\n\n  setRef(ref: string, data: Float32Array | UIntTypedArray | Int32Array | Float64Array | IndicesArray) {\n    for (const w of this.workers) {\n      w.refs.add(ref);\n    }\n    this.broadCast('setRef', {\n      ref,\n      data\n    });\n  }\n\n  deleteRef(ref: string, startsWith = false) {\n    const uid = this.workerTaskCounter++;\n    const msg = {\n      type: 'deleteRef',\n      uid,\n      ref,\n      startsWith\n    };\n    for (const w of this.workers) {\n      // console.log(w.index, 'delete ref', ref, startsWith);\n      w.worker.postMessage(msg);\n      if (!startsWith) {\n        w.refs.delete(ref);\n        continue;\n      }\n      for (const r of Array.from(w.refs)) {\n        if (r.startsWith(ref)) {\n          w.refs.delete(r);\n        }\n      }\n    }\n  }\n\n  deleteRefs() {\n    const uid = this.workerTaskCounter++;\n    const msg = {\n      type: 'deleteRef',\n      uid,\n      ref: '',\n      startsWith: true\n    };\n    for (const w of this.workers) {\n      // console.log(w.index, 'delete refs');\n      w.worker.postMessage(msg);\n      w.refs.clear();\n    }\n  }\n\n  broadCast<T>(type: string, args: T) {\n    const uid = this.workerTaskCounter++;\n    // don't store in tasks queue since there is no response\n    const msg = Object.assign({\n      type,\n      uid\n    }, args);\n    // console.log('broadcast', msg);\n    for (const w of this.workers) {\n      w.worker.postMessage(msg);\n    }\n  }\n\n}\n","import {ICategory, IndicesArray, UIntTypedArray} from '../model';\nimport {IForEachAble, ISequence, isIndicesAble} from './interable';\nimport {createWorkerCodeBlob, IPoorManWorkerScope, toFunctionBody} from './worker';\nimport {IAdvancedBoxPlotData, IStatistics, INumberBin, IDateBin, IDateStatistics, ICategoricalStatistics, ICategoricalBin, IDateHistGranularity} from './mathInterfaces';\n\n\n/**\n * computes the optimal number of bins for a given array length\n * @internal\n * @param {number} length\n * @returns {number}\n */\nexport function getNumberOfBins(length: number) {\n  if (length === 0) {\n    return 1;\n  }\n  // as by default used in d3 the Sturges' formula\n  return Math.ceil(Math.log(length) / Math.LN2) + 1;\n}\n\n/**\n * @internal\n */\nexport function min(values: number[]): number;\nexport function min<T>(values: T[], acc: (v: T) => number): number;\nexport function min<T>(values: T[], acc?: (v: T) => number) {\n  let min = Number.POSITIVE_INFINITY;\n  for (const d of values) {\n    const v = acc ? acc(d) : <number><any>d;\n    if (v < min) {\n      min = v;\n    }\n  }\n  return min;\n}\n\n/**\n * @internal\n */\nexport function max(values: number[]): number;\nexport function max<T>(values: T[], acc: (v: T) => number): number;\nexport function max<T>(values: T[], acc?: (v: T) => number) {\n  let max = Number.NEGATIVE_INFINITY;\n  for (const d of values) {\n    const v = acc ? acc(d) : <number><any>d;\n    if (v > max) {\n      max = v;\n    }\n  }\n  return max;\n}\n\n/**\n * @internal\n */\nexport function extent(values: number[]): [number, number];\nexport function extent<T>(values: T[], acc: (v: T) => number): [number, number];\nexport function extent<T>(values: T[], acc?: (v: T) => number) {\n  let max = Number.NEGATIVE_INFINITY;\n  let min = Number.POSITIVE_INFINITY;\n  for (const d of values) {\n    const v = acc ? acc(d) : <number><any>d;\n    if (v < min) {\n      min = v;\n    }\n    if (v > max) {\n      max = v;\n    }\n  }\n  return [min, max];\n}\n\n/**\n * @internal\n */\nexport function range(length: number) {\n  const r: number[] = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    r[i] = i;\n  }\n  return r;\n}\n\n/**\n * an empty range\n * @internal\n */\nexport function empty(length: number) {\n  const r: null[] = new Array(length);\n  r.fill(null);\n  return r;\n}\n\n/**\n * computes the X quantile assumes the values are sorted\n * @internal\n */\nexport function quantile(values: ArrayLike<number>, quantile: number, length = values.length) {\n  if (length === 0) {\n    return NaN;\n  }\n  const target = (length - 1) * quantile;\n  const index = Math.floor(target);\n  if (index === target) {\n    return values[index];\n  }\n  const v = values[index];\n  const vAfter = values[index + 1];\n  return v + (vAfter - v) * (target - index); // shift by change\n}\n\n/**\n * @internal\n */\nexport function median(values: number[]): number;\nexport function median<T>(values: T[], acc: (v: T) => number): number;\nexport function median<T>(values: T[], acc?: (v: T) => number) {\n  const arr = acc ? values.map(acc) : (<number[]><any>values).slice();\n  arr.sort((a, b) => (a < b ? -1 : (a > b ? 1 : 0)));\n  return quantile(arr, 0.5);\n}\n\nfunction pushAll<T>(push: (v: T) => void) {\n  return (vs: IForEachAble<T>) => {\n    if (!isIndicesAble(vs)) {\n      vs.forEach(push);\n      return;\n    }\n    // tslint:disable-next-line:prefer-for-of\n    for (let j = 0; j < vs.length; ++j) {\n      push(vs[j]);\n    }\n  };\n}\n\n/**\n * common interface for a bulider pattern\n * @internal\n */\nexport interface IBuilder<T, R> {\n  /**\n   * push an entry\n   */\n  push(v: T): void;\n  /**\n   * push multiple values at once\n   */\n  pushAll(vs: IForEachAble<T>): void;\n\n  /**\n   * build the result\n   */\n  build(): R;\n}\n\n/**\n * @internal\n */\nexport function boxplotBuilder(fixedLength?: number): IBuilder<number, IAdvancedBoxPlotData> & {buildArr: (s: Float32Array) => IAdvancedBoxPlotData} {\n  let min = Number.POSITIVE_INFINITY;\n  let max = Number.NEGATIVE_INFINITY;\n  let sum = 0;\n  let length = 0;\n  let missing = 0;\n\n  // if fixed size use the typed array else a regular array\n  const values: number[] = [];\n  const vs: Float32Array | null = fixedLength != null ? new Float32Array(fixedLength) : null;\n\n  const push = (v: number) => {\n    length += 1;\n    if (v == null || isNaN(v)) {\n      missing += 1;\n      return;\n    }\n    if (v < min) {\n      min = v;\n    }\n    if (v > max) {\n      max = v;\n    }\n    sum += v;\n  };\n\n  const pushAndSave = (v: number) => {\n    push(v);\n    if (vs) {\n      vs[length] = v;\n    } else {\n      values.push(v);\n    }\n  };\n\n\n  const invalid = {\n    min: NaN,\n    max: NaN,\n    mean: NaN,\n    missing,\n    count: length,\n    whiskerHigh: NaN,\n    whiskerLow: NaN,\n    outlier: [],\n    median: NaN,\n    q1: NaN,\n    q3: NaN\n  };\n\n  const buildImpl = (s: ArrayLike<number>) => {\n    const valid = length - missing;\n    const median = quantile(s, 0.5, valid)!;\n    const q1 = quantile(s, 0.25, valid)!;\n    const q3 = quantile(s, 0.75, valid)!;\n\n    const iqr = q3 - q1;\n    const left = q1 - 1.5 * iqr;\n    const right = q3 + 1.5 * iqr;\n\n    let outlier: number[] = [];\n    // look for the closests value which is bigger than the computed left\n    let whiskerLow = left;\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < valid; ++i) {\n      const v = s[i];\n      if (left < v) {\n        whiskerLow = v;\n        break;\n      }\n      // outlier\n      outlier.push(v);\n    }\n    // look for the closests value which is smaller than the computed right\n    let whiskerHigh = right;\n    const reversedOutliers: number[] = [];\n    for (let i = valid - 1; i >= 0; --i) {\n      const v = s[i];\n      if (v < right) {\n        whiskerHigh = v;\n        break;\n      }\n      // outlier\n      reversedOutliers.push(v);\n    }\n\n    outlier = outlier.concat(reversedOutliers.reverse());\n\n    return {\n      min,\n      max,\n      count: length,\n      missing,\n      mean: sum / valid,\n      whiskerHigh,\n      whiskerLow,\n      outlier,\n      median,\n      q1,\n      q3\n    };\n  };\n\n  const build = () => {\n    const valid = length - missing;\n\n    if (valid === 0) {\n      return invalid;\n    }\n\n    const s = vs ? vs.sort() : Float32Array.from(values).sort();\n    return buildImpl(s);\n  };\n\n  const buildArr = (vs: Float32Array) => {\n    const s = vs.slice().sort();\n    // tslint:disable-next-line:prefer-for-of\n    for (let j = 0; j < vs.length; ++j) {\n      push(vs[j]);\n    }\n    // missing are the last\n    return buildImpl(s);\n  };\n\n  return {\n    push: pushAndSave,\n    build,\n    buildArr,\n    pushAll: pushAll(pushAndSave)\n  };\n}\n\n/**\n * @internal\n */\nexport function normalizedStatsBuilder(numberOfBins: number): IBuilder<number, IStatistics> {\n\n  const hist: INumberBin[] = [];\n\n  let x0 = 0;\n  const binWidth = 1. / numberOfBins;\n  for (let i = 0; i < numberOfBins; ++i, x0 += binWidth) {\n    hist.push({\n      x0,\n      x1: x0 + binWidth,\n      count: 0\n    });\n  }\n\n  const bin1 = 0 + binWidth;\n  const binN = 1 - binWidth;\n\n  const toBin = (v: number) => {\n    if (v < bin1) {\n      return 0;\n    }\n    if (v >= binN) {\n      return numberOfBins - 1;\n    }\n    if (numberOfBins === 3) {\n      return 1;\n    }\n    let low = 1;\n    let high = numberOfBins - 1;\n    // binary search\n    while (low < high) {\n      const center = Math.floor((high + low) / 2);\n      if (v < hist[center].x1) {\n        high = center;\n      } else {\n        low = center + 1;\n      }\n    }\n    return low;\n  };\n\n  // filter out NaN\n  let min = Number.POSITIVE_INFINITY;\n  let max = Number.NEGATIVE_INFINITY;\n  let sum = 0;\n  let length = 0;\n  let missing = 0;\n\n  const push = (v: number) => {\n    length += 1;\n    if (v == null || isNaN(v)) {\n      missing += 1;\n      return;\n    }\n    if (v < min) {\n      min = v;\n    }\n    if (v > max) {\n      max = v;\n    }\n    sum += v;\n\n    hist[toBin(v)].count++;\n  };\n\n  const build = () => {\n    const valid = length - missing;\n    if (valid === 0) {\n      return {\n        count: missing,\n        missing,\n        min: NaN,\n        max: NaN,\n        mean: NaN,\n        hist,\n        maxBin: 0\n      };\n    }\n    return {\n      count: length,\n      min,\n      max,\n      mean: sum / valid,\n      missing,\n      hist,\n      maxBin: hist.reduce((a, b) => Math.max(a, b.count), 0)\n    };\n  };\n\n  return {push, build, pushAll: pushAll(push)};\n}\n\n/**\n * guesses the histogram granularity to use based on min and max date\n */\nfunction computeGranularity(min: Date | null, max: Date | null): {histGranularity: IDateHistGranularity, hist: IDateBin[]} {\n  if (min == null || max == null) {\n    return {histGranularity: 'year', hist: []};\n  }\n  const hist: IDateBin[] = [];\n\n  if (max.getFullYear() - min.getFullYear() >= 2) {\n    // more than two years difference\n    const minYear = min.getFullYear();\n    const maxYear = max.getFullYear();\n    for (let i = minYear; i <= maxYear; ++i) {\n      hist.push({\n        x0: new Date(i, 0, 1),\n        x1: new Date(i + 1, 0, 1),\n        count: 0\n      });\n    }\n    return {hist, histGranularity: 'year'};\n  }\n\n  if ((max.getTime() - min.getTime()) <= 1000 * 60 * 60 * 24 * 31) {\n    // less than a month use day\n    let x0 = new Date(min.getFullYear(), min.getMonth(), min.getDay());\n    while (x0 <= max) {\n      const x1 = new Date(x0);\n      x1.setDate(x1.getDate() + 1);\n      hist.push({\n        x0,\n        x1,\n        count: 0\n      });\n      x0 = x1;\n    }\n    return {hist, histGranularity: 'day'};\n  }\n\n  // by month\n  let x0 = new Date(min.getFullYear(), min.getMonth(), 1);\n  while (x0 <= max) {\n    const x1 = new Date(x0);\n    x1.setMonth(x1.getMonth() + 1);\n    hist.push({\n      x0,\n      x1,\n      count: 0\n    });\n    x0 = x1;\n  }\n  return {hist, histGranularity: 'month'};\n}\n\nfunction pushDateHist(hist: IDateBin[], v: Date, count: number = 1) {\n  if (v < hist[0].x1) {\n    hist[0].count += count;\n    return;\n  }\n  const l = hist.length - 1;\n  if (v > hist[l].x0) {\n    hist[l].count += count;\n    return;\n  }\n  if (l === 2) {\n    hist[1].count += count;\n    return;\n  }\n\n  let low = 1;\n  let high = l;\n  // binary search\n  while (low < high) {\n    const center = Math.floor((high + low) / 2);\n    if (v < hist[center].x1) {\n      high = center;\n    } else {\n      low = center + 1;\n    }\n  }\n  hist[low].count += count;\n}\n/**\n * @internal\n */\nexport function dateStatsBuilder(template?: IDateStatistics): IBuilder<Date | null, IDateStatistics> {\n  let min: Date | null = null;\n  let max: Date | null = null;\n  let count = 0;\n  let missing = 0;\n\n  // yyyymmdd, count\n  const byDay = new Map<number, {x: Date, count: number}>();\n  const templateHist = template ? template.hist.map((d) => ({x0: d.x0, x1: d.x1, count: 0})) : null;\n\n  const push = (v: Date | null) => {\n    count += 1;\n    if (!v || v == null) {\n      missing += 1;\n      return;\n    }\n    if (min == null || v < min) {\n      min = v;\n    }\n    if (max == null || v > max) {\n      max = v;\n    }\n    if (templateHist) {\n      pushDateHist(templateHist, v, 1);\n      return;\n    }\n    const key = v.getFullYear() * 10000 + v.getMonth() * 100 + v.getDate();\n    if (byDay.has(key)) {\n      byDay.get(key)!.count++;\n    } else {\n      byDay.set(key, {count: 1, x: v});\n    }\n  };\n\n  const build = () => {\n    if (templateHist) {\n      return {\n        min,\n        max,\n        missing,\n        count,\n        maxBin: templateHist.reduce((acc, h) => Math.max(acc, h.count), 0),\n        hist: templateHist,\n        histGranularity: template!.histGranularity\n      };\n    }\n    // copy template else derive\n    const {histGranularity, hist} = computeGranularity(min, max);\n\n    byDay.forEach((v) => pushDateHist(hist, v.x, v.count));\n\n    return {\n      min,\n      max,\n      missing,\n      count,\n      maxBin: hist.reduce((acc, h) => Math.max(acc, h.count), 0),\n      hist,\n      histGranularity\n    };\n  };\n\n  return {push, build, pushAll: pushAll(push)};\n}\n\n/**\n * computes a categorical histogram\n * @param arr the data array\n * @param categories the list of known categories\n * @returns {{hist: {cat: string, y: number}[]}}\n * @internal\n */\nexport function categoricalStatsBuilder(categories: {name: string}[]): IBuilder<{name: string} | null, ICategoricalStatistics> {\n  const m = new Map<string, number>();\n  categories.forEach((cat) => m.set(cat.name, 0));\n\n  let missing = 0;\n  let count = 0;\n\n  const push = (v: ICategory | null) => {\n    count += 1;\n    if (v == null) {\n      missing += 1;\n    } else {\n      m.set(v.name, (m.get(v.name) || 0) + 1);\n    }\n  };\n\n  const build = () => {\n    const entries: ICategoricalBin[] = categories.map((d) => ({cat: d.name, count: m.get(d.name)!}));\n    const maxBin = entries.reduce((a, b) => Math.max(a, b.count), Number.NEGATIVE_INFINITY);\n\n    return {\n      maxBin,\n      hist: entries,\n      count,\n      missing\n    };\n  };\n\n  return {push, build, pushAll: pushAll(push)};\n}\n\n/**\n * round to the given commas similar to d3.round\n * @param {number} v\n * @param {number} precision\n * @returns {number}\n * @internal\n */\nexport function round(v: number, precision: number = 0) {\n  if (precision === 0) {\n    return Math.round(v);\n  }\n  const scale = Math.pow(10, precision);\n  return Math.round(v * scale) / scale;\n}\n\n/**\n * compares two number whether they are similar up to delta\n * @param {number} a first numbre\n * @param {number} b second number\n * @param {number} delta\n * @returns {boolean} a and b are similar\n * @internal\n */\nexport function similar(a: number, b: number, delta = 0.5) {\n  if (a === b) {\n    return true;\n  }\n  return Math.abs(a - b) < delta;\n}\n\n\n/**\n * @internal\n */\nexport function isPromiseLike<T>(value: any): value is PromiseLike<T> {\n  return value instanceof Promise || typeof value.then === 'function';\n}\n\n\n/**\n * @internal\n */\nexport function createIndexArray(length: number, dataSize = length) {\n  if (dataSize <= 255) {\n    return new Uint8Array(length);\n  }\n  if (dataSize <= 65535) {\n    return new Uint16Array(length);\n  }\n  return new Uint32Array(length);\n}\n\n/**\n * @internal\n */\nexport function toIndexArray(arr: ISequence<number> | IndicesArray, maxDataIndex?: number): UIntTypedArray {\n  if (arr instanceof Uint8Array || arr instanceof Uint16Array || arr instanceof Uint32Array) {\n    return arr.slice();\n  }\n  const l = maxDataIndex != null ? maxDataIndex : arr.length;\n  if (l <= 255) {\n    return Uint8Array.from(arr);\n  }\n  if (l <= 65535) {\n    return Uint16Array.from(arr);\n  }\n  return Uint32Array.from(arr);\n}\n\nfunction createLike(template: IndicesArray, total: number, maxDataIndex?: number) {\n  if (template instanceof Uint8Array) {\n    return new Uint8Array(total);\n  }\n  if (template instanceof Uint16Array) {\n    return new Uint16Array(total);\n  }\n  if (template instanceof Uint32Array) {\n    return new Uint32Array(total);\n  }\n  return createIndexArray(total, maxDataIndex);\n}\n\n/**\n * @internal\n */\nexport function joinIndexArrays(groups: IndicesArray[], maxDataIndex?: number) {\n  switch (groups.length) {\n    case 0:\n      return [];\n    case 1:\n      return groups[0];\n    default:\n      const total = groups.reduce((a, b) => a + b.length, 0);\n      const r = createLike(groups[0], total, maxDataIndex);\n      let shift = 0;\n      for (const g of groups) {\n        r.set(g, shift);\n        shift += g.length;\n      }\n      return r;\n  }\n}\n\n\nfunction asc(a: any, b: any) {\n  return a < b ? -1 : ((a > b) ? 1 : 0);\n}\n\nfunction desc(a: any, b: any) {\n  return a < b ? 1 : ((a > b) ? -1 : 0);\n}\n\n\nexport declare type ILookUpArray = Uint8Array | Uint16Array | Uint32Array | Int8Array | Int16Array | Int32Array | string[] | Float32Array | Float64Array;\n\n/**\n * sort the given index array based on the lookup array\n * @internal\n */\nexport function sortComplex(indices: UIntTypedArray | number[], comparators: {asc: boolean, lookup: ILookUpArray}[]) {\n  if (indices.length < 2) {\n    return indices;\n  }\n\n  switch (comparators.length) {\n    case 0:\n      // sort by indices\n      return indices.sort();\n    case 1:\n      const c = comparators[0]!.asc ? asc : desc;\n      const cLookup = comparators[0]!.lookup;\n      return indices.sort((a, b) => {\n        const r = c(cLookup[a]!, cLookup[b]!);\n        return r !== 0 ? r : a - b;\n      });\n    case 2:\n      const c1 = comparators[0]!.asc ? asc : desc;\n      const c1Lookup = comparators[0]!.lookup;\n      const c2 = comparators[1]!.asc ? asc : desc;\n      const c2Lookup = comparators[1]!.lookup;\n      return indices.sort((a, b) => {\n        let r = c1(c1Lookup[a], c1Lookup[b]);\n        r = r !== 0 ? r : c2(c2Lookup[a], c2Lookup[b]);\n        return r !== 0 ? r : a - b;\n      });\n    default:\n      const l = comparators.length;\n      const fs = comparators.map((d) => d.asc ? asc : desc);\n      return indices.sort((a, b) => {\n        for (let i = 0; i < l; ++i) {\n          const l = comparators[i].lookup;\n          const r = fs[i](l[a], l[b]);\n          if (r !== 0) {\n            return r;\n          }\n        }\n        return a - b;\n      });\n  }\n}\n\n// note the whole worker thing is in this one file to be able to copy the code\n\n/**\n * base worker message\n * @internal\n */\nexport interface IWorkerMessage {\n  type: string;\n  uid: number;\n}\n\n/**\n * @internal\n */\nexport interface IStatsWorkerMessage extends IWorkerMessage {\n  /**\n   * reference key for the indices array\n   */\n  refIndices: string | null;\n  indices?: UIntTypedArray;\n\n  /**\n   * reference key for the data indices\n   */\n  refData: string;\n  data?: UIntTypedArray | Float32Array | Int32Array | Float64Array;\n}\n\n/**\n * @internal\n */\nexport interface ISortMessageRequest {\n  type: 'sort';\n  uid: number;\n\n  ref: string;\n  indices: UIntTypedArray;\n  sortOrders?: {asc: boolean, lookup: ILookUpArray}[];\n}\n\n/**\n * @internal\n */\nexport interface ISortMessageResponse {\n  type: 'sort';\n\n  ref: string;\n  order: IndicesArray;\n}\n\n/**\n * @internal\n */\nexport interface IDeleteRefMessageRequest {\n  type: 'deleteRef';\n\n  ref: string;\n  startsWith?: boolean;\n}\n\n/**\n * @internal\n */\nexport interface ISetRefMessageRequest {\n  type: 'setRef';\n  uid: number;\n\n  ref: string;\n  data: UIntTypedArray | Float32Array | Int32Array | Float64Array | null;\n}\n\n/**\n * @internal\n */\nexport interface IDateStatsMessageRequest {\n  type: 'dateStats';\n  uid: number;\n\n  refIndices: string | null;\n  indices?: UIntTypedArray;\n\n  refData: string;\n  data?: UIntTypedArray;\n\n  template?: IDateStatistics;\n}\n\n/**\n * @internal\n */\nexport interface IDateStatsMessageResponse {\n  type: 'dateStats';\n  uid: number;\n\n  stats: IDateStatistics;\n}\n\n/**\n * @internal\n */\nexport interface INumberStatsMessageRequest {\n  type: 'numberStats';\n  uid: number;\n\n  refIndices: string | null;\n  indices?: UIntTypedArray;\n\n  refData: string;\n  data?: Float32Array;\n\n  numberOfBins: number;\n}\n\n/**\n * @internal\n */\nexport interface INumberStatsMessageResponse {\n  type: 'numberStats';\n  uid: number;\n\n  stats: IStatistics;\n}\n\n/**\n * @internal\n */\nexport interface IBoxPlotStatsMessageRequest {\n  type: 'boxplotStats';\n  uid: number;\n\n  refIndices: string | null;\n  indices?: UIntTypedArray;\n\n  refData: string;\n  data?: Float32Array;\n}\n\n/**\n * @internal\n */\nexport interface IBoxPlotStatsMessageResponse {\n  type: 'boxplotStats';\n  uid: number;\n\n  stats: IAdvancedBoxPlotData;\n}\n\n/**\n * @internal\n */\nexport interface ICategoricalStatsMessageRequest {\n  type: 'categoricalStats';\n  uid: number;\n\n  refIndices: string | null;\n  indices?: UIntTypedArray;\n\n  refData: string;\n  data?: UIntTypedArray;\n\n  categories: string[];\n}\n\n/**\n * @internal\n */\nexport interface ICategoricalStatsMessageResponse {\n  type: 'categoricalStats';\n  uid: number;\n\n  stats: ICategoricalStatistics;\n}\n\n/**\n * helper to build a value cache for dates, use dateValueCache2Value to convert back\n * @internal\n */\nexport function dateValueCacheBuilder(length: number) {\n  const vs = new Float64Array(length);\n  let i = 0;\n  return {\n    push: (d: Date | null) => vs[i++] = d == null ? NaN : d.getTime(),\n    cache: vs\n  };\n}\n\n/**\n * @internal\n */\nexport function dateValueCache2Value(v: number) {\n  return isNaN(v) ? null : new Date(v);\n}\n\n/**\n * @internal\n */\nexport function categoricalValueCacheBuilder(length: number, categories: {name: string}[]) {\n  const vs = createIndexArray(length, categories.length + 1);\n  const name2index = new Map<string, number>();\n  for (let i = 0; i < categories.length; ++i) {\n    name2index.set(categories[i].name, i + 1); // shift by one for missing = 0\n  }\n  let i = 0;\n  return {\n    push: (d: {name: string} | null) => vs[i++] = d == null ? 0 : name2index.get(d.name) || 0,\n    cache: vs\n  };\n}\n\n/**\n * @internal\n */\nexport function categoricalValueCache2Value<T extends {name: string}>(v: number, categories: T[]) {\n  return v === 0 ? null : categories[v - 1];\n}\n\n\nfunction sortWorkerMain() {\n  const wself = <IPoorManWorkerScope><any>self;\n\n  // stored refs to avoid duplicate copy\n  const refs = new Map<string, UIntTypedArray | Float32Array | Int32Array | Float64Array>();\n\n  const sort = (r: ISortMessageRequest) => {\n    if (r.sortOrders) {\n      sortComplex(r.indices, r.sortOrders);\n    }\n    const order = r.indices;\n\n    wself.postMessage(<ISortMessageResponse>{\n      type: r.type,\n      uid: r.uid,\n      ref: r.ref,\n      order\n    }, [r.indices.buffer]);\n  };\n\n  const setRef = (r: ISetRefMessageRequest) => {\n    if (r.data) {\n      refs.set(r.ref, r.data);\n    } else {\n      refs.delete(r.ref);\n    }\n  };\n\n  const deleteRef = (r: IDeleteRefMessageRequest) => {\n    if (!r.startsWith) {\n      refs.delete(r.ref);\n      return;\n    }\n\n    for (const key of Array.from(refs.keys())) {\n      if (key.startsWith(r.ref)) {\n        refs.delete(key);\n      }\n    }\n  };\n\n  const resolveRefs = <T extends UIntTypedArray | Float32Array | Int32Array>(r: IStatsWorkerMessage) => {\n    // resolve refs or save the new data\n\n    const data: T = r.data ? <T><any>r.data : <T><any>refs.get(r.refData)!;\n    const indices = r.indices ? r.indices : (r.refIndices ? <UIntTypedArray>refs.get(r.refIndices)! : undefined);\n    if (r.refData) {\n      refs.set(r.refData, data);\n    }\n    if (r.refIndices) {\n      refs.set(r.refIndices, indices!);\n    }\n    return {data, indices};\n  };\n\n  const dateStats = (r: IDateStatsMessageRequest) => {\n    const {data, indices} = resolveRefs<Int32Array>(r);\n\n    const b = dateStatsBuilder(r.template);\n    if (indices) {\n      // tslint:disable-next-line:prefer-for-of\n      for (let ii = 0; ii < indices.length; ++ii) {\n        const v = data[indices[ii]];\n        b.push(dateValueCache2Value(v));\n      }\n    } else {\n      // tslint:disable-next-line:prefer-for-of\n      for (let i = 0; i < data.length; ++i) {\n        b.push(dateValueCache2Value(data[i]));\n      }\n    }\n    wself.postMessage(<IDateStatsMessageResponse>{\n      type: r.type,\n      uid: r.uid,\n      stats: b.build()\n    });\n  };\n\n  const categoricalStats = (r: ICategoricalStatsMessageRequest) => {\n    const {data, indices} = resolveRefs<UIntTypedArray>(r);\n\n    const cats = r.categories.map((name) => ({name}));\n    const b = categoricalStatsBuilder(cats);\n    if (indices) {\n      // tslint:disable-next-line:prefer-for-of\n      for (let ii = 0; ii < indices.length; ++ii) {\n        b.push(categoricalValueCache2Value(data[indices[ii]], cats));\n      }\n    } else {\n      // tslint:disable-next-line:prefer-for-of\n      for (let i = 0; i < data.length; ++i) {\n        b.push(categoricalValueCache2Value(data[i], cats));\n      }\n    }\n\n    wself.postMessage(<ICategoricalStatsMessageResponse>{\n      type: r.type,\n      uid: r.uid,\n      stats: b.build()\n    });\n  };\n\n  const numberStats = (r: INumberStatsMessageRequest) => {\n    const {data, indices} = resolveRefs<Float32Array>(r);\n\n    const b = normalizedStatsBuilder(r.numberOfBins);\n\n    if (indices) {\n      // tslint:disable-next-line:prefer-for-of\n      for (let ii = 0; ii < indices.length; ++ii) {\n        b.push(data[indices[ii]]);\n      }\n    } else {\n      // tslint:disable-next-line:prefer-for-of\n      for (let i = 0; i < data.length; ++i) {\n        b.push(data[i]);\n      }\n    }\n\n    wself.postMessage(<INumberStatsMessageResponse>{\n      type: r.type,\n      uid: r.uid,\n      stats: b.build()\n    });\n  };\n\n  const boxplotStats = (r: IBoxPlotStatsMessageRequest) => {\n    const {data, indices} = resolveRefs<Float32Array>(r);\n\n    const b = boxplotBuilder(indices ? indices.length : undefined);\n\n    let stats: IAdvancedBoxPlotData;\n    if (!indices) {\n      stats = b.buildArr(data);\n    } else {\n      // tslint:disable-next-line:prefer-for-of\n      for (let ii = 0; ii < indices.length; ++ii) {\n        b.push(data[indices[ii]]);\n      }\n      stats = b.build();\n    }\n\n    wself.postMessage(<IBoxPlotStatsMessageResponse>{\n      type: r.type,\n      uid: r.uid,\n      stats\n    });\n  };\n\n  // message type to handler function\n  const msgHandlers: {[key: string]: (r: any) => void} = {\n    sort,\n    setRef,\n    deleteRef,\n    dateStats,\n    categoricalStats,\n    numberStats,\n    boxplotStats\n  };\n\n  wself.addEventListener('message', (evt) => {\n    const r = evt.data;\n    if (typeof r.uid !== 'number' || typeof r.type !== 'string') {\n      return;\n    }\n    const h = msgHandlers[r.type];\n    if (h) {\n      h(r);\n    }\n  });\n}\n\n/**\n * copy source code of a worker and create a blob out of it\n * to avoid webpack imports all the code functions need to be in this file\n * @internal\n */\nexport function createWorkerBlob() {\n  return createWorkerCodeBlob([\n    pushAll.toString(),\n    quantile.toString(),\n    normalizedStatsBuilder.toString(),\n    boxplotBuilder.toString(),\n    computeGranularity.toString(),\n    pushDateHist.toString(),\n    dateStatsBuilder.toString(),\n    categoricalStatsBuilder.toString(),\n    createIndexArray.toString(),\n    asc.toString(),\n    desc.toString(),\n    sortComplex.toString(),\n    dateValueCache2Value.toString(),\n    categoricalValueCache2Value.toString(),\n    toFunctionBody(sortWorkerMain)\n  ]);\n}\n","\n/** @internal */\nexport function equalArrays<T>(a: T[], b: T[]) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  return a.every((ai, i) => ai === b[i]);\n}\n\n\n/**\n * converts a given id to css compatible one\n * @param id\n * @return {string|void}\n * @internal\n */\nexport function fixCSS(id: string) {\n  return id.replace(/[\\s!#$%&'()*+,.\\/:;<=>?@\\[\\\\\\]^`{|}~]+/g, '_'); //replace non css stuff to _\n}\n\n/**\n * clear node clearing\n * @param node\n * @internal\n */\nexport function clear<T extends Node>(node: T) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n  return node;\n}\n\n/**\n * @internal\n * to avoid [].concat(...) which doesn't work for large arrays\n * @param arrs\n */\nexport function concat<T>(arrs: (T[] | T)[]): T[] {\n  const r: T[] = [];\n  for (const a of arrs) {\n    if (!Array.isArray(a)) {\n      r.push(a);\n      continue;\n    }\n    for (const ai of a) {\n      r.push(ai);\n    }\n  }\n  return r;\n}\n\n\n/**\n * generates a label for the given sort method\n * @internal\n * @param method sort method\n */\nexport function getSortLabel(method: string) {\n  switch (method) {\n    case 'min':\n      return 'Mininum';\n    case 'max':\n      return 'Maximum';\n    case 'median':\n      return 'Median';\n    case 'mean':\n      return 'Mean';\n    case 'q1':\n      return '25% Quantile';\n    case 'q3':\n      return '75% Quantile';\n    default:\n      return String(method);\n  }\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import {dispatch, Dispatch} from 'd3-dispatch';\n\n/**\n * helper function to suffix the given event types\n * @internal\n */\nexport function suffix(suffix: string, ...prefix: string[]) {\n  return prefix.map((p) => `${p}${suffix}`);\n}\n\nexport interface IEventContext {\n  /**\n   * who is sending this event\n   */\n  readonly source: AEventDispatcher;\n\n  /**\n   * who was sending this event in case of forwarding\n   */\n  readonly origin: AEventDispatcher;\n  /**\n   * the event type\n   */\n  readonly type: string;\n  /**\n   * in case of multi propagation the 'main' event type, aka the first one\n   */\n  readonly primaryType: string;\n  /**\n   * the arguments to the listener\n   */\n  readonly args: any[];\n}\n\nexport interface IEventListener {\n  (this: IEventContext, ...args: any[]): any;\n}\n\nexport interface IEventHandler {\n  on(type: string | string[], listener: IEventListener | null): this;\n}\n\nconst __DEBUG = false;\n\n/**\n * base class for event dispatching using d3 event mechanism, thus .suffix is supported for multiple registrations\n */\nexport default class AEventDispatcher implements IEventHandler {\n  private readonly listeners: Dispatch<any>;\n  private readonly listenerEvents: Set<string>;\n  private readonly forwarder: (...args: any[]) => void;\n\n  constructor() {\n    const events = this.createEventList();\n    this.listenerEvents = new Set(events);\n    this.listeners = dispatch(...events);\n\n    const that = this;\n    this.forwarder = function (this: IEventContext, ...args: any[]) {\n      that.fireImpl(this.type, this.primaryType, this.origin, ...args);\n    };\n  }\n\n  on(type: string | string[], listener: IEventListener | null): this {\n    if (Array.isArray(type)) {\n      type.forEach((d) => {\n        if (this.listenerEvents.has(d.split('.')[0])) {\n          this.listenersChanged(d, Boolean(listener!));\n          this.listeners.on(d, listener!);\n        } else if (__DEBUG && !d.includes('.')) {\n          console.warn(this, 'invalid event type', d);\n        }\n      });\n    } else if (this.listenerEvents.has((<string>type).split('.')[0])) {\n      this.listenersChanged(<string>type, Boolean(listener!));\n      this.listeners.on(<string>type, listener!);\n    } else if (__DEBUG && !type.includes('.')) {\n      console.warn(this, 'invalid event type', type);\n    }\n    return this;\n  }\n\n  /**\n   * helper function that will be called upon a listener has changed\n   * @param _type event type\n   * @param _active registered or deregistered\n   */\n  protected listenersChanged(_type: string, _active: boolean) {\n    // hook\n  }\n\n  /**\n   * return the list of events to be able to dispatch\n   * @return {Array} by default no events\n   */\n  protected createEventList(): string[] {\n    return [];\n  }\n\n  protected fire(type: string | string[], ...args: any[]) {\n    const primaryType = Array.isArray(type) ? type[0] : type;\n    this.fireImpl(type, primaryType, this, ...args);\n  }\n\n  private fireImpl(type: string | string[], primaryType: string, origin: AEventDispatcher, ...args: any[]) {\n    const fireImpl = (t: string) => {\n      if (!this.listenerEvents.has(t)) {\n        if (__DEBUG) {\n          console.warn(this, 'invalid event type', t);\n        }\n        return;\n      }\n      //local context per event, set a this argument\n      const context: IEventContext = {\n        source: this, //who is sending this event,\n        origin,\n        type: t, //the event type\n        primaryType, //in case of multi propagation the 'main' event type\n        args //the arguments to the listener\n      };\n      this.listeners.apply(t, context, args);\n    };\n    if (Array.isArray(type)) {\n      type.forEach(fireImpl);\n    } else {\n      fireImpl(<string>type);\n    }\n  }\n\n  /**\n   * forwards one or more events from a given dispatcher to the current one\n   * i.e. when one of the given events is fired in 'from' it will be forwarded to all my listeners\n   * @param {IEventHandler} from the event dispatcher to forward from\n   * @param {string[]} types the event types to forward\n   */\n  protected forward(from: IEventHandler, ...types: string[]) {\n    from.on(types, this.forwarder);\n  }\n\n  /**\n   * removes the forwarding declarations\n   * @param {IEventHandler} from the originated dispatcher\n   * @param {string[]} types event types to forward\n   */\n  protected unforward(from: IEventHandler, ...types: string[]) {\n    from.on(types, null);\n  }\n}\n","import Column from './Column';\nimport Ranking from './Ranking';\nimport CompositeColumn from './CompositeColumn';\nimport {IColorMappingFunction, IMappingFunction} from './INumberColumn';\nimport {ICategoricalColorMappingFunction, ICategory} from './ICategoricalColumn';\nimport {IScriptMappingFunctionType} from './MappingFunction';\n\n\nexport interface IColumnConstructor {\n  new(id: string, desc: Readonly<IColumnDesc> & any, factory: ITypeFactory): Column;\n}\n\nexport interface IStyleColumn {\n  /**\n   * column description\n   */\n  description: string;\n\n  /**\n   * column summary line (subtitle)\n   */\n  summary: string;\n\n  /**\n   * color of this column\n   * @deprecated not used anymore\n   */\n  color: string;\n\n  /**\n   * frozen column\n   * @default isSupportType\n   */\n  frozen: boolean;\n\n  /**\n   * whether the column can be removed or not\n   * @default false\n   */\n  fixed: boolean;\n\n  /**\n   * default renderer to use\n   */\n  renderer: string;\n\n  /**\n   * default group renderer to use\n   */\n  groupRenderer: string;\n\n  /**\n   * default summary renderer to use\n   */\n  summaryRenderer: string;\n\n  /**\n   * initial width of the column\n   * @default 100 or 200 for strings\n   */\n  width: number;\n\n  /**\n   * is this column visible by default\n   * @default true\n   */\n  visible: boolean;\n}\n\n/**\n * default color that should be used\n * @type {string}\n */\nexport const DEFAULT_COLOR = '#C1C1C1';\n\n\nexport interface IColumnDesc extends Partial<IStyleColumn> {\n  /**\n   * label of the column\n   */\n  label: string;\n  /**\n   * the column type\n   */\n  type: string;\n}\n\nexport interface IValueColumnDesc<T> extends IColumnDesc {\n  /**\n   * is the data lazy loaded and not yet available\n   * @default false\n   */\n  lazyLoaded?: boolean;\n\n  /**\n   * value accessor of this column\n   * @param row the current row\n   * @param desc the description of this column\n   */\n  accessor?(row: IDataRow, desc: Readonly<IValueColumnDesc<T>>): T;\n}\n\nexport interface IFlatColumn {\n  readonly col: Column;\n  readonly offset: number;\n  readonly width: number;\n}\n\nexport interface IColumnParent {\n  remove(col: Column): boolean;\n\n  insert(col: Column, index?: number): Column | null;\n\n  insertAfter(col: Column, reference: Column): Column | null;\n\n  move(col: Column, index?: number): Column | null;\n\n  moveAfter(col: Column, reference: Column): Column | null;\n\n  findMyRanker(): Ranking | null;\n\n  readonly fqid: string;\n\n  indexOf(col: Column): number;\n\n  at(index: number): Column;\n\n  readonly fqpath: string;\n\n}\n\n\nexport interface IColumnMetaData {\n  label: string;\n  summary: string;\n  description: string;\n}\n\nexport declare type ICompareValue = string | number | null;\n\n\n/**\n * a data row for rendering\n */\nexport interface IDataRow {\n  /**\n   * the value\n   */\n  readonly v: any;\n  /**\n   * the underlying data index\n   */\n  readonly i: number;\n}\n\n\nexport interface IGroup {\n  name: string;\n  color: string;\n  parent?: Readonly<IGroupParent> | null;\n}\n\nexport declare type IndicesArray = (ReadonlyArray<number> | UIntTypedArray) & ArrayLike<number>;\n\nexport interface IOrderedGroup extends IGroup {\n  order: IndicesArray;\n}\n\nexport const defaultGroup: IGroup = {\n  name: 'Default',\n  color: 'gray'\n};\n\nexport const othersGroup: IGroup = {\n  name: 'Others',\n  color: 'gray'\n};\n\n\nexport interface IGroupParent extends IGroup {\n  subGroups: (Readonly<IGroupParent> | Readonly<IGroup>)[];\n}\n\nexport interface IGroupItem {\n  readonly dataIndex: number;\n  readonly group: Readonly<IOrderedGroup>;\n  readonly relativeIndex: number;\n}\n\nexport declare type IGroupData = Readonly<IOrderedGroup>;\n\nexport function isGroup(item: IGroupData | IGroupItem): item is IGroupData {\n  return item && (<IGroupItem>item).group == null; // use .group as separator\n}\n\nexport declare type UIntTypedArray = Uint8Array | Uint16Array | Uint32Array;\n\nexport enum ECompareValueType {\n  BINARY,\n  COUNT, // count max to the number of rows\n  UINT8,\n  UINT16,\n  UINT32,\n  INT8,\n  INT16,\n  INT32,\n  FLOAT,\n  FLOAT_ASC,\n  DOUBLE,\n  DOUBLE_ASC,\n  STRING\n}\n\n\nexport interface ITypedDump {\n  readonly type: string;\n  [key: string]: any;\n}\n\n\nexport interface IColumnDump {\n  id: string;\n  width?: number;\n  desc: any;\n  label?: string;\n  summary?: string;\n  renderer?: string;\n  /**\n   * @deprecated\n   */\n  rendererType?: string;\n  groupRenderer?: string;\n  summaryRenderer?: string;\n\n  // type specific\n  [key: string]: any;\n}\n\nexport interface IRankingDump {\n  /**\n   * columsn of this ranking\n   */\n  columns?: IColumnDump[];\n\n  /**\n   * sort criteria\n   */\n  sortCriteria?: {asc: boolean, sortBy: string}[];\n\n  /**\n   * group sort criteria\n   */\n  groupSortCriteria?: {asc: boolean, sortBy: string}[];\n\n  /**\n   * uids of group columns\n   */\n  groupColumns?: string[];\n\n  /**\n   * compatability\n   * @deprecated\n   */\n  sortColumn?: {sortBy: string, asc: boolean};\n}\n\nexport interface ITypeFactory {\n  (dump: IColumnDump): Column;\n\n  colorMappingFunction(dump?: ITypedDump | string | ((v: number) => string)): IColorMappingFunction;\n  mappingFunction(dump?: ITypedDump | IScriptMappingFunctionType): IMappingFunction;\n  categoricalColorMappingFunction(dump: ITypedDump | undefined, categories: ICategory[]): ICategoricalColorMappingFunction;\n}\n\nexport interface IMultiLevelColumn extends CompositeColumn {\n  getCollapsed(): boolean;\n\n  setCollapsed(value: boolean): void;\n}\n\nexport function isMultiLevelColumn(col: Column): col is IMultiLevelColumn {\n  return typeof ((<IMultiLevelColumn>col).getCollapsed) === 'function';\n}\n\nexport interface ISortCriteria {\n  readonly col: Column;\n  readonly asc: boolean;\n}\n","import {AEventDispatcher, ISequence, similar, fixCSS, IEventListener} from '../internal';\nimport {isSortingAscByDefault} from './annotations';\nimport {IColumnDump, ISortCriteria, defaultGroup, ECompareValueType, IColumnDesc, IDataRow, IGroup, IColumnParent, IColumnMetaData, IFlatColumn, ICompareValue, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport Ranking from './Ranking';\n\n/**\n * emitted when the width property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function widthChanged(previous: number, current: number): void;\n\n/**\n * emitted when the label property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function labelChanged(previous: string, current: string): void;\n\n/**\n * emitted when the meta data property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function metaDataChanged(previous: IColumnMetaData, current: IColumnMetaData): void;\n\n/**\n * emitted when state of the column is dirty\n * @asMemberOf Column\n * @event\n */\nexport declare function dirty(): void;\n\n/**\n * emitted when state of the column related to its header is dirty\n * @asMemberOf Column\n * @event\n */\nexport declare function dirtyHeader(): void;\n\n/**\n * emitted when state of the column related to its values is dirty\n * @asMemberOf Column\n * @event\n */\nexport declare function dirtyValues(): void;\n\n/**\n * emitted when state of the column related to cached values (hist, compare, ...) is dirty\n * @asMemberOf Column\n * @event\n */\nexport declare function dirtyCaches(): void;\n\n/**\n * emitted when the renderer type property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function rendererTypeChanged(previous: string, current: string): void;\n\n/**\n * emitted when the group renderer property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function groupRendererChanged(previous: string, current: string): void;\n\n/**\n * emitted when the pattern property changes\n * @asMemberOf Column\n * @event\n */\nexport declare function summaryRendererChanged(previous: string, current: string): void;\n\n/**\n * emitted when the visibility of this column changes\n * @asMemberOf Column\n * @event\n */\nexport declare function visibilityChanged(previous: boolean, current: boolean): void;\n\n/**\n * a column in LineUp\n */\nexport default class Column extends AEventDispatcher {\n  /**\n   * magic variable for showing all columns\n   * @type {number}\n   */\n  static readonly FLAT_ALL_COLUMNS = -1;\n\n  static readonly EVENT_WIDTH_CHANGED = 'widthChanged';\n  static readonly EVENT_LABEL_CHANGED = 'labelChanged';\n  static readonly EVENT_METADATA_CHANGED = 'metaDataChanged';\n  static readonly EVENT_DIRTY = 'dirty';\n  static readonly EVENT_DIRTY_HEADER = 'dirtyHeader';\n  static readonly EVENT_DIRTY_VALUES = 'dirtyValues';\n  static readonly EVENT_DIRTY_CACHES = 'dirtyCaches';\n  static readonly EVENT_RENDERER_TYPE_CHANGED = 'rendererTypeChanged';\n  static readonly EVENT_GROUP_RENDERER_TYPE_CHANGED = 'groupRendererChanged';\n  static readonly EVENT_SUMMARY_RENDERER_TYPE_CHANGED = 'summaryRendererChanged';\n  static readonly EVENT_VISIBILITY_CHANGED = 'visibilityChanged';\n\n  /**\n   * the id of this column\n   */\n  private uid: string;\n\n  /**\n   * width of the column\n   * @type {number}\n   * @private\n   */\n  private width: number = 100;\n\n  /**\n   * parent column of this column, set when added to a ranking or combined column\n   */\n  parent: Readonly<IColumnParent> | null = null;\n\n  private metadata: Readonly<IColumnMetaData>;\n  private renderer: string;\n  private groupRenderer: string;\n  private summaryRenderer: string;\n  private visible: boolean;\n\n  constructor(id: string, public readonly desc: Readonly<IColumnDesc>) {\n    super();\n    this.uid = fixCSS(id);\n    this.renderer = this.desc.renderer || this.desc.type;\n    this.groupRenderer = this.desc.groupRenderer || this.desc.type;\n    this.summaryRenderer = this.desc.summaryRenderer || this.desc.type;\n    this.width = this.desc.width != null && this.desc.width > 0 ? this.desc.width : 100;\n    this.visible = this.desc.visible !== false;\n\n    this.metadata = {\n      label: desc.label || this.id,\n      summary: desc.summary || '',\n      description: desc.description || ''\n    };\n  }\n\n  get fixed() {\n    return Boolean(this.desc.fixed);\n  }\n\n  get frozen() {\n    return Boolean(this.desc.frozen);\n  }\n\n  get id() {\n    return this.uid;\n  }\n\n  assignNewId(idGenerator: () => string) {\n    this.uid = fixCSS(idGenerator());\n  }\n\n  get label() {\n    return this.metadata.label;\n  }\n\n  get description() {\n    return this.metadata.description;\n  }\n\n  /**\n   * returns the fully qualified id i.e. path the parent\n   * @returns {string}\n   */\n  get fqid() {\n    return this.parent ? `${this.parent.fqid}_${this.id}` : this.id;\n  }\n\n  get fqpath() {\n    return this.parent ? `${this.parent.fqpath}@${this.parent.indexOf(this)}` : '';\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([Column.EVENT_WIDTH_CHANGED,\n    Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED,\n    Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED,\n    Column.EVENT_DIRTY, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES]);\n  }\n\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  getWidth() {\n    return this.width;\n  }\n\n  hide() {\n    this.setVisible(false);\n  }\n\n  show() {\n    this.setVisible(true);\n  }\n\n  isVisible() {\n    return this.visible;\n  }\n\n  getVisible() {\n    return this.isVisible();\n  }\n\n  setVisible(value: boolean) {\n    if (this.visible === value) {\n      return;\n    }\n    this.fire([Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.visible, this.visible = value);\n  }\n\n  /**\n   * visitor pattern for flattening the columns\n   * @param {IFlatColumn} r the result array\n   * @param {number} offset left offset\n   * @param {number} _levelsToGo how many levels down\n   * @param {number} _padding padding between columns\n   * @returns {number} the used width by this column\n   */\n  flatten(r: IFlatColumn[], offset: number, _levelsToGo = 0, _padding = 0): number {\n    const w = this.getWidth();\n    r.push({col: this, offset, width: w});\n    return w;\n  }\n\n  setWidth(value: number) {\n    if (similar(this.width, value, 0.5)) {\n      return;\n    }\n    this.fire([Column.EVENT_WIDTH_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.width, this.width = value);\n  }\n\n  setWidthImpl(value: number) {\n    this.width = value;\n  }\n\n  setMetaData(value: Readonly<IColumnMetaData>) {\n    if (value.label === this.label && this.description === value.description && this.metadata.summary === value.summary) {\n      return;\n    }\n    const bak = this.getMetaData();\n    //copy to avoid reference\n    this.metadata = {\n      label: value.label,\n      summary: value.summary,\n      description: value.description\n    };\n\n    this.fire([Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], bak, this.getMetaData());\n  }\n\n  getMetaData(): Readonly<IColumnMetaData> {\n    return Object.assign({}, this.metadata);\n  }\n\n  /**\n   * triggers that the ranking is sorted by this column\n   * @param ascending ascending order?\n   * @param priority sorting priority\n   * @returns {boolean} was successful\n   */\n  sortByMe(ascending = isSortingAscByDefault(this), priority = 0) {\n    const r = this.findMyRanker();\n    if (r) {\n      return r.sortBy(this, ascending, priority);\n    }\n    return false;\n  }\n\n  groupByMe(): boolean {\n    const r = this.findMyRanker();\n    if (r) {\n      return r.toggleGrouping(this);\n    }\n    return false;\n  }\n\n  /**\n   *\n   * @return {number}\n   */\n  isGroupedBy(): number {\n    const r = this.findMyRanker();\n    if (!r) {\n      return -1;\n    }\n    return r.getGroupCriteria().indexOf(this);\n  }\n\n  /**\n   * toggles the sorting order of this column in the ranking\n   * @returns {boolean} was successful\n   */\n  toggleMySorting() {\n    const r = this.findMyRanker();\n    if (r) {\n      return r.toggleSorting(this);\n    }\n    return false;\n  }\n\n  private isSortedByMeImpl(selector: ((r: Ranking) => ISortCriteria[])): {asc: 'asc' | 'desc' | undefined, priority: number | undefined} {\n    const ranker = this.findMyRanker();\n    if (!ranker) {\n      return {asc: undefined, priority: undefined};\n    }\n    const criterias = selector(ranker);\n    const index = criterias.findIndex((c) => c.col === this);\n    if (index < 0) {\n      return {asc: undefined, priority: undefined};\n    }\n    return {\n      asc: criterias[index].asc ? 'asc' : 'desc',\n      priority: index\n    };\n  }\n\n  isSortedByMe() {\n    return this.isSortedByMeImpl((r) => r.getSortCriteria());\n  }\n\n  groupSortByMe(ascending = isSortingAscByDefault(this), priority = 0) {\n    const r = this.findMyRanker();\n    if (r) {\n      return r.groupSortBy(this, ascending, priority);\n    }\n    return false;\n  }\n\n  toggleMyGroupSorting() {\n    const r = this.findMyRanker();\n    if (r) {\n      return r.toggleGroupSorting(this);\n    }\n    return false;\n  }\n\n  isGroupSortedByMe() {\n    return this.isSortedByMeImpl((r) => r.getGroupSortCriteria());\n  }\n\n  /**\n   * removes the column from the ranking\n   * @returns {boolean} was successful\n   */\n  removeMe() {\n    if (this.fixed) {\n      return false;\n    }\n    if (this.parent) {\n      return this.parent.remove(this);\n    }\n    return false;\n  }\n\n  /**\n   * called when the columns added to a ranking\n   */\n  attach(parent: IColumnParent) {\n    this.parent = parent;\n  }\n\n  /**\n   * called when the column is removed from the ranking\n   */\n  detach() {\n    this.parent = null;\n  }\n\n  /**\n   * inserts the given column after itself\n   * @param col the column to insert\n   * @returns {boolean} was successful\n   */\n  insertAfterMe(col: Column) {\n    if (this.parent) {\n      return this.parent.insertAfter(col, this) != null;\n    }\n    return false;\n  }\n\n  /**\n   * finds the underlying ranking column\n   * @returns {Ranking|null} my current ranking\n   */\n  findMyRanker(): Ranking | null {\n    if (this.parent) {\n      return this.parent.findMyRanker();\n    }\n    return null;\n  }\n\n  /**\n   * dumps this column to JSON compatible format\n   * @param toDescRef helper mapping function\n   * @returns {any} dump of this column\n   */\n  dump(toDescRef: (desc: any) => any): any {\n    const r: IColumnDump = {\n      id: this.id,\n      desc: toDescRef(this.desc),\n      width: this.width\n    };\n    if (this.label !== (this.desc.label || this.id)) {\n      r.label = this.label;\n    }\n    if (this.metadata.summary) {\n      r.summary = this.metadata.summary;\n    }\n    if (this.getRenderer() !== this.desc.type) {\n      r.renderer = this.getRenderer();\n    }\n    if (this.getGroupRenderer() !== this.desc.type) {\n      r.groupRenderer = this.getGroupRenderer();\n    }\n    if (this.getSummaryRenderer() !== this.desc.type) {\n      r.summaryRenderer = this.getSummaryRenderer();\n    }\n    return r;\n  }\n\n  /**\n   * restore the column content from a dump\n   * @param dump column dump\n   * @param _factory helper for creating columns\n   */\n  restore(dump: IColumnDump, _factory: ITypeFactory) {\n    this.width = dump.width || this.width;\n    this.metadata = {\n      label: dump.label || this.label,\n      summary: dump.summary || '',\n      description: this.description\n    };\n    if (dump.renderer || dump.rendererType) {\n      this.renderer = dump.renderer || dump.rendererType || this.renderer;\n    }\n    if (dump.groupRenderer) {\n      this.groupRenderer = dump.groupRenderer;\n    }\n    if (dump.summaryRenderer) {\n      this.summaryRenderer = dump.summaryRenderer;\n    }\n  }\n\n  /**\n   * return the label of a given row for the current column\n   * @param row the current row\n   * @return {string} the label of this column at the specified row\n   */\n  getLabel(row: IDataRow): string {\n    const v = this.getValue(row);\n    return v == null ? '' : String(v);\n  }\n\n  /**\n   * return the value of a given row for the current column\n   * @param _row the current row\n   * @return the value of this column at the specified row\n   */\n  getValue(_row: IDataRow): any | null {\n    return ''; //no value\n  }\n\n  /**\n   * returns the value to be used when exporting\n   * @param format format hint\n   */\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    return format === 'text' ? this.getLabel(row) : this.getValue(row);\n  }\n\n  getColor(_row: IDataRow) {\n    return DEFAULT_COLOR;\n  }\n\n  toCompareValue(_row: IDataRow, _valueCache?: any): ICompareValue | ICompareValue[] {\n    return 0;\n  }\n\n  toCompareValueType(): ECompareValueType | ECompareValueType[] {\n    return ECompareValueType.UINT8;\n  }\n\n  /**\n   * group the given row into a bin/group\n   * @param _row\n   * @return {IGroup}\n   */\n  group(_row: IDataRow, _valueCache?: any): IGroup {\n    return Object.assign({}, defaultGroup);\n  }\n\n  toCompareGroupValue(_rows: ISequence<IDataRow>, group: IGroup, _valueCache?: ISequence<any>): ICompareValue | ICompareValue[] {\n    return group.name.toLowerCase();\n  }\n\n  toCompareGroupValueType(): ECompareValueType | ECompareValueType[] {\n    return ECompareValueType.STRING;\n  }\n\n  /**\n   * flag whether any filter is applied\n   * @return {boolean}\n   */\n  isFiltered() {\n    return false;\n  }\n\n  /**\n   * clear the filter\n   * @return {boolean} whether the filtered needed to be reseted\n   */\n  clearFilter() {\n    // hook to clear the filter\n    return false;\n  }\n\n  /**\n   * predicate whether the current row should be included\n   * @param row\n   * @return {boolean}\n   */\n  filter(row: IDataRow, _valueCache?: any) {\n    return row != null;\n  }\n\n  /**\n   * determines the renderer type that should be used to render this column. By default the same type as the column itself\n   * @return {string}\n   */\n  getRenderer(): string {\n    return this.renderer;\n  }\n\n  getGroupRenderer(): string {\n    return this.groupRenderer;\n  }\n\n  getSummaryRenderer(): string {\n    return this.summaryRenderer;\n  }\n\n  setRenderer(renderer: string) {\n    if (renderer === this.renderer) {\n      // nothing changes\n      return;\n    }\n    this.fire([Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.renderer, this.renderer = renderer);\n  }\n\n  setGroupRenderer(renderer: string) {\n    if (renderer === this.groupRenderer) {\n      // nothing changes\n      return;\n    }\n    this.fire([Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.groupRenderer, this.groupRenderer = renderer);\n  }\n\n  setSummaryRenderer(renderer: string) {\n    if (renderer === this.summaryRenderer) {\n      // nothing changes\n      return;\n    }\n    this.fire([Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.summaryRenderer, this.summaryRenderer = renderer);\n  }\n\n  /**\n   * marks the header, values, or both as dirty such that the values are reevaluated\n   * @param type specify in more detail what is dirty, by default whole column\n   */\n  markDirty(type: 'header' | 'values' | 'all' = 'all') {\n    switch (type) {\n      case 'header':\n        return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\n      case 'values':\n        return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\n      default:\n        return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\n    }\n  }\n}\n","import 'reflect-metadata';\nimport Column from './Column';\nimport {IColumnDesc, IColumnConstructor} from './interfaces';\n\nconst supportType = Symbol.for('SupportType');\nconst category = Symbol.for('Category');\n\nexport function SupportType() {\n  return Reflect.metadata(supportType, true);\n}\n\nexport function SortByDefault(order: 'ascending'|'descending' = 'ascending') {\n  if (order === 'descending') {\n    return Reflect.metadata(Symbol.for('sortDescendingByDefault'), true);\n  }\n  return (d: any) => d;\n}\n\nexport function isSortingAscByDefault(col: Column) {\n  const clazz = (<any>col).constructor;\n  return !Reflect.hasMetadata(Symbol.for('sortDescendingByDefault'), clazz);\n}\n\nexport class Categories {\n  readonly string = {label: 'label', order: 1, name: 'string', featureLevel: 'basic'};\n  readonly categorical = {label: 'categorical', order: 2, name: 'categorical', featureLevel: 'basic'};\n  readonly number = {label: 'numerical', order: 3, name: 'number', featureLevel: 'basic'};\n  readonly date = {label: 'date', order: 4, name: 'date', featureLevel: 'basic'};\n  readonly array = {label: 'matrix', order: 5, name: 'array', featureLevel: 'advanced'};\n  readonly map = {label: 'map', order: 6, name: 'map', featureLevel: 'advanced'};\n  readonly composite = {label: 'combined', order: 7, name: 'composite', featureLevel: 'advanced'};\n  readonly support = {label: 'support', order: 8, name: 'support', featureLevel: 'advanced'};\n  readonly other = {label: 'others', order: 9, name: 'other', featureLevel: 'advanced'};\n}\n\nexport const categories = new Categories();\n\nexport function Category(cat: keyof Categories) {\n  return Reflect.metadata(category, cat);\n}\n\nexport function getSortType(col: Column): 'abc'|'num'|undefined {\n  const cat = categoryOf(col);\n  const type = col.desc.type;\n  if (cat === categories.string || cat === categories.categorical) {\n    return 'abc';\n  }\n  if (cat === categories.number || type === 'rank' || isSortingAscByDefault(col)) {\n    return 'num';\n  }\n  const numbers = new Set(['rank', 'number', 'numbers', 'ordinal', 'boxplot', 'script', 'reduce', 'stack']);\n  return numbers.has(type) ? 'num' : undefined;\n}\n\nexport function toolbar(...keys: string[]) {\n  return Reflect.metadata(Symbol.for('toolbarIcon'), keys);\n}\n\nexport function dialogAddons(key: string, ...keys: string[]) {\n  return Reflect.metadata(Symbol.for(`toolbarDialogAddon${key}`), keys);\n}\n\nexport function isSupportType(col: Column) {\n  const clazz = (<any>col).constructor;\n  return Reflect.hasMetadata(supportType, clazz);\n}\n\nexport interface IColumnCategory {\n  label: string;\n  name: string;\n  order: number;\n  featureLevel: 'basic' | 'advanced';\n}\n\nexport function categoryOf(col: IColumnConstructor | Column): IColumnCategory {\n  const cat = <keyof Categories>Reflect.getMetadata(category, col instanceof Column ? Object.getPrototypeOf(col).constructor : col) || 'other';\n  return <IColumnCategory>categories[cat] || categories.other;\n}\n\nexport function categoryOfDesc(col: IColumnDesc | string, models: { [key: string]: IColumnConstructor }): IColumnCategory {\n  const type = typeof col === 'string' ? col : col.type;\n  const clazz = models[type];\n  return clazz ? categoryOf(clazz) : <IColumnCategory>categories.other;\n}\n","import {IAdvancedBoxPlotData, IBoxPlotData, IForEachAble} from '../internal';\nimport Column from './Column';\nimport {IArrayColumn} from './IArrayColumn';\nimport {IColumnDesc, IDataRow, ITypedDump, ITypeFactory} from './interfaces';\n\n\nexport interface IColorMappingFunction {\n  apply(v: number): string;\n\n  toJSON(): ITypedDump | string;\n\n  clone(): IColorMappingFunction;\n\n  eq(other: IColorMappingFunction): boolean;\n}\n\nexport interface IColorMappingFunctionConstructor {\n  new(dump: ITypedDump | string, factory: ITypeFactory): IColorMappingFunction;\n}\n\nexport interface IMappingFunction {\n  //new(domain: number[]);\n\n  apply(v: number): number;\n\n  toJSON(): ITypedDump;\n\n  domain: number[];\n\n  clone(): IMappingFunction;\n\n  eq(other: IMappingFunction): boolean;\n\n  getRange(formatter: (v: number) => string): [string, string];\n}\n\nexport interface IMappingFunctionConstructor {\n  new(dump: ITypedDump): IMappingFunction;\n}\n\n\nexport interface IMapAbleDesc {\n  /**\n   * dump of mapping function\n   */\n  map?: ITypedDump;\n  /**\n   * either map or domain should be available\n   */\n  domain?: [number, number];\n  /**\n   * @default [0,1]\n   */\n  range?: [number, number];\n\n  /**\n   * @deprecated use colorMapping instead\n   */\n  color?: string;\n\n  /**\n   * color mapping\n   */\n  colorMapping?: string | ((v: number) => string) | ITypedDump;\n}\n\n\nexport interface IMapAbleColumn extends INumberColumn {\n  getOriginalMapping(): IMappingFunction;\n\n  getMapping(): IMappingFunction;\n\n  setMapping(mapping: IMappingFunction): void;\n\n  getColorMapping(): IColorMappingFunction;\n\n  setColorMapping(mapping: IColorMappingFunction): void;\n\n  getFilter(): INumberFilter;\n\n  setFilter(value: INumberFilter | null): void;\n\n  getRange(): [string, string];\n}\n\nexport function isMapAbleColumn(col: Column): col is IMapAbleColumn;\nexport function isMapAbleColumn(col: IColumnDesc): col is IMapAbleDesc & IColumnDesc;\nexport function isMapAbleColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<IMapAbleColumn>col).getMapping === 'function' || (!(col instanceof Column) && isNumberColumn(col) && ((<IColumnDesc>col).type.startsWith('number') || (<IColumnDesc>col).type.startsWith('boxplot'))));\n}\n\n\nexport interface INumberColumn extends Column {\n  getNumber(row: IDataRow): number;\n\n  getRawNumber(row: IDataRow): number;\n\n  iterNumber(row: IDataRow): IForEachAble<number>;\n  iterRawNumber(row: IDataRow): IForEachAble<number>;\n\n  getNumberFormat(): (v: number) => string;\n}\n\nexport interface INumberDesc extends IMapAbleDesc {\n  /**\n   * d3 formatting option\n   * @default .3n\n   */\n  numberFormat?: string;\n}\n\n/**\n * checks whether the given column or description is a number column, i.e. the value is a number\n * @param col\n * @returns {boolean}\n */\nexport function isNumberColumn(col: Column): col is INumberColumn;\nexport function isNumberColumn(col: IColumnDesc): col is INumberDesc & IColumnDesc;\nexport function isNumberColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<INumberColumn>col).getNumber === 'function' || (!(col instanceof Column) && (<IColumnDesc>col).type.match(/(number|stack|ordinal)/) != null));\n}\n\n\nexport enum ESortMethod {\n  min = 'min',\n  max = 'max',\n  median = 'median',\n  q1 = 'q1',\n  q3 = 'q3'\n}\n\nexport interface IBoxPlotColumn extends INumberColumn, IMapAbleColumn {\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null;\n\n  getMapping(): IMappingFunction;\n\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null;\n\n  getSortMethod(): string;\n\n  setSortMethod(sortMethod: string): void;\n}\n\nexport function isBoxPlotColumn(col: Column): col is IBoxPlotColumn {\n  return typeof (<IBoxPlotColumn>col).getBoxPlotData === 'function';\n}\n\nexport enum EAdvancedSortMethod {\n  min = 'min',\n  max = 'max',\n  median = 'median',\n  q1 = 'q1',\n  q3 = 'q3',\n  mean = 'mean'\n}\n\nexport interface IAdvancedBoxPlotColumn extends IBoxPlotColumn {\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null;\n\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null;\n}\n\nexport interface INumbersColumn extends IAdvancedBoxPlotColumn, IArrayColumn<number> {\n  getNumbers(row: IDataRow): number[];\n\n  getRawNumbers(row: IDataRow): number[];\n}\n\nexport function isNumbersColumn(col: Column): col is INumbersColumn {\n  return isBoxPlotColumn(col) && typeof (<INumbersColumn>col).getNumbers === 'function';\n}\n\n\nexport interface INumberFilter {\n  min: number;\n  max: number;\n  filterMissing: boolean;\n}\n","import Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, dirtyCaches, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\nimport {IValueColumnDesc, IDataRow, ITypeFactory} from './interfaces';\nimport {IEventListener} from '../internal';\n\n/**\n * emitted when the data of this column has been loaded\n * @asMemberOf ValueColumn\n * @event\n */\nexport declare function dataLoaded(previous: boolean, current: boolean): void;\n\n/**\n * a column having an accessor to get the cell value\n */\nexport default class ValueColumn<T> extends Column {\n  static readonly EVENT_DATA_LOADED = 'dataLoaded';\n\n  static readonly RENDERER_LOADING = 'loading';\n\n  private readonly accessor: (row: IDataRow, desc: Readonly<IValueColumnDesc<T>>) => T;\n\n  /**\n   * is the data available\n   * @type {boolean}\n   */\n  private loaded: boolean;\n\n  constructor(id: string, desc: Readonly<IValueColumnDesc<T>>) {\n    super(id, desc);\n    //find accessor\n    this.accessor = desc.accessor! || (() => null);\n    this.loaded = desc.lazyLoaded !== true;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ValueColumn.EVENT_DATA_LOADED]);\n  }\n\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n\n  getLabel(row: IDataRow) {\n    if (!this.isLoaded()) {\n      return '';\n    }\n    const v = this.getValue(row);\n    return v == null ? '' : String(v);\n  }\n\n  getRaw(row: IDataRow): T | null {\n    if (!this.isLoaded()) {\n      return null;\n    }\n    return this.accessor(row, this.desc);\n  }\n\n  getValue(row: IDataRow): T | null {\n    return this.getRaw(row);\n  }\n\n  isLoaded() {\n    return this.loaded;\n  }\n\n  setLoaded(loaded: boolean) {\n    if (this.loaded === loaded) {\n      return;\n    }\n    this.fire([ValueColumn.EVENT_DATA_LOADED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.loaded, this.loaded = loaded);\n  }\n\n  getRenderer(): string {\n    if (!this.isLoaded()) {\n      return ValueColumn.RENDERER_LOADING;\n    }\n    return super.getRenderer();\n  }\n\n  /**\n   * patch the dump such that the loaded attribute is defined (for lazy loading columns)\n   * @param toDescRef\n   * @returns {any}\n   */\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.loaded = this.loaded;\n\n    if (!this.loaded && r.renderer === ValueColumn.RENDERER_LOADING) {\n      delete r.renderer;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    if (dump.loaded !== undefined) {\n      this.loaded = dump.loaded;\n    }\n    super.restore(dump, factory);\n  }\n}\n","import {suffix, IEventListener} from '../internal';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {Category, toolbar} from './annotations';\nimport {IDataRow, IColumnParent, IFlatColumn, ITypeFactory} from './interfaces';\nimport {isNumberColumn} from './INumberColumn';\nimport ValueColumn from './ValueColumn';\n\n/**\n * emitted when the filter property changes\n * @asMemberOf CompositeColumn\n * @event\n */\nexport declare function filterChanged(previous: any | null, current: any | null): void;\n\n/**\n * emitted when a column has been added\n * @asMemberOf CompositeColumn\n * @event\n */\nexport declare function addColumn(col: Column, index: number): void;\n\n/**\n * emitted when a column has been moved within this composite columm\n * @asMemberOf CompositeColumn\n * @event\n */\nexport declare function moveColumn(col: Column, index: number, oldIndex: number): void;\n\n/**\n * emitted when a column has been removed\n * @asMemberOf CompositeColumn\n * @event\n */\nexport declare function removeColumn(col: Column, index: number): void;\n\n/**\n * implementation of a combine column, standard operations how to select\n */\n@toolbar('compositeContained', 'splitCombined')\n@Category('composite')\nexport default class CompositeColumn extends Column implements IColumnParent {\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_ADD_COLUMN = 'addColumn';\n  static readonly EVENT_MOVE_COLUMN = 'moveColumn';\n  static readonly EVENT_REMOVE_COLUMN = 'removeColumn';\n\n  protected readonly _children: Column[] = [];\n\n  protected createEventList() {\n    return super.createEventList().concat([CompositeColumn.EVENT_FILTER_CHANGED, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_MOVE_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN]);\n  }\n\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  assignNewId(idGenerator: () => string) {\n    super.assignNewId(idGenerator);\n    this._children.forEach((c) => c.assignNewId(idGenerator));\n  }\n\n  get children() {\n    return this._children.slice();\n  }\n\n  get length() {\n    return this._children.length;\n  }\n\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\n    let w = 0;\n    //no more levels or just this one\n    if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n      w = this.getWidth();\n      r.push({col: this, offset, width: w});\n      if (levelsToGo === 0) {\n        return w;\n      }\n    }\n    //push children\n    this._children.forEach((c) => {\n      if (c.isVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n        c.flatten(r, offset, levelsToGo - 1, padding);\n      }\n    });\n    return w;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.children = this._children.map((d) => d.dump(toDescRef));\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    dump.children.map((child: any) => {\n      const c = factory(child);\n      if (c) {\n        this.push(c);\n      }\n    });\n    super.restore(dump, factory);\n  }\n\n  /**\n   * inserts a column at a the given position\n   * @param col\n   * @param index\n   * @returns {any}\n   */\n  insert(col: Column, index: number): Column | null {\n    if (!isNumberColumn(col) && this.canJustAddNumbers) { //indicator it is a number type\n      return null;\n    }\n    this._children.splice(index, 0, col);\n    //listen and propagate events\n    return this.insertImpl(col, index);\n  }\n\n  move(col: Column, index: number): Column | null {\n    if (col.parent !== this) { //not moving\n      return null;\n    }\n    const old = this._children.indexOf(col);\n    if (index === old) {\n      // no move needed\n      return col;\n    }\n    //delete first\n    this._children.splice(old, 1);\n    // adapt target index based on previous index, i.e shift by one\n    this._children.splice(old < index ? index - 1 : index, 0, col);\n    //listen and propagate events\n    return this.moveImpl(col, index, old);\n  }\n\n  protected insertImpl(col: Column, index: number) {\n    col.attach(this);\n    this.forward(col, ...suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn.EVENT_FILTER_CHANGED, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED));\n    this.fire([CompositeColumn.EVENT_ADD_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], col, index);\n    return col;\n  }\n\n  protected moveImpl(col: Column, index: number, oldIndex: number) {\n    this.fire([CompositeColumn.EVENT_MOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED], col, index, oldIndex);\n    return col;\n  }\n\n  push(col: Column) {\n    return this.insert(col, this._children.length);\n  }\n\n  at(index: number) {\n    return this._children[index];\n  }\n\n  indexOf(col: Column) {\n    return this._children.indexOf(col);\n  }\n\n  insertAfter(col: Column, ref: Column) {\n    const i = this.indexOf(ref);\n    if (i < 0) {\n      return null;\n    }\n    return this.insert(col, i + 1);\n  }\n\n  moveAfter(col: Column, ref: Column) {\n    const i = this.indexOf(ref);\n    if (i < 0) {\n      return null;\n    }\n    return this.move(col, i + 1);\n  }\n\n\n  remove(col: Column) {\n    const i = this._children.indexOf(col);\n    if (i < 0) {\n      return false;\n    }\n    this._children.splice(i, 1); //remove and deregister listeners\n    return this.removeImpl(col, i);\n  }\n\n  protected removeImpl(col: Column, index: number) {\n    col.detach();\n    this.unforward(col, ...suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn.EVENT_FILTER_CHANGED));\n    this.fire([CompositeColumn.EVENT_REMOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], col, index);\n    return true;\n  }\n\n  isFiltered() {\n    return this._children.some((d) => d.isFiltered());\n  }\n\n  clearFilter() {\n    return this._children.map((d) => d.clearFilter()).some((d) => d);\n  }\n\n  filter(row: IDataRow) {\n    return this._children.every((d) => d.filter(row));\n  }\n\n  isLoaded(): boolean {\n    return this._children.every((c) => !(c instanceof ValueColumn || c instanceof CompositeColumn) || (<ValueColumn<any> | CompositeColumn>c).isLoaded());\n  }\n\n  get canJustAddNumbers() {\n    return false;\n  }\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: function() {\n    return this.rgb().hex();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: function() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://beta.observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import {basis} from \"./basis\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\nexport default function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0 ≅ u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n}\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","export default function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n}\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","import colors from \"../colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","/**\n * a set that preserves the insertion order\n * @internal\n */\nexport default class OrderedSet<T> implements Iterable<T> {\n  readonly [Symbol.toStringTag] = Symbol('OrderedSet');\n  private readonly set = new Set<T>();\n  private readonly list = <T[]>[];\n\n  constructor(values: Iterable<T> = []) {\n    this.addAll(Array.isArray(values) ? values : Array.from(values));\n  }\n\n  get size() {\n    return this.set.size;\n  }\n\n  clear() {\n    this.set.clear();\n    this.list.splice(0, this.list.length);\n  }\n\n  addAll(values: T[]) {\n    values.forEach((v) => this.add(v));\n    return this;\n  }\n\n  add(value: T) {\n    if (this.set.has(value)) {\n      return this;\n    }\n    this.set.add(value);\n    this.list.push(value);\n    return this;\n  }\n\n  has(value: T) {\n    return this.set.has(value);\n  }\n\n  delete(value: T) {\n    const r = this.set.delete(value);\n    if (!r) {\n      return false;\n    }\n    const index = this.list.indexOf(value);\n    console.assert(index >= 0);\n    this.list.splice(index, 1);\n    return true;\n  }\n\n  deleteAll(values: T[]) {\n    return values.reduce((acc, act) => this.delete(act) && acc, true);\n  }\n\n  forEach(callbackfn: (value: T, value2: T, set: Set<T>) => void, thisArg?: any) {\n    this.list.forEach(function (this: any, v: T) {\n      callbackfn.call(this, v, v, <any>this);\n    }, thisArg);\n  }\n\n  [Symbol.iterator]() {\n    return this.list[Symbol.iterator]();\n  }\n}\n","import {schemeCategory10, schemeSet3} from 'd3-scale-chromatic';\nimport Column, {defaultGroup, IGroup, IGroupParent, IndicesArray, IOrderedGroup, ECompareValueType} from '.';\nimport {OrderedSet} from '../internal';\nimport {DEFAULT_COLOR} from './interfaces';\n\n\n/** @internal */\nexport function integrateDefaults<T>(desc: T, defaults: Partial<T> = {}) {\n  Object.keys(defaults).forEach((key) => {\n    const typed = <keyof T>key;\n    if (typeof desc[typed] === 'undefined') {\n      (<any>desc)[typed] = defaults[typed];\n    }\n  });\n  return desc;\n}\n\n/** @internal */\nexport function patternFunction(pattern: string, ...args: string[]) {\n  return new Function('value', ...args, `\n  const escapedValue = encodeURIComponent(String(value));\n  return \\`${pattern}\\`;\n `);\n}\n\n\n/** @internal */\nexport function joinGroups(groups: IGroup[]): IGroup {\n  if (groups.length === 0) {\n    return {...defaultGroup}; //copy\n  }\n  if (groups.length === 1 && !groups[0].parent) {\n    return {...groups[0]}; //copy\n  }\n  // create a chain\n  const parents: IGroupParent[] = [];\n  for (const group of groups) {\n    const gparents: IGroupParent[] = [];\n    let g = group;\n    while (g.parent) {\n      // add all parents of this groups\n      gparents.unshift(g.parent);\n      g = g.parent;\n    }\n    parents.push(...gparents);\n    parents.push(Object.assign({subGroups: []}, group));\n  }\n  parents.slice(1).forEach((g, i) => {\n    g.parent = parents[i];\n    g.name = `${parents[i].name} ∩ ${g.name}`;\n    g.color = g.color !== DEFAULT_COLOR ? g.color : g.parent.color;\n    parents[i].subGroups = [g];\n  });\n\n  return parents[parents.length - 1];\n}\n\nexport function duplicateGroup<T extends IOrderedGroup | IGroupParent>(group: T) {\n  const clone = <T>Object.assign({}, group);\n  delete (<IOrderedGroup>clone).order;\n  if (isGroupParent(<any>clone)) {\n    (<any>clone).subGroups = [];\n  }\n  if (clone.parent) {\n    clone.parent = duplicateGroup(clone.parent);\n    clone.parent!.subGroups.push(clone);\n  }\n  return clone;\n}\n\n/** @internal */\nexport function toGroupID(group: IGroup) {\n  return group.name;\n}\n\n/** @internal */\nexport function isOrderedGroup(g: IOrderedGroup | Readonly<IGroupParent>): g is IOrderedGroup {\n  return (<IOrderedGroup>g).order != null;\n}\n\n\n/** @internal */\nfunction isGroupParent(g: IOrderedGroup | Readonly<IGroupParent>): g is IGroupParent {\n  return (<IGroupParent>g).subGroups != null;\n}\n\n/**\n * unify the parents of the given groups by reusing the same group parent if possible\n * @param groups\n */\nexport function unifyParents<T extends IOrderedGroup>(groups: T[]) {\n  if (groups.length <= 1) {\n    return groups;\n  }\n\n  const toPath = (group: T) => {\n    const path: (IGroupParent | T)[] = [group];\n    let p = group.parent;\n    while (p) {\n      path.unshift(p);\n      p = p.parent;\n    }\n    return path;\n  };\n  const paths = groups.map(toPath);\n\n  const isSame = (a: IGroupParent, b: (IGroupParent | T)) => {\n    return (b.name === a.name && b.parent === a.parent && isGroupParent(b) && b.subGroups.length > 0);\n  };\n\n  const removeDuplicates = (level: (IGroupParent | T)[], i: number) => {\n    const real: (IGroupParent | T)[] = [];\n    while (level.length > 0) {\n      const node = level.shift()!;\n      if (!isGroupParent(node) || node.subGroups.length === 0) { // cannot share leaves\n        real.push(node);\n        continue;\n      }\n      const root = {...node};\n      real.push(root);\n      // remove duplicates that directly follow\n      while (level.length > 0 && isSame(root, level[0]!)) {\n        root.subGroups.push(...(<IGroupParent>level.shift()!).subGroups);\n      }\n      for (const child of root.subGroups) {\n        (<(IGroupParent | T)>child).parent = root;\n      }\n      // cleanup children duplicates\n      root.subGroups = removeDuplicates(<(IGroupParent | T)[]>root.subGroups, i + 1);\n    }\n    return real;\n  };\n\n  removeDuplicates(paths.map((p) => p[0]), 0);\n\n  return groups;\n}\n\n/** @internal */\nexport function groupRoots(groups: IOrderedGroup[]) {\n  const roots = new OrderedSet<IOrderedGroup | Readonly<IGroupParent>>();\n  for (const group of groups) {\n    let root: IOrderedGroup | Readonly<IGroupParent> = group;\n    while (root.parent) {\n      root = root.parent;\n    }\n    roots.add(root);\n  }\n  return Array.from(roots);\n}\n\n\n// based on https://github.com/d3/d3-scale-chromatic#d3-scale-chromatic\nconst colors = schemeCategory10.concat(schemeSet3);\n\n/** @internal */\nexport const MAX_COLORS = colors.length;\n\n/** @internal */\nexport function colorPool() {\n  let act = 0;\n  return () => colors[(act++) % colors.length];\n}\n\n\n/**\n * @internal\n */\nexport function mapIndices<T>(arr: IndicesArray, callback: (value: number, i: number) => T): T[] {\n  const r: T[] = [];\n  for (let i = 0; i < arr.length; ++i) {\n    r.push(callback(arr[i], i));\n  }\n  return r;\n}\n\n/**\n * @internal\n */\nexport function everyIndices(arr: IndicesArray, callback: (value: number, i: number) => boolean): boolean {\n  for (let i = 0; i < arr.length; ++i) {\n    if (!callback(arr[i], i)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * @internal\n */\nexport function filterIndices(arr: IndicesArray, callback: (value: number, i: number) => boolean): number[] {\n  const r: number[] = [];\n  for (let i = 0; i < arr.length; ++i) {\n    if (callback(arr[i], i)) {\n      r.push(arr[i]);\n    }\n  }\n  return r;\n}\n\n\n/**\n * @internal\n */\nexport function forEachIndices(arr: IndicesArray, callback: (value: number, i: number) => void) {\n  for (let i = 0; i < arr.length; ++i) {\n    callback(arr[i], i);\n  }\n}\n\n/**\n * @internal\n */\nexport function chooseUIntByDataLength(dataLength?: number | null) {\n  if (dataLength == null || typeof dataLength !== 'number' && !isNaN(dataLength)) {\n    return ECompareValueType.UINT32; // worst case\n  }\n  if (length <= 255) {\n    return ECompareValueType.UINT8;\n  }\n  if (length <= 65535) {\n    return ECompareValueType.UINT16;\n  }\n  return ECompareValueType.UINT32;\n}\n\nexport function getAllToolbarActions(col: Column) {\n  const actions = new OrderedSet<string>();\n\n  // walk up the prototype chain\n  let obj = <any>col;\n  const toolbarIcon = Symbol.for('toolbarIcon');\n  do {\n    const m = <string[]>Reflect.getOwnMetadata(toolbarIcon, obj.constructor);\n    if (m) {\n      for (const mi of m) {\n        actions.add(mi);\n      }\n    }\n    obj = Object.getPrototypeOf(obj);\n  } while (obj);\n  return Array.from(actions);\n}\n\n\nexport function getAllToolbarDialogAddons(col: Column, key: string) {\n  const actions = new OrderedSet<string>();\n\n  // walk up the prototype chain\n  let obj = <any>col;\n  const symbol = Symbol.for(`toolbarDialogAddon${key}`);\n  do {\n    const m = <string[]>Reflect.getOwnMetadata(symbol, obj.constructor);\n    if (m) {\n      for (const mi of m) {\n        actions.add(mi);\n      }\n    }\n    obj = Object.getPrototypeOf(obj);\n  } while (obj);\n  return Array.from(actions);\n}\n","import {equalArrays, fixCSS, IEventListener, suffix, joinIndexArrays, AEventDispatcher} from '../internal';\nimport {isSortingAscByDefault} from './annotations';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, labelChanged, visibilityChanged, widthChanged} from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport {IRankingDump, defaultGroup, IndicesArray, IOrderedGroup, IDataRow, IColumnParent, IFlatColumn, ISortCriteria, UIntTypedArray, IGroupParent, ITypeFactory} from './interfaces';\nimport {groupRoots} from './internal';\n\nexport enum EDirtyReason {\n  UNKNOWN = 'unknown',\n  FILTER_CHANGED = 'filter',\n  SORT_CRITERIA_CHANGED = 'sort_changed',\n  SORT_CRITERIA_DIRTY = 'sort_dirty',\n  GROUP_CRITERIA_CHANGED = 'group_changed',\n  GROUP_CRITERIA_DIRTY = 'group_dirty',\n  GROUP_SORT_CRITERIA_CHANGED = 'group_sort_changed',\n  GROUP_SORT_CRITERIA_DIRTY = 'group_sort_dirty'\n}\n\n\n/**\n * emitted when a column has been added\n * @asMemberOf Ranking\n * @event\n */\nexport declare function addColumn(col: Column, index: number): void;\n\n/**\n * emitted when a column has been moved within this composite columm\n * @asMemberOf Ranking\n * @event\n */\nexport declare function moveColumn(col: Column, index: number, oldIndex: number): void;\n\n/**\n * emitted when a column has been removed\n * @asMemberOf Ranking\n * @event\n */\nexport declare function removeColumn(col: Column, index: number): void;\n/**\n * emitted when the sort criteria propery changes\n * @asMemberOf Ranking\n * @event\n */\nexport declare function sortCriteriaChanged(previous: ISortCriteria[], current: ISortCriteria[]): void;\n/**\n * emitted when the sort criteria propery changes\n * @asMemberOf Ranking\n * @event\n */\nexport declare function groupCriteriaChanged(previous: Column[], current: Column[]): void;\n/**\n * emitted when the sort criteria propery changes\n * @asMemberOf Ranking\n * @event\n */\nexport declare function groupSortCriteriaChanged(previous: ISortCriteria[], current: ISortCriteria[]): void;\n/**\n * emitted when the sort criteria propery changes\n * @asMemberOf Ranking\n * @event\n */\nexport declare function dirtyOrder(reason?: EDirtyReason[]): void;\n/**\n * @asMemberOf Ranking\n * @event\n */\nexport declare function orderChanged(previous: number[], current: number[], previousGroups: IOrderedGroup[], currentGroups: IOrderedGroup[], dirtyReason: EDirtyReason[]): void;\n/**\n * @asMemberOf Ranking\n * @event\n */\nexport declare function groupsChanged(previous: number[], current: number[], previousGroups: IOrderedGroup[], currentGroups: IOrderedGroup[]): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function filterChanged(previous: any | null, current: any | null): void;\n/**\n * a ranking\n */\nexport default class Ranking extends AEventDispatcher implements IColumnParent {\n  static readonly EVENT_WIDTH_CHANGED = Column.EVENT_WIDTH_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_LABEL_CHANGED = Column.EVENT_LABEL_CHANGED;\n  static readonly EVENT_ADD_COLUMN = CompositeColumn.EVENT_ADD_COLUMN;\n  static readonly EVENT_MOVE_COLUMN = CompositeColumn.EVENT_MOVE_COLUMN;\n  static readonly EVENT_REMOVE_COLUMN = CompositeColumn.EVENT_REMOVE_COLUMN;\n  static readonly EVENT_DIRTY = Column.EVENT_DIRTY;\n  static readonly EVENT_DIRTY_HEADER = Column.EVENT_DIRTY_HEADER;\n  static readonly EVENT_DIRTY_VALUES = Column.EVENT_DIRTY_VALUES;\n  static readonly EVENT_DIRTY_CACHES = Column.EVENT_DIRTY_CACHES;\n  static readonly EVENT_COLUMN_VISIBILITY_CHANGED = Column.EVENT_VISIBILITY_CHANGED;\n  static readonly EVENT_SORT_CRITERIA_CHANGED = 'sortCriteriaChanged';\n  static readonly EVENT_GROUP_CRITERIA_CHANGED = 'groupCriteriaChanged';\n  static readonly EVENT_GROUP_SORT_CRITERIA_CHANGED = 'groupSortCriteriaChanged';\n  static readonly EVENT_DIRTY_ORDER = 'dirtyOrder';\n  static readonly EVENT_ORDER_CHANGED = 'orderChanged';\n  static readonly EVENT_GROUPS_CHANGED = 'groupsChanged';\n\n  private static readonly FORWARD_COLUMN_EVENTS = suffix('.ranking', Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, Column.EVENT_VISIBILITY_CHANGED, Ranking.EVENT_FILTER_CHANGED);\n  private static readonly COLUMN_GROUP_SORT_DIRTY = suffix('.groupOrder', Column.EVENT_DIRTY_CACHES, 'sortMethodChanged');\n  private static readonly COLUMN_SORT_DIRTY = suffix('.order', Column.EVENT_DIRTY_CACHES);\n  private static readonly COLUMN_GROUP_DIRTY = suffix('.group', Column.EVENT_DIRTY_CACHES, 'groupingChanged');\n\n\n  private label: string;\n\n  private readonly sortCriteria: ISortCriteria[] = [];\n  private readonly groupColumns: Column[] = [];\n  private readonly groupSortCriteria: ISortCriteria[] = [];\n\n  /**\n   * columns of this ranking\n   * @type {Array}\n   * @private\n   */\n  private readonly columns: Column[] = [];\n\n  readonly dirtyOrder = (reason?: EDirtyReason[]) => {\n    this.fire([Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], reason);\n  };\n  private readonly dirtyOrderSortDirty = () => this.dirtyOrder([EDirtyReason.SORT_CRITERIA_DIRTY]);\n  private readonly dirtyOrderGroupDirty = () => this.dirtyOrder([EDirtyReason.GROUP_CRITERIA_DIRTY]);\n  private readonly dirtyOrderGroupSortDirty = () => this.dirtyOrder([EDirtyReason.GROUP_SORT_CRITERIA_DIRTY]);\n  private readonly dirtyOrderFiltering = () => this.dirtyOrder([EDirtyReason.FILTER_CHANGED]);\n\n  /**\n   * the current ordering as an sorted array of indices\n   * @type {Array}\n   */\n  private groups: IOrderedGroup[] = [Object.assign({order: <number[]>[]}, defaultGroup)];\n  private order: IndicesArray = [];\n  private index2pos: IndicesArray = [];\n\n  constructor(public id: string) {\n    super();\n    this.id = fixCSS(id);\n    this.label = `Ranking ${id.startsWith('rank') ? id.slice(4) : id}`;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([\n      Ranking.EVENT_WIDTH_CHANGED, Ranking.EVENT_FILTER_CHANGED,\n      Ranking.EVENT_LABEL_CHANGED, Ranking.EVENT_GROUPS_CHANGED,\n      Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_MOVE_COLUMN,\n      Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES,\n      Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_COLUMN_VISIBILITY_CHANGED,\n      Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_ORDER_CHANGED]);\n  }\n\n  on(type: typeof Ranking.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Ranking.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof Ranking.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Ranking.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof Ranking.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof Ranking.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Ranking.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Ranking.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Ranking.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Ranking.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: typeof Ranking.EVENT_SORT_CRITERIA_CHANGED, listener: typeof sortCriteriaChanged | null): this;\n  on(type: typeof Ranking.EVENT_GROUP_CRITERIA_CHANGED, listener: typeof groupCriteriaChanged | null): this;\n  on(type: typeof Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, listener: typeof groupSortCriteriaChanged | null): this;\n  on(type: typeof Ranking.EVENT_DIRTY_ORDER, listener: typeof dirtyOrder | null): this;\n  on(type: typeof Ranking.EVENT_ORDER_CHANGED, listener: typeof orderChanged | null): this;\n  on(type: typeof Ranking.EVENT_GROUPS_CHANGED, listener: typeof groupsChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  assignNewId(idGenerator: () => string) {\n    this.id = fixCSS(idGenerator());\n    this.columns.forEach((c) => c.assignNewId(idGenerator));\n  }\n\n  getLabel() {\n    return this.label;\n  }\n\n  setLabel(value: string) {\n    if (value === this.label) {\n      return;\n    }\n    this.fire(Ranking.EVENT_LABEL_CHANGED, this.label, this.label = value);\n  }\n\n  setGroups(groups: IOrderedGroup[], index2pos: IndicesArray, dirtyReason: EDirtyReason[]) {\n    const old = this.order;\n    const oldGroups = this.groups;\n    this.groups = groups;\n    this.index2pos = index2pos;\n    this.order = joinIndexArrays(groups.map((d) => d.order));\n    // replace with subarrays to save memory\n    if (groups.length > 1) {\n      this.unifyGroups(groups);\n    } else if (groups.length === 1) {\n      // propagate to the top\n      let p = groups[0].parent;\n      while (p) {\n        (<IOrderedGroup><any>p).order = this.order;\n        p = p.parent;\n      }\n    }\n    this.fire([Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_GROUPS_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], old, this.order, oldGroups, groups, dirtyReason);\n  }\n\n  private unifyGroups(groups: IOrderedGroup[]) {\n    let offset = 0;\n    const order = <UIntTypedArray>this.order;\n    const offsets = new Map<Readonly<IGroupParent> | IOrderedGroup, {\n      offset: number;\n      size: number;\n    }>();\n    for (const group of groups) {\n      const size = group.order.length;\n      group.order = order.subarray(offset, offset + size);\n      offsets.set(group, {offset, size});\n      offset += size;\n    }\n    // propgate also to the top with views\n    const roots = groupRoots(groups);\n    const resolve = (g: Readonly<IGroupParent> | IOrderedGroup): {\n      offset: number;\n      size: number;\n    } => {\n      if (offsets.has(g)) { // leaf\n        return offsets.get(g)!;\n      }\n      const subs = (<IGroupParent>g).subGroups.map((gi) => resolve(<Readonly<IGroupParent> | IOrderedGroup>gi));\n      const offset = subs.length > 0 ? subs[0].offset : 0;\n      const size = subs.reduce((a, b) => a + b.size, 0);\n      const r = {offset, size};\n      offsets.set(g, r);\n      (<IOrderedGroup><any>g).order = order.subarray(offset, offset + size);\n      return r;\n    };\n    for (const root of roots) {\n      resolve(root);\n    }\n  }\n\n  getRank(dataIndex: number) {\n    if (dataIndex < 0 || dataIndex > this.index2pos.length) {\n      return -1;\n    }\n    const v = this.index2pos[dataIndex];\n    return v != null && !isNaN(v) && v > 0 ? v : -1;\n  }\n\n  getOrder() {\n    return this.order;\n  }\n\n  getOrderLength() {\n    return this.order.length;\n  }\n\n  getGroups() {\n    return this.groups.slice();\n  }\n\n  dump(toDescRef: (desc: any) => any): IRankingDump {\n    const r: IRankingDump = {};\n    r.columns = this.columns.map((d) => d.dump(toDescRef));\n    r.sortCriteria = this.sortCriteria.map((s) => ({asc: s.asc, sortBy: s.col!.id}));\n    r.groupSortCriteria = this.groupSortCriteria.map((s) => ({asc: s.asc, sortBy: s.col!.id}));\n    r.groupColumns = this.groupColumns.map((d) => d.id);\n    return r;\n  }\n\n  restore(dump: IRankingDump, factory: ITypeFactory) {\n    this.clear();\n    (dump.columns || []).map((child: any) => {\n      const c = factory(child);\n      if (c) {\n        this.push(c);\n      }\n    });\n    // compatibility case\n    if (dump.sortColumn && dump.sortColumn.sortBy) {\n      const help = this.columns.find((d) => d.id === dump.sortColumn!.sortBy);\n      if (help) {\n        this.sortBy(help, dump.sortColumn.asc);\n      }\n    }\n    if (dump.groupColumns) {\n      const groupColumns = <Column[]>dump.groupColumns.map((id: string) => this.columns.find((d) => d.id === id)).filter((d) => d != null);\n      this.setGroupCriteria(groupColumns);\n    }\n\n    const restoreSortCriteria = (dumped: any) => {\n      return dumped.map((s: {asc: boolean, sortBy: string}) => {\n        return {\n          asc: s.asc,\n          col: this.columns.find((d) => d.id === s.sortBy) || null\n        };\n      }).filter((s: any) => s.col);\n    };\n\n    if (dump.sortCriteria) {\n      this.setSortCriteria(restoreSortCriteria(dump.sortCriteria));\n    }\n\n    if (dump.groupSortCriteria) {\n      this.setGroupSortCriteria(restoreSortCriteria(dump.groupSortCriteria));\n    }\n  }\n\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\n    let acc = offset; // + this.getWidth() + padding;\n    if (levelsToGo > 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n      this.columns.forEach((c) => {\n        if (c.getVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n          acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\n        }\n      });\n    }\n    return acc - offset;\n  }\n\n  getPrimarySortCriteria(): ISortCriteria | null {\n    if (this.sortCriteria.length === 0) {\n      return null;\n    }\n    return this.sortCriteria[0];\n  }\n\n  getSortCriteria(): ISortCriteria[] {\n    return this.sortCriteria.map((d) => Object.assign({}, d));\n  }\n\n  getGroupSortCriteria(): ISortCriteria[] {\n    return this.groupSortCriteria.map((d) => Object.assign({}, d));\n  }\n\n  toggleSorting(col: Column) {\n    return this.setSortCriteria(this.toggleSortingLogic(col, this.sortCriteria));\n  }\n\n  private toggleSortingLogic(col: Column, sortCriteria: ISortCriteria[]) {\n    const newSort = sortCriteria.slice();\n    const current = newSort.findIndex((d) => d.col === col);\n    const defaultAsc = isSortingAscByDefault(col);\n\n    if (current < 0) {\n      newSort.splice(0, newSort.length, {col, asc: defaultAsc});\n    } else if (newSort[current].asc === defaultAsc) {\n      // asc -> desc, or desc -> asc\n      newSort.splice(current, 1, {col, asc: !defaultAsc});\n    } else {\n      // remove\n      newSort.splice(current, 1);\n    }\n    return newSort;\n  }\n\n  toggleGrouping(col: Column) {\n    const old = this.groupColumns.indexOf(col);\n    if (old >= 0) {\n      const newGroupings = this.groupColumns.slice();\n      newGroupings.splice(old, 1);\n      return this.setGroupCriteria(newGroupings);\n    }\n    return this.setGroupCriteria([col]);\n  }\n\n  getGroupCriteria() {\n    return this.groupColumns.slice();\n  }\n\n  /**\n   * replaces, moves, or remove the given column in the sorting hierarchy\n   * @param col {Column}\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n   */\n  sortBy(col: Column, ascending: boolean = false, priority: number = 0) {\n    if (col.findMyRanker() !== this) {\n      return false; //not one of mine\n    }\n    return this.setSortCriteria(this.hierarchyLogic(this.sortCriteria, this.sortCriteria.findIndex((d) => d.col === col), {col, asc: ascending}, priority));\n  }\n\n  /**\n   * replaces, moves, or remove the given column in the group sorting hierarchy\n   * @param col {Column}\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n   */\n  groupSortBy(col: Column, ascending: boolean = false, priority: number = 0) {\n    if (col.findMyRanker() !== this) {\n      return false; //not one of mine\n    }\n    return this.setGroupSortCriteria(this.hierarchyLogic(this.groupSortCriteria, this.groupSortCriteria.findIndex((d) => d.col === col), {col, asc: ascending}, priority));\n  }\n\n  private hierarchyLogic<T>(entries: T[], index: number, entry: T, priority: number) {\n    entries = entries.slice();\n    if (index >= 0) {\n      // move at the other position\n      entries.splice(index, 1);\n      if (priority >= 0) {\n        entries.splice(Math.min(priority, entries.length), 0, entry);\n      }\n    } else if (priority >= 0) {\n      entries[Math.min(priority, entries.length)] = entry;\n    }\n    return entries;\n  }\n\n  /**\n   * replaces, moves, or remove the given column in the grouping hierarchy\n   * @param col {Column}\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n   */\n  groupBy(col: Column, priority: number = 0): boolean {\n    if (col.findMyRanker() !== this) {\n      return false; //not one of mine\n    }\n    return this.setGroupCriteria(this.hierarchyLogic(this.groupColumns, this.groupColumns.indexOf(col), col, priority));\n  }\n\n  setSortCriteria(value: ISortCriteria | ISortCriteria[]) {\n    const values = Array.isArray(value) ? value.slice() : [value];\n    const bak = this.sortCriteria.slice();\n\n    if (equalCriteria(values, bak)) {\n      return false;\n    }\n\n    // update listener\n    bak.forEach((d) => {\n      d.col.on(Ranking.COLUMN_SORT_DIRTY, null!);\n    });\n\n    values.forEach((d) => {\n      d.col.on(Ranking.COLUMN_SORT_DIRTY, this.dirtyOrderSortDirty);\n    });\n    this.sortCriteria.splice(0, this.sortCriteria.length, ...values.slice());\n    this.triggerResort(bak);\n    return true;\n  }\n\n  setGroupCriteria(column: Column[] | Column) {\n    const cols = Array.isArray(column) ? column : [column];\n\n    if (equalArrays(this.groupColumns, cols)) {\n      return true; //same\n    }\n    this.groupColumns.forEach((groupColumn) => {\n      groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, null);\n    });\n\n    const bak = this.groupColumns.slice();\n    this.groupColumns.splice(0, this.groupColumns.length, ...cols);\n\n    this.groupColumns.forEach((groupColumn) => {\n      groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, this.dirtyOrderGroupDirty);\n    });\n\n    this.fire([Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\n    Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES, Ranking.EVENT_DIRTY], bak, this.getGroupCriteria());\n    return true;\n  }\n\n  toggleGroupSorting(col: Column) {\n    return this.setGroupSortCriteria(this.toggleSortingLogic(col, this.groupSortCriteria));\n  }\n\n  setGroupSortCriteria(value: ISortCriteria | ISortCriteria[]) {\n    const values = Array.isArray(value) ? value.slice() : [value];\n    const bak = this.groupSortCriteria.slice();\n\n    if (equalCriteria(values, bak)) {\n      return false;\n    }\n\n    bak.forEach((d) => {\n      d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null!);\n    });\n\n    values.forEach((d) => {\n      d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, this.dirtyOrderGroupSortDirty);\n    });\n    this.groupSortCriteria.splice(0, this.groupSortCriteria.length, ...values.slice());\n    this.triggerGroupResort(bak);\n    return true;\n  }\n\n  private triggerGroupResort(bak: ISortCriteria | ISortCriteria[] | null) {\n    const sortCriterias = this.getGroupSortCriteria();\n    const bakMulti = Array.isArray(bak) ? bak : sortCriterias;\n    this.fire([Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\n    Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\n  }\n\n  private triggerResort(bak: ISortCriteria | ISortCriteria[] | null) {\n    const sortCriterias = this.getSortCriteria();\n    const bakMulti = Array.isArray(bak) ? bak : sortCriterias;\n    this.fire([Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\n    Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\n  }\n\n  get children() {\n    return this.columns.slice();\n  }\n\n  get length() {\n    return this.columns.length;\n  }\n\n  insert(col: Column, index: number = this.columns.length) {\n    this.columns.splice(index, 0, col);\n    col.attach(this);\n    this.forward(col, ...Ranking.FORWARD_COLUMN_EVENTS);\n    col.on(`${Ranking.EVENT_FILTER_CHANGED}.order`, this.dirtyOrderFiltering);\n    col.on(`${Column.EVENT_VISIBILITY_CHANGED}.ranking`, (oldValue, newValue) => this.fire([Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, oldValue, newValue));\n\n    this.fire([Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index);\n\n    if (col.isFiltered()) {\n      this.dirtyOrderFiltering();\n    }\n    return col;\n  }\n\n  move(col: Column, index: number = this.columns.length) {\n    if (col.parent !== this) {\n      // not a move operation!\n      console.error('invalid move operation: ', col);\n      return null;\n    }\n    const old = this.columns.indexOf(col);\n    if (index === old) {\n      // no move needed\n      return col;\n    }\n    //delete first\n    this.columns.splice(old, 1);\n    // adapt target index based on previous index, i.e shift by one\n    this.columns.splice(old < index ? index - 1 : index, 0, col);\n\n    this.fire([Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index, old);\n    return col;\n  }\n\n  moveAfter(col: Column, reference: Column) {\n    const i = this.columns.indexOf(reference);\n    if (i < 0) {\n      return null;\n    }\n    return this.move(col, i + 1);\n  }\n\n  get fqpath() {\n    return '';\n  }\n\n  findByPath(fqpath: string): Column {\n    let p: IColumnParent | Column = <any>this;\n    const indices = fqpath.split('@').map(Number).slice(1); //ignore the first entry = ranking\n    while (indices.length > 0) {\n      const i = indices.shift()!;\n      p = (<IColumnParent>p).at(i);\n    }\n    return <Column>p;\n  }\n\n  indexOf(col: Column) {\n    return this.columns.indexOf(col);\n  }\n\n  at(index: number) {\n    return this.columns[index];\n  }\n\n  insertAfter(col: Column, ref: Column) {\n    const i = this.columns.indexOf(ref);\n    if (i < 0) {\n      return null;\n    }\n    return this.insert(col, i + 1);\n  }\n\n  push(col: Column) {\n    return this.insert(col);\n  }\n\n  remove(col: Column) {\n    const i = this.columns.indexOf(col);\n    if (i < 0) {\n      return false;\n    }\n\n    this.unforward(col, ...Ranking.FORWARD_COLUMN_EVENTS);\n\n    const isSortCriteria = this.sortCriteria.findIndex((d) => d.col === col);\n    const sortCriteriaChanged = isSortCriteria >= 0;\n    if (sortCriteriaChanged) {\n      this.sortCriteria.splice(isSortCriteria, 1);\n    }\n\n    const isGroupSortCriteria = this.groupSortCriteria.findIndex((d) => d.col === col);\n    const groupSortCriteriaChanged = isGroupSortCriteria >= 0;\n    if (groupSortCriteriaChanged) {\n      this.groupSortCriteria.splice(isGroupSortCriteria, 1);\n    }\n\n    let newGrouping: Column[] | null = null;\n    const isGroupColumn = this.groupColumns.indexOf(col);\n    if (isGroupColumn >= 0) { // was my grouping criteria\n      newGrouping = this.groupColumns.slice();\n      newGrouping.splice(isGroupColumn, 1);\n    }\n\n    col.detach();\n    this.columns.splice(i, 1);\n\n    this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, i);\n\n    if (newGrouping) {\n      this.setGroupCriteria(newGrouping);\n    } else if (sortCriteriaChanged) {\n      this.triggerResort(null);\n    } else if (groupSortCriteriaChanged) {\n      this.triggerGroupResort(null);\n    } else if (col.isFiltered()) {\n      this.dirtyOrderFiltering();\n    }\n\n    return true;\n  }\n\n  clear() {\n    if (this.columns.length === 0) {\n      return;\n    }\n    this.sortCriteria.forEach((d) => {\n      d.col.on(`${Column.EVENT_DIRTY_CACHES}.order`, null!);\n    });\n    this.sortCriteria.splice(0, this.sortCriteria.length);\n    this.groupSortCriteria.forEach((d) => {\n      d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null!);\n    });\n    this.groupSortCriteria.splice(0, this.groupSortCriteria.length);\n\n    this.groupColumns.forEach((d) => {\n      d.on(Ranking.COLUMN_GROUP_DIRTY, null!);\n    });\n    this.groupColumns.splice(0, this.groupColumns.length);\n\n    this.columns.forEach((col) => {\n      this.unforward(col, ...Ranking.FORWARD_COLUMN_EVENTS);\n      col.detach();\n    });\n    const removed = this.columns.splice(0, this.columns.length);\n    this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], removed);\n  }\n\n  get flatColumns(): Column[] {\n    const r: IFlatColumn[] = [];\n    this.flatten(r, 0, Column.FLAT_ALL_COLUMNS);\n    return r.map((d) => d.col);\n  }\n\n  find(idOrFilter: string | ((col: Column) => boolean)) {\n    const filter = typeof (idOrFilter) === 'string' ? (col: Column) => col.id === idOrFilter : idOrFilter;\n    const r = this.flatColumns;\n    for (const v of r) {\n      if (filter(v)) {\n        return v;\n      }\n    }\n    return null;\n  }\n\n  isFiltered() {\n    return this.columns.some((d) => d.isFiltered());\n  }\n\n  filter(row: IDataRow) {\n    return this.columns.every((d) => d.filter(row));\n  }\n\n  clearFilters() {\n    return this.columns.map((d) => d.clearFilter()).some((d) => d);\n  }\n\n  findMyRanker() {\n    return this;\n  }\n\n  get fqid() {\n    return this.id;\n  }\n\n  /**\n   * marks the header, values, or both as dirty such that the values are reevaluated\n   * @param type specify in more detail what is dirty, by default whole column\n   */\n  markDirty(type: 'header' | 'values' | 'all' = 'all') {\n    switch (type) {\n      case 'header':\n        return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\n      case 'values':\n        return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY]);\n      default:\n        return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\n    }\n  }\n}\n\nfunction equalCriteria(a: ISortCriteria[], b: ISortCriteria[]) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  return a.every((ai, i) => {\n    const bi = b[i];\n    return ai.col === bi.col && ai.asc === bi.asc;\n  });\n}\n","/**\n * @internal\n */\nexport interface IDebounceContext {\n  /**\n   * aka this\n   */\n  self: any;\n  args: any[];\n}\n\n/**\n * create a delayed call, can be called multiple times but only the last one at most delayed by timeToDelay will be executed\n * @param {(...args: any[]) => void} callback the callback to call\n * @param {number} timeToDelay delay the call in milliseconds\n * @param choose optional function to merge call context\n * @return {(...args: any[]) => any} a function that can be called with the same interface as the callback but delayed\n * @internal\n */\nexport default function debounce(callback: (...args: any[]) => void, timeToDelay = 100, choose?: (current: IDebounceContext, next: IDebounceContext) => IDebounceContext) {\n  let tm = -1;\n  let ctx: IDebounceContext | null = null;\n\n  return function (this: any, ...args: any[]) {\n    if (tm >= 0) {\n      clearTimeout(tm);\n      tm = -1;\n    }\n\n    const next = {self: this, args};\n    // compute current context\n    ctx = ctx && choose ? choose(ctx, next) : next;\n\n    tm = self.setTimeout(() => {\n      console.assert(ctx != null);\n      callback.apply(ctx!.self, ctx!.args);\n      ctx = null;\n    }, timeToDelay);\n  };\n}\n","import {Category, SupportType} from './annotations';\nimport Column from './Column';\nimport {IDataRow, IColumnDesc} from './interfaces';\nimport {integrateDefaults} from './internal';\n\n\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createRankDesc(label: string = 'Rank') {\n  return {type: 'rank', label};\n}\n\n/**\n * a rank column\n */\n@SupportType()\n@Category('support')\nexport default class RankColumn extends Column {\n\n  constructor(id: string, desc: IColumnDesc) {\n    super(id, integrateDefaults(desc, {\n      width: 50\n    }));\n  }\n\n  getLabel(row: IDataRow) {\n    return String(this.getValue(row));\n  }\n\n  getRaw(row: IDataRow) {\n    const ranking = this.findMyRanker();\n    if (!ranking) {\n      return -1;\n    }\n    return ranking.getRank(row.i);\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getRaw(row);\n    return r === -1 ? null : r;\n  }\n\n  get frozen() {\n    return this.desc.frozen !== false;\n  }\n}\n","import {Category, SupportType, toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {IGroup, IColumnDesc} from './interfaces';\nimport Ranking from './Ranking';\nimport {IEventListener} from '../internal';\nimport {integrateDefaults} from './internal';\n\n\nexport enum EAggregationState {\n  COLLAPSE = 'collapse',\n  EXPAND = 'expand',\n  EXPAND_TOP_N = 'expand_top'\n}\n\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createAggregateDesc(label: string = 'Aggregate Groups') {\n  return {type: 'aggregate', label, fixed: true};\n}\n\nexport interface IAggregateGroupColumnDesc extends IColumnDesc {\n  isAggregated(ranking: Ranking, group: IGroup): EAggregationState;\n\n  setAggregated(ranking: Ranking, group: IGroup, value: EAggregationState): void;\n}\n\n/**\n * emitted upon changing of the aggregate attribute\n * @aparam value -1 = no, 0 = fully aggregated, N = show top N\n * @asMemberOf AggregateGroupColumn\n * @event\n */\nexport declare function aggregate(ranking: Ranking, group: IGroup, value: boolean, state: EAggregationState): void;\n\n/**\n * a checkbox column for selections\n */\n@toolbar('setShowTopN', 'rename')\n@SupportType()\n@Category('support')\nexport default class AggregateGroupColumn extends Column {\n  static readonly EVENT_AGGREGATE = 'aggregate';\n\n  constructor(id: string, desc: Readonly<IAggregateGroupColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 40\n    }));\n  }\n\n  get frozen() {\n    return this.desc.frozen !== false;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([AggregateGroupColumn.EVENT_AGGREGATE]);\n  }\n\n  on(type: typeof AggregateGroupColumn.EVENT_AGGREGATE, listener: typeof aggregate | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  isAggregated(group: IGroup) {\n    const ranking = this.findMyRanker()!;\n    if ((<IAggregateGroupColumnDesc>this.desc).isAggregated) {\n      return (<IAggregateGroupColumnDesc>this.desc).isAggregated(ranking, group);\n    }\n    return false;\n  }\n\n  setAggregated(group: IGroup, value: boolean | EAggregationState) {\n    const n: EAggregationState = typeof value === 'boolean' ? (value ? EAggregationState.EXPAND : EAggregationState.COLLAPSE): value;\n    const ranking = this.findMyRanker()!;\n    const current = ((<IAggregateGroupColumnDesc>this.desc).isAggregated) && (<IAggregateGroupColumnDesc>this.desc).isAggregated(ranking, group);\n    if (current === n) {\n      return true;\n    }\n\n    if ((<IAggregateGroupColumnDesc>this.desc).setAggregated) {\n      (<IAggregateGroupColumnDesc>this.desc).setAggregated(ranking, group, n);\n    }\n    this.fire(AggregateGroupColumn.EVENT_AGGREGATE, ranking, group, n !== EAggregationState.COLLAPSE, n);\n    return false;\n  }\n}\n","import {Category, SupportType, toolbar} from './annotations';\nimport {IndicesArray, IDataRow, IGroup, ECompareValueType, IValueColumnDesc} from './interfaces';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IEventListener} from '../internal';\nimport {integrateDefaults} from './internal';\n\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createSelectionDesc(label: string = 'Selection Checkboxes') {\n  return {type: 'selection', label, fixed: true};\n}\n\nexport interface ISelectionColumnDesc extends IValueColumnDesc<boolean> {\n  /**\n   * setter for selecting/deselecting the given row\n   */\n  setter(index: number, value: boolean): void;\n\n  /**\n   * setter for selecting/deselecting the given row\n   */\n  setterAll(indices: IndicesArray, value: boolean): void;\n}\n\n\n/**\n * emitted when rows are selected\n * @asMemberOf SelectionColumn\n * @param dataIndex the (de)seleced row\n * @param value true if selected else false\n * @param dataIndices in case of multiple rows are selected\n * @event\n */\nexport declare function select_SC(dataIndex: number, value: boolean, dataIndices?: IndicesArray): void;\n\n/**\n * a checkbox column for selections\n */\n@SupportType()\n@toolbar('sort', 'sortBy', 'group', 'groupBy', 'invertSelection')\n@Category('support')\nexport default class SelectionColumn extends ValueColumn<boolean> {\n  private static SELECTED_GROUP: IGroup = {\n    name: 'Selected',\n    color: 'orange'\n  };\n  private static NOT_SELECTED_GROUP: IGroup = {\n    name: 'Unselected',\n    color: 'gray'\n  };\n  static readonly EVENT_SELECT = 'select';\n\n  constructor(id: string, desc: Readonly<ISelectionColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 20\n    }));\n  }\n\n  get frozen() {\n    return this.desc.frozen !== false;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([SelectionColumn.EVENT_SELECT]);\n  }\n\n  on(type: typeof SelectionColumn.EVENT_SELECT, listener: typeof select_SC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  setValue(row: IDataRow, value: boolean) {\n    const old = this.getValue(row);\n    if (old === value) {\n      return true;\n    }\n    return this.setImpl(row, value);\n  }\n\n  setValues(rows: IndicesArray, value: boolean) {\n    if (rows.length === 0) {\n      return;\n    }\n    if ((<ISelectionColumnDesc>this.desc).setterAll) {\n      (<ISelectionColumnDesc>this.desc).setterAll(rows, value);\n    }\n    this.fire(SelectionColumn.EVENT_SELECT, rows[0], value, rows);\n    return true;\n  }\n\n  private setImpl(row: IDataRow, value: boolean) {\n    if ((<ISelectionColumnDesc>this.desc).setter) {\n      (<ISelectionColumnDesc>this.desc).setter(row.i, value);\n    }\n    this.fire(SelectionColumn.EVENT_SELECT, row.i, value);\n    return true;\n  }\n\n  toggleValue(row: IDataRow) {\n    const old = this.getValue(row);\n    this.setImpl(row, !old);\n    return !old;\n  }\n\n  toCompareValue(row: IDataRow) {\n    const v = this.getValue(row) === true;\n    return v ? 1 : 0;\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.BINARY;\n  }\n\n  group(row: IDataRow) {\n    const isSelected = this.getValue(row);\n    return Object.assign({}, isSelected ? SelectionColumn.SELECTED_GROUP : SelectionColumn.NOT_SELECTED_GROUP);\n  }\n}\n","import {Category, SupportType} from './annotations';\nimport {IDataRow, IColumnDesc, IGroup} from './interfaces';\nimport Column from './Column';\n\nexport interface IAction {\n  name: string;\n  icon?: string;\n  className?: string;\n\n  action(row: IDataRow): void;\n}\n\nexport interface IGroupAction {\n  name: string;\n  icon?: string;\n  className?: string;\n\n  action(group: IGroup, rows: IDataRow[]): void;\n}\n\n/**\n * utility for creating an action description with optional label\n * @param label\n * @param actions\n * @param groupActions\n * @returns {{type: string, label: string}}\n */\nexport function createActionDesc(label = 'actions', actions: Readonly<IAction>[] = [], groupActions: Readonly<IGroupAction>[] = []) {\n  return {type: 'actions', label, actions, groupActions, fixed: true};\n}\n\nexport interface IActionDesc {\n  actions?: Readonly<IAction>[];\n  groupActions?: Readonly<IGroupAction>[];\n}\n\nexport declare type IActionColumnDesc = IColumnDesc & IActionDesc;\n\n/**\n * a default column with no values\n */\n@SupportType()\n@Category('support')\nexport default class ActionColumn extends Column {\n\n  readonly actions: IAction[];\n  readonly groupActions: IGroupAction[];\n\n  constructor(id: string, desc: Readonly<IActionColumnDesc>) {\n    super(id, desc);\n\n    this.actions = desc.actions || [];\n    this.groupActions = desc.groupActions || [];\n  }\n\n  getLabel() {\n    return '';\n  }\n\n  getValue() {\n    return '';\n  }\n\n  compare() {\n    return 0; //can't compare\n  }\n}\n","import {IGroup} from './interfaces';\n\n\nexport function isMissingValue(v: any): boolean {\n  if(v == null || v === undefined || v === '' || v === 'NA' || v === 'na' || v === 'Na' || v === 'nA' || v === 'NaN' || (typeof v === 'number' && isNaN(v))) {\n    return true;\n  }\n  if (!Array.isArray(v)) {\n    return false;\n  }\n  for (const vi of v) {\n    if (!isMissingValue(vi)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isUnknown(v?: number | null) {\n  return v == null || v === undefined || isNaN(v);\n}\n\nexport const FIRST_IS_NAN = -1;\nexport const FIRST_IS_MISSING = 1;\n\n\nexport const missingGroup: IGroup = {\n  name: 'Missing values',\n  color: 'gray'\n};\n","import {Category, toolbar, dialogAddons} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {defaultGroup, IDataRow, IGroup, ECompareValueType, IValueColumnDesc, othersGroup, ITypeFactory} from './interfaces';\nimport {missingGroup, isMissingValue} from './missing';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {equal, IEventListener, ISequence, isSeqEmpty} from '../internal';\nimport {integrateDefaults} from './internal';\n\nexport enum EAlignment {\n  left = 'left',\n  center = 'center',\n  right = 'right'\n}\n\nexport enum EStringGroupCriteriaType {\n  value = 'value',\n  startsWith = 'startsWith',\n  regex = 'regex'\n}\n\nexport interface IStringGroupCriteria {\n  type: EStringGroupCriteriaType;\n  values: (string | RegExp)[];\n}\n\nexport interface IStringDesc {\n  /**\n   * column alignment: left, center, right\n   * @default left\n   */\n  alignment?: EAlignment;\n\n  /**\n   * escape html tags\n   */\n  escape?: boolean;\n}\n\n\nexport declare type IStringColumnDesc = IStringDesc & IValueColumnDesc<string>;\n\nexport interface IStringFilter {\n  filter: string | RegExp | null;\n  filterMissing: boolean;\n}\n\n/**\n * emitted when the filter property changes\n * @asMemberOf StringColumn\n * @event\n */\nexport declare function filterChanged_SC(previous: string | RegExp | null, current: string | RegExp | null): void;\n\n\n/**\n * emitted when the grouping property changes\n * @asMemberOf StringColumn\n * @event\n */\nexport declare function groupingChanged_SC(previous: (RegExp | string)[][], current: (RegExp | string)[][]): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'sortGroupBy', 'filterString')\n@dialogAddons('group', 'groupString')\n@Category('string')\nexport default class StringColumn extends ValueColumn<string> {\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_GROUPING_CHANGED = 'groupingChanged';\n\n  //magic key for filtering missing ones\n  private static readonly FILTER_MISSING = '__FILTER_MISSING';\n  private currentFilter: IStringFilter | null = null;\n\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n\n  private currentGroupCriteria: IStringGroupCriteria = {\n    type: EStringGroupCriteriaType.startsWith,\n    values: []\n  };\n\n  constructor(id: string, desc: Readonly<IStringColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 200\n    }));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n  }\n\n\n  protected createEventList() {\n    return super.createEventList().concat([StringColumn.EVENT_GROUPING_CHANGED, StringColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof StringColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_SC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof StringColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged_SC | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow): string | null {\n    const v: any = super.getValue(row);\n    return isMissingValue(v) ? null : String(v);\n  }\n\n  getLabel(row: IDataRow) {\n    return this.getValue(row) || '';\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    if (this.currentFilter instanceof RegExp) {\n      r.filter = `REGEX:${(<RegExp>this.currentFilter).source}`;\n    } else {\n      r.filter = this.currentFilter;\n    }\n    if (this.currentGroupCriteria) {\n      const {type, values} = this.currentGroupCriteria;\n      r.groupCriteria = {\n        type,\n        values: values.map((value) => `${type}:${value instanceof RegExp && type === EStringGroupCriteriaType.regex ? value.source : value}`)\n      };\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.filter) {\n      const filter = dump.filter;\n      if (typeof filter === 'string') {\n        // compatibility case\n        if ((<string>filter).startsWith('REGEX:')) {\n          this.currentFilter = {\n            filter: new RegExp(filter.slice(6), 'gm'),\n            filterMissing: false\n          };\n        } else if (filter === StringColumn.FILTER_MISSING) {\n          this.currentFilter = {\n            filter: null,\n            filterMissing: true\n          };\n        } else {\n          this.currentFilter = {\n            filter,\n            filterMissing: false\n          };\n        }\n      } else {\n        this.currentFilter = {\n          filter: filter.filter && (<string>filter.filter).startsWith('REGEX:') ? new RegExp(filter.slice(6), 'gm') : filter.filter || '',\n          filterMissing: filter.filterMissing === true\n        };\n      }\n    } else {\n      this.currentFilter = null;\n    }\n\n    // tslint:disable-next-line: early-exit\n    if (dump.groupCriteria) {\n      const {type, values} = <IStringGroupCriteria>dump.groupCriteria;\n      this.currentGroupCriteria = {\n        type,\n        values: values.map((value) => type === EStringGroupCriteriaType.regex ? new RegExp(<string>value, 'gm') : value)\n      };\n    }\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow) {\n    if (!this.isFiltered()) {\n      return true;\n    }\n    const r = this.getLabel(row);\n    const filter = this.currentFilter!;\n    const ff = filter.filter;\n\n    if (r == null || r.trim() === '') {\n      return !filter.filterMissing;\n    }\n    if (!ff) {\n      return true;\n    }\n    if (ff instanceof RegExp) {\n      return r !== '' && r.match(ff) != null; // You can not use RegExp.test(), because of https://stackoverflow.com/a/6891667\n    }\n    return r !== '' && r.toLowerCase().includes(ff.toLowerCase());\n  }\n\n  getFilter() {\n    return this.currentFilter;\n  }\n\n  setFilter(filter: IStringFilter | null) {\n    if (filter === this.currentFilter) {\n      return;\n    }\n    const current = this.currentFilter || {filter: null, filterMissing: false};\n    const target = filter || {filter: null, filterMissing: false};\n    if (current.filterMissing === target.filterMissing && (current.filter === target.filter ||\n      (current.filter instanceof RegExp && target.filter instanceof RegExp && current.filter.source === target.filter.source))) {\n      return;\n    }\n    this.fire([StringColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\n  }\n\n  clearFilter() {\n    const was = this.isFiltered();\n    this.setFilter(null);\n    return was;\n  }\n\n  getGroupCriteria(): IStringGroupCriteria {\n    return this.currentGroupCriteria;\n  }\n\n  setGroupCriteria(value: IStringGroupCriteria) {\n    if (equal(this.currentGroupCriteria, value) || value == null) {\n      return;\n    }\n    const bak = this.getGroupCriteria();\n    this.currentGroupCriteria = value;\n    this.fire([StringColumn.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n  }\n\n  group(row: IDataRow): IGroup {\n    if (this.getValue(row) == null) {\n      return Object.assign({}, missingGroup);\n    }\n\n    if (!this.currentGroupCriteria) {\n      return Object.assign({}, othersGroup);\n    }\n    const value = this.getLabel(row);\n\n    if (!value) {\n      return Object.assign({}, missingGroup);\n    }\n\n    const {type, values} = this.currentGroupCriteria;\n    if (type === EStringGroupCriteriaType.value) {\n      return {\n        name: value,\n        color: defaultGroup.color\n      };\n    }\n    for (const groupValue of values) {\n      if (type === EStringGroupCriteriaType.startsWith && typeof groupValue === 'string' && value.startsWith(groupValue)) {\n        return {\n          name: groupValue,\n          color: defaultGroup.color\n        };\n      }\n      // tslint:disable-next-line: early-exit\n      if (type === EStringGroupCriteriaType.regex && groupValue instanceof RegExp && groupValue.test(value)) {\n        return {\n          name: groupValue.source,\n          color: defaultGroup.color\n        };\n      }\n    }\n    return Object.assign({}, othersGroup);\n  }\n\n\n  toCompareValue(row: IDataRow) {\n    const v = this.getValue(row);\n    return v === '' || v == null ? null : v.toLowerCase();\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.STRING;\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, _group: IGroup, valueCache?: ISequence<any>) {\n    if (isSeqEmpty(rows)) {\n      return null;\n    }\n    // take the smallest one\n    if (valueCache) {\n      return valueCache.reduce((acc, v) => acc == null || v < acc ? v : acc, <null |string>null);\n    }\n    return rows.reduce((acc, d) => {\n      const v = this.getValue(d);\n      return acc == null || (v != null && v < acc) ? v : acc;\n    }, <null | string>null);\n  }\n\n  toCompareGroupValueType() {\n    return ECompareValueType.STRING;\n  }\n}\n\n","import * as equalImpl from 'fast-deep-equal';\n\n// keep here to have a \"real\" export for webpack not just interfaces\n\n/**\n * deep equal comparison\n */\nexport const equal: (a: any, b: any) => boolean = (typeof equalImpl === 'function' ? equalImpl : (<any>equalImpl).default);\n\nexport interface IBin<T> {\n  /**\n   * bin start\n   */\n  x0: T;\n  /**\n   * bin end\n   */\n  x1: T;\n  /**\n   * bin count\n   */\n  count: number;\n}\n\nexport declare type INumberBin = IBin<number>;\n\nexport interface IBoxPlotData {\n  readonly min: number;\n  readonly max: number;\n  readonly median: number;\n  readonly q1: number;\n  readonly q3: number;\n  readonly outlier?: number[];\n  readonly whiskerLow?: number;\n  readonly whiskerHigh?: number;\n}\n\nexport interface IAdvancedBoxPlotData extends IBoxPlotData {\n  readonly mean: number;\n\n  readonly missing: number;\n  readonly count: number;\n}\n\nexport interface IHistogramStats<T> {\n  readonly min: T | null;\n  readonly max: T | null;\n\n  readonly missing: number;\n  readonly count: number;\n\n  readonly maxBin: number;\n  readonly hist: ReadonlyArray<IBin<T>>;\n}\n\nexport interface IStatistics extends IHistogramStats<number> {\n  readonly mean: number;\n}\n\nexport interface ICategoricalBin {\n  cat: string;\n  count: number;\n}\n\nexport declare type IDateBin = IBin<Date>;\n\nexport interface ICategoricalStatistics {\n  readonly missing: number;\n  readonly count: number;\n\n  readonly maxBin: number;\n  readonly hist: ReadonlyArray<ICategoricalBin>;\n}\n\nexport declare type IDateHistGranularity = 'year' | 'month' | 'day';\n\nexport interface IDateStatistics extends IHistogramStats<Date> {\n  readonly histGranularity: IDateHistGranularity;\n}\n","import Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {IDataRow, ITypeFactory} from './interfaces';\nimport StringColumn from './StringColumn';\nimport {IEventListener} from '../internal';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\n\n\n/**\n * emitted when the filter property changes\n * @asMemberOf AnnotateColumn\n * @event\n */\nexport declare function filterChanged_AC(previous: string | RegExp | null, current: string | RegExp | null): void;\n\n\n/**\n * emitted when the grouping property changes\n * @asMemberOf AnnotateColumn\n * @event\n */\nexport declare function groupingChanged_AC(previous: (RegExp | string)[][], current: (RegExp | string)[][]): void;\n\n/**\n * emitted when the value of a row changes\n * @asMemberOf AnnotateColumn\n * @event\n */\nexport declare function valueChanged(dataIndex: number, previous: string, current: string): void;\n\n/**\n * a string column in which the values can be edited locally\n */\nexport default class AnnotateColumn extends StringColumn {\n  static readonly EVENT_VALUE_CHANGED = 'valueChanged';\n\n  private readonly annotations = new Map<number, string>();\n\n  protected createEventList() {\n    return super.createEventList().concat([AnnotateColumn.EVENT_VALUE_CHANGED]);\n  }\n\n  on(type: typeof AnnotateColumn.EVENT_VALUE_CHANGED, listener: typeof valueChanged | null): this;\n  on(type: typeof StringColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_AC | null): this;\n  on(type: typeof StringColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged_AC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow) {\n    if (this.annotations.has(row.i)) {\n      return this.annotations.get(row.i)!;\n    }\n    return super.getValue(row);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.annotations = {};\n    this.annotations.forEach((v, k) => {\n      r.annotations[k] = v;\n    });\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (!dump.annotations) {\n      return;\n    }\n    Object.keys(dump.annotations).forEach((k) => {\n      this.annotations.set(Number(k), dump.annotations[k]);\n    });\n  }\n\n  setValue(row: IDataRow, value: string) {\n    const old = this.getValue(row);\n    if (old === value) {\n      return true;\n    }\n    if (value === '' || value == null) {\n      this.annotations.delete(row.i);\n    } else {\n      this.annotations.set(row.i, value);\n    }\n    this.fire([AnnotateColumn.EVENT_VALUE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], row.i, old, value);\n    return true;\n  }\n}\n","import {ICategory, ICategoricalColorMappingFunction} from '.';\nimport {DEFAULT_COLOR, ITypedDump} from './interfaces';\n\n\nexport const DEFAULT_CATEGORICAL_COLOR_FUNCTION: ICategoricalColorMappingFunction = {\n  apply: (v) => v ? v.color : DEFAULT_COLOR,\n  toJSON: () => null,\n  clone: () => DEFAULT_CATEGORICAL_COLOR_FUNCTION,\n  eq: (other) => other === DEFAULT_CATEGORICAL_COLOR_FUNCTION\n};\n\nexport class ReplacmentColorMappingFunction implements ICategoricalColorMappingFunction {\n  public readonly map: ReadonlyMap<string, string>;\n  constructor(map: Map<ICategory | string, string>) {\n    this.map = new Map(Array.from(map.entries()).map(([k, v]) => <[string, string]>[typeof k === 'string' ? k : k.name, v]));\n  }\n\n  apply(v: ICategory) {\n    return this.map.has(v.name) ? this.map.get(v.name)! : DEFAULT_CATEGORICAL_COLOR_FUNCTION.apply(v);\n  }\n\n  toJSON() {\n    const r: any = {};\n    this.map.forEach((v, k) => r[k] = v);\n    return {\n      type: 'replace',\n      map: r\n    };\n  }\n\n  clone() {\n    return new ReplacmentColorMappingFunction(new Map(this.map.entries()));\n  }\n\n  eq(other: ICategoricalColorMappingFunction): boolean {\n    if (!(other instanceof ReplacmentColorMappingFunction)) {\n      return false;\n    }\n    if (other.map.size !== this.map.size) {\n      return false;\n    }\n    return Array.from(this.map.keys()).every((k) => this.map.get(k) === other.map.get(k));\n  }\n\n  static restore(dump: any, categories: ICategory[]) {\n    if (dump.type === 'replace') { // new dump format\n      dump = dump.map;\n    }\n    const lookup = new Map(categories.map((d) => <[string, ICategory]>[d.name, d]));\n    const r = new Map<ICategory, string>();\n    for (const key of Object.keys(dump)) {\n      if (lookup.has(key)) {\n        r.set(lookup.get(key)!, dump[key]);\n      }\n    }\n    return new ReplacmentColorMappingFunction(r);\n  }\n}\n\n/**\n * @internal\n */\nexport function restoreCategoricalColorMapping(dump: ITypedDump | null | undefined, categories: ICategory[]): ICategoricalColorMappingFunction {\n  if (!dump) {\n    return DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n  return ReplacmentColorMappingFunction.restore(dump, categories);\n}\n","import {ISequence, isSeqEmpty, empty} from '../internal';\nimport {FIRST_IS_MISSING, IDataRow, ECompareValueType, ICompareValue, ICategory, ICategoricalColumn, ICategoricalDesc, ICategoricalFilter} from '.';\nimport {colorPool} from './internal';\nimport {DEFAULT_COLOR} from './interfaces';\nimport {ICategoricalsColumn, ISetCategoricalFilter} from './ICategoricalColumn';\n\n/** @internal */\nexport function toCategory(cat: (string | Partial<ICategory>), value: number, nextColor: () => string = () => DEFAULT_COLOR) {\n  if (typeof cat === 'string') {\n    //just the category value\n    return {name: cat, label: cat, color: nextColor(), value};\n  }\n  const name = cat.name == null ? String(cat.value) : cat.name;\n  return {\n    name,\n    label: cat.label || name,\n    color: cat.color || nextColor(),\n    value: cat.value != null ? cat.value : value\n  };\n}\n\n\n/** @internal */\nexport function toCompareCategoryValue(v: ICategory | null) {\n  if (v == null) {\n    return NaN;\n  }\n  return v.value;\n}\n\nexport const COMPARE_CATEGORY_VALUE_TYPES = ECompareValueType.FLOAT_ASC;\n\nfunction findMostFrequent(rows: ISequence<ICategory | null>, valueCache?: ISequence<ICategory | null>): {cat: ICategory | null, count: number} {\n  const hist = new Map<ICategory | null, number>();\n\n  if (valueCache) {\n    valueCache.forEach((cat) => {\n      hist.set(cat, (hist.get(cat) || 0) + 1);\n    });\n  } else {\n    rows.forEach((cat) => {\n      hist.set(cat, (hist.get(cat) || 0) + 1);\n    });\n  }\n\n  if (hist.size === 0) {\n    return {\n      cat: null,\n      count: 0\n    };\n  }\n  let topCat: ICategory | null = null;\n  let topCount = 0;\n  hist.forEach((count, cat) => {\n    if (count > topCount) {\n      topCat = cat;\n      topCount = count;\n    }\n  });\n  return {\n    cat: topCat,\n    count: topCount\n  };\n}\n\n/** @internal */\nexport function toMostFrequentCategoricals(rows: ISequence<IDataRow>, col: ICategoricalsColumn): (ICategory | null)[] {\n  if (isSeqEmpty(rows)) {\n    return empty(col.dataLength!);\n  }\n  const maps = empty(col.dataLength!).map(() => new Map<ICategory | null, number>());\n  rows.forEach((row) => {\n    const vs = col.getCategories(row);\n    if (!vs) {\n      return;\n    }\n    for (let i = 0; i < maps.length; ++i) {\n      const hist = maps[i];\n      const cat = vs[i] || null;\n      hist.set(cat, (hist.get(cat) || 0) + 1);\n    }\n  });\n\n  return maps.map((hist) => {\n    if (hist.size === 0) {\n      return null;\n    }\n    let topCat: ICategory | null = null;\n    let topCount = 0;\n    hist.forEach((count, cat) => {\n      if (count > topCount) {\n        topCat = cat;\n        topCount = count;\n      }\n    });\n    return topCat;\n  });\n}\n\n/** @internal */\nexport function toGroupCompareCategoryValue(rows: ISequence<IDataRow>, col: ICategoricalColumn, valueCache?: ISequence<ICategory | null>): ICompareValue[] {\n  if (isSeqEmpty(rows)) {\n    return [NaN, null];\n  }\n  const mostFrequent = findMostFrequent(rows.map((d) => col.getCategory(d)), valueCache);\n  if (mostFrequent.cat == null) {\n    return [NaN, null];\n  }\n  return [mostFrequent.cat.value, mostFrequent.cat.name.toLowerCase()];\n}\n\nexport const COMPARE_GROUP_CATEGORY_VALUE_TYPES = [ECompareValueType.FLOAT, ECompareValueType.STRING];\n\n/** @internal */\nfunction compareCategory(a: ICategory | null, b: ICategory | null) {\n  const aNull = a == null || isNaN(a.value);\n  const bNull = b == null || isNaN(b.value);\n  if (aNull || a == null) {\n    return bNull ? 0 : FIRST_IS_MISSING;\n  }\n  if (bNull || b == null) {\n    return -FIRST_IS_MISSING;\n  }\n  if (a.value === b.value) {\n    return a.label.toLowerCase().localeCompare(b.label.toLowerCase());\n  }\n  return a.value - b.value;\n}\n\nexport function toCategories(desc: ICategoricalDesc) {\n  if (!desc.categories) {\n    return [];\n  }\n  const nextColor = colorPool();\n  const l = desc.categories.length - 1;\n  const cats = desc.categories.map((cat, i) => toCategory(cat, i / l, nextColor));\n  return cats.sort(compareCategory);\n}\n\n/** @internal */\nfunction isEmptyFilter(f: ICategoricalFilter | null) {\n  return f == null || (!f.filterMissing && (f.filter == null || f.filter === ''));\n}\n\n/** @internal */\nexport function isEqualCategoricalFilter(a: ICategoricalFilter | null, b: ICategoricalFilter | null) {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return isEmptyFilter(a) === isEmptyFilter(b);\n  }\n  if (a.filterMissing !== b.filterMissing || (typeof a.filter !== typeof b.filter)) {\n    return false;\n  }\n  if (Array.isArray(a.filter)) {\n    return arrayEquals(<string[]>a.filter, <string[]>b.filter);\n  }\n  return String(a.filter) === String(b.filter);\n}\n\n/** @internal */\nexport function isEqualSetCategoricalFilter(a: ISetCategoricalFilter | null, b: ISetCategoricalFilter | null) {\n  if (!isEqualCategoricalFilter(a, b)) {\n    return false;\n  }\n  const am = a && a.mode ? a.mode : 'every';\n  const bm = b && b.mode ? b.mode : 'every';\n  return am === bm;\n}\n\nfunction arrayEquals<T>(a: T[], b: T[]) {\n  const al = a != null ? a.length : 0;\n  const bl = b != null ? b.length : 0;\n  if (al !== bl) {\n    return false;\n  }\n  if (al === 0) {\n    return true;\n  }\n  return a.every((ai, i) => ai === b[i]);\n}\n\n/** @internal */\nexport function isCategoryIncluded(filter: ICategoricalFilter | null, category: ICategory | null) {\n  if (filter == null) {\n    return true;\n  }\n  if (category == null || isNaN(category.value)) {\n    return !filter.filterMissing;\n  }\n  const filterObj = filter.filter;\n  if (Array.isArray(filterObj)) { //array mode\n    return filterObj.includes(category.name);\n  }\n  if (typeof filterObj === 'string' && filterObj.length > 0) { //search mode\n    return category.name.toLowerCase().includes(filterObj.toLowerCase());\n  }\n  if (filterObj instanceof RegExp) { //regex match mode\n    return filterObj.test(category.name);\n  }\n  return true;\n}\n","import {IEventListener, ISequence} from '../internal';\nimport {Category, toolbar} from './annotations';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {ICategoricalColumn, ICategoricalColumnDesc, ICategoricalFilter, ICategory, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, IGroup, ICompareValue, DEFAULT_COLOR, ITypeFactory, ECompareValueType} from './interfaces';\nimport {missingGroup} from './missing';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {toCategories, isCategoryIncluded, isEqualCategoricalFilter, toCompareCategoryValue, COMPARE_CATEGORY_VALUE_TYPES, toGroupCompareCategoryValue, COMPARE_GROUP_CATEGORY_VALUE_TYPES} from './internalCategorical';\n\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf CategoricalColumn\n * @event\n */\nexport declare function colorMappingChanged_CC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n\n/**\n * emitted when the filter property changes\n * @asMemberOf CategoricalColumn\n * @event\n */\nexport declare function filterChanged_CC(previous: ICategoricalFilter | null, current: ICategoricalFilter | null): void;\n\n/**\n * column for categorical values\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'sortGroupBy', 'filterCategorical', 'colorMappedCategorical')\n@Category('categorical')\nexport default class CategoricalColumn extends ValueColumn<string> implements ICategoricalColumn {\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n\n  readonly categories: ICategory[];\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\n  /**\n   * set of categories to show\n   * @type {null}\n   * @private\n   */\n  private currentFilter: ICategoricalFilter | null = null;\n\n  constructor(id: string, desc: Readonly<ICategoricalColumnDesc>) {\n    super(id, desc);\n    this.categories = toCategories(desc);\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([CategoricalColumn.EVENT_FILTER_CHANGED, CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof CategoricalColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_CC | null): this;\n  on(type: typeof CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_CC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getCategory(row);\n    return v ? v.name : null;\n  }\n\n  getCategory(row: IDataRow) {\n    const v = super.getValue(row);\n    if (!v) {\n      return null;\n    }\n    const vs = String(v);\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : null;\n  }\n\n  get dataLength() {\n    return this.categories.length;\n  }\n\n  get labels() {\n    return this.categories.map((d) => d.label);\n  }\n\n  getLabel(row: IDataRow) {\n    const v = this.getCategory(row);\n    return v ? v.label : '';\n  }\n\n  getCategories(row: IDataRow) {\n    const v = this.getCategory(row);\n    return [v];\n  }\n\n  getValues(row: IDataRow) {\n    const v = this.getCategory(row);\n    return this.categories.map((d) => d === v);\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getValues(row).map(String);\n  }\n\n  getMap(row: IDataRow) {\n    const cats = this.categories;\n    return this.getValues(row).map((value, i) => ({key: cats[i].label, value}));\n  }\n\n  getMapLabel(row: IDataRow) {\n    const cats = this.categories;\n    return this.getLabels(row).map((value, i) => ({key: cats[i].label, value}));\n  }\n\n  getSet(row: IDataRow) {\n    const cat = this.getCategory(row);\n    const r = new Set<ICategory>();\n    if (cat) {\n      r.add(cat);\n    }\n    return r;\n  }\n\n  iterCategory(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.filter = this.currentFilter;\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n\n    if ('filter' in dump) {\n      this.currentFilter = null;\n      return;\n    }\n    const bak = dump.filter;\n    if (typeof bak === 'string' || Array.isArray(bak)) {\n      this.currentFilter = {filter: bak, filterMissing: false};\n    } else {\n      this.currentFilter = bak;\n    }\n  }\n\n  getColor(row: IDataRow) {\n    const v = this.getCategory(row);\n    return v ? this.colorMapping.apply(v) : DEFAULT_COLOR;\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow, valueCache?: any): boolean {\n    return isCategoryIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getCategory(row));\n  }\n\n  getFilter() {\n    return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\n  }\n\n  setFilter(filter: ICategoricalFilter | null) {\n    if (isEqualCategoricalFilter(this.currentFilter, filter)) {\n      return;\n    }\n    this.fire([CategoricalColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\n  }\n\n  clearFilter() {\n    const was = this.isFiltered();\n    this.setFilter(null);\n    return was;\n  }\n\n  toCompareValue(row: IDataRow, valueCache?: any) {\n    return toCompareCategoryValue(valueCache !== undefined ? valueCache : this.getCategory(row));\n  }\n\n  toCompareValueType(): ECompareValueType {\n    return COMPARE_CATEGORY_VALUE_TYPES;\n  }\n\n  group(row: IDataRow, valueCache?: any): IGroup {\n    const cat = valueCache !== undefined ? valueCache : this.getCategory(row);\n    if (!cat) {\n      return Object.assign({}, missingGroup);\n    }\n    return {name: cat.label, color: cat.color};\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, _group: IGroup, valueCache?: ISequence<any>): ICompareValue[] {\n    return toGroupCompareCategoryValue(rows, this, valueCache);\n  }\n\n  toCompareGroupValueType() {\n    return COMPARE_GROUP_CATEGORY_VALUE_TYPES;\n  }\n\n  getGroupRenderer() {\n    const current = super.getGroupRenderer();\n    if (current === this.desc.type && this.isGroupedBy() >= 0) {\n      // still the default and the stratification criteria\n      return 'catdistributionbar';\n    }\n    return current;\n  }\n}\n","import {Category, toolbar} from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {ICategoricalColumn, ICategory, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, ECompareValueType, IValueColumnDesc, ITypeFactory} from './interfaces';\nimport {IEventListener} from '../internal';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport {integrateDefaults} from './internal';\n\nexport interface IBooleanDesc {\n  /**\n   * string to show for true\n   * @default ✓\n   */\n  trueMarker?: string;\n  /**\n   * strint to show for false\n   * @default (empty)\n   */\n  falseMarker?: string;\n}\n\nexport declare type IBooleanColumnDesc = IValueColumnDesc<boolean> & IBooleanDesc;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf BooleanColumn\n * @event\n */\nexport declare function colorMappingChanged_BC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf BooleanColumn\n * @event\n */\nexport declare function filterChanged_BC(previous: boolean | null, current: boolean | null): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'filterBoolean', 'colorMappedCategorical')\n@Category('categorical')\nexport default class BooleanColumn extends ValueColumn<boolean> implements ICategoricalColumn {\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n\n  static readonly GROUP_TRUE = {name: 'True', color: 'black'};\n  static readonly GROUP_FALSE = {name: 'False', color: 'white'};\n\n  private currentFilter: boolean | null = null;\n\n  private colorMapping: ICategoricalColorMappingFunction;\n  readonly categories: ICategory[];\n\n  constructor(id: string, desc: Readonly<IBooleanColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 30\n    }));\n    this.categories = [\n      {\n        name: desc.trueMarker || '✓',\n        color: BooleanColumn.GROUP_TRUE.color,\n        label: BooleanColumn.GROUP_TRUE.name,\n        value: 0\n      },\n      {\n        name: desc.trueMarker || '',\n        color: BooleanColumn.GROUP_FALSE.color,\n        label: BooleanColumn.GROUP_FALSE.name,\n        value: 1\n      }\n    ];\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([BooleanColumn.EVENT_COLOR_MAPPING_CHANGED, BooleanColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof BooleanColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_BC | null): this;\n  on(type: typeof BooleanColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_BC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n\n  get dataLength() {\n    return this.categories.length;\n  }\n\n  get labels() {\n    return this.categories.map((d) => d.label);\n  }\n\n  getValue(row: IDataRow) {\n    const v: any = super.getValue(row);\n    if (typeof (v) === 'undefined' || v == null) {\n      return false;\n    }\n    return v === true || v === 'true' || v === 'yes' || v === 'x';\n  }\n\n  getCategory(row: IDataRow) {\n    const v = this.getValue(row);\n    return this.categories[v ? 0 : 1];\n  }\n\n  getCategories(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  iterCategory(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  getColor(row: IDataRow) {\n    return CategoricalColumn.prototype.getColor.call(this, row);\n  }\n\n  getLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabel.call(this, row);\n  }\n\n  getLabels(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabels.call(this, row);\n  }\n\n  getValues(row: IDataRow) {\n    return CategoricalColumn.prototype.getValues.call(this, row);\n  }\n\n  getMap(row: IDataRow) {\n    return CategoricalColumn.prototype.getMap.call(this, row);\n  }\n\n  getMapLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\n  }\n\n  getSet(row: IDataRow) {\n    const v = this.getValue(row);\n    const r = new Set<ICategory>();\n    r.add(this.categories[v ? 0 : 1]);\n    return r;\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.colorMapping = this.colorMapping.toJSON();\n    if (this.currentFilter != null) {\n      r.filter = this.currentFilter;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    if (typeof dump.filter !== 'undefined') {\n      this.currentFilter = dump.filter;\n    }\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow) {\n    if (!this.isFiltered()) {\n      return true;\n    }\n    const r = this.getValue(row);\n    return r === this.currentFilter;\n  }\n\n  getFilter() {\n    return this.currentFilter;\n  }\n\n  setFilter(filter: boolean | null) {\n    if (this.currentFilter === filter) {\n      return;\n    }\n    this.fire([BooleanColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\n  }\n\n  clearFilter() {\n    const was = this.isFiltered();\n    this.setFilter(null);\n    return was;\n  }\n\n  toCompareValue(row: IDataRow) {\n    const v = this.getValue(row);\n    if (v == null) {\n      return NaN;\n    }\n    return v ? 1 : 0;\n  }\n\n  toCompareValueType(): ECompareValueType {\n    return ECompareValueType.BINARY;\n  }\n\n  group(row: IDataRow) {\n    const enabled = this.getValue(row);\n    return Object.assign({}, enabled ? BooleanColumn.GROUP_TRUE : BooleanColumn.GROUP_FALSE);\n  }\n}\n","import {Category} from './annotations';\nimport ValueColumn from './ValueColumn';\nimport {empty} from '../internal';\nimport {IArrayColumn, IArrayDesc} from './IArrayColumn';\nimport {IDataRow, IValueColumnDesc} from './interfaces';\n\n\nexport interface IArrayColumnDesc<T> extends IArrayDesc, IValueColumnDesc<T[]> {\n  // dummy\n}\n\n\n@Category('array')\nexport default class ArrayColumn<T> extends ValueColumn<T[]> implements IArrayColumn<T> {\n  private readonly _dataLength: number | null;\n\n  private readonly originalLabels: string[];\n\n  constructor(id: string, desc: Readonly<IArrayColumnDesc<T>>) {\n    super(id, desc);\n    this._dataLength = desc.dataLength == null || isNaN(desc.dataLength) ? null : desc.dataLength;\n    this.originalLabels = desc.labels || (empty(this._dataLength == null ? 0 : this._dataLength).map((_d, i) => `Column ${i}`));\n  }\n\n\n  get labels() {\n    return this.originalLabels;\n  }\n\n  get dataLength() {\n    return this._dataLength;\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getValues(row);\n    return r.every((d) => d === null) ? null : r;\n  }\n\n  getValues(row: IDataRow) {\n    const r = super.getValue(row);\n    return r == null ? [] : r;\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getValues(row).map(String);\n  }\n\n  getLabel(row: IDataRow): string {\n    const v = this.getLabels(row);\n    if (v.length === 0) {\n      return '';\n    }\n    return v.toString();\n  }\n\n  getMap(row: IDataRow) {\n    const labels = this.labels;\n    return this.getValues(row).map((value, i) => ({key: labels[i], value}));\n  }\n\n  getMapLabel(row: IDataRow) {\n    const labels = this.labels;\n    return this.getLabels(row).map((value, i) => ({key: labels[i], value}));\n  }\n}\n\n","import ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport {ISetColumn, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, DEFAULT_COLOR, ITypeFactory, ECompareValueType} from './interfaces';\nimport CategoricalColumn from './CategoricalColumn';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport Column, {labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, widthChanged, dirtyCaches} from './Column';\nimport {IEventListener} from '../internal';\nimport {chooseUIntByDataLength, integrateDefaults} from './internal';\nimport {toCategory} from './internalCategorical';\nimport {toolbar} from './annotations';\n\n\nexport declare type IBooleansColumnDesc = IArrayColumnDesc<boolean>;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf BooleansColumn\n * @event\n */\nexport declare function colorMappingChanged_BCS(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n@toolbar('rename', 'clone', 'sort', 'sortBy')\nexport default class BooleansColumn extends ArrayColumn<boolean> implements ISetColumn {\n  static readonly EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  constructor(id: string, desc: Readonly<IBooleansColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'upset'\n    }));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  get categories() {\n    return this.labels.map((d, i) => toCategory(d, i));\n  }\n\n  getSet(row: IDataRow) {\n    const vs = this.getValues(row);\n    return new Set(this.categories.filter((_, i) => vs[i]));\n  }\n\n  toCompareValue(row: IDataRow) {\n    const v = this.getValue(row);\n    if (v == null) {\n      return NaN;\n    }\n    return v.reduce((a, b) => a + (b ? 1 : 0), 0);\n  }\n\n  toCompareValueType(): ECompareValueType {\n    return chooseUIntByDataLength(this.dataLength);\n  }\n\n  getCategories(row: IDataRow) {\n    const categories = this.categories;\n    return super.getValues(row).map((v, i) => {\n      return v ? categories[i]! : null;\n    });\n  }\n\n  iterCategory(row: IDataRow) {\n    return this.getCategories(row);\n  }\n\n  getColors(row: IDataRow) {\n    return this.getCategories(row).map((d) => d ? this.colorMapping.apply(d) : DEFAULT_COLOR);\n  }\n\n\n  protected createEventList() {\n    return super.createEventList().concat([BooleansColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof BooleansColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_BCS | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n  }\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  this.fill = match[1] || \" \";\n  this.align = match[2] || \">\";\n  this.sign = match[3] || \"-\";\n  this.symbol = match[4] || \"\";\n  this.zero = !!match[5];\n  this.width = match[6] && +match[6];\n  this.comma = !!match[7];\n  this.precision = match[8] && +match[8].slice(1);\n  this.trim = !!match[9];\n  this.type = match[10] || \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTrim from \"./formatTrim\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision == null && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import {pair} from \"./pairs\";\n\nexport default function(values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice\";\nimport {copy, transformer} from \"./continuous\";\nimport {initRange} from \"./init\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\n      if (u > 0) for (; i < j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i < j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {linearish} from \"./linear\";\nimport {copy, identity, transformer} from \"./continuous\";\nimport {initRange} from \"./init\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationSecond} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import {scaleLinear, scaleLog, scalePow, scaleSqrt} from 'd3-scale';\nimport {similar} from '../internal';\nimport {IMappingFunction, IMapAbleDesc} from '.';\nimport {ITypeFactory, ITypedDump} from './interfaces';\nimport {IMappingFunctionConstructor} from './INumberColumn';\n\n/**\n * interface of a d3 scale\n */\nexport interface IScale {\n  (v: number): number;\n\n  invert(r: number): number;\n\n  domain(): number[];\n\n  domain(domain: number[]): this;\n\n  range(): number[];\n\n  range(range: number[]): this;\n}\n\nfunction toScale(type = 'linear'): IScale {\n  switch (type) {\n    case 'log':\n      return scaleLog().clamp(true);\n    case 'sqrt':\n      return scaleSqrt().clamp(true);\n    case 'pow1.1':\n      return scalePow().exponent(1.1).clamp(true);\n    case 'pow2':\n      return scalePow().exponent(2).clamp(true);\n    case 'pow3':\n      return scalePow().exponent(3).clamp(true);\n    default:\n      return scaleLinear().clamp(true);\n  }\n}\n\nfunction isSame(a: number[], b: number[]) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  return a.every((ai, i) => similar(ai, b[i], 0.0001));\n}\n\n\nfunction fixDomain(domain: number[], type: string) {\n  if (type === 'log' && domain[0] === 0) {\n    domain[0] = 0.0000001; //0 is bad\n  }\n  return domain;\n}\n\n/**\n * a mapping function based on a d3 scale (linear, sqrt, log)\n */\nexport class ScaleMappingFunction implements IMappingFunction {\n  private s: IScale;\n  private readonly type: string;\n\n  constructor();\n  constructor(dump: ITypedDump);\n  constructor(domain: number[], type: string, range: number[]);\n  constructor(domain: ITypedDump|number[] = [0, 1], type = 'linear', range: number[] = [0, 1]) {\n    if (!domain || Array.isArray(domain)) {\n      this.type = type;\n      this.s = toScale(type).domain(fixDomain(domain || [0, 1], this.type)).range(range);\n    } else {\n      const dump = domain;\n      this.type = dump.type;\n      this.s = toScale(dump.type).domain(dump.domain).range(dump.range);\n    }\n  }\n\n  get domain() {\n    return this.s.domain();\n  }\n\n  set domain(domain: number[]) {\n    this.s.domain(fixDomain(domain, this.type));\n  }\n\n  get range() {\n    return this.s.range();\n  }\n\n  set range(range: number[]) {\n    this.s.range(range);\n  }\n\n  getRange(format: (v: number) => string): [string, string] {\n    return [format(this.invert(0)), format(this.invert(1))];\n  }\n\n  apply(v: number): number {\n    return this.s(v);\n  }\n\n  invert(r: number) {\n    return this.s.invert(r);\n  }\n\n  get scaleType() {\n    return this.type;\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      domain: this.domain,\n      range: this.range\n    };\n  }\n\n  eq(other: IMappingFunction): boolean {\n    if (!(other instanceof ScaleMappingFunction)) {\n      return false;\n    }\n    const that = <ScaleMappingFunction>other;\n    return that.type === this.type && isSame(this.domain, that.domain) && isSame(this.range, that.range);\n  }\n\n  clone() {\n    return new ScaleMappingFunction(this.domain, this.type, this.range);\n  }\n}\n\nexport interface IScriptMappingFunctionContext {\n  value_min: number;\n  value_max: number;\n  value_range: number;\n  value_domain: number[];\n  linear(v: number, min: number, max: number): number;\n}\n\nexport interface IScriptMappingFunctionType {\n  (this: IScriptMappingFunctionContext, value: number): number;\n}\n\n/**\n * a mapping function based on a custom user function using 'value' as the current value\n */\nexport class ScriptMappingFunction implements IMappingFunction {\n  private readonly f: IScriptMappingFunctionType;\n  public domain: number[];\n  public readonly code: string;\n\n  constructor();\n  constructor(dump: ITypedDump);\n  constructor(domain: number[], code?: string | IScriptMappingFunctionType);\n  constructor(domain: ITypedDump | number[] = [0, 1], code: string | IScriptMappingFunctionType = 'return this.linear(value,this.value_min,this.value_max);') {\n    if (!domain || Array.isArray(domain)) {\n      this.domain = domain || [0, 1];\n    } else {\n      const dump = domain;\n      this.domain = dump.domain;\n      code = dump.code;\n    }\n    this.code = typeof code === 'string' ? code : code.toString();\n    this.f = typeof code === 'function' ? code : <any>(new Function('value', code));\n  }\n\n  getRange(): [string, string] {\n    return ['?', '?'];\n  }\n\n  apply(v: number): number {\n    const min = this.domain[0],\n      max = this.domain[this.domain.length - 1];\n    const r = this.f.call({\n      value_min: min,\n      value_max: max,\n      value_range: max - min,\n      value_domain: this.domain.slice(),\n      linear: (v: number, mi: number, ma: number) => (v - mi) / (ma - mi)\n    }, v);\n\n    if (typeof r === 'number') {\n      return Math.max(Math.min(r, 1), 0);\n    }\n    return NaN;\n  }\n\n  toJSON() {\n    return {\n      type: 'script',\n      code: this.code,\n      domain: this.domain\n    };\n  }\n\n  eq(other: IMappingFunction): boolean {\n    if (!(other instanceof ScriptMappingFunction)) {\n      return false;\n    }\n    const that = <ScriptMappingFunction>other;\n    return that.code === this.code || that.f === this.f;\n  }\n\n  clone() {\n    return new ScriptMappingFunction(this.domain, this.f);\n  }\n}\n\n/**\n * @internal\n */\nexport function createMappingFunction(types: {[key: string]: IMappingFunctionConstructor}) {\n  return (dump: ITypedDump | IScriptMappingFunctionType): IMappingFunction => {\n    if (typeof dump === 'function') {\n      return new ScriptMappingFunction([0, 1], dump);\n    }\n    if (!dump || !dump.type) {\n      return new ScaleMappingFunction();\n    }\n    const type = types[dump.type];\n    if (!type) {\n      console.warn('invalid mapping type dump', dump);\n      return new ScaleMappingFunction(dump.domain || [0, 1], 'linear', dump.range || [0, 1]);\n    }\n    return new type(dump);\n  };\n}\n\n/** @internal */\nexport function restoreMapping(desc: IMapAbleDesc, factory: ITypeFactory): IMappingFunction {\n  if (desc.map) {\n    return factory.mappingFunction(desc.map);\n  }\n  return new ScaleMappingFunction(desc.domain || [0, 1], 'linear', desc.range || [0, 1]);\n}\n\n\nexport function mappingFunctions() {\n  return {\n    script: ScriptMappingFunction,\n    linear: ScaleMappingFunction,\n    log: ScaleMappingFunction,\n    'pow1.1': ScaleMappingFunction,\n    pow2: ScaleMappingFunction,\n    pow3: ScaleMappingFunction\n  };\n}\n","import {format} from 'd3-format';\nimport {IBoxPlotData, similar, ISequence, IAdvancedBoxPlotData, boxplotBuilder} from '../internal';\nimport {FIRST_IS_NAN, IDataRow, IBoxPlotColumn, INumberFilter, INumberColumn} from '.';\n\n\n/** @internal */\nexport const DEFAULT_FORMATTER = format('.3n');\n\n/** @internal */\nexport function compareBoxPlot(col: IBoxPlotColumn, a: IDataRow, b: IDataRow) {\n  const aVal = col.getBoxPlotData(a);\n  const bVal = col.getBoxPlotData(b);\n  const method = <keyof IBoxPlotData>col.getSortMethod();\n  if (aVal == null) {\n    return bVal == null ? 0 : FIRST_IS_NAN;\n  }\n  if (bVal == null) {\n    return FIRST_IS_NAN * -1;\n  }\n  return numberCompare(<number>aVal[method], <number>bVal[method]);\n}\n\nexport function toCompareBoxPlotValue(col: IBoxPlotColumn, row: IDataRow) {\n  const v = col.getBoxPlotData(row);\n  const method = <keyof IBoxPlotData>col.getSortMethod();\n  return v == null ? NaN : <number>v[method];\n}\n\nexport function getBoxPlotNumber(col: IBoxPlotColumn, row: IDataRow, mode: 'raw' | 'normalized'): number {\n  const data = mode === 'normalized' ? col.getBoxPlotData(row) : col.getRawBoxPlotData(row);\n  if (data == null) {\n    return NaN;\n  }\n  return <number>data[<keyof IBoxPlotData>col.getSortMethod()];\n}\n/**\n * save number comparison\n * @param a\n * @param b\n * @param aMissing\n * @param bMissing\n * @return {number}\n * @internal\n */\nexport function numberCompare(a: number | null, b: number | null, aMissing = false, bMissing = false) {\n  aMissing = aMissing || a == null || isNaN(a);\n  bMissing = bMissing || b == null || isNaN(b);\n  if (aMissing) { //NaN are smaller\n    return bMissing ? 0 : FIRST_IS_NAN;\n  }\n  if (bMissing) {\n    return FIRST_IS_NAN * -1;\n  }\n  return a! - b!;\n}\n\n/** @internal */\nexport function noNumberFilter() {\n  return ({min: -Infinity, max: Infinity, filterMissing: false});\n}\n\n/** @internal */\nexport function isEqualNumberFilter(a: INumberFilter, b: INumberFilter) {\n  return similar(a.min, b.min, 0.001) && similar(a.max, b.max, 0.001) && a.filterMissing === b.filterMissing;\n}\n\n/** @internal */\nexport function isNumberIncluded(filter: INumberFilter | null, value: number) {\n  if (!filter) {\n    return true;\n  }\n  if (isNaN(value)) {\n    return !filter.filterMissing;\n  }\n  return !((isFinite(filter.min) && value < filter.min) || (isFinite(filter.max) && value > filter.max));\n}\n\n/** @internal */\nexport function isDummyNumberFilter(filter: INumberFilter) {\n  return !filter.filterMissing && !isFinite(filter.min) && !isFinite(filter.max);\n}\n\n/** @internal */\nexport function restoreNumberFilter(v: INumberFilter): INumberFilter {\n  return {\n    min: v.min != null && isFinite(v.min) ? v.min : -Infinity,\n    max: v.max != null && isFinite(v.max) ? v.max : +Infinity,\n    filterMissing: v.filterMissing\n  };\n}\n\n\n/** @internal */\nexport function medianIndex(rows: ISequence<IDataRow>, col: INumberColumn) {\n  //return the median row\n  const data = rows.map((r, i) => ({r, i, v: col.getNumber(r)}));\n  const sorted = Array.from(data.filter((r) => !isNaN(r.v))).sort((a, b) => numberCompare(a.v, b.v));\n  const index = sorted[Math.floor(sorted.length / 2.0)];\n  if (index === undefined) {\n    return {index: 0, row: sorted[0]!.r}; //error case\n  }\n  return {index: index.i, row: index.r};\n}\n\n/** @internal */\nexport function toCompareGroupValue(rows: ISequence<IDataRow>, col: INumberColumn, sortMethod: keyof IAdvancedBoxPlotData, valueCache?: ISequence<number>) {\n  const b = boxplotBuilder();\n  if (valueCache) {\n    b.pushAll(valueCache);\n  } else {\n    b.pushAll(rows.map((d) => col.getNumber(d)));\n  }\n  const vs = b.build();\n  return <number>vs[sortMethod];\n}\n","import {format} from 'd3-format';\nimport {equalArrays, IEventListener, ISequence} from '../internal';\nimport {Category, dialogAddons, SortByDefault, toolbar} from './annotations';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {IDataRow, IGroup, ECompareValueType, IValueColumnDesc, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport {INumberColumn, EAdvancedSortMethod, INumberDesc, INumberFilter, IMappingFunction, IColorMappingFunction, IMapAbleColumn} from './INumberColumn';\nimport {restoreMapping, ScaleMappingFunction} from './MappingFunction';\nimport {isMissingValue, isUnknown, missingGroup} from './missing';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {noNumberFilter, isDummyNumberFilter, restoreNumberFilter, toCompareGroupValue, isEqualNumberFilter, isNumberIncluded} from './internalNumber';\nimport {integrateDefaults} from './internal';\n\nexport declare type INumberColumnDesc = INumberDesc & IValueColumnDesc<number>;\n\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function mappingChanged_NC(previous: IMappingFunction, current: IMappingFunction): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function colorMappingChanged_NC(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function filterChanged_NC(previous: INumberFilter | null, current: INumberFilter | null): void;\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function sortMethodChanged_NC(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\n\n/**\n * emitted when the grouping property changes\n * @asMemberOf NumberColumn\n * @event\n */\nexport declare function groupingChanged_NC(previous: number[], current: number[]): void;\n\n/**\n * a number column mapped from an original input scale to an output range\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sortGroup', 'sortNumber')\n@dialogAddons('group', 'groupNumber')\n@Category('number')\n@SortByDefault('descending')\nexport default class NumberColumn extends ValueColumn<number> implements INumberColumn, IMapAbleColumn {\n  static readonly EVENT_MAPPING_CHANGED = 'mappingChanged';\n  static readonly EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n  static readonly EVENT_GROUPING_CHANGED = 'groupingChanged';\n\n  private mapping: IMappingFunction;\n  private colorMapping: IColorMappingFunction;\n  private original: IMappingFunction;\n\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: INumberFilter = noNumberFilter();\n\n  private readonly numberFormat: (n: number) => string = format('.2f');\n\n  private currentGroupThresholds: number[] = [];\n  private groupSortMethod: EAdvancedSortMethod = EAdvancedSortMethod.median;\n\n  constructor(id: string, desc: INumberColumnDesc, factory: ITypeFactory) {\n    super(id, integrateDefaults(desc, {\n      groupRenderer: 'boxplot',\n      summaryRenderer: 'histogram'\n    }));\n\n    this.mapping = restoreMapping(desc, factory);\n    this.original = this.mapping.clone();\n    this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n\n    if (desc.numberFormat) {\n      this.numberFormat = format(desc.numberFormat);\n    }\n  }\n\n  getNumberFormat() {\n    return this.numberFormat;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.map = this.mapping.toJSON();\n    r.colorMapping = this.colorMapping.toJSON();\n    r.filter = isDummyNumberFilter(this.currentFilter) ? null : this.currentFilter;\n    r.groupSortMethod = this.groupSortMethod;\n    if (this.currentGroupThresholds) {\n      r.stratifyThreshholds = this.currentGroupThresholds;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.map) {\n      this.mapping = factory.mappingFunction(dump.map);\n    } else if (dump.domain) {\n      this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\n    }\n    if (dump.colorMapping) {\n      this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n    }\n    if (dump.groupSortMethod) {\n      this.groupSortMethod = dump.groupSortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreNumberFilter(dump.filter);\n    }\n    if (dump.stratifyThreshholds) {\n      this.currentGroupThresholds = dump.stratifyThresholds;\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([NumberColumn.EVENT_MAPPING_CHANGED, NumberColumn.EVENT_COLOR_MAPPING_CHANGED, NumberColumn.EVENT_FILTER_CHANGED, NumberColumn.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_GROUPING_CHANGED]);\n  }\n\n  on(type: typeof NumberColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_NC | null): this;\n  on(type: typeof NumberColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_NC | null): this;\n  on(type: typeof NumberColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_NC | null): this;\n  on(type: typeof NumberColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_NC | null): this;\n  on(type: typeof NumberColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged_NC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getLabel(row: IDataRow) {\n    if ((<any>this.desc).numberFormat) {\n      const raw = this.getRawValue(row);\n      //if a dedicated format and a number use the formatter in any case\n      if (isNaN(raw)) {\n        return 'NaN';\n      }\n      if (!isFinite(raw)) {\n        return raw.toString();\n      }\n      return this.numberFormat(raw);\n    }\n    const v = super.getValue(row);\n    //keep non number if it is not a number else convert using formatter\n    if (typeof v === 'number') {\n      return this.numberFormat(+v);\n    }\n    return String(v);\n  }\n\n  getRange() {\n    return this.mapping.getRange(this.numberFormat);\n  }\n\n  getRawValue(row: IDataRow) {\n    const v: any = super.getValue(row);\n    if (isMissingValue(v)) {\n      return NaN;\n    }\n    return +v;\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    return format === 'json' ? this.getRawValue(row) : super.getExportValue(row, format);\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getNumber(row);\n    if (isNaN(v)) {\n      return null;\n    }\n    return v;\n  }\n\n  getNumber(row: IDataRow) {\n    const v = this.getRawValue(row);\n    if (isNaN(v)) {\n      return NaN;\n    }\n    return this.mapping.apply(v);\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getRawNumber(row: IDataRow) {\n    return this.getRawValue(row);\n  }\n\n  toCompareValue(row: IDataRow, valueCache?: any) {\n    return valueCache != null ? valueCache : this.getNumber(row);\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.FLOAT;\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, _group: IGroup, valueCache?: ISequence<any>): number {\n    return toCompareGroupValue(rows, this, <any>this.groupSortMethod, valueCache);\n  }\n\n  toCompareGroupValueType() {\n    return ECompareValueType.FLOAT;\n  }\n\n  getOriginalMapping() {\n    return this.original.clone();\n  }\n\n  getMapping() {\n    return this.mapping.clone();\n  }\n\n  setMapping(mapping: IMappingFunction) {\n    if (this.mapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumberColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\n  }\n\n  getColor(row: IDataRow) {\n    const v = this.getNumber(row);\n    if (isNaN(v)) {\n      return DEFAULT_COLOR;\n    }\n    return this.colorMapping.apply(v);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumberColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return !isDummyNumberFilter(this.currentFilter);\n  }\n\n  getFilter(): INumberFilter {\n    return Object.assign({}, this.currentFilter);\n  }\n\n  setFilter(value: INumberFilter | null) {\n    value = value || {min: -Infinity, max: +Infinity, filterMissing: false};\n    if (isEqualNumberFilter(value, this.currentFilter)) {\n      return;\n    }\n    const bak = this.getFilter();\n    this.currentFilter.min = isUnknown(value.min) ? -Infinity : value.min;\n    this.currentFilter.max = isUnknown(value.max) ? Infinity : value.max;\n    this.currentFilter.filterMissing = value.filterMissing;\n    this.fire([NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\n  }\n\n  /**\n   * filter the current row if any filter is set\n   * @param row\n   * @returns {boolean}\n   */\n  filter(row: IDataRow) {\n    return isNumberIncluded(this.currentFilter, this.getRawNumber(row));\n  }\n\n  clearFilter() {\n    const was = this.isFiltered();\n    this.setFilter(null);\n    return was;\n  }\n\n  getGroupThresholds() {\n    return this.currentGroupThresholds.slice();\n  }\n\n  setGroupThresholds(value: number[]) {\n    if (equalArrays(this.currentGroupThresholds, value)) {\n      return;\n    }\n    const bak = this.getGroupThresholds();\n    this.currentGroupThresholds = value.slice();\n    this.fire([NumberColumn.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n  }\n\n\n  group(row: IDataRow): IGroup {\n    const value = this.getRawNumber(row);\n    if (isNaN(value)) {\n      return Object.assign({}, missingGroup);\n    }\n\n    let threshold = this.currentGroupThresholds;\n    if (threshold.length === 0) {\n      // default threshold\n      const d = this.mapping.domain;\n      threshold = [(d[1] - d[0]) / 2];\n    }\n\n    const treshholdIndex = threshold.findIndex((t) => value <= t);\n    // group by thresholds / bins\n    switch (treshholdIndex) {\n      case -1:\n        //bigger than the last threshold\n        return {\n          name: `${this.label} > ${this.numberFormat(threshold[threshold.length - 1])}`,\n          color: this.colorMapping.apply(1)\n        };\n      case 0:\n        //smallest\n        return {\n          name: `${this.label} <= ${this.numberFormat(threshold[0])}`,\n          color: this.colorMapping.apply(0)\n        };\n      default:\n        return {\n          name: `${this.numberFormat(threshold[treshholdIndex - 1])} <= ${this.label} <= ${this.numberFormat(threshold[treshholdIndex])}`,\n          color: this.colorMapping.apply(this.mapping.apply((threshold[treshholdIndex - 1] + threshold[treshholdIndex]) / 2))\n        };\n    }\n  }\n\n  getSortMethod() {\n    return this.groupSortMethod;\n  }\n\n  setSortMethod(sortMethod: EAdvancedSortMethod) {\n    if (this.groupSortMethod === sortMethod) {\n      return;\n    }\n    this.fire([NumberColumn.EVENT_SORTMETHOD_CHANGED], this.groupSortMethod, this.groupSortMethod = sortMethod);\n    // sort by me if not already sorted by me\n    if (!this.isGroupSortedByMe().asc) {\n      this.toggleMyGroupSorting();\n    }\n  }\n}\n","import {format} from 'd3-format';\nimport {IBoxPlotData, IEventListener} from '../internal';\nimport {Category, dialogAddons, SortByDefault, toolbar} from './annotations';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {IDataRow, ECompareValueType, IValueColumnDesc, ITypeFactory} from './interfaces';\nimport {ESortMethod, IBoxPlotColumn, INumberDesc, INumberFilter, IColorMappingFunction, IMappingFunction} from './INumberColumn';\nimport {restoreMapping} from './MappingFunction';\nimport NumberColumn from './NumberColumn';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter} from './internalNumber';\n\n\nexport interface IBoxPlotDesc extends INumberDesc {\n  sort?: ESortMethod;\n}\n\nexport declare type IBoxPlotColumnDesc = IBoxPlotDesc & IValueColumnDesc<IBoxPlotData>;\n\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf BoxPlotColumn\n * @event\n */\nexport declare function sortMethodChanged_BPC(previous: ESortMethod, current: ESortMethod): void;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf BoxPlotColumn\n * @event\n */\nexport declare function mappingChanged_BPC(previous: IMappingFunction, current: IMappingFunction): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf BoxPlotColumn\n * @event\n */\nexport declare function colorMappingChanged_BPC(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf BoxPlotColumn\n * @event\n */\nexport declare function filterChanged_BPC(previous: INumberFilter | null, current: INumberFilter | null): void;\n\n\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sort', 'sortBoxPlot')\n@Category('array')\n@SortByDefault('descending')\nexport default class BoxPlotColumn extends ValueColumn<IBoxPlotData> implements IBoxPlotColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n  static readonly EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n\n  private readonly numberFormat: (n: number) => string = DEFAULT_FORMATTER;\n\n  private sort: ESortMethod;\n\n  private mapping: IMappingFunction;\n  private colorMapping: IColorMappingFunction;\n\n  private original: Readonly<IMappingFunction>;\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: INumberFilter = noNumberFilter();\n\n\n  constructor(id: string, desc: Readonly<IBoxPlotColumnDesc>, factory: ITypeFactory) {\n    super(id, desc);\n    this.mapping = restoreMapping(desc, factory);\n    this.original = this.mapping.clone();\n    this.colorMapping = factory.colorMappingFunction(desc.colorMapping);\n\n    if (desc.numberFormat) {\n      this.numberFormat = format(desc.numberFormat);\n    }\n\n    this.sort = desc.sort || ESortMethod.min;\n  }\n\n  getNumberFormat() {\n    return this.numberFormat;\n  }\n\n  toCompareValue(row: IDataRow): number {\n    return toCompareBoxPlotValue(this, row);\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.FLOAT;\n  }\n\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null {\n    return this.getValue(row);\n  }\n\n  getRange() {\n    return this.mapping.getRange(this.numberFormat);\n  }\n\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null {\n    return this.getRawValue(row);\n  }\n\n  getRawValue(row: IDataRow) {\n    return super.getValue(row);\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    return format === 'json' ? this.getRawValue(row) : super.getExportValue(row, format);\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getRawValue(row);\n    if (v == null) {\n      return null;\n    }\n    const r: IBoxPlotData = {\n      min: this.mapping.apply(v.min),\n      max: this.mapping.apply(v.max),\n      median: this.mapping.apply(v.median),\n      q1: this.mapping.apply(v.q1),\n      q3: this.mapping.apply(v.q3)\n    };\n    if (v.outlier) {\n      Object.assign(r, {\n        outlier: v.outlier.map((d) => this.mapping.apply(d))\n      });\n    }\n    if (v.whiskerLow != null) {\n      Object.assign(r, {\n        whiskerLow: this.mapping.apply(v.whiskerLow)\n      });\n    }\n    if (v.whiskerHigh != null) {\n      Object.assign(r, {\n        whiskerHigh: this.mapping.apply(v.whiskerHigh)\n      });\n    }\n    return r;\n  }\n\n  getNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'normalized');\n  }\n\n  getRawNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'raw');\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getLabel(row: IDataRow): string {\n    const v = this.getRawValue(row);\n    if (v == null) {\n      return '';\n    }\n    const f = this.numberFormat;\n    return `BoxPlot(min = ${f(v.min)}, q1 = ${f(v.q1)}, median = ${f(v.median)}, q3 = ${f(v.q3)}, max = ${f(v.max)})`;\n  }\n\n  getSortMethod() {\n    return this.sort;\n  }\n\n  setSortMethod(sort: ESortMethod) {\n    if (this.sort === sort) {\n      return;\n    }\n    this.fire(BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, this.sort, this.sort = sort);\n    // sort by me if not already sorted by me\n    if (!this.isSortedByMe().asc) {\n      this.sortByMe();\n    }\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.sortMethod = this.getSortMethod();\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n    r.map = this.mapping.toJSON();\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.sortMethod) {\n      this.sort = dump.sortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreNumberFilter(dump.filter);\n    }\n    if (dump.map || dump.domain) {\n      this.mapping = restoreMapping(dump, factory);\n    }\n    if (dump.colorMapping) {\n      this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_BPC | null): this;\n  on(type: typeof BoxPlotColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_BPC | null): this;\n  on(type: typeof BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_BPC | null): this;\n  on(type: typeof BoxPlotColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_BPC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getOriginalMapping() {\n    return this.original.clone();\n  }\n\n  getMapping() {\n    return this.mapping.clone();\n  }\n\n  setMapping(mapping: IMappingFunction) {\n    if (this.mapping.eq(mapping)) {\n      return;\n    }\n    this.fire([BoxPlotColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\n  }\n\n  getColor(row: IDataRow) {\n    return NumberColumn.prototype.getColor.call(this, row);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return NumberColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): INumberFilter {\n    return NumberColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: INumberFilter | null) {\n    NumberColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return NumberColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return NumberColumn.prototype.clearFilter.call(this);\n  }\n}\n\n","import {Category} from './annotations';\nimport {IKeyValue, IMapColumn} from './IArrayColumn';\nimport {IDataRow, IValueColumnDesc} from './interfaces';\nimport ValueColumn from './ValueColumn';\nimport {integrateDefaults} from './internal';\n\nexport interface IMapColumnDesc<T> extends IValueColumnDesc<IKeyValue<T>[]> {\n  // dummy\n}\n\n@Category('map')\nexport default class MapColumn<T> extends ValueColumn<IKeyValue<T>[]> implements IMapColumn<T> {\n\n  constructor(id: string, desc: Readonly<IMapColumnDesc<T>>) {\n    super(id, integrateDefaults(desc, {\n      width: 200\n    }));\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getMap(row);\n    return r.length === 0 ? null : r;\n  }\n\n  getLabels(row: IDataRow): IKeyValue<string>[] {\n    const v = this.getMap(row);\n    return v.map(({key, value}) => ({key, value: String(value)}));\n  }\n\n  getMap(row: IDataRow) {\n    return toKeyValue<T>(<any>super.getValue(row));\n  }\n\n  getMapLabel(row: IDataRow) {\n    return this.getLabels(row);\n  }\n\n  getLabel(row: IDataRow) {\n    const v = this.getLabels(row);\n    return `{${v.map(({key, value}) => `${key}: ${value}`).join(', ')}}`;\n  }\n}\n\nfunction byKey(a: IKeyValue<any>, b: IKeyValue<any>) {\n  if (a === b) {\n    return 0;\n  }\n  return a.key.localeCompare(b.key);\n}\n\nfunction toKeyValue<T>(v?: Map<string, T> | { [key: string]: T } | IKeyValue<T>[]): IKeyValue<T>[] {\n  if (!v) {\n    return [];\n  }\n  if (v instanceof Map) {\n    return Array.from(v.entries()).map(([key, value]) => ({key, value})).sort(byKey);\n  }\n  if (Array.isArray(v)) {\n    return v; // keep original order\n  }\n  // object\n  return Object.keys(v).map((key) => ({key, value: v[key]})).sort(byKey);\n}\n","import {ICategoricalDesc, ICategory, ICategoricalLikeColumn, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport CategoricalColumn from './CategoricalColumn';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport Column, {labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, widthChanged, dirtyCaches} from './Column';\nimport {IEventListener} from '../internal';\nimport {toolbar} from './annotations';\nimport {toCategories} from './internalCategorical';\n\n\nexport declare type ICategoricalMapColumnDesc = ICategoricalDesc & IMapColumnDesc<string | null>;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf CategoricalMapColumn\n * @event\n */\nexport declare function colorMappingChanged_CMC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n@toolbar('rename', 'colorMappedCategorical')\nexport default class CategoricalMapColumn extends MapColumn<string | null> implements ICategoricalLikeColumn {\n  static readonly EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  readonly categories: ICategory[];\n\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  constructor(id: string, desc: Readonly<ICategoricalMapColumnDesc>) {\n    super(id, desc);\n    this.categories = toCategories(desc);\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n  protected createEventList() {\n    return super.createEventList().concat([CategoricalMapColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof CategoricalMapColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_CMC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n\n  private parseValue(v: any) {\n    if (!v) {\n      return null;\n    }\n    const vs = String(v);\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : null;\n  }\n\n  getCategoryMap(row: IDataRow) {\n    return super.getMap(row).map(({key, value}) => ({\n      key,\n      value: this.parseValue(value)\n    }));\n  }\n\n  getCategories(row: IDataRow) {\n    return this.getCategoryMap(row).map((d) => d.value);\n  }\n\n  getColors(row: IDataRow) {\n    return this.getCategoryMap(row).map(({key, value}) => ({key, value: value ? this.colorMapping.apply(value) : DEFAULT_COLOR}));\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getCategoryMap(row);\n    return r.length === 0 ? null : r.map(({key, value}) => ({\n      key,\n      value: value ? value.name : null\n    }));\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getCategoryMap(row).map(({key, value}) => ({\n      key,\n      value: value ? value.label : ''\n    }));\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n  }\n\n  iterCategory(row: IDataRow) {\n    return this.getCategories(row);\n  }\n}\n","import ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport {ICategoricalDesc, ICategory, ICategoricalColorMappingFunction, ICategoricalsColumn} from './ICategoricalColumn';\nimport {IDataRow, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport {toolbar} from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport Column, {labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, widthChanged, dirtyCaches} from './Column';\nimport {IEventListener} from '../internal';\nimport {toCategories} from './internalCategorical';\n\nexport declare type ICategoricalsColumnDesc = ICategoricalDesc & IArrayColumnDesc<string | null>;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf CategoricalsColumn\n * @event\n */\nexport declare function colorMappingChanged_CCS(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'colorMappedCategorical')\nexport default class CategoricalsColumn extends ArrayColumn<string | null> implements ICategoricalsColumn {\n  static readonly EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  readonly categories: ICategory[];\n\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  constructor(id: string, desc: Readonly<ICategoricalsColumnDesc>) {\n    super(id, desc);\n    this.categories = toCategories(desc);\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([CategoricalsColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof CategoricalsColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_CCS | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getCategories(row: IDataRow) {\n    return super.getValues(row).map((v) => {\n      if (!v) {\n        return null;\n      }\n      const vs = String(v);\n      return this.lookup.has(vs) ? this.lookup.get(vs)! : null;\n    });\n  }\n\n  getColors(row: IDataRow) {\n    return this.getCategories(row).map((d) => d ? this.colorMapping.apply(d) : DEFAULT_COLOR);\n  }\n\n  iterCategory(row: IDataRow) {\n    return this.getCategories(row);\n  }\n\n  getValues(row: IDataRow) {\n    return this.getCategories(row).map((v) => v ? v.name : null);\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getCategories(row).map((v) => v ? v.label : '');\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n  }\n}\n","import {timeDay, timeHour, timeMinute, timeMonth, timeSecond, timeWeek} from 'd3-time';\nimport {timeFormat} from 'd3-time-format';\nimport {equal, ISequence, isSeqEmpty} from '../internal';\nimport {INumberFilter, IDateGrouper, IDataRow, IDateColumn} from '.';\nimport {isNumberIncluded} from './internalNumber';\n\n/** @internal */\nexport {isDummyNumberFilter as isDummyDateFilter, isEqualNumberFilter as isEqualDateFilter, noNumberFilter as noDateFilter, restoreNumberFilter as restoreDateFilter} from './internalNumber';\n\n\n/** @internal */\nexport function isDateIncluded(filter: INumberFilter | null, value: Date | null) {\n  if (!filter) {\n    return true;\n  }\n  if (value == null || !(value instanceof Date)) {\n    return !filter.filterMissing;\n  }\n  return isNumberIncluded(filter, value!.getTime());\n}\n\n/**\n * shifts the given date such that it is on 23:59:59, or 00:00:00\n * @internal\n */\nexport function shiftFilterDateDay(date: number, type: 'min' | 'max') {\n  const d = new Date(date);\n  if (type === 'max') {\n    d.setHours(23);\n    d.setMinutes(59);\n    d.setSeconds(59);\n    d.setMilliseconds(999);\n  } else {\n    d.setHours(0);\n    d.setMinutes(0);\n    d.setSeconds(0);\n    d.setMilliseconds(0);\n  }\n  return d.getTime();\n}\n\n/**\n * @internal\n */\nexport function defaultDateGrouper(): IDateGrouper {\n  return {granularity: 'month', circular: false};\n}\n\n/**\n * @internal\n */\nexport function isDefaultDateGrouper(grouper: IDateGrouper) {\n  return equal(defaultDateGrouper(), grouper);\n}\n\n/**\n * convert the given date to the desired grouper\n * @internal\n */\nexport function toDateGroup(grouper: IDateGrouper, value: Date): {value: number, name: string} {\n  switch (grouper.granularity) {\n    case 'century':\n      const centuryP = Math.floor(value.getFullYear() / 100);\n      if (grouper.circular) {\n        const century = centuryP % 10;\n        return {\n          value: century,\n          name: `*${century}00`\n        };\n      }\n      return {\n        value: centuryP,\n        name: `${centuryP}00`\n      };\n    case 'decade':\n      const decadeP = Math.floor(value.getFullYear() / 10);\n      if (grouper.circular) {\n        const decade = decadeP % 10;\n        return {\n          value: decade,\n          name: `**${decade}0`\n        };\n      }\n      return {\n        value: decadeP,\n        name: `${decadeP}0`\n      };\n    case 'year':\n      if (grouper.circular) {\n        const year = value.getFullYear() % 10;\n        return {\n          value: year,\n          name: `***${year}`\n        };\n      }\n      return {\n        value: value.getFullYear(),\n        name: String(value.getFullYear())\n      };\n    case 'month':\n      if (grouper.circular) {\n        return {\n          value: value.getMonth(),\n          name: timeFormat('%B')(value)\n        };\n      }\n      return {\n        value: timeMonth(value).getTime(),\n        name: timeFormat('%B %Y')(value)\n      };\n    case 'week':\n      if (grouper.circular) {\n        return {\n          value: value.getMonth(),\n          name: timeFormat('%W')(value)\n        };\n      }\n      return {\n        value: timeWeek(value).getTime(),\n        name: timeFormat('%W %Y')(value)\n      };\n    case 'day_of_week':\n      if (grouper.circular) {\n        return {\n          value: value.getDay(),\n          name: timeFormat('%A')(value)\n        };\n      }\n      return {\n        value: timeDay(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n    case 'day_of_month':\n      if (grouper.circular) {\n        return {\n          value: value.getDate(),\n          name: timeFormat('%d')(value)\n        };\n      }\n      return {\n        value: timeDay(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n    case 'day_of_year':\n      if (grouper.circular) {\n        // %j = day of year\n        const v = timeFormat('%j')(value);\n        return {\n          value: parseInt(v, 10),\n          name: v\n        };\n      }\n      return {\n        value: timeDay(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n    case 'hour':\n      if (grouper.circular) {\n        return {\n          value: value.getHours(),\n          name: timeFormat('%A')(value)\n        };\n      }\n      return {\n        value: timeHour(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n    case 'minute':\n      if (grouper.circular) {\n        return {\n          value: value.getMinutes(),\n          name: timeFormat('%A')(value)\n        };\n      }\n      return {\n        value: timeMinute(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n    case 'second':\n      if (grouper.circular) {\n        return {\n          value: value.getSeconds(),\n          name: timeFormat('%A')(value)\n        };\n      }\n      return {\n        value: timeSecond(value).getTime(),\n        name: timeFormat('%x')(value)\n      };\n  }\n\n  return {\n    value: value.getTime(),\n    name: value.toString()\n  };\n}\n\n\n/**\n * @internal\n */\nexport function chooseAggregatedDate(rows: ISequence<IDataRow>, grouper: IDateGrouper | null, col: IDateColumn, valueCache?: ISequence<Date | null>): {value: number | null, name: string} {\n  const vs = <ISequence<Date>>(valueCache ? valueCache : rows.map((d) => col.getDate(d))).filter((d) => d instanceof Date);\n  if (isSeqEmpty(vs)) {\n    return {value: null, name: ''};\n  }\n  const median = trueMedian(vs.map((d) => d.getTime()))!;\n  if (!grouper) {\n    return {value: median, name: (new Date(median)).toString()};\n  }\n  return toDateGroup(grouper, new Date(median));\n}\n\nfunction trueMedian(dates: ISequence<number>) {\n  // to avoid interpolating between the centers do it manually\n  const s = Float64Array.from(dates);\n  if (s.length === 1) {\n    return s[0];\n  }\n\n  s.sort();\n  return s[Math.floor(s.length / 2)];\n}\n","import {timeFormat, timeParse} from 'd3-time-format';\nimport {ISequence, equal, IEventListener} from '../internal';\nimport {Category, dialogAddons, toolbar} from './annotations';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {IDateColumn, IDateDesc, IDateFilter, IDateGrouper} from './IDateColumn';\nimport {defaultGroup, IDataRow, IGroup, ECompareValueType, IValueColumnDesc, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport {isMissingValue, isUnknown, missingGroup} from './missing';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {noDateFilter, defaultDateGrouper, isDummyDateFilter, isDefaultDateGrouper, restoreDateFilter, isEqualDateFilter, isDateIncluded, toDateGroup, chooseAggregatedDate} from './internalDate';\nimport {integrateDefaults} from './internal';\n\n\nexport declare type IDateColumnDesc = IValueColumnDesc<Date> & IDateDesc;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf DateColumn\n * @event\n */\nexport declare function filterChanged_DC(previous: IDateFilter | null, current: IDateFilter | null): void;\n\n/**\n * emitted when the grouping property changes\n * @asMemberOf DateColumn\n * @event\n */\nexport declare function groupingChanged_DC(previous: IDateGrouper | null, current: IDateGrouper | null): void;\n\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterDate')\n@dialogAddons('group', 'groupDate')\n@Category('date')\nexport default class DateColumn extends ValueColumn<Date> implements IDateColumn {\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\n  static readonly EVENT_GROUPING_CHANGED = 'groupingChanged';\n\n  static readonly DEFAULT_DATE_FORMAT = '%x';\n\n  private readonly format: (date: Date | null) => string;\n  private readonly parse: (date: string) => Date | null;\n\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: IDateFilter = noDateFilter();\n  private currentGrouper: IDateGrouper = defaultDateGrouper();\n\n  constructor(id: string, desc: Readonly<IDateColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      groupRenderer: 'datehistogram',\n      summaryRenderer: 'datehistogram'\n    }));\n    const f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n    this.format = (v) => (v instanceof Date) ? f(v) : '';\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n  }\n\n  getFormatter() {\n    return this.format;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.filter = isDummyDateFilter(this.currentFilter) ? null : this.currentFilter;\n    if (this.currentGrouper && !isDefaultDateGrouper(this.currentGrouper)) {\n      r.grouper = this.currentGrouper;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.filter) {\n      this.currentFilter = restoreDateFilter(dump.filter);\n    }\n    if (dump.grouper) {\n      this.currentGrouper = dump.grouper;\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([DateColumn.EVENT_FILTER_CHANGED, DateColumn.EVENT_GROUPING_CHANGED]);\n  }\n\n  on(type: typeof DateColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_DC | null): this;\n  on(type: typeof DateColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged_DC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow): Date | null {\n    return this.getDate(row);\n  }\n\n  getDate(row: IDataRow) {\n    const v = super.getValue(row);\n    if (isMissingValue(v)) {\n      return null;\n    }\n    if (v instanceof Date) {\n      return v;\n    }\n    return this.parse(String(v));\n  }\n\n  iterDate(row: IDataRow) {\n    return [this.getDate(row)];\n  }\n\n  getLabel(row: IDataRow) {\n    const v = this.getValue(row);\n    return this.format(v);\n  }\n\n  isFiltered() {\n    return !isDummyDateFilter(this.currentFilter);\n  }\n\n  clearFilter() {\n    const was = this.isFiltered();\n    this.setFilter(null);\n    return was;\n  }\n\n  getFilter(): IDateFilter {\n    return Object.assign({}, this.currentFilter);\n  }\n\n  setFilter(value: IDateFilter | null) {\n    value = value || {min: -Infinity, max: +Infinity, filterMissing: false};\n    if (isEqualDateFilter(value, this.currentFilter)) {\n      return;\n    }\n    const bak = this.getFilter();\n    this.currentFilter.min = isUnknown(value.min) ? -Infinity : value.min;\n    this.currentFilter.max = isUnknown(value.max) ? Infinity : value.max;\n    this.currentFilter.filterMissing = value.filterMissing;\n    this.fire([DateColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\n  }\n\n  /**\n   * filter the current row if any filter is set\n   * @param row\n   * @returns {boolean}\n   */\n  filter(row: IDataRow, valueCache?: any) {\n    return isDateIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getDate(row));\n  }\n\n  toCompareValue(row: IDataRow, valueCache?: any) {\n    const v = valueCache !== undefined ? valueCache : this.getValue(row);\n    if (!(v instanceof Date)) {\n      return NaN;\n    }\n    return v.getTime();\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.DOUBLE_ASC;\n  }\n\n  getDateGrouper() {\n    return Object.assign({}, this.currentGrouper);\n  }\n\n  setDateGrouper(value: IDateGrouper) {\n    if (equal(this.currentGrouper, value)) {\n      return;\n    }\n    const bak = this.getDateGrouper();\n    this.currentGrouper = Object.assign({}, value);\n    this.fire([DateColumn.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n  }\n\n  group(row: IDataRow, valueCache?: any): IGroup {\n    const v = valueCache !== undefined ? valueCache : this.getDate(row);\n    if (!v || !(v instanceof Date)) {\n      return Object.assign({}, missingGroup);\n    }\n    if (!this.currentGrouper) {\n      return Object.assign({}, defaultGroup);\n    }\n    const g = toDateGroup(this.currentGrouper, v);\n    return {\n      name: g.name,\n      color: DEFAULT_COLOR\n    };\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, _group: IGroup, valueCache?: ISequence<any>): number {\n    const v = chooseAggregatedDate(rows, this.currentGrouper, this, valueCache).value;\n    return v == null ? NaN : v;\n  }\n\n  toCompareGroupValueType() {\n    return ECompareValueType.DOUBLE_ASC;\n  }\n}\n","import {timeFormat, timeParse} from 'd3-time-format';\nimport {median, min, max, IEventListener} from '../internal';\nimport {dialogAddons, toolbar} from './annotations';\nimport ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IDateDesc, IDatesColumn, IDateFilter} from './IDateColumn';\nimport {IDataRow, ECompareValueType, ITypeFactory} from './interfaces';\nimport {isMissingValue} from './missing';\nimport DateColumn from './DateColumn';\nimport {noDateFilter, isDummyDateFilter, restoreDateFilter} from './internalDate';\nimport {chooseUIntByDataLength, integrateDefaults} from './internal';\n\nexport enum EDateSort {\n  min = 'min',\n  max = 'max',\n  median = 'median'\n}\n\nexport interface IDatesDesc extends IDateDesc {\n  sort?: EDateSort;\n}\n\nexport declare type IDatesColumnDesc = IDatesDesc & IArrayColumnDesc<Date>;\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf DatesColumn\n * @event\n */\nexport declare function sortMethodChanged_DCS(previous: EDateSort, current: EDateSort): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf DatesColumn\n * @event\n */\nexport declare function filterChanged_DCS(previous: IDateFilter | null, current: IDateFilter | null): void;\n\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterDate')\n@dialogAddons('sort', 'sortDates')\nexport default class DatesColumn extends ArrayColumn<Date | null> implements IDatesColumn {\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n  static readonly EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\n\n  private readonly format: (date: Date | null) => string;\n  private readonly parse: (date: string) => Date | null;\n  private sort: EDateSort;\n  private currentFilter: IDateFilter = noDateFilter();\n\n  constructor(id: string, desc: Readonly<IDatesColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'datehistogram',\n      groupRenderer: 'datehistogram',\n      summaryRenderer: 'datehistogram'\n    }));\n    const f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n    this.format = (v) => (v instanceof Date) ? f(v) : '';\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n    this.sort = desc.sort || EDateSort.median;\n  }\n\n  getFormatter() {\n    return this.format;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([DatesColumn.EVENT_SORTMETHOD_CHANGED, DatesColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof DatesColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_DCS | null): this;\n  on(type: typeof DatesColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_DCS | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow): (Date | null)[] | null {\n    const r = this.getDates(row);\n    return r.every((d) => d == null) ? null : r;\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getDates(row).map((v) => (v instanceof Date) ? this.format(v) : '');\n  }\n\n  getDates(row: IDataRow): (Date | null)[] {\n    return super.getValues(row).map((v) => {\n      if (isMissingValue(v)) {\n        return null;\n      }\n      if (v instanceof Date) {\n        return v;\n      }\n      return this.parse(String(v));\n    });\n  }\n\n  getDate(row: IDataRow) {\n    const av = <Date[]>this.getDates(row).filter(Boolean);\n    if (av.length === 0) {\n      return null;\n    }\n    return new Date(compute(av, this.sort));\n  }\n\n  iterDate(row: IDataRow) {\n    return this.getDates(row);\n  }\n\n  getSortMethod() {\n    return this.sort;\n  }\n\n  setSortMethod(sort: EDateSort) {\n    if (this.sort === sort) {\n      return;\n    }\n    this.fire([DatesColumn.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\n    // sort by me if not already sorted by me\n    if (!this.isSortedByMe().asc) {\n      this.sortByMe();\n    }\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.sortMethod = this.getSortMethod();\n    r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.sortMethod) {\n      this.sort = dump.sortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreDateFilter(dump.filter);\n    }\n  }\n\n  toCompareValue(row: IDataRow) {\n    const vs = <Date[]>this.getDates(row).filter(Boolean);\n    if (!vs) {\n      return [0, 0];\n    }\n    return [vs.length, compute(vs, this.sort)];\n  }\n\n  toCompareValueType() {\n    return [chooseUIntByDataLength(this.dataLength), ECompareValueType.DOUBLE_ASC];\n  }\n\n  isFiltered() {\n    return DateColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): IDateFilter {\n    return DateColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: IDateFilter | null) {\n    DateColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return DateColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return DateColumn.prototype.clearFilter.call(this);\n  }\n}\n\nfunction compute(arr: Date[], sort: EDateSort) {\n  switch (sort) {\n    case EDateSort.min:\n      return min(arr, (d) => d.getTime())!;\n    case EDateSort.max:\n      return max(arr, (d) => d.getTime())!;\n    case EDateSort.median:\n      return median(arr, (d) => d.getTime())!;\n  }\n}\n","import {timeFormat, timeParse} from 'd3-time-format';\nimport {IDateColumn, IDateFilter} from './IDateColumn';\nimport {IKeyValue} from './IArrayColumn';\nimport {IDataRow, ITypeFactory} from './interfaces';\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\nimport {isMissingValue} from './missing';\nimport DatesColumn, {EDateSort, IDatesDesc} from './DatesColumn';\nimport DateColumn from './DateColumn';\nimport {dialogAddons, toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IEventListener} from '../internal';\nimport {noDateFilter, isDummyDateFilter, restoreDateFilter} from './internalDate';\nimport {integrateDefaults} from './internal';\n\nexport declare type IDateMapColumnDesc = IDatesDesc & IMapColumnDesc<Date | null>;\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf DatesMapColumn\n * @event\n */\nexport declare function sortMethodChanged_DMC(previous: EDateSort, current: EDateSort): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf DatesMapColumn\n * @event\n */\nexport declare function filterChanged_DMC(previous: IDateFilter | null, current: IDateFilter | null): void;\n\n\n@toolbar('rename', 'filterDate')\n@dialogAddons('sort', 'sortDates')\nexport default class DatesMapColumn extends MapColumn<Date | null> implements IDateColumn {\n  static readonly EVENT_SORTMETHOD_CHANGED = DatesColumn.EVENT_SORTMETHOD_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\n\n  private readonly format: (date: Date | null) => string;\n  private readonly parse: (date: string) => Date | null;\n  private sort: EDateSort;\n  private currentFilter: IDateFilter = noDateFilter();\n\n  constructor(id: string, desc: Readonly<IDateMapColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'default'\n    }));\n    const f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n    this.format = (v) => (v instanceof Date) ? f(v) : '';\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n    this.sort = desc.sort || EDateSort.median;\n  }\n\n  getFormatter() {\n    return this.format;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([DatesMapColumn.EVENT_SORTMETHOD_CHANGED, DatesMapColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof DatesMapColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_DMC | null): this;\n  on(type: typeof DatesMapColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_DMC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  private parseValue(v: any) {\n    if (isMissingValue(v)) {\n      return null;\n    }\n    if (v instanceof Date) {\n      return v;\n    }\n    return this.parse(String(v));\n  }\n\n  getDateMap(row: IDataRow) {\n    return super.getMap(row).map(({key, value}) => ({\n      key,\n      value: this.parseValue(value)\n    }));\n  }\n\n  iterDate(row: IDataRow) {\n    return this.getDates(row);\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getDateMap(row);\n\n    return r.every((d) => d == null) ? null : r;\n  }\n\n  getLabels(row: IDataRow): IKeyValue<string>[] {\n    return this.getDateMap(row).map(({key, value}) => ({\n      key,\n      value: (value instanceof Date) ? this.format(value) : ''\n    }));\n  }\n\n  getDates(row: IDataRow): (Date | null)[] {\n    return this.getDateMap(row).map((v) => v.value);\n  }\n\n  getDate(row: IDataRow) {\n    return DatesColumn.prototype.getDate.call(this, row);\n  }\n\n  getSortMethod() {\n    return this.sort;\n  }\n\n  setSortMethod(sort: EDateSort) {\n    return DatesColumn.prototype.setSortMethod.call(this, sort);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.sortMethod = this.getSortMethod();\n    r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.sortMethod) {\n      this.sort = dump.sortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreDateFilter(dump.filter);\n    }\n  }\n\n  isFiltered() {\n    return DateColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): IDateFilter {\n    return DateColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: IDateFilter | null) {\n    DateColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return DateColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return DateColumn.prototype.clearFilter.call(this);\n  }\n}\n","import {Category, SupportType, toolbar, dialogAddons} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {IDataRow, IGroup, ECompareValueType} from './interfaces';\nimport {missingGroup} from './missing';\nimport {IEventListener, ISequence} from '../internal';\n\nexport function createGroupDesc(label = 'Group Name') {\n  return {type: 'group', label};\n}\n\nexport enum EGroupSortMethod {\n  name = 'name',\n  count = 'count'\n}\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf GroupColumn\n * @event\n */\nexport declare function sortMethodChanged(previous: EGroupSortMethod, current: EGroupSortMethod): void;\n\n\n@SupportType()\n@toolbar('rename', 'sortGroupBy')\n@dialogAddons('sortGroup', 'sortGroups')\n@Category('support')\nexport default class GroupColumn extends Column {\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n\n  private groupSortMethod: EGroupSortMethod = EGroupSortMethod.name;\n\n  get frozen() {\n    return this.desc.frozen !== false;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([GroupColumn.EVENT_SORTMETHOD_CHANGED]);\n  }\n\n  on(type: typeof GroupColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getLabel() {\n    return '';\n  }\n\n  getValue() {\n    return '';\n  }\n\n  getSortMethod() {\n    return this.groupSortMethod;\n  }\n\n  setSortMethod(sortMethod: EGroupSortMethod) {\n    if (this.groupSortMethod === sortMethod) {\n      return;\n    }\n    this.fire(GroupColumn.EVENT_SORTMETHOD_CHANGED, this.groupSortMethod, this.groupSortMethod = sortMethod);\n    // sort by me if not already sorted by me\n    if (!this.isGroupSortedByMe().asc) {\n      this.toggleMyGroupSorting();\n    }\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, group: IGroup) {\n    if (this.groupSortMethod === 'count') {\n      return rows.length;\n    }\n    return group.name === missingGroup.name ? null : group.name.toLowerCase();\n  }\n\n  toCompareGroupValueType() {\n    return this.groupSortMethod === 'count' ? ECompareValueType.COUNT : ECompareValueType.STRING;\n  }\n}\n","import {Category, toolbar} from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, dirtyCaches, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\nimport {ICategoricalColumn, ICategory, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, IGroup, IValueColumnDesc, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport {colorPool, integrateDefaults} from './internal';\nimport {missingGroup} from './missing';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IEventListener} from '../internal';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\n\nexport interface ICategoryNode extends ICategory {\n  children: Readonly<ICategoryNode>[];\n}\n\nexport interface IPartialCategoryNode extends Partial<ICategory> {\n  children: IPartialCategoryNode[];\n}\n\nexport interface IHierarchyDesc {\n  hierarchy: IPartialCategoryNode;\n  hierarchySeparator?: string;\n}\n\nexport declare type IHierarchyColumnDesc = IHierarchyDesc & IValueColumnDesc<string>;\n\nexport interface ICategoryInternalNode extends ICategory {\n  path: string;\n  children: Readonly<ICategoryInternalNode>[];\n}\n\nexport interface ICutOffNode {\n  node: Readonly<ICategoryInternalNode>;\n  maxDepth: number;\n}\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf HierarchyColumn\n * @event\n */\nexport declare function colorMappingChanged_HC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n\n/**\n * emitted when the cut off property changes\n * @asMemberOf HierarchyColumn\n * @event\n */\nexport declare function cutOffChanged(previous: ICutOffNode, current: ICutOffNode): void;\n\n/**\n * column for hierarchical categorical values\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'cutoff', 'group', 'groupBy', 'colorMappedCategorical')\n@Category('categorical')\nexport default class HierarchyColumn extends ValueColumn<string> implements ICategoricalColumn {\n  static readonly EVENT_CUTOFF_CHANGED = 'cutOffChanged';\n  static readonly EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n\n  private readonly hierarchySeparator: string;\n  readonly hierarchy: Readonly<ICategoryInternalNode>;\n\n  private currentNode: Readonly<ICategoryInternalNode>;\n  private currentMaxDepth: number = Infinity;\n  private currentLeaves: Readonly<ICategoryInternalNode>[] = [];\n  private readonly currentLeavesNameCache = new Map<string, Readonly<ICategoryInternalNode>>();\n  private readonly currentLeavesPathCache = new Map<string, Readonly<ICategoryInternalNode>>();\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  constructor(id: string, desc: Readonly<IHierarchyColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'categorical'\n    }));\n    this.hierarchySeparator = desc.hierarchySeparator || '.';\n    this.hierarchy = this.initHierarchy(desc.hierarchy);\n    this.currentNode = this.hierarchy;\n    this.currentLeaves = computeLeaves(this.currentNode, this.currentMaxDepth);\n    this.updateCaches();\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  private initHierarchy(root: IPartialCategoryNode) {\n    const colors = colorPool();\n    const s = this.hierarchySeparator;\n    const add = (prefix: string, node: IPartialCategoryNode): ICategoryInternalNode => {\n      const name = node.name == null ? String(node.value) : node.name;\n      const children = (node.children || []).map((child: IPartialCategoryNode | string): ICategoryInternalNode => {\n        if (typeof child === 'string') {\n          const path = prefix + child;\n          return {\n            path,\n            name: child,\n            label: path,\n            color: colors(),\n            value: 0,\n            children: []\n          };\n        }\n        const r = add(`${prefix}${name}${s}`, child);\n        if (!r.color) {\n          //hack to inject the next color\n          (<any>r).color = colors();\n        }\n        return r;\n      });\n      const path = prefix + name;\n      const label = node.label ? node.label : path;\n      return {path, name, children, label, color: node.color!, value: 0};\n    };\n    return add('', root);\n  }\n\n  get categories() {\n    return this.currentLeaves;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([HierarchyColumn.EVENT_COLOR_MAPPING_CHANGED, HierarchyColumn.EVENT_CUTOFF_CHANGED]);\n  }\n\n  on(type: typeof HierarchyColumn.EVENT_CUTOFF_CHANGED, listener: typeof cutOffChanged | null): this;\n  on(type: typeof HierarchyColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_HC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.colorMapping = this.colorMapping.toJSON();\n    if (isFinite(this.currentMaxDepth)) {\n      r.maxDepth = this.currentMaxDepth;\n    }\n    if (this.currentNode !== this.hierarchy) {\n      r.cutOffNode = this.currentNode.path;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    if (typeof dump.maxDepth !== 'undefined') {\n      this.currentMaxDepth = dump.maxDepth;\n    }\n    if (typeof dump.cutOffNode !== 'undefined') {\n      const path = dump.cutOffNode.split(this.hierarchySeparator);\n      let node: Readonly<ICategoryInternalNode> | null = this.hierarchy;\n\n      let act = path.shift();\n      while (act && node) {\n        if (node.name !== act) {\n          node = null;\n          break;\n        }\n        const next = path.shift();\n        if (!next) {\n          break;\n        }\n        act = next;\n        node = node.children.find((d) => d.name === act) || null;\n      }\n      this.currentNode = node || this.hierarchy;\n    }\n\n    if (typeof dump.maxDepth !== 'undefined' || typeof dump.cutOffNode !== 'undefined') {\n      this.currentLeaves = computeLeaves(this.currentNode, this.currentMaxDepth);\n      this.updateCaches();\n    }\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  getCutOff(): ICutOffNode {\n    return {\n      node: this.currentNode,\n      maxDepth: this.currentMaxDepth\n    };\n  }\n\n  setCutOff(value: ICutOffNode) {\n    const maxDepth = value.maxDepth == null ? Infinity : value.maxDepth;\n    if (this.currentNode === value.node && this.currentMaxDepth === maxDepth) {\n      return;\n    }\n    const bak = this.getCutOff();\n    this.currentNode = value.node;\n    this.currentMaxDepth = maxDepth;\n    this.currentLeaves = computeLeaves(value.node, maxDepth);\n    this.updateCaches();\n    this.fire([HierarchyColumn.EVENT_CUTOFF_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getCutOff());\n  }\n\n  getCategory(row: IDataRow) {\n    let v = super.getValue(row);\n    if (v == null || v === '') {\n      return null;\n    }\n    v = v.trim();\n    if (this.currentLeavesNameCache.has(v)) {\n      return this.currentLeavesNameCache.get(v)!;\n    }\n    if (this.currentLeavesPathCache.has(v)) {\n      return this.currentLeavesPathCache.get(v)!;\n    }\n    return this.currentLeaves.find((n) => {\n      //direct hit or is a child of it\n      return n.path === v || n.name === v || v!.startsWith(n.path + this.hierarchySeparator);\n    }) || null;\n  }\n\n  get dataLength() {\n    return this.currentLeaves.length;\n  }\n\n  get labels() {\n    return this.currentLeaves.map((d) => d.label);\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getCategory(row);\n    return v ? v.name : null;\n  }\n\n  getCategories(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  iterCategory(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  getLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabel.call(this, row);\n  }\n\n  getColor(row: IDataRow) {\n    return CategoricalColumn.prototype.getColor.call(this, row);\n  }\n\n  getLabels(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabels.call(this, row);\n  }\n\n  getValues(row: IDataRow) {\n    return CategoricalColumn.prototype.getValues.call(this, row);\n  }\n\n  getMap(row: IDataRow) {\n    return CategoricalColumn.prototype.getMap.call(this, row);\n  }\n\n  getMapLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\n  }\n\n  getSet(row: IDataRow) {\n    return CategoricalColumn.prototype.getSet.call(this, row);\n  }\n\n  toCompareValue(row: IDataRow) {\n    return CategoricalColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return CategoricalColumn.prototype.toCompareValueType.call(this);\n  }\n\n  group(row: IDataRow): IGroup {\n    const base = this.getCategory(row);\n    if (!base) {\n      return Object.assign({}, missingGroup);\n    }\n    return {name: base.label, color: base.color};\n  }\n\n  private updateCaches() {\n    this.currentLeavesPathCache.clear();\n    this.currentLeavesNameCache.clear();\n\n    this.currentLeaves.forEach((n) => {\n      this.currentLeavesPathCache.set(n.path, n);\n      this.currentLeavesNameCache.set(n.name, n);\n    });\n  }\n}\n\nfunction computeLeaves(node: ICategoryInternalNode, maxDepth: number = Infinity) {\n  const leaves: ICategoryInternalNode[] = [];\n  //depth first\n  const visit = (node: ICategoryInternalNode, depth: number) => {\n    //hit or end\n    if (depth >= maxDepth || node.children.length === 0) {\n      leaves.push(node);\n    } else {\n      // go down\n      node.children.forEach((c) => visit(c, depth + 1));\n    }\n  };\n  visit(node, 0);\n  return leaves;\n}\n\nexport function resolveInnerNodes(node: ICategoryInternalNode) {\n  //breath first\n  const queue: ICategoryInternalNode[] = [node];\n  let index = 0;\n  while (index < queue.length) {\n    const next = queue[index++];\n    for (const n of next.children) {\n      queue.push(n);\n    }\n  }\n  return queue;\n}\n\nexport function isHierarchical(categories: (string | Partial<ICategory>)[]) {\n  if (categories.length === 0 || typeof categories[0] === 'string') {\n    return false;\n  }\n  // check if any has a given parent name\n  return categories.some((c) => (<any>c).parent != null);\n}\n\nexport function deriveHierarchy(categories: (Partial<ICategory> & {parent: string | null})[]) {\n  const lookup = new Map<string, ICategoryNode>();\n  categories.forEach((c) => {\n    const p = c.parent || '';\n    // set and fill up proxy\n    const item = Object.assign(<ICategoryNode>{\n      children: [],\n      label: c.name!,\n      name: c.name!,\n      color: DEFAULT_COLOR,\n      value: 0\n    }, lookup.get(c.name!) || {}, c);\n    lookup.set(c.name!, item);\n\n    if (!lookup.has(p)) {\n      // create proxy\n      lookup.set(p, {name: p, children: [], label: p, value: 0, color: DEFAULT_COLOR});\n    }\n    lookup.get(p)!.children.push(item);\n  });\n  const root = lookup.get('')!;\n  console.assert(root !== undefined, 'hierarchy with no root');\n  if (root.children.length === 1) {\n    return root.children[0];\n  }\n  return root;\n}\n","import {interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples, interpolateReds, interpolateCool, interpolateCubehelixDefault, interpolateWarm, interpolatePlasma, interpolateMagma, interpolateViridis, interpolateInferno, interpolateYlOrRd, interpolateYlOrBr, interpolateBuGn, interpolateBuPu, interpolateGnBu, interpolateOrRd, interpolatePuBuGn, interpolatePuBu, interpolatePuRd, interpolateRdPu, interpolateYlGnBu, interpolateYlGn, interpolateRainbow, interpolateBrBG, interpolatePRGn, interpolatePiYG, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral} from 'd3-scale-chromatic';\nimport {equal} from '../internal';\nimport {scaleLinear} from 'd3-scale';\nimport {IColorMappingFunction} from '.';\nimport {DEFAULT_COLOR, ITypedDump, ITypeFactory} from './interfaces';\nimport {IColorMappingFunctionConstructor} from './INumberColumn';\n\nexport class SequentialColorFunction implements IColorMappingFunction {\n  public static readonly FUNCTIONS: {[key: string]: (v: number) => string} = {\n    interpolateBlues,\n    interpolateGreens,\n    interpolateGreys,\n    interpolateOranges,\n    interpolatePurples,\n    interpolateReds,\n    interpolateCool,\n    interpolateCubehelixDefault,\n    interpolateWarm,\n    interpolatePlasma,\n    interpolateMagma,\n    interpolateViridis,\n    interpolateInferno,\n    interpolateYlOrRd,\n    interpolateYlOrBr,\n    interpolateBuGn,\n    interpolateBuPu,\n    interpolateGnBu,\n    interpolateOrRd,\n    interpolatePuBuGn,\n    interpolatePuBu,\n    interpolatePuRd,\n    interpolateRdPu,\n    interpolateYlGnBu,\n    interpolateYlGn,\n    interpolateRainbow\n  };\n\n  public readonly apply: (v: number) => string;\n\n  constructor(public readonly name: string) {\n    this.apply = SequentialColorFunction.FUNCTIONS[name] || interpolateBlues;\n  }\n\n  toJSON() {\n    return this.name;\n  }\n\n  clone() {\n    return this; // no clone needed since not parameterized\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof SequentialColorFunction && other.name === this.name;\n  }\n}\n\nexport class DivergentColorFunction implements IColorMappingFunction {\n  public static readonly FUNCTIONS: {[key: string]: (v: number) => string} = {\n    interpolateBrBG,\n    interpolatePRGn,\n    interpolatePiYG,\n    interpolatePuOr,\n    interpolateRdBu,\n    interpolateRdGy,\n    interpolateRdYlBu,\n    interpolateRdYlGn,\n    interpolateSpectral\n  };\n\n  public readonly apply: (v: number) => string;\n\n  constructor(public readonly name: string) {\n    this.apply = DivergentColorFunction.FUNCTIONS[name] || interpolateBlues;\n  }\n\n  toJSON() {\n    return this.name;\n  }\n\n  clone() {\n    return this; // no clone needed since not parameterized\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof DivergentColorFunction && other.name === this.name;\n  }\n}\n\n\nexport class UnknownColorFunction implements IColorMappingFunction {\n  constructor(public readonly apply: (v: number) => string) {\n  }\n\n  toJSON() {\n    return this.apply.toString();\n  }\n\n  clone() {\n    return this; // no clone needed since not parameterized\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof UnknownColorFunction && other.apply === this.apply;\n  }\n}\n\nexport class SolidColorFunction implements IColorMappingFunction {\n  constructor(public readonly color: string) {\n\n  }\n\n  apply() {\n    return this.color;\n  }\n\n  toJSON() {\n    return this.color;\n  }\n\n  clone() {\n    return this; // no clone needed since not parameterized\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof SolidColorFunction && other.color === this.color;\n  }\n}\n\nexport class QuantizedColorFunction implements IColorMappingFunction {\n  public readonly base: IColorMappingFunction;\n  public readonly steps: number;\n\n  constructor(dump: ITypedDump, factory: ITypeFactory);\n  constructor(base: IColorMappingFunction, steps: number)\n  constructor(base: IColorMappingFunction | ITypedDump, steps: number | ITypeFactory) {\n    if (typeof (<any>base).apply === 'function') {\n      this.base = <IColorMappingFunction>base;\n      this.steps = steps == null ? 5 : <number>steps;\n    } else {\n      const dump = <ITypedDump>base;\n      this.base = (<ITypeFactory>steps).colorMappingFunction(dump.base);\n      this.steps = dump.steps;\n    }\n  }\n\n  apply(v: number) {\n    return this.base.apply(quantize(v, this.steps));\n  }\n\n  toJSON() {\n    return {\n      type: 'quantized',\n      base: this.base.toJSON(),\n      steps: this.steps\n    };\n  }\n\n  clone(): QuantizedColorFunction {\n    return new QuantizedColorFunction(this.base.clone(), this.steps);\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof QuantizedColorFunction && other.base.eq(this.base) && other.steps === this.steps;\n  }\n}\n\nexport class CustomColorMappingFunction implements IColorMappingFunction {\n  private readonly scale = scaleLinear<string>();\n  public readonly entries: {value: number, color: string}[];\n\n  constructor(dump: ITypedDump);\n  constructor(entries: {value: number, color: string}[]);\n  constructor(entries: ITypedDump | {value: number, color: string}[]) {\n    this.entries = Array.isArray(entries) ? entries : entries.entries;\n    this.scale\n      .domain(this.entries.map((d) => d.value))\n      .range(this.entries.map((d) => d.color))\n      .clamp(true);\n  }\n\n  apply(v: number) {\n    return this.scale(v);\n  }\n\n  toJSON() {\n    return {\n      type: 'custom',\n      entries: this.entries\n    };\n  }\n\n  clone() {\n    return new CustomColorMappingFunction(this.entries.slice());\n  }\n\n  eq(other: IColorMappingFunction): boolean {\n    return other instanceof CustomColorMappingFunction && equal(this.entries, other.entries);\n  }\n}\n\n/**\n * @internal\n */\nexport function quantize(v: number, steps: number) {\n  const perStep = 1 / steps;\n  if (v <= perStep) {\n    return 0;\n  }\n  if (v >= (1 - perStep)) {\n    return 1;\n  }\n  for (let acc = 0; acc < 1; acc += perStep) {\n    if (v < acc) {\n      return acc - perStep / 2; // center\n    }\n  }\n  return v;\n}\n\nexport function colorMappingFunctions() {\n  const types: any = {\n    [DEFAULT_COLOR]: SolidColorFunction,\n    quantized: QuantizedColorFunction,\n    custom: CustomColorMappingFunction\n  };\n  for (const key of Object.keys(SequentialColorFunction.FUNCTIONS)) {\n    types[key] = SequentialColorFunction;\n  }\n  for (const key of Object.keys(DivergentColorFunction.FUNCTIONS)) {\n    types[key] = DivergentColorFunction;\n  }\n  return types;\n}\n\nexport const DEFAULT_COLOR_FUNCTION = new SolidColorFunction(DEFAULT_COLOR);\n\n\n/**\n * @internal\n */\nexport function createColorMappingFunction(types: {[type: string]: IColorMappingFunctionConstructor}, factory: ITypeFactory) {\n  return (dump: ITypedDump | string | ((v: number) => string)): IColorMappingFunction => {\n    if (!dump) {\n      return DEFAULT_COLOR_FUNCTION;\n    }\n    if (typeof dump === 'function') {\n      return new UnknownColorFunction(dump);\n    }\n    const typeName = typeof dump === 'string' ? dump : dump.type;\n    const type = types[typeName];\n    if (type) {\n      return new type(dump, factory);\n    }\n    if (Array.isArray(dump)) {\n      return new CustomColorMappingFunction(dump);\n    }\n    return new SolidColorFunction(dump.toString());\n  };\n}\n","import {suffix, IEventListener, ISequence} from '../internal';\nimport {toolbar, SortByDefault} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport {IDataRow, IGroup, IColumnDesc, DEFAULT_COLOR} from './interfaces';\nimport {isNumberColumn, INumberColumn, isMapAbleColumn, IColorMappingFunction, IMappingFunction, IMapAbleColumn, INumberFilter} from './INumberColumn';\nimport NumberColumn from './NumberColumn';\nimport {DEFAULT_FORMATTER, noNumberFilter} from './internalNumber';\nimport {ScaleMappingFunction} from './MappingFunction';\nimport {DEFAULT_COLOR_FUNCTION} from './ColorMappingFunction';\nimport {integrateDefaults} from './internal';\n\n\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionDesc(label: string = 'Imposition') {\n  return {type: 'imposition', label};\n}\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf ImpositionCompositeColumn\n * @event\n */\nexport declare function mappingChanged_ICC(previous: IMappingFunction, current: IMappingFunction): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf ImpositionCompositeColumn\n * @event\n */\nexport declare function colorMappingChanged_ICC(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * implementation of a combine column, standard operations how to select\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping')\n@SortByDefault('descending')\nexport default class ImpositionCompositeColumn extends CompositeColumn implements INumberColumn, IMapAbleColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'number',\n      groupRenderer: 'boxplot',\n      summaryRenderer: 'histogram'\n    }));\n  }\n\n  get label() {\n    const l = super.getMetaData().label;\n    const c = this._children;\n    if (l !== 'Imposition' || c.length === 0) {\n      return l;\n    }\n    if (c.length === 1) {\n      return c[0].label;\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.label : '?'} (${rest.map((c) => c.label).join(', ')})`;\n  }\n\n  private get wrapper(): INumberColumn | null {\n    return <INumberColumn>this._children.find(isNumberColumn) || null;\n  }\n\n  private get rest() {\n    const w = this.wrapper;\n    return this._children.filter((d) => d !== w);\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ImpositionCompositeColumn.EVENT_MAPPING_CHANGED, ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_ICC | null): this;\n  on(type: typeof ImpositionCompositeColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_ICC | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  getLabel(row: IDataRow) {\n    const c = this._children;\n    if (c.length === 0) {\n      return '';\n    }\n    if (c.length === 1) {\n      return c[0].getLabel(row);\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.getLabel(row) : '?'} (${rest.map((c) => `${c.label} = ${c.getLabel(row)}`).join(', ')})`;\n  }\n\n  getColor(row: IDataRow) {\n    const c = this._children;\n    switch (c.length) {\n      case 0:\n        return DEFAULT_COLOR;\n      case 1:\n        return c[0].getColor(row);\n      default:\n        return this.rest[0].getColor(row);\n    }\n  }\n\n  getNumberFormat() {\n    const w = this.wrapper;\n    return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n  }\n\n  getValue(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getValue(row) : NaN;\n  }\n\n  getNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getNumber(row) : NaN;\n  }\n\n  getRawNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getRawNumber(row) : NaN;\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      const value = this.getRawNumber(row);\n      if (isNaN(value)) {\n        return null;\n      }\n      return {\n        label: this.getLabel(row),\n        color: this.getColor(row),\n        value\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  getMapping() {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.getMapping() : new ScaleMappingFunction();\n  }\n\n  getOriginalMapping() {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.getOriginalMapping() : new ScaleMappingFunction();\n  }\n\n  setMapping(mapping: IMappingFunction): void {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.setMapping(mapping) : undefined;\n  }\n\n  getColorMapping() {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.setColorMapping(mapping) : undefined;\n  }\n\n  getFilter() {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.getFilter() : noNumberFilter();\n  }\n\n  setFilter(value: INumberFilter | null): void {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.setFilter(value) : undefined;\n  }\n\n  getRange(): [string, string] {\n    const w = this.wrapper;\n    return w && isMapAbleColumn(w) ? w.getRange() : ['0', '1'];\n  }\n\n  toCompareValue(row: IDataRow) {\n    return NumberColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return NumberColumn.prototype.toCompareValueType.call(this);\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, group: IGroup) {\n    return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\n  }\n\n  toCompareGroupValueType() {\n    return NumberColumn.prototype.toCompareGroupValueType.call(this);\n  }\n\n  insert(col: Column, index: number): Column | null {\n    if (this._children.length === 1 && !this.wrapper && !isNumberColumn(col)) {\n      // at least one has to be a number column\n      return null;\n    }\n    if (this._children.length >= 2) {\n      // limit to two\n      return null;\n    }\n    return super.insert(col, index);\n  }\n\n  protected insertImpl(col: Column, index: number) {\n    if (isNumberColumn(col)) {\n      this.forward(col, ...suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED));\n    }\n    if (isMapAbleColumn(col)) {\n      this.forward(col, ...suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.insertImpl(col, index);\n  }\n\n  protected removeImpl(child: Column, index: number) {\n    if (isNumberColumn(child)) {\n      this.unforward(child, ...suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED));\n    }\n    if (isMapAbleColumn(child)) {\n      this.unforward(child, ...suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.removeImpl(child, index);\n  }\n}\n","import {format} from 'd3-format';\nimport {boxplotBuilder, IAdvancedBoxPlotData, IEventListener} from '../internal';\nimport {dialogAddons, SortByDefault, toolbar} from './annotations';\nimport ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {IArrayDesc} from './IArrayColumn';\nimport {IDataRow, ECompareValueType, ITypeFactory} from './interfaces';\nimport {DEFAULT_FORMATTER, getBoxPlotNumber, isDummyNumberFilter, noNumberFilter, restoreNumberFilter, toCompareBoxPlotValue} from './internalNumber';\nimport {EAdvancedSortMethod, IColorMappingFunction, IMappingFunction, INumberDesc, INumberFilter, INumbersColumn} from './INumberColumn';\nimport {restoreMapping} from './MappingFunction';\nimport {isMissingValue} from './missing';\nimport NumberColumn from './NumberColumn';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {integrateDefaults} from './internal';\n\n\nexport interface INumbersDesc extends IArrayDesc, INumberDesc {\n  readonly sort?: EAdvancedSortMethod;\n}\n\nexport declare type INumbersColumnDesc = INumbersDesc & IArrayColumnDesc<number>;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf NumbersColumn\n * @event\n */\nexport declare function mappingChanged_NCS(previous: IMappingFunction, current: IMappingFunction): void;\n/**\n * emitted when the color mapping property changes\n * @asMemberOf NumbersColumn\n * @event\n */\nexport declare function colorMappingChanged_NCS(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf NumbersColumn\n * @event\n */\nexport declare function sortMethodChanged_NCS(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf NumbersColumn\n * @event\n */\nexport declare function filterChanged_NCS(previous: INumberFilter | null, current: INumberFilter | null): void;\n\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sort', 'sortNumbers')\n@SortByDefault('descending')\nexport default class NumbersColumn extends ArrayColumn<number> implements INumbersColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n  static readonly EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n\n  static readonly CENTER = 0;\n\n  private readonly numberFormat: (n: number) => string = DEFAULT_FORMATTER;\n\n  private sort: EAdvancedSortMethod;\n  private mapping: IMappingFunction;\n  private original: IMappingFunction;\n  private colorMapping: IColorMappingFunction;\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: INumberFilter = noNumberFilter();\n\n  constructor(id: string, desc: Readonly<INumbersColumnDesc>, factory: ITypeFactory) {\n    super(id, integrateDefaults(desc, Object.assign({\n      renderer: 'heatmap',\n      groupRenderer: 'heatmap',\n      summaryRenderer: 'histogram'\n    }, desc.dataLength != null && !Number.isNaN(desc.dataLength) ? {\n      // better initialize the default with based on the data length\n      width: Math.min(Math.max(100, desc.dataLength! * 10), 500)\n    } : {})));\n    this.mapping = restoreMapping(desc, factory);\n    this.original = this.mapping.clone();\n    this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n\n    if (desc.numberFormat) {\n      this.numberFormat = format(desc.numberFormat);\n    }\n\n    this.sort = desc.sort || EAdvancedSortMethod.median;\n  }\n\n  getNumberFormat() {\n    return this.numberFormat;\n  }\n\n  toCompareValue(row: IDataRow): number {\n    return toCompareBoxPlotValue(this, row);\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.FLOAT;\n  }\n\n  getRawNumbers(row: IDataRow) {\n    return this.getRawValue(row);\n  }\n\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const data = this.getRawValue(row);\n    if (data == null) {\n      return null;\n    }\n    const b = boxplotBuilder();\n    for (const d of data) {\n      b.push(isMissingValue(d) ? NaN : this.mapping.apply(d));\n    }\n    return b.build();\n  }\n\n  getRange() {\n    return this.mapping.getRange(this.numberFormat);\n  }\n\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const data = this.getRawValue(row);\n    if (data == null) {\n      return null;\n    }\n    const b = boxplotBuilder();\n    for (const d of data) {\n      b.push(isMissingValue(d) ? NaN : d);\n    }\n    return b.build();\n  }\n\n  getNumbers(row: IDataRow) {\n    return this.getValues(row);\n  }\n\n  getNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'normalized');\n  }\n\n  getRawNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'raw');\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getValues(row);\n    return v.every(isNaN) ? null : v;\n  }\n\n  getValues(row: IDataRow) {\n    return this.getRawValue(row).map((d) => isNaN(d) ? NaN : this.mapping.apply(d));\n  }\n\n  iterNumber(row: IDataRow) {\n    const v = this.getNumbers(row);\n    if (v.every(isNaN)) {\n      // missing row\n      return [NaN];\n    }\n    return v;\n  }\n\n  iterRawNumber(row: IDataRow) {\n    const v = this.getRawNumbers(row);\n    if (v.every(isNaN)) {\n      // missing row\n      return [NaN];\n    }\n    return v;\n  }\n\n  getRawValue(row: IDataRow) {\n    const r = super.getRaw(row);\n    return r == null ? [] : r.map((d) => isMissingValue(d) ? NaN : +d);\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    return format === 'json' ? this.getRawValue(row) : super.getExportValue(row, format);\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getRawValue(row).map(this.numberFormat);\n  }\n\n  getSortMethod() {\n    return this.sort;\n  }\n\n  setSortMethod(sort: EAdvancedSortMethod) {\n    if (this.sort === sort) {\n      return;\n    }\n    this.fire([NumbersColumn.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_DIRTY_HEADER, NumberColumn.EVENT_DIRTY_VALUES, NumbersColumn.EVENT_DIRTY_CACHES, NumberColumn.EVENT_DIRTY], this.sort, this.sort = sort);\n    // sort by me if not already sorted by me\n    if (!this.isSortedByMe().asc) {\n      this.sortByMe();\n    }\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.sortMethod = this.getSortMethod();\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n    r.map = this.mapping.toJSON();\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.sortMethod) {\n      this.sort = dump.sortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreNumberFilter(dump.filter);\n    }\n    if (dump.map || dump.domain) {\n      this.mapping = restoreMapping(dump, factory);\n    }\n    if (dump.colorMapping) {\n      this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, NumbersColumn.EVENT_MAPPING_CHANGED, NumbersColumn.EVENT_SORTMETHOD_CHANGED, NumbersColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_NCS | null): this;\n  on(type: typeof NumbersColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_NCS | null): this;\n  on(type: typeof NumbersColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_NCS | null): this;\n  on(type: typeof NumbersColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_NCS | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getOriginalMapping() {\n    return this.original.clone();\n  }\n\n  getMapping() {\n    return this.mapping.clone();\n  }\n\n  setMapping(mapping: IMappingFunction) {\n    if (this.mapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumbersColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\n  }\n\n  getColor(row: IDataRow) {\n    return NumberColumn.prototype.getColor.call(this, row);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return NumberColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): INumberFilter {\n    return NumberColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: INumberFilter | null) {\n    NumberColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return NumberColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return NumberColumn.prototype.clearFilter.call(this);\n  }\n}\n\n","import {IBoxPlotData} from '../internal';\nimport {suffix, ISequence, IEventListener} from '../internal';\nimport {toolbar, SortByDefault, dialogAddons} from './annotations';\nimport BoxPlotColumn from './BoxPlotColumn';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport {IDataRow, IGroup, IColumnDesc, DEFAULT_COLOR} from './interfaces';\nimport {ESortMethod, IBoxPlotColumn, INumberFilter, isBoxPlotColumn, IMappingFunction, IColorMappingFunction, isMapAbleColumn} from './INumberColumn';\nimport {ScaleMappingFunction} from './MappingFunction';\nimport NumbersColumn from './NumbersColumn';\nimport {DEFAULT_COLOR_FUNCTION} from './ColorMappingFunction';\nimport {DEFAULT_FORMATTER, noNumberFilter} from './internalNumber';\nimport {integrateDefaults} from './internal';\n\n\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionBoxPlotDesc(label: string = 'Imposition') {\n  return {type: 'impositions', label};\n}\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf ImpositionBoxPlotColumn\n * @event\n */\nexport declare function mappingChanged_IPBC(previous: IMappingFunction, current: IMappingFunction): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf ImpositionBoxPlotColumn\n * @event\n */\nexport declare function colorMappingChanged_IPBC(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n\n/**\n * implementation of a combine column, standard operations how to select\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sort', 'sortBoxPlot')\n@SortByDefault('descending')\nexport default class ImpositionBoxPlotColumn extends CompositeColumn implements IBoxPlotColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'boxplot',\n      groupRenderer: 'boxplot',\n      summaryRenderer: 'boxplot'\n    }));\n  }\n\n  get label() {\n    const l = super.getMetaData().label;\n    const c = this._children;\n    if (l !== 'Imposition' || c.length === 0) {\n      return l;\n    }\n    if (c.length === 1) {\n      return c[0].label;\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.label : '?'} (${rest.map((c) => c.label).join(', ')})`;\n  }\n\n  private get wrapper(): IBoxPlotColumn | null {\n    return <IBoxPlotColumn>this._children.find(isBoxPlotColumn) || null;\n  }\n\n  private get rest() {\n    const w = this.wrapper;\n    return this._children.filter((d) => d !== w);\n  }\n\n  getLabel(row: IDataRow) {\n    const c = this._children;\n    if (c.length === 0) {\n      return '';\n    }\n    if (c.length === 1) {\n      return c[0].getLabel(row);\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.getLabel(row) : '?'} (${rest.map((c) => `${c.label} = ${c.getLabel(row)}`)})`;\n  }\n\n  getColor(row: IDataRow) {\n    const c = this._children;\n    switch (c.length) {\n      case 0:\n        return DEFAULT_COLOR;\n      case 1:\n        return c[0].getColor(row);\n      default:\n        return this.rest[0].getColor(row);\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED, ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_IPBC | null): this;\n  on(type: typeof ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_IPBC | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  getNumberFormat() {\n    const w = this.wrapper;\n    return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n  }\n\n  getValue(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getValue(row) : null;\n  }\n\n  getNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getNumber(row) : NaN;\n  }\n\n  getRawNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getRawNumber(row) : NaN;\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      const value = this.getRawNumber(row);\n      if (isNaN(value)) {\n        return null;\n      }\n      return {\n        label: this.getLabel(row),\n        color: this.getColor(row),\n        value\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null {\n    const w = this.wrapper;\n    return w ? w.getBoxPlotData(row) : null;\n  }\n\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null {\n    const w = this.wrapper;\n    return w ? w.getRawBoxPlotData(row) : null;\n  }\n\n  getMapping() {\n    const w = this.wrapper;\n    return w ? w.getMapping() : new ScaleMappingFunction();\n  }\n\n  getOriginalMapping() {\n    const w = this.wrapper;\n    return w ? w.getOriginalMapping() : new ScaleMappingFunction();\n  }\n\n  getSortMethod() {\n    const w = this.wrapper;\n    return w ? w.getSortMethod() : ESortMethod.min;\n  }\n\n  setSortMethod(value: ESortMethod) {\n    const w = this.wrapper;\n    return w ? w.setSortMethod(value) : undefined;\n  }\n\n  setMapping(mapping: IMappingFunction): void {\n    const w = this.wrapper;\n    return w ? w.setMapping(mapping) : undefined;\n  }\n\n  getColorMapping() {\n    const w = this.wrapper;\n    return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    const w = this.wrapper;\n    return w ? w.setColorMapping(mapping) : undefined;\n  }\n\n  getFilter() {\n    const w = this.wrapper;\n    return w ? w.getFilter() : noNumberFilter();\n  }\n\n  setFilter(value: INumberFilter | null): void {\n    const w = this.wrapper;\n    return w ? w.setFilter(value) : undefined;\n  }\n\n  getRange(): [string, string] {\n    const w = this.wrapper;\n    return w ? w.getRange() : ['0', '1'];\n  }\n\n  toCompareValue(row: IDataRow) {\n    return BoxPlotColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return BoxPlotColumn.prototype.toCompareValueType.call(this);\n  }\n\n  group(row: IDataRow) {\n    return BoxPlotColumn.prototype.group.call(this, row);\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, group: IGroup) {\n    return BoxPlotColumn.prototype.toCompareGroupValue.call(this, rows, group);\n  }\n\n  toCompareGroupValueType() {\n    return BoxPlotColumn.prototype.toCompareGroupValueType.call(this);\n  }\n\n  insert(col: Column, index: number): Column | null {\n    if (this._children.length === 1 && !this.wrapper && !isBoxPlotColumn(col)) {\n      // at least one has to be a number column\n      return null;\n    }\n    if (this._children.length >= 2) {\n      // limit to two\n      return null;\n    }\n    return super.insert(col, index);\n  }\n\n  protected insertImpl(col: Column, index: number) {\n    if (isBoxPlotColumn(col)) {\n      this.forward(col, ...suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\n    } else if (isMapAbleColumn(col)) {\n      this.forward(col, ...suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.insertImpl(col, index);\n  }\n\n  protected removeImpl(child: Column, index: number) {\n    if (isBoxPlotColumn(child)) {\n      this.unforward(child, ...suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\n    } else if (isMapAbleColumn(child)) {\n      this.unforward(child, ...suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.removeImpl(child, index);\n  }\n}\n","import {suffix, IEventListener, IAdvancedBoxPlotData} from '../internal';\nimport {toolbar, dialogAddons, SortByDefault} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport {IKeyValue} from './IArrayColumn';\nimport {IDataRow, IGroup, IColumnDesc, DEFAULT_COLOR} from './interfaces';\nimport {EAdvancedSortMethod, INumberFilter, INumbersColumn, isNumbersColumn, IMappingFunction, IColorMappingFunction, isMapAbleColumn} from './INumberColumn';\nimport {ScaleMappingFunction} from './MappingFunction';\nimport NumbersColumn from './NumbersColumn';\nimport {DEFAULT_COLOR_FUNCTION} from './ColorMappingFunction';\nimport {DEFAULT_FORMATTER, noNumberFilter} from './internalNumber';\nimport {integrateDefaults} from './internal';\n\n\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionsDesc(label: string = 'Imposition') {\n  return {type: 'impositions', label};\n}\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf ImpositionCompositesColumn\n * @event\n */\nexport declare function mappingChanged_ICCS(previous: IMappingFunction, current: IMappingFunction): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf ImpositionCompositesColumn\n * @event\n */\nexport declare function colorMappingChanged_ICCS(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * implementation of a combine column, standard operations how to select\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sort', 'sortNumbers')\n@SortByDefault('descending')\nexport default class ImpositionCompositesColumn extends CompositeColumn implements INumbersColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'numbers',\n      groupRenderer: 'numbers',\n      summaryRenderer: 'histogram'\n    }));\n  }\n\n  get label() {\n    const l = super.getMetaData().label;\n    const c = this._children;\n    if (l !== 'Imposition' || c.length === 0) {\n      return l;\n    }\n    if (c.length === 1) {\n      return c[0].label;\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.label : '?'} (${rest.map((c) => c.label).join(', ')})`;\n  }\n\n  private get wrapper(): INumbersColumn | null {\n    return <INumbersColumn>this._children.find(isNumbersColumn) || null;\n  }\n\n  private get rest() {\n    const w = this.wrapper;\n    return this._children.filter((d) => d !== w);\n  }\n\n  getLabel(row: IDataRow) {\n    const c = this._children;\n    if (c.length === 0) {\n      return '';\n    }\n    if (c.length === 1) {\n      return c[0].getLabel(row);\n    }\n    const w = this.wrapper;\n    const rest = this.rest;\n    return `${w ? w.getLabel(row) : '?'} (${rest.map((c) => `${c.label} = ${c.getLabel(row)}`)})`;\n  }\n\n  getColor(row: IDataRow) {\n    const c = this._children;\n    switch (c.length) {\n      case 0:\n        return DEFAULT_COLOR;\n      case 1:\n        return c[0].getColor(row);\n      default:\n        return this.rest[0].getColor(row);\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ImpositionCompositesColumn.EVENT_MAPPING_CHANGED, ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_ICCS | null): this;\n  on(type: typeof ImpositionCompositesColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_ICCS | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  get labels() {\n    const w = this.wrapper;\n    return w ? w.labels : [];\n  }\n\n  get dataLength() {\n    const w = this.wrapper;\n    return w ? w.dataLength : null;\n  }\n\n  getNumberFormat() {\n    const w = this.wrapper;\n    return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n  }\n\n  getValue(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getValue(row) : [];\n  }\n\n  getNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getNumber(row) : NaN;\n  }\n\n  getRawNumber(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getRawNumber(row) : NaN;\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      const value = this.getRawNumber(row);\n      if (isNaN(value)) {\n        return null;\n      }\n      return {\n        label: this.getLabels(row),\n        color: this.getColor(row)\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  getNumbers(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getNumbers(row) : [];\n  }\n\n  getRawNumbers(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getRawNumbers(row) : [];\n  }\n\n  iterNumber(row: IDataRow) {\n    return this.getNumbers(row);\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return this.getRawNumbers(row);\n  }\n\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const w = this.wrapper;\n    return w ? w.getBoxPlotData(row) : null;\n  }\n\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const w = this.wrapper;\n    return w ? w.getRawBoxPlotData(row) : null;\n  }\n\n  getMapping() {\n    const w = this.wrapper;\n    return w ? w.getMapping() : new ScaleMappingFunction();\n  }\n\n  getOriginalMapping() {\n    const w = this.wrapper;\n    return w ? w.getOriginalMapping() : new ScaleMappingFunction();\n  }\n\n  getSortMethod() {\n    const w = this.wrapper;\n    return w ? w.getSortMethod() : EAdvancedSortMethod.min;\n  }\n\n  setSortMethod(value: EAdvancedSortMethod) {\n    const w = this.wrapper;\n    return w ? w.setSortMethod(value) : undefined;\n  }\n\n  setMapping(mapping: IMappingFunction): void {\n    const w = this.wrapper;\n    return w ? w.setMapping(mapping) : undefined;\n  }\n\n  getColorMapping() {\n    const w = this.wrapper;\n    return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    const w = this.wrapper;\n    return w ? w.setColorMapping(mapping) : undefined;\n  }\n\n  getFilter() {\n    const w = this.wrapper;\n    return w ? w.getFilter() : noNumberFilter();\n  }\n\n  setFilter(value: INumberFilter | null): void {\n    const w = this.wrapper;\n    return w ? w.setFilter(value) : undefined;\n  }\n\n  getRange(): [string, string] {\n    const w = this.wrapper;\n    return w ? w.getRange() : ['0', '1'];\n  }\n\n  getMap(row: IDataRow): IKeyValue<number>[] {\n    const w = this.wrapper;\n    return w ? w.getMap(row) : [];\n  }\n\n  getMapLabel(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getMapLabel(row) : [];\n  }\n\n  getLabels(row: IDataRow): string[] {\n    const w = this.wrapper;\n    return w ? w.getLabels(row) : [];\n  }\n\n  getValues(row: IDataRow) {\n    const w = this.wrapper;\n    return w ? w.getValues(row) : [];\n  }\n\n  toCompareValue(row: IDataRow) {\n    return NumbersColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return NumbersColumn.prototype.toCompareValueType.call(this);\n  }\n\n  toCompareGroupValue(rows: IDataRow[], group: IGroup) {\n    return NumbersColumn.prototype.toCompareGroupValue.call(this, rows, group);\n  }\n\n  toCompareGroupValueType() {\n    return NumbersColumn.prototype.toCompareGroupValueType.call(this);\n  }\n\n  insert(col: Column, index: number): Column | null {\n    if (this._children.length === 1 && !this.wrapper && !isNumbersColumn(col)) {\n      // at least one has to be a number column\n      return null;\n    }\n    if (this._children.length >= 2) {\n      // limit to two\n      return null;\n    }\n    return super.insert(col, index);\n  }\n\n  protected insertImpl(col: Column, index: number) {\n    if (isNumbersColumn(col)) {\n      this.forward(col, ...suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED));\n    }\n    if (isMapAbleColumn(col)) {\n      this.forward(col, ...suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.insertImpl(col, index);\n  }\n\n  protected removeImpl(child: Column, index: number) {\n    if (isNumbersColumn(child)) {\n      this.unforward(child, ...suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED));\n    }\n    if (isMapAbleColumn(child)) {\n      this.unforward(child, ...suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED));\n    }\n    return super.removeImpl(child, index);\n  }\n}\n","import {format} from 'd3-format';\nimport CompositeColumn from './CompositeColumn';\nimport {IDataRow, IGroup, IColumnDesc} from './interfaces';\nimport {isMissingValue} from './missing';\nimport NumberColumn from './NumberColumn';\nimport {SortByDefault, toolbar} from './annotations';\nimport {ISequence} from '../internal';\nimport {INumberColumn} from './INumberColumn';\n\nexport interface ICompositeNumberDesc extends IColumnDesc {\n  /**\n   * d3 format number Format\n   * @default 0.3n\n   */\n  numberFormat?: string;\n}\n\nexport declare type ICompositeNumberColumnDesc = ICompositeNumberDesc & IColumnDesc;\n\n/**\n * implementation of a combine column, standard operations how to select\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy')\n@SortByDefault('descending')\nexport default class CompositeNumberColumn extends CompositeColumn implements INumberColumn {\n  private readonly numberFormat: (n: number) => string = format('.3n');\n\n  constructor(id: string, desc: Readonly<ICompositeNumberColumnDesc>) {\n    super(id, desc);\n\n    if (desc.numberFormat) {\n      this.numberFormat = format(desc.numberFormat);\n    }\n  }\n\n  getNumberFormat() {\n    return this.numberFormat;\n  }\n\n  getLabel(row: IDataRow) {\n    if (!this.isLoaded()) {\n      return '';\n    }\n    const v = this.getValue(row);\n    //keep non number if it is not a number else convert using formatter\n    return String(typeof v === 'number' && !isNaN(v) && isFinite(v) ? this.numberFormat(v) : v);\n  }\n\n  getValue(row: IDataRow) {\n    if (!this.isLoaded()) {\n      return null;\n    }\n    //weighted sum\n    const v = this.compute(row);\n    if (isMissingValue(v)) {\n      return null;\n    }\n    return v;\n  }\n\n  protected compute(_row: IDataRow) {\n    return NaN;\n  }\n\n  getNumber(row: IDataRow) {\n    const r = this.getValue(row);\n    return r == null ? NaN : r;\n  }\n\n  getRawNumber(row: IDataRow) {\n    return this.getNumber(row);\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      return {\n        value: this.getRawNumber(row),\n        children: this.children.map((d) => d.getExportValue(row, format))\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  toCompareValue(row: IDataRow) {\n    return NumberColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return NumberColumn.prototype.toCompareValueType.call(this);\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, group: IGroup) {\n    return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\n  }\n\n  toCompareGroupValueType() {\n    return NumberColumn.prototype.toCompareGroupValueType.call(this);\n  }\n\n  getRenderer(): string {\n    return NumberColumn.prototype.getRenderer.call(this);\n  }\n}\n","import {median, quantile, IEventListener} from '../internal';\nimport {toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport CompositeNumberColumn, {ICompositeNumberColumnDesc} from './CompositeNumberColumn';\nimport {IDataRow, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport {EAdvancedSortMethod} from './INumberColumn';\nimport {integrateDefaults} from './internal';\n\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createReduceDesc(label: string = 'Reduce') {\n  return {type: 'reduce', label};\n}\n\nexport interface IReduceDesc {\n  readonly reduce?: EAdvancedSortMethod;\n}\n\n\nexport declare type IReduceColumnDesc = IReduceDesc & ICompositeNumberColumnDesc;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf ReduceColumn\n * @event\n */\nexport declare function reduceChanged(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\n\n/**\n * combines multiple columns by using the maximal value\n */\n@toolbar('reduce')\nexport default class ReduceColumn extends CompositeNumberColumn {\n  static readonly EVENT_REDUCE_CHANGED = 'reduceChanged';\n\n  private reduce: EAdvancedSortMethod;\n\n  constructor(id: string, desc: Readonly<IReduceColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'interleaving',\n      groupRenderer: 'interleaving',\n      summaryRenderer: 'interleaving'\n    }));\n    this.reduce = desc.reduce || EAdvancedSortMethod.max;\n  }\n\n  get label() {\n    const l = super.getMetaData().label;\n    if (l !== 'Reduce') {\n      return l;\n    }\n    return `${this.reduce[0].toUpperCase()}${this.reduce.slice(1)}(${this.children.map((d) => d.label).join(', ')})`;\n  }\n\n  getColor(row: IDataRow) {\n    //compute the index of the maximal one\n    const c = this._children;\n    if (c.length === 0 || this.reduce === EAdvancedSortMethod.q1 || this.reduce === EAdvancedSortMethod.q3 || this.reduce === EAdvancedSortMethod.mean) {\n      return DEFAULT_COLOR;\n    }\n    const v = this.compute(row);\n    const selected = c.find((c) => c.getValue(row) === v);\n    return selected ? selected.getColor(row) : DEFAULT_COLOR;\n  }\n\n  protected compute(row: IDataRow) {\n    const vs = this._children.map((d) => d.getValue(row)).filter((d) => !isNaN(d));\n    if (vs.length === 0) {\n      return NaN;\n    }\n    switch (this.reduce) {\n      case EAdvancedSortMethod.mean:\n        return vs.reduce((a, b) => a + b, 0) / vs.length;\n      case EAdvancedSortMethod.max:\n        return vs.reduce((a, b) => Math.max(a, b), Number.NEGATIVE_INFINITY);\n      case EAdvancedSortMethod.min:\n        return vs.reduce((a, b) => Math.min(a, b), Number.POSITIVE_INFINITY);\n      case EAdvancedSortMethod.median:\n        return median(vs)!;\n      case EAdvancedSortMethod.q1:\n        return quantile(vs.sort((a, b) => a - b), 0.25)!;\n      case EAdvancedSortMethod.q3:\n        return quantile(vs.sort((a, b) => a - b), 0.75)!;\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ReduceColumn.EVENT_REDUCE_CHANGED]);\n  }\n\n  on(type: typeof ReduceColumn.EVENT_REDUCE_CHANGED, listener: typeof reduceChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  getReduce() {\n    return this.reduce;\n  }\n\n  setReduce(reduce: EAdvancedSortMethod) {\n    if (this.reduce === reduce) {\n      return;\n    }\n    this.fire([ReduceColumn.EVENT_REDUCE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.reduce, this.reduce = reduce);\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.reduce = this.reduce;\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    this.reduce = dump.reduce || this.reduce;\n    super.restore(dump, factory);\n  }\n\n  get canJustAddNumbers() {\n    return true;\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      return {\n        value: this.getRawNumber(row),\n        children: this.children.map((d) => d.getExportValue(row, format))\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n}\n","import {round, IEventListener, similar} from '../internal';\nimport {toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport CompositeNumberColumn, {ICompositeNumberDesc} from './CompositeNumberColumn';\nimport {IDataRow, IFlatColumn, IMultiLevelColumn, ITypeFactory} from './interfaces';\nimport {integrateDefaults} from './internal';\n\n/**\n * factory for creating a description creating a stacked column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createStackDesc(label: string = 'Weighted Sum') {\n  return {type: 'stack', label};\n}\n\n\n/**\n * emitted when the collapse property changes\n * @asMemberOf StackColumn\n * @event\n */\nexport declare function collapseChanged(previous: boolean, current: boolean): void;\n\n\n/**\n * emitted when the weights change\n * @asMemberOf StackColumn\n * @event\n */\nexport declare function weightsChanged(previous: number[], current: number[]): void;\n\n\n/**\n * emitted when the ratios between the children changes\n * @asMemberOf StackColumn\n * @event\n */\nexport declare function nestedChildRatio(previous: number[], current: number[]): void;\n\n/**\n * implementation of the stacked column\n */\n@toolbar('editWeights', 'compress', 'expand')\nexport default class StackColumn extends CompositeNumberColumn implements IMultiLevelColumn {\n  static readonly EVENT_COLLAPSE_CHANGED = 'collapseChanged';\n  static readonly EVENT_WEIGHTS_CHANGED = 'weightsChanged';\n  static readonly EVENT_MULTI_LEVEL_CHANGED = 'nestedChildRatio';\n\n  static readonly COLLAPSED_RENDERER = 'number';\n\n  private readonly adaptChange: (old: number, newValue: number) => void;\n\n  /**\n   * whether this stack column is collapsed i.e. just looks like an ordinary number column\n   * @type {boolean}\n   * @private\n   */\n  private collapsed = false;\n\n  constructor(id: string, desc: ICompositeNumberDesc) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'stack',\n      groupRenderer: 'stack',\n      summaryRenderer: 'default'\n    }));\n\n    const that = this;\n    this.adaptChange = function (this: {source: Column}, oldValue, newValue) {\n      that.adaptWidthChange(this.source, oldValue, newValue);\n    };\n  }\n\n  get label() {\n    const l = super.getMetaData().label;\n    const c = this._children;\n    if (l !== 'Weighted Sum' || c.length === 0) {\n      return l;\n    }\n    const weights = this.getWeights();\n    return c.map((c, i) => `${c.label} (${round(100 * weights[i], 1)}%)`).join(' + ');\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([StackColumn.EVENT_COLLAPSE_CHANGED, StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED]);\n  }\n\n  on(type: typeof StackColumn.EVENT_COLLAPSE_CHANGED, listener: typeof collapseChanged | null): this;\n  on(type: typeof StackColumn.EVENT_WEIGHTS_CHANGED, listener: typeof weightsChanged | null): this;\n  on(type: typeof StackColumn.EVENT_MULTI_LEVEL_CHANGED, listener: typeof nestedChildRatio | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  setCollapsed(value: boolean) {\n    if (this.collapsed === value) {\n      return;\n    }\n    this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\n  }\n\n  getCollapsed() {\n    return this.collapsed;\n  }\n\n  get canJustAddNumbers() {\n    return true;\n  }\n\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\n    let self = null;\n    const children = levelsToGo <= Column.FLAT_ALL_COLUMNS ? this._children : this._children.filter((c) => c.isVisible());\n    //no more levels or just this one\n    if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n      let w = this.getWidth();\n      if (!this.collapsed) {\n        w += (children.length - 1) * padding;\n      }\n      r.push(self = {col: this, offset, width: w});\n      if (levelsToGo === 0) {\n        return w;\n      }\n    }\n    //push children\n    let acc = offset;\n    children.forEach((c) => {\n      acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\n    });\n    if (self) { //nesting my even increase my width\n      self.width = acc - offset - padding;\n    }\n    return acc - offset - padding;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.collapsed = this.collapsed;\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    this.collapsed = dump.collapsed === true;\n    super.restore(dump, factory);\n  }\n\n  /**\n   * inserts a column at a the given position\n   */\n  insert(col: Column, index: number, weight = NaN) {\n    if (!isNaN(weight)) {\n      col.setWidth((weight / (1 - weight) * this.getWidth()));\n    }\n    col.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, this.adaptChange);\n    //increase my width\n    super.setWidth(this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\n\n    return super.insert(col, index);\n  }\n\n  push(col: Column, weight = NaN) {\n    return this.insert(col, this.length, weight);\n  }\n\n  insertAfter(col: Column, ref: Column, weight = NaN) {\n    const i = this.indexOf(ref);\n    if (i < 0) {\n      return null;\n    }\n    return this.insert(col, i + 1, weight);\n  }\n\n  /**\n   * adapts weights according to an own width change\n   * @param col\n   * @param oldValue\n   * @param newValue\n   */\n  private adaptWidthChange(col: Column, oldValue: number, newValue: number) {\n    if (similar(oldValue, newValue, 0.5)) {\n      return;\n    }\n    const bak = this.getWeights();\n    const full = this.getWidth(),\n      change = (newValue - oldValue) / full;\n    const oldWeight = oldValue / full;\n    const factor = (1 - oldWeight - change) / (1 - oldWeight);\n    const widths = this._children.map((c) => {\n      if (c === col) {\n        //c.weight += change;\n        return newValue;\n      }\n      const guess = c.getWidth() * factor;\n      const w = isNaN(guess) || guess < 1 ? 0 : guess;\n      c.setWidthImpl(w);\n      return w;\n    });\n    //adapt width if needed\n    super.setWidth(widths.reduce((a, b) => a + b, 0));\n\n    this.fire([StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, this.getWeights());\n  }\n\n  getWeights() {\n    const w = this.getWidth();\n    return this._children.map((d) => d.getWidth() / w);\n  }\n\n  setWeights(weights: number[]) {\n    const bak = this.getWeights();\n    const delta = weights.length - this.length;\n    let s: number;\n    if (delta < 0) {\n      s = weights.reduce((p, a) => p + a, 0);\n      if (s <= 1) {\n        for (let i = 0; i < -delta; ++i) {\n          weights.push((1 - s) * (1 / -delta));\n        }\n      } else if (s <= 100) {\n        for (let i = 0; i < -delta; ++i) {\n          weights.push((100 - s) * (1 / -delta));\n        }\n      }\n    }\n    weights = weights.slice(0, this.length);\n    s = weights.reduce((p, a) => p + a, 0) / this.getWidth();\n    weights = weights.map((d) => d / s);\n\n    this._children.forEach((c, i) => {\n      c.setWidthImpl(weights[i]);\n    });\n    this.fire([StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, weights);\n\n  }\n\n  removeImpl(child: Column, index: number) {\n    child.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, null);\n    super.setWidth(this.length === 0 ? 100 : this.getWidth() - child.getWidth());\n    return super.removeImpl(child, index);\n  }\n\n  setWidth(value: number) {\n    const factor = value / this.getWidth();\n    this._children.forEach((child) => {\n      //disable since we change it\n      child.setWidthImpl(child.getWidth() * factor);\n    });\n    super.setWidth(value);\n  }\n\n  protected compute(row: IDataRow) {\n    const w = this.getWidth();\n    return this._children.reduce((acc, d) => acc + d.getValue(row) * (d.getWidth() / w), 0);\n  }\n\n  getRenderer() {\n    if (this.getCollapsed() && this.isLoaded()) {\n      return StackColumn.COLLAPSED_RENDERER;\n    }\n    return super.getRenderer();\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      return {\n        value: this.getRawNumber(row),\n        children: this.children.map((d) => d.getExportValue(row, format))\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n}\n","import {similar, IEventListener} from '../internal';\nimport {toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\nimport {IDataRow, IColumnDesc, IFlatColumn, IMultiLevelColumn, ITypeFactory} from './interfaces';\nimport StackColumn from './StackColumn';\n\n\n/**\n * emitted when the collapse property changes\n * @asMemberOf MultiLevelCompositeColumn\n * @event\n */\nexport declare function collapseChanged_MC(previous: boolean, current: boolean): void;\n\n/**\n * emitted when the ratios between the children changes\n * @asMemberOf MultiLevelCompositeColumn\n * @event\n */\nexport declare function nestedChildRatio_MC(previous: number, current: number): void;\n\n\n@toolbar('compress', 'expand')\nexport default class MultiLevelCompositeColumn extends CompositeColumn implements IMultiLevelColumn {\n  static readonly EVENT_COLLAPSE_CHANGED = StackColumn.EVENT_COLLAPSE_CHANGED;\n  static readonly EVENT_MULTI_LEVEL_CHANGED = StackColumn.EVENT_MULTI_LEVEL_CHANGED;\n\n  private readonly adaptChange: (old: number, newValue: number) => void;\n\n  /**\n   * whether this stack column is collapsed i.e. just looks like an ordinary number column\n   * @type {boolean}\n   * @private\n   */\n  private collapsed = false;\n\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\n    super(id, desc);\n    const that = this;\n    this.adaptChange = function (old, newValue) {\n      that.adaptWidthChange(old, newValue);\n    };\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED, MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED]);\n  }\n\n  on(type: typeof MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED, listener: typeof collapseChanged_MC | null): this;\n  on(type: typeof MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, listener: typeof nestedChildRatio_MC | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  setCollapsed(value: boolean) {\n    if (this.collapsed === value) {\n      return;\n    }\n    this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\n  }\n\n  getCollapsed() {\n    return this.collapsed;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.collapsed = this.collapsed;\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    this.collapsed = dump.collapsed === true;\n    super.restore(dump, factory);\n  }\n\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\n    return StackColumn.prototype.flatten.call(this, r, offset, levelsToGo, padding);\n  }\n\n  /**\n   * inserts a column at a the given position\n   * @param col\n   * @param index\n   */\n  insert(col: Column, index: number) {\n    col.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, this.adaptChange);\n    //increase my width\n    super.setWidth(this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\n\n    return super.insert(col, index);\n  }\n\n  /**\n   * adapts weights according to an own width change\n   * @param oldValue\n   * @param newValue\n   */\n  private adaptWidthChange(oldValue: number, newValue: number) {\n    if (similar(oldValue, newValue, 0.5)) {\n      return;\n    }\n    const act = this.getWidth();\n    const next = act + (newValue - oldValue);\n    this.fire([MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, next);\n    super.setWidth(next);\n  }\n\n  removeImpl(child: Column, index: number) {\n    child.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, null);\n    super.setWidth(this.length === 0 ? 100 : this.getWidth() - child.getWidth());\n    return super.removeImpl(child, index);\n  }\n\n  setWidth(value: number) {\n    const act = this.getWidth();\n    const factor = value / act;\n    this._children.forEach((child) => {\n      //disable since we change it\n      child.setWidthImpl(child.getWidth() * factor);\n    });\n    if (!similar(act, value, 0.5)) {\n      this.fire([MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, value);\n    }\n    super.setWidth(value);\n  }\n\n  getRenderer() {\n    if (this.getCollapsed()) {\n      return MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED;\n    }\n    return super.getRenderer();\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      return {\n        children: this.children.map((d) => d.getExportValue(row, format))\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n}\n","import {IDataRow, ECompareValueType} from './interfaces';\nimport MultiLevelCompositeColumn from './MultiLevelCompositeColumn';\nimport {concat} from '../internal';\nimport {toolbar} from './annotations';\n\n/**\n * factory for creating a description creating a mean column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createNestedDesc(label: string = 'Nested') {\n  return {type: 'nested', label};\n}\n\n/**\n * a nested column is a composite column where the sorting order is determined by the nested ordering of the children\n * i.e., sort by the first child if equal sort by the second child,...\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy')\nexport default class NestedColumn extends MultiLevelCompositeColumn {\n\n  toCompareValue(row: IDataRow) {\n    return concat(this.children.map((d) => d.toCompareValue(row)));\n  }\n\n  toCompareValueType(): ECompareValueType[] {\n    return concat(this.children.map((d) => d.toCompareValueType()));\n  }\n\n  getLabel(row: IDataRow) {\n    return this.children.map((d) => d.getLabel(row)).join(';');\n  }\n\n  getValue(row: IDataRow) {\n    return this.children.map((d) => d.getValue(row)).join(';');\n  }\n}\n","import {toolbar, SortByDefault, dialogAddons} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IKeyValue} from './IArrayColumn';\nimport {IDataRow, ECompareValueType, ITypeFactory} from './interfaces';\nimport {\n  EAdvancedSortMethod, IAdvancedBoxPlotColumn, INumberDesc,\n  INumberFilter,\n  IMappingFunction,\n  IColorMappingFunction} from './INumberColumn';\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\nimport {restoreMapping} from './MappingFunction';\nimport {isMissingValue} from './missing';\nimport NumberColumn from './NumberColumn';\nimport {IEventListener, IAdvancedBoxPlotData, boxplotBuilder} from '../internal';\nimport {format} from 'd3-format';\nimport {DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter} from './internalNumber';\nimport {integrateDefaults} from './internal';\n\n\nexport interface INumberMapDesc extends INumberDesc {\n  readonly sort?: EAdvancedSortMethod;\n}\n\nexport declare type INumberMapColumnDesc = INumberMapDesc & IMapColumnDesc<number>;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf NumberMapColumn\n * @event\n */\nexport declare function mappingChanged_NMC(previous: IMappingFunction, current: IMappingFunction): void;\n/**\n * emitted when the color mapping property changes\n * @asMemberOf NumberMapColumn\n * @event\n */\nexport declare function colorMappingChanged_NMC(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * emitted when the sort method property changes\n * @asMemberOf NumberMapColumn\n * @event\n */\nexport declare function sortMethodChanged_NMC(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf NumberMapColumn\n * @event\n */\nexport declare function filterChanged_NMC(previous: INumberFilter | null, current: INumberFilter | null): void;\n\n@toolbar('rename', 'filterNumber', 'colorMapped', 'editMapping')\n@dialogAddons('sort', 'sortNumbers')\n@SortByDefault('descending')\nexport default class NumberMapColumn extends MapColumn<number> implements IAdvancedBoxPlotColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n  static readonly EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n\n  private readonly numberFormat: (n: number) => string = DEFAULT_FORMATTER;\n\n  private sort: EAdvancedSortMethod;\n  private mapping: IMappingFunction;\n  private original: IMappingFunction;\n  private colorMapping: IColorMappingFunction;\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: INumberFilter = noNumberFilter();\n\n  constructor(id: string, desc: Readonly<INumberMapColumnDesc>, factory: ITypeFactory) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'mapbars'\n    }));\n    this.mapping = restoreMapping(desc, factory);\n    this.original = this.mapping.clone();\n    this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n    this.sort = desc.sort || EAdvancedSortMethod.median;\n\n    if (desc.numberFormat) {\n      this.numberFormat = format(desc.numberFormat);\n    }\n  }\n\n  getNumberFormat() {\n    return this.numberFormat;\n  }\n\n  toCompareValue(row: IDataRow): number {\n    return toCompareBoxPlotValue(this, row);\n  }\n\n  toCompareValueType() {\n    return ECompareValueType.FLOAT;\n  }\n\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const data = this.getRawValue(row);\n    if (data == null) {\n      return null;\n    }\n    const b = boxplotBuilder();\n    for (const d of data) {\n      b.push(isMissingValue(d.value) ? NaN : this.mapping.apply(d.value));\n    }\n    return b.build();\n  }\n\n  getRange() {\n    return this.mapping.getRange(this.numberFormat);\n  }\n\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\n    const data = this.getRawValue(row);\n    if (data == null) {\n      return null;\n    }\n\n    const b = boxplotBuilder();\n    for (const d of data) {\n      b.push(isMissingValue(d.value) ? NaN : d.value);\n    }\n    return b.build();\n  }\n\n  getNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'normalized');\n  }\n\n  getRawNumber(row: IDataRow): number {\n    return getBoxPlotNumber(this, row, 'raw');\n  }\n\n  iterNumber(row: IDataRow) {\n    const r = this.getValue(row);\n    return r ? r.map((d) => d.value) : [NaN];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    const r = this.getRawValue(row);\n    return r ? r.map((d) => d.value) : [NaN];\n  }\n\n  getValue(row: IDataRow) {\n    const values = this.getRawValue(row);\n    return values.length === 0 ? null : values.map(({key, value}) => ({key, value: isMissingValue(value) ? NaN : this.mapping.apply(value)}));\n  }\n\n  getRawValue(row: IDataRow): IKeyValue<number>[] {\n    const r = super.getValue(row);\n    return r == null ? [] : r;\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    return format === 'json' ? this.getRawValue(row) : super.getExportValue(row, format);\n  }\n\n  getLabels(row: IDataRow) {\n    const v = this.getRawValue(row);\n    return v.map(({key, value}) => ({key, value: this.numberFormat(value)}));\n  }\n\n  getSortMethod() {\n    return this.sort;\n  }\n\n  setSortMethod(sort: EAdvancedSortMethod) {\n    if (this.sort === sort) {\n      return;\n    }\n    this.fire([NumberMapColumn.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\n    // sort by me if not already sorted by me\n    if (!this.isSortedByMe().asc) {\n      this.sortByMe();\n    }\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.sortMethod = this.getSortMethod();\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n    r.map = this.mapping.toJSON();\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    if (dump.sortMethod) {\n      this.sort = dump.sortMethod;\n    }\n    if (dump.filter) {\n      this.currentFilter = restoreNumberFilter(dump.filter);\n    }\n    if (dump.map || dump.domain) {\n      this.mapping = restoreMapping(dump, factory);\n    }\n    if (dump.colorMapping) {\n      this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n    }\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, NumberMapColumn.EVENT_MAPPING_CHANGED, NumberMapColumn.EVENT_SORTMETHOD_CHANGED, NumberMapColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_NMC | null): this;\n  on(type: typeof NumberMapColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_NMC | null): this;\n  on(type: typeof NumberMapColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged_NMC | null): this;\n  on(type: typeof NumberMapColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_NMC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getOriginalMapping() {\n    return this.original.clone();\n  }\n\n  getMapping() {\n    return this.mapping.clone();\n  }\n\n  setMapping(mapping: IMappingFunction) {\n    if (this.mapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumberMapColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\n  }\n\n  getColor(row: IDataRow) {\n    return NumberColumn.prototype.getColor.call(this, row);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return NumberColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): INumberFilter {\n    return NumberColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: INumberFilter | null) {\n    NumberColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return NumberColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return NumberColumn.prototype.clearFilter.call(this);\n  }\n}\n\n","import {equalArrays, extent, IEventListener} from '../internal';\nimport {Category, toolbar} from './annotations';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport {ICategoricalColumn, ICategoricalDesc, ICategoricalFilter, ICategory, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, IValueColumnDesc, ITypeFactory} from './interfaces';\nimport NumberColumn from './NumberColumn';\nimport {INumberColumn} from './INumberColumn';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {toCategories} from './internalCategorical';\nimport {DEFAULT_FORMATTER} from './internalNumber';\nimport {integrateDefaults} from './internal';\n\nexport declare type IOrdinalColumnDesc = ICategoricalDesc & IValueColumnDesc<number>;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf OrdinalColumn\n * @event\n */\nexport declare function mappingChanged_OC(previous: number[], current: number[]): void;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf OrdinalColumn\n * @event\n */\nexport declare function colorMappingChanged_OC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf OrdinalColumn\n * @event\n */\nexport declare function filterChanged_OC(previous: ICategoricalFilter | null, current: ICategoricalFilter | null): void;\n\n/**\n * similar to a categorical column but the categories are mapped to numbers\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'filterOrdinal', 'colorMappedCategorical')\n@Category('categorical')\nexport default class OrdinalColumn extends ValueColumn<number> implements INumberColumn, ICategoricalColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  readonly categories: ICategory[];\n\n  private colorMapping: ICategoricalColorMappingFunction;\n\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\n\n  private currentFilter: ICategoricalFilter | null = null;\n\n\n  constructor(id: string, desc: Readonly<IOrdinalColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'number',\n      groupRenderer: 'boxplot'\n    }));\n    this.categories = toCategories(desc);\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([OrdinalColumn.EVENT_COLOR_MAPPING_CHANGED, OrdinalColumn.EVENT_MAPPING_CHANGED, OrdinalColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof OrdinalColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged_OC | null): this;\n  on(type: typeof OrdinalColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_OC | null): this;\n  on(type: typeof OrdinalColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_OC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getNumberFormat() {\n    return DEFAULT_FORMATTER;\n  }\n\n  get dataLength() {\n    return this.categories.length;\n  }\n\n  get labels() {\n    return this.categories.map((d) => d.label);\n  }\n\n  getValue(row: IDataRow) {\n    const v = this.getNumber(row);\n    return isNaN(v) ? null : v;\n  }\n\n  getCategory(row: IDataRow) {\n    const v = super.getValue(row);\n    if (!v) {\n      return null;\n    }\n    const vs = String(v);\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : null;\n  }\n\n  getCategories(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  iterCategory(row: IDataRow) {\n    return [this.getCategory(row)];\n  }\n\n  iterNumber(row: IDataRow) {\n    return [this.getNumber(row)];\n  }\n\n  iterRawNumber(row: IDataRow) {\n    return [this.getRawNumber(row)];\n  }\n\n  getColor(row: IDataRow) {\n    return CategoricalColumn.prototype.getColor.call(this, row);\n  }\n\n  getLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabel.call(this, row);\n  }\n\n  getLabels(row: IDataRow) {\n    return CategoricalColumn.prototype.getLabels.call(this, row);\n  }\n\n  getValues(row: IDataRow) {\n    return CategoricalColumn.prototype.getValues.call(this, row);\n  }\n\n  getMap(row: IDataRow) {\n    return CategoricalColumn.prototype.getMap.call(this, row);\n  }\n\n  getMapLabel(row: IDataRow) {\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\n  }\n\n  getSet(row: IDataRow) {\n    return CategoricalColumn.prototype.getSet.call(this, row);\n  }\n\n  getNumber(row: IDataRow) {\n    const v = this.getCategory(row);\n    return v ? v.value : NaN;\n  }\n\n  getRawNumber(row: IDataRow) {\n    return this.getNumber(row);\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      const value = this.getNumber(row);\n      if (isNaN(value)) {\n        return null;\n      }\n      return {\n        name: this.getLabel(row),\n        value\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = CategoricalColumn.prototype.dump.call(this, toDescRef);\n    r.mapping = this.getMapping();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    CategoricalColumn.prototype.restore.call(this, dump, factory);\n    if (dump.mapping) {\n      this.setMapping(dump.mapping);\n    }\n  }\n\n  getMapping() {\n    return this.categories.map((d) => d.value);\n  }\n\n  setMapping(mapping: number[]) {\n    const r = extent(mapping);\n    mapping = mapping.map((d) => (d - r[0]!) / (r[1]! - r[0]!));\n    const bak = this.getMapping();\n    if (equalArrays(bak, mapping)) {\n      return;\n    }\n    this.categories.forEach((d, i) => d.value = mapping[i] || 0);\n    this.fire([OrdinalColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, this.getMapping());\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow): boolean {\n    return CategoricalColumn.prototype.filter.call(this, row);\n  }\n\n  group(row: IDataRow) {\n    return CategoricalColumn.prototype.group.call(this, row);\n  }\n\n  getFilter() {\n    return this.currentFilter;\n  }\n\n  setFilter(filter: ICategoricalFilter | null) {\n    return CategoricalColumn.prototype.setFilter.call(this, filter);\n  }\n\n  clearFilter() {\n    return CategoricalColumn.prototype.clearFilter.call(this);\n  }\n\n  toCompareValue(row: IDataRow) {\n    return CategoricalColumn.prototype.toCompareValue.call(this, row);\n  }\n\n  toCompareValueType() {\n    return CategoricalColumn.prototype.toCompareValueType.call(this);\n  }\n\n  getRenderer(): string {\n    return NumberColumn.prototype.getRenderer.call(this);\n  }\n}\n","import {NumberColumn} from '.';\nimport {IEventListener} from '../internal';\nimport {SortByDefault, toolbar} from './annotations';\nimport Column, {dirty, dirtyCaches, dirtyHeader, dirtyValues, groupRendererChanged, labelChanged, metaDataChanged, rendererTypeChanged, summaryRendererChanged, visibilityChanged, widthChanged} from './Column';\nimport CompositeColumn, {addColumn, moveColumn, removeColumn} from './CompositeColumn';\nimport CompositeNumberColumn, {ICompositeNumberDesc} from './CompositeNumberColumn';\nimport {IDataRow, ITypeFactory} from './interfaces';\nimport {isDummyNumberFilter, noNumberFilter, restoreNumberFilter} from './internalNumber';\nimport {IColorMappingFunction, IMapAbleColumn, IMapAbleDesc, IMappingFunction, INumberFilter, isNumberColumn} from './INumberColumn';\nimport {restoreMapping} from './MappingFunction';\nimport {integrateDefaults} from './internal';\n\nconst DEFAULT_SCRIPT = `let s = 0;\ncol.forEach((c) => s += c.v);\nreturn s / col.length`;\n\n/**\n * factory for creating a description creating a mean column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createScriptDesc(label: string = 'script') {\n  return {type: 'script', label, script: DEFAULT_SCRIPT};\n}\n\n\nfunction wrapWithContext(code: string) {\n  let clean = code.trim();\n  if (!clean.includes('return')) {\n    clean = `return (${clean});`;\n  }\n  return `\n  const max = function(arr) { return Math.max.apply(Math, arr); };\n  const min = function(arr) { return Math.min.apply(Math, arr); };\n  const extent = function(arr) { return [min(arr), max(arr)]; };\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\n  const normalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return (v - minMax) / (max - minMax);\n  };\n  const denormalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return v * (max - minMax) + minMax;\n  };\n  const linear = function(v, source, target) {\n    target = target || [0, 1];\n    return denormalize(normalize(v, source), target);\n  };\n  const v = (function custom() {\n    ${clean}\n  })();\n\n  return typeof v === 'number' ? v : NaN`;\n}\n\ninterface IColumnWrapper {\n  v: any;\n  raw: number | null;\n  type: string;\n  name: string;\n  id: string;\n}\n\n/**\n * wrapper class for simpler column accessing\n */\nclass ColumnWrapper implements IColumnWrapper {\n  constructor(private readonly c: Column, public readonly v: any, public readonly raw: number | null) {\n\n  }\n\n  get type() {\n    return this.c.desc.type;\n  }\n\n  get name() {\n    return this.c.getMetaData().label;\n  }\n\n  get id() {\n    return this.c.id;\n  }\n}\n\nclass LazyColumnWrapper implements IColumnWrapper {\n  constructor(private readonly c: Column, private readonly row: IDataRow) {\n\n  }\n\n  get type() {\n    return this.c.desc.type;\n  }\n\n  get name() {\n    return this.c.getMetaData().label;\n  }\n\n  get id() {\n    return this.c.id;\n  }\n\n  get v() {\n    return this.c.getValue(this.row);\n  }\n\n  get raw() {\n    return isNumberColumn(this.c) ? this.c.getRawNumber(this.row) : null;\n  }\n}\n\n/**\n * helper context for accessing columns within a scripted columns\n */\nclass ColumnContext {\n  private readonly lookup = new Map<string, IColumnWrapper>();\n  private _all: ColumnContext | null = null;\n\n  constructor(private readonly children: IColumnWrapper[], private readonly allFactory?: () => ColumnContext) {\n    children.forEach((c) => {\n      this.lookup.set(`ID@${c.id}`, c);\n      this.lookup.set(`ID@${c.id.toLowerCase()}`, c);\n      this.lookup.set(`NAME@${c.name}`, c);\n      this.lookup.set(`NAME@${c.name.toLowerCase()}`, c);\n    });\n  }\n\n  /**\n   * get a column by name\n   * @param {string} name\n   * @return {IColumnWrapper}\n   */\n  byName(name: string) {\n    return this.lookup.get(`NAME@${name}`);\n  }\n\n  /**\n   * get a column by id\n   * @param {string} id\n   * @return {IColumnWrapper}\n   */\n  byID(id: string) {\n    return this.lookup.get(`ID@${id}`);\n  }\n\n  /**\n   * get a column by index\n   * @param {number} index\n   * @return {IColumnWrapper}\n   */\n  byIndex(index: number) {\n    return this.children[index];\n  }\n\n  forEach(callback: ((c: IColumnWrapper, index: number) => void)) {\n    return this.children.forEach(callback);\n  }\n\n  /**\n   * number of columns\n   * @return {number}\n   */\n  get length() {\n    return this.children.length;\n  }\n\n  /**\n   * get the all context, i.e one with all columns of this ranking\n   * @return {ColumnContext}\n   */\n  get all() {\n    if (this._all == null) {\n      this._all = this.allFactory ? this.allFactory() : null;\n    }\n    return this._all!;\n  }\n}\n\n\nexport interface IScriptDesc extends ICompositeNumberDesc, IMapAbleDesc {\n  /**\n   * the function to use, it has two parameters: children (current children) and values (their row values)\n   * @default 'return Math.max.apply(Math,values)'\n   */\n  script?: string;\n}\n\nexport declare type IScriptColumnDesc = IScriptDesc;\n\n/**\n * emitted when the script property changes\n * @asMemberOf ScriptColumn\n * @event\n */\nexport declare function scriptChanged(previous: string, current: string): void;\n\n/**\n * emitted when the mapping property changes\n * @asMemberOf ScriptColumn\n * @event\n */\nexport declare function mappingChanged(previous: IMappingFunction, current: IMappingFunction): void;\n/**\n * emitted when the color mapping property changes\n * @asMemberOf ScriptColumn\n * @event\n */\nexport declare function colorMappingChanged(previous: IColorMappingFunction, current: IColorMappingFunction): void;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf ScriptColumn\n * @event\n */\nexport declare function filterChanged(previous: INumberFilter | null, current: INumberFilter | null): void;\n\n\n\n/**\n * column combiner which uses a custom JavaScript function to combined the values\n * The script iteslf can be any valid JavaScript code. It will be embedded in a function.\n * Therefore the last statement has to return a value.\n *\n * In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.\n *\n * The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\n *  <dl>\n *    <dt>param: <code>row</code></dt>\n *    <dd>the row in the dataset to compute the value for</dd>\n *    <dt>param: <code>index</code></dt>\n *    <dd>the index of the row</dd>\n *    <dt>param: <code>children</code></dt>\n *    <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\n *    <dt>param: <code>values</code></dt>\n *    <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\n *    <dt>param: <code>raws</code></dt>\n *    <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original \"raw\" values before mapping is applied</dd>\n *    <dt>returns:</dt>\n *    <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\n *  </dl>\n *\n * In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\n * <dl>\n *    <dt><code>max(arr: number[]) => number</code></dt>\n *    <dd>computes the maximum of the given array of numbers</dd>\n *    <dt><code>min(arr: number[]) => number</code></dt>\n *    <dd>computes the minimum of the given array of numbers</dd>\n *    <dt><code>extent(arr: number[]) => [number, number]</code></dt>\n *    <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\n *    <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\n *    <dd>ensures that the given value is within the given min/max value</dd>\n *    <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\n *    <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\n *    <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\n *    <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\n *    <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\n *    <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\n *  </dl>\n */\n@toolbar('script', 'filterNumber', 'colorMapped', 'editMapping')\n@SortByDefault('descending')\nexport default class ScriptColumn extends CompositeNumberColumn implements IMapAbleColumn {\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n  static readonly EVENT_SCRIPT_CHANGED = 'scriptChanged';\n  static readonly DEFAULT_SCRIPT = DEFAULT_SCRIPT;\n\n  private script = ScriptColumn.DEFAULT_SCRIPT;\n  private f: Function | null = null;\n  private mapping: IMappingFunction;\n  private original: IMappingFunction;\n  private colorMapping: IColorMappingFunction;\n  /**\n   * currently active filter\n   * @type {{min: number, max: number}}\n   * @private\n   */\n  private currentFilter: INumberFilter = noNumberFilter();\n\n\n  constructor(id: string, desc: Readonly<IScriptColumnDesc>, factory: ITypeFactory) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'number',\n      groupRenderer: 'boxplot',\n      summaryRenderer: 'histogram'\n    }));\n    this.script = desc.script || this.script;\n    this.mapping = restoreMapping(desc, factory);\n    this.original = this.mapping.clone();\n    this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ScriptColumn.EVENT_SCRIPT_CHANGED, ScriptColumn.EVENT_COLOR_MAPPING_CHANGED, ScriptColumn.EVENT_MAPPING_CHANGED]);\n  }\n\n  on(type: typeof ScriptColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\n  on(type: typeof ScriptColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\n  on(type: typeof ScriptColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof ScriptColumn.EVENT_SCRIPT_CHANGED, listener: typeof scriptChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  setScript(script: string) {\n    if (this.script === script) {\n      return;\n    }\n    this.f = null;\n    this.fire([ScriptColumn.EVENT_SCRIPT_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.script, this.script = script);\n  }\n\n  getScript() {\n    return this.script;\n  }\n\n  dump(toDescRef: (desc: any) => any) {\n    const r = super.dump(toDescRef);\n    r.script = this.script;\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n    r.map = this.mapping.toJSON();\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n\n    this.script = dump.script || this.script;\n    if (dump.filter) {\n      this.currentFilter = restoreNumberFilter(dump.filter);\n    }\n    if (dump.map || dump.domain) {\n      this.mapping = restoreMapping(dump.map, factory);\n    }\n    if (dump.colorMapping) {\n      this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n    }\n  }\n\n  protected compute(row: IDataRow) {\n    if (this.f == null) {\n      this.f = new Function('children', 'values', 'raws', 'col', 'row', 'index', wrapWithContext(this.script));\n    }\n    const children = this._children;\n    const values = this._children.map((d) => d.getValue(row));\n    const raws = <number[]>this._children.map((d) => isNumberColumn(d) ? d.getRawNumber(row) : null);\n    const col = new ColumnContext(children.map((c, i) => new ColumnWrapper(c, values[i], raws[i])), () => {\n      const cols = this.findMyRanker()!.flatColumns; // all except myself\n      return new ColumnContext(cols.map((c) => new LazyColumnWrapper(c, row)));\n    });\n    return this.f.call(this, children, values, raws, col, row.v, row.i);\n  }\n\n  getExportValue(row: IDataRow, format: 'text' | 'json'): any {\n    if (format === 'json') {\n      return {\n        value: this.getRawNumber(row),\n        children: this.children.map((d) => d.getExportValue(row, format))\n      };\n    }\n    return super.getExportValue(row, format);\n  }\n\n  getRange() {\n    return this.mapping.getRange(this.getNumberFormat());\n  }\n\n  getOriginalMapping() {\n    return this.original.clone();\n  }\n\n  getMapping() {\n    return this.mapping.clone();\n  }\n\n  setMapping(mapping: IMappingFunction) {\n    if (this.mapping.eq(mapping)) {\n      return;\n    }\n    this.fire([ScriptColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\n  }\n\n  getColor(row: IDataRow) {\n    return NumberColumn.prototype.getColor.call(this, row);\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: IColorMappingFunction) {\n    if (this.colorMapping.eq(mapping)) {\n      return;\n    }\n    this.fire([ScriptColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\n  }\n\n  isFiltered() {\n    return NumberColumn.prototype.isFiltered.call(this);\n  }\n\n  getFilter(): INumberFilter {\n    return NumberColumn.prototype.getFilter.call(this);\n  }\n\n  setFilter(value: INumberFilter | null) {\n    NumberColumn.prototype.setFilter.call(this, value);\n  }\n\n  filter(row: IDataRow) {\n    return NumberColumn.prototype.filter.call(this, row);\n  }\n\n  clearFilter() {\n    return NumberColumn.prototype.clearFilter.call(this);\n  }\n}\n","import {Category, toolbar} from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, {labelChanged, metaDataChanged, dirty, widthChanged, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {IArrayColumn} from './IArrayColumn';\nimport {ICategoricalDesc, ISetCategoricalFilter, ICategory, ISetColumn, ICategoricalColorMappingFunction} from './ICategoricalColumn';\nimport {IDataRow, ECompareValueType, IValueColumnDesc, IGroup, DEFAULT_COLOR, ITypeFactory} from './interfaces';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IEventListener} from '../internal';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION} from './CategoricalColorMappingFunction';\nimport {toCategories, isCategoryIncluded, isEqualSetCategoricalFilter} from './internalCategorical';\nimport {chooseUIntByDataLength, integrateDefaults} from './internal';\n\nexport interface ISetDesc extends ICategoricalDesc {\n  separator?: string;\n}\n\nexport declare type ISetColumnDesc = ISetDesc & IValueColumnDesc<string[]>;\n\n/**\n * emitted when the color mapping property changes\n * @asMemberOf SetColumn\n * @event\n */\nexport declare function colorMappingChanged_SSC(previous: ICategoricalColorMappingFunction, current: ICategoricalColorMappingFunction): void;\n\n\n/**\n * emitted when the filter property changes\n * @asMemberOf SetColumn\n * @event\n */\nexport declare function filterChanged_SSC(previous: ISetCategoricalFilter | null, current: ISetCategoricalFilter | null): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'filterCategorical', 'colorMappedCategorical', 'group', 'groupBy')\n@Category('categorical')\nexport default class SetColumn extends ValueColumn<string[]> implements IArrayColumn<boolean>, ISetColumn {\n  static readonly EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\n  static readonly EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n\n  readonly categories: ICategory[];\n\n  private readonly separator: RegExp;\n\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\n\n  private colorMapping: ICategoricalColorMappingFunction;\n  /**\n   * set of categories to show\n   * @type {null}\n   * @private\n   */\n  private currentFilter: ISetCategoricalFilter | null = null;\n\n  constructor(id: string, desc: Readonly<ISetColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      renderer: 'upset',\n      groupRenderer: 'upset',\n      summaryRenderer: 'categorical'\n    }));\n    this.separator = new RegExp(desc.separator || ';');\n    this.categories = toCategories(desc);\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\n    this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([SetColumn.EVENT_COLOR_MAPPING_CHANGED, SetColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof SetColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_SSC | null): this;\n  on(type: typeof SetColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged_SSC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  get labels() {\n    return this.categories.map((d) => d.label);\n  }\n\n  get dataLength() {\n    return this.categories.length;\n  }\n\n  getValue(row: IDataRow): string[] | null {\n    const v = this.getSortedSet(row);\n    if (v.length === 0) {\n      return null;\n    }\n    return v.map((d) => d.name);\n  }\n\n  getLabel(row: IDataRow) {\n    return `(${this.getSortedSet(row).map((d) => d.label).join(',')})`;\n  }\n\n  private normalize(v: any) {\n    if (typeof v === 'string') {\n      return v.split(this.separator).map((s) => s.trim());\n    }\n    if (Array.isArray(v)) {\n      return v.map((v) => String(v).trim());\n    }\n    if (v instanceof Set) {\n      return Array.from(v).map(String);\n    }\n    return [];\n  }\n\n  getSet(row: IDataRow) {\n    const sv = this.normalize(super.getValue(row));\n    const r = new Set<ICategory>();\n    sv.forEach((n) => {\n      const cat = this.lookup.get(n);\n      if (cat) {\n        r.add(cat);\n      }\n    });\n    return r;\n  }\n\n  getSortedSet(row: IDataRow) {\n    return Array.from(this.getSet(row)).sort((a, b) => a.value === b.value ? a.label.localeCompare(b.label) : a.value - b.value);\n  }\n\n  getCategories(row: IDataRow) {\n    return this.getSortedSet(row);\n  }\n\n  getColors(row: IDataRow) {\n    return this.getSortedSet(row).map((d) => this.colorMapping.apply(d));\n  }\n\n  getColorMapping() {\n    return this.colorMapping.clone();\n  }\n\n  setColorMapping(mapping: ICategoricalColorMappingFunction) {\n    return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n  }\n\n\n  getValues(row: IDataRow) {\n    const s = this.getSet(row);\n    return this.categories.map((d) => s.has(d));\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getValues(row).map(String);\n  }\n\n  getMap(row: IDataRow) {\n    return this.getSortedSet(row).map((d) => ({key: d.label, value: true}));\n  }\n\n  getMapLabel(row: IDataRow) {\n    return this.getSortedSet(row).map((d) => ({key: d.label, value: 'true'}));\n  }\n\n  iterCategory(row: IDataRow) {\n    const r = this.getSet(row);\n    if (r.size > 0) {\n      return Array.from(r);\n    }\n    return [null];\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    r.filter = this.currentFilter;\n    r.colorMapping = this.colorMapping.toJSON();\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    super.restore(dump, factory);\n    this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    if (!('filter' in dump)) {\n      this.currentFilter = null;\n      return;\n    }\n    const bak = dump.filter;\n    if (typeof bak === 'string' || Array.isArray(bak)) {\n      this.currentFilter = {filter: bak, filterMissing: false, mode: 'some'};\n    } else {\n      this.currentFilter = bak;\n    }\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow): boolean {\n    if (!this.currentFilter) {\n      return true;\n    }\n    const v = Array.from(this.getSet(row));\n    if (v.length === 0) {\n      return isCategoryIncluded(this.currentFilter, null);\n    }\n    if (this.currentFilter.mode === 'every') {\n      return v.every((s) => isCategoryIncluded(this.currentFilter, s));\n    }\n    return v.some((s) => isCategoryIncluded(this.currentFilter, s));\n  }\n\n  getFilter(): ISetCategoricalFilter | null {\n    return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\n  }\n\n  setFilter(filter: ISetCategoricalFilter | null) {\n    if (isEqualSetCategoricalFilter(this.currentFilter, filter)) {\n      return;\n    }\n    this.fire([CategoricalColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\n  }\n\n  clearFilter() {\n    return CategoricalColumn.prototype.clearFilter.call(this);\n  }\n\n  toCompareValue(row: IDataRow) {\n    const v = this.getSet(row);\n\n    const vs = [v.size];\n    for (const cat of this.categories) {\n      vs.push(v.has(cat) ? 1 : 0);\n    }\n    return vs;\n  }\n\n  toCompareValueType() {\n    return [chooseUIntByDataLength(this.categories.length)].concat(this.categories.map(() => ECompareValueType.BINARY));\n  }\n\n  group(row: IDataRow): IGroup {\n    const v = this.getSet(row);\n    const cardinality = v.size;\n    const categories = this.categories.filter((c) => v.has(c));\n\n    // by cardinality and then by intersection\n\n    const g: IGroup = {\n      name: categories.length === 0 ? 'None' : categories.map((d) => d.name).join(', '),\n      color: categories.length === 1 ? categories[0].color : DEFAULT_COLOR\n    };\n\n    g.parent = {\n      name: `#${cardinality}`,\n      color: DEFAULT_COLOR,\n      subGroups: [g]\n    };\n\n    return g;\n  }\n}\n","import {toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IDataRow} from './interfaces';\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\nimport {EAlignment, IStringDesc} from './StringColumn';\nimport {IEventListener} from '../internal';\nimport {isMissingValue} from './missing';\nimport {integrateDefaults} from './internal';\n\nexport declare type IStringMapColumnDesc = IStringDesc & IMapColumnDesc<string>;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'search')\nexport default class StringMapColumn extends MapColumn<string> {\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n\n  constructor(id: string, desc: Readonly<IStringMapColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 200,\n      renderer: 'map'\n    }));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n  }\n\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getMapValue(row);\n    return r.every((d) => d.value === '') ? null : r;\n  }\n\n  getMapValue(row: IDataRow) {\n    return super.getMap(row).map(({key, value}) => ({\n      key,\n      value: isMissingValue(value) ? '' : String(value)\n    }));\n  }\n}\n","import {toolbar} from './annotations';\nimport ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport {IDataRow} from './interfaces';\nimport {EAlignment, IStringDesc} from './StringColumn';\nimport {isMissingValue} from './missing';\nimport {integrateDefaults} from './internal';\n\nexport declare type IStringsColumnDesc = IStringDesc & IArrayColumnDesc<string>;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'search')\nexport default class StringsColumn extends ArrayColumn<string> {\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n\n  constructor(id: string, desc: Readonly<IStringsColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 200\n    }));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n  }\n\n  getValues(row: IDataRow) {\n    return super.getValues(row).map((v) => {\n      return isMissingValue(v) ? '' : String(v);\n    });\n  }\n}\n","import {Category, toolbar, dialogAddons} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport {IDataRow, IGroup, IValueColumnDesc, ITypeFactory} from './interfaces';\nimport {patternFunction, integrateDefaults} from './internal';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IEventListener, ISequence} from '../internal';\nimport {IStringDesc, EAlignment, IStringGroupCriteria, EStringGroupCriteriaType, IStringFilter} from './StringColumn';\nimport StringColumn from './StringColumn';\n\nexport interface ILinkDesc extends IStringDesc {\n  /**\n   * replacement pattern, use use <code>${value}</code> for the current value, <code>${escapedValue}</code> for an url safe value and <code>${item}</code> for the whole item\n   */\n  pattern?: string;\n\n  /**\n   * optional list of pattern templates\n   */\n  patternTemplates?: string[];\n}\n\nexport interface ILink {\n  alt: string;\n  href: string;\n}\n\nexport declare type ILinkColumnDesc = ILinkDesc & IValueColumnDesc<string | ILink>;\n\n/**\n * emitted when the filter property changes\n * @asMemberOf LinkColumn\n * @event\n */\nexport declare function filterChanged_LC(previous: string | RegExp | null, current: string | RegExp | null): void;\n\n\n/**\n * emitted when the grouping property changes\n * @asMemberOf LinkColumn\n * @event\n */\nexport declare function groupingChanged_LC(previous: (RegExp | string)[][], current: (RegExp | string)[][]): void;\n\n/**\n * emitted when the pattern property changes\n * @asMemberOf LinkColumn\n * @event\n */\nexport declare function patternChanged_LC(previous: string, current: string): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'filterString', 'editPattern')\n@dialogAddons('group', 'groupString')\n@Category('string')\nexport default class LinkColumn extends ValueColumn<string | ILink> {\n  static readonly EVENT_FILTER_CHANGED = StringColumn.EVENT_FILTER_CHANGED;\n  static readonly EVENT_GROUPING_CHANGED = StringColumn.EVENT_GROUPING_CHANGED;\n  static readonly EVENT_PATTERN_CHANGED = 'patternChanged';\n\n  private pattern: string;\n  private patternFunction: Function | null = null;\n  readonly patternTemplates: string[];\n\n  private currentFilter: string | RegExp | null = null;\n  private currentGroupCriteria: IStringGroupCriteria = {\n    type: EStringGroupCriteriaType.startsWith,\n    values: []\n  };\n\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n\n  constructor(id: string, desc: Readonly<ILinkColumnDesc>) {\n    super(id, integrateDefaults(desc, Object.assign({\n      width: 200\n    }, desc.pattern ? {\n        renderer: 'link',\n        groupRenderer: 'link'\n      } : {})));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n\n    this.pattern = desc.pattern || '';\n    this.patternTemplates = desc.patternTemplates || [];\n  }\n\n  setPattern(pattern: string) {\n    if (pattern === this.pattern) {\n      return;\n    }\n    this.patternFunction = null; // reset cache\n    this.fire([LinkColumn.EVENT_PATTERN_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.pattern, this.pattern = pattern);\n  }\n\n  getPattern() {\n    return this.pattern;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([LinkColumn.EVENT_PATTERN_CHANGED, LinkColumn.EVENT_GROUPING_CHANGED, LinkColumn.EVENT_FILTER_CHANGED]);\n  }\n\n  on(type: typeof LinkColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged_LC | null): this;\n  on(type: typeof LinkColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged_LC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof LinkColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged_LC | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow) {\n    const l = this.getLink(row);\n    return l == null ? null : l.href;\n  }\n\n  getLink(row: IDataRow): ILink | null {\n    const v: string | null | ILink = super.getValue(row);\n    return this.transformValue(v, row);\n  }\n\n  private transformValue(v: any, row: IDataRow) {\n    if (v == null || v === '') {\n      return null;\n    }\n    if (typeof v === 'string') {\n      if (!this.pattern) {\n        return {\n          alt: v,\n          href: v\n        };\n      }\n      if (!this.patternFunction) {\n        this.patternFunction = patternFunction(this.pattern, 'item');\n      }\n      return {\n        alt: v,\n        href: this.patternFunction.call(this, v, row.v)\n      };\n    }\n    return v;\n  }\n\n  getLabel(row: IDataRow) {\n    const l = this.getLink(row);\n    return l == null ? '' : l.alt;\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = StringColumn.prototype.dump.call(this, toDescRef);\n    if (this.pattern !== (<any>this.desc).pattern) {\n      r.pattern = this.pattern;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    StringColumn.prototype.restore.call(this, dump, factory);\n    if (dump.pattern) {\n      this.pattern = dump.pattern;\n    }\n  }\n\n  isFiltered() {\n    return this.currentFilter != null;\n  }\n\n  filter(row: IDataRow) {\n    return StringColumn.prototype.filter.call(this, row);\n  }\n\n  getFilter() {\n    return this.currentFilter;\n  }\n\n  setFilter(filter: IStringFilter) {\n    return StringColumn.prototype.setFilter.call(this, filter);\n  }\n\n  clearFilter() {\n    return StringColumn.prototype.clearFilter.call(this);\n  }\n\n  getGroupCriteria() {\n    return this.currentGroupCriteria;\n  }\n\n  setGroupCriteria(value: IStringGroupCriteria) {\n    return StringColumn.prototype.setGroupCriteria.call(this, value);\n  }\n\n  toCompareValue(a: IDataRow) {\n    return StringColumn.prototype.toCompareValue.call(this, a);\n  }\n\n  toCompareValueType() {\n    return StringColumn.prototype.toCompareValueType.call(this);\n  }\n\n  toCompareGroupValue(rows: ISequence<IDataRow>, group: IGroup) {\n    return StringColumn.prototype.toCompareGroupValue.call(this, rows, group);\n  }\n\n  toCompareGroupValueType() {\n    return StringColumn.prototype.toCompareGroupValueType.call(this);\n  }\n\n  group(row: IDataRow): IGroup {\n    return StringColumn.prototype.group.call(this, row);\n  }\n}\n\n","import {toolbar} from './annotations';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IDataRow, ITypeFactory} from './interfaces';\nimport {patternFunction, integrateDefaults} from './internal';\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\nimport LinkColumn, {ILinkDesc} from './LinkColumn';\nimport {IEventListener} from '../internal';\nimport {EAlignment} from './StringColumn';\nimport {IKeyValue} from './IArrayColumn';\nimport {ILink} from './LinkColumn';\n\nexport declare type ILinkMapColumnDesc = ILinkDesc & IMapColumnDesc<string>;\n\n/**\n * emitted when the pattern property changes\n * @asMemberOf LinkMapColumn\n * @event\n */\nexport declare function patternChanged_LMC(previous: string, current: string): void;\n\n/**\n * a string column with optional alignment\n */\n@toolbar('rename', 'search', 'editPattern')\nexport default class LinkMapColumn extends MapColumn<string> {\n  static readonly EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\n\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n  private pattern: string;\n  private patternFunction: Function | null = null;\n  readonly patternTemplates: string[];\n\n  constructor(id: string, desc: Readonly<ILinkMapColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 200,\n      renderer: 'map'\n    }));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n    this.pattern = desc.pattern || '';\n    this.patternTemplates = desc.patternTemplates || [];\n  }\n\n  setPattern(pattern: string) {\n    LinkColumn.prototype.setPattern.call(this, pattern);\n  }\n\n  getPattern() {\n    return this.pattern;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([LinkColumn.EVENT_PATTERN_CHANGED]);\n  }\n\n  on(type: typeof LinkColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged_LMC | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValue(row: IDataRow) {\n    const r = this.getLinkMap(row);\n    return r.every((d) => d.value == null) ? null : r.map(({key, value}) => ({\n      key,\n      value: value ? value.href : ''\n    }));\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getLinkMap(row).map(({key, value}) => ({\n      key,\n      value: value ? value.alt : ''\n    }));\n  }\n\n  getLinkMap(row: IDataRow): IKeyValue<ILink>[] {\n    return super.getMap(row).map(({key, value}) => ({\n      key,\n      value: this.transformValue(value, row, key)\n    }));\n  }\n\n  private transformValue(v: any, row: IDataRow, key: string) {\n    if (v == null || v === '') {\n      return null;\n    }\n    if (typeof v === 'string') {\n      if (!this.pattern) {\n        return {\n          alt: v,\n          href: v\n        };\n      }\n      if (!this.patternFunction) {\n        this.patternFunction = patternFunction(this.pattern, 'item', 'key');\n      }\n      return {\n        alt: v,\n        href: this.patternFunction.call(this, v, row.v, key)\n      };\n    }\n    return v;\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    if (this.pattern !== (<any>this.desc).pattern) {\n      r.pattern = this.pattern;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    if (dump.pattern) {\n      this.pattern = dump.pattern;\n    }\n    super.restore(dump, factory);\n  }\n}\n","import {toolbar} from './annotations';\nimport ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged, dirtyCaches} from './Column';\nimport ValueColumn, {dataLoaded} from './ValueColumn';\nimport {IDataRow, ITypeFactory} from './interfaces';\nimport {patternFunction, integrateDefaults} from './internal';\nimport {EAlignment} from './StringColumn';\nimport {IEventListener} from '../internal';\nimport LinkColumn, {ILink, ILinkDesc} from './LinkColumn';\n\nexport declare type ILinksColumnDesc = ILinkDesc & IArrayColumnDesc<string | ILink>;\n\n/**\n * emitted when the pattern property changes\n * @asMemberOf LinksColumn\n * @event\n */\nexport declare function patternChanged_LCS(previous: string, current: string): void;\n\n@toolbar('rename', 'search', 'editPattern')\nexport default class LinksColumn extends ArrayColumn<string | ILink> {\n  static readonly EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\n\n  readonly alignment: EAlignment;\n  readonly escape: boolean;\n  private pattern: string;\n  private patternFunction: Function | null = null;\n  readonly patternTemplates: string[];\n\n  constructor(id: string, desc: Readonly<ILinksColumnDesc>) {\n    super(id, integrateDefaults(desc, {\n      width: 200\n    }));\n    this.alignment = <any>desc.alignment || EAlignment.left;\n    this.escape = desc.escape !== false;\n    this.pattern = desc.pattern || '';\n    this.patternTemplates = desc.patternTemplates || [];\n  }\n\n  setPattern(pattern: string) {\n    return LinkColumn.prototype.setPattern.call(this, pattern);\n  }\n\n  getPattern() {\n    return this.pattern;\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([LinksColumn.EVENT_PATTERN_CHANGED]);\n  }\n\n  on(type: typeof LinksColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged_LCS | null): this;\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof Column.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(<any>type, listener);\n  }\n\n  getValues(row: IDataRow) {\n    return this.getLinks(row).map((d) => d ? d.href : '');\n  }\n\n  getLabels(row: IDataRow) {\n    return this.getLinks(row).map((d) => d ? d.alt : '');\n  }\n\n  private transformValue(v: any, row: IDataRow, i: number) {\n    if (v == null || v === '') {\n      return null;\n    }\n    if (typeof v === 'string') {\n      if (!this.pattern) {\n        return {\n          alt: v,\n          href: v\n        };\n      }\n      if (!this.patternFunction) {\n        this.patternFunction = patternFunction(this.pattern, 'item', 'index');\n      }\n      return {\n        alt: v,\n        href: this.patternFunction.call(this, v, row.v, i)\n      };\n    }\n    return v;\n  }\n\n  getLinks(row: IDataRow): ILink[] {\n    return super.getValues(row).map((v, i) => {\n      return this.transformValue(v, row, i);\n    });\n  }\n\n  dump(toDescRef: (desc: any) => any): any {\n    const r = super.dump(toDescRef);\n    if (this.pattern !== (<any>this.desc).pattern) {\n      r.pattern = this.pattern;\n    }\n    return r;\n  }\n\n  restore(dump: any, factory: ITypeFactory) {\n    if (dump.pattern) {\n      this.pattern = dump.pattern;\n    }\n    super.restore(dump, factory);\n  }\n}\n","export function isPromiseLike(p) {\r\n    return p != null && p && typeof p.then === 'function';\r\n}\r\n/**\r\n * the symbol returned when the promise was aborted\r\n */\r\nexport var ABORTED = Symbol('aborted');\r\nfunction thenFactory(loader, isAborted, abort) {\r\n    function then(onfulfilled, _onrejected) {\r\n        var fullfiller = loader.then(function (loaded) {\r\n            var loadedOrAborted = isAborted() ? ABORTED : loaded;\r\n            var res = onfulfilled ? onfulfilled(loadedOrAborted) : loadedOrAborted;\r\n            if (isPromiseLike(res)) {\r\n                return res.then(function (r) {\r\n                    return isAborted() ? ABORTED : r;\r\n                });\r\n            }\r\n            return isAborted() ? ABORTED : res;\r\n        });\r\n        return {\r\n            then: thenFactory(fullfiller, isAborted, abort),\r\n            abort: abort,\r\n            isAborted: isAborted\r\n        };\r\n    }\r\n    return then;\r\n}\r\n/**\r\n * abort able Promise wrapper, returns a promise which can be aborted, and trying to avoid executing therefore the wrapped promise\r\n * @param {Promise<T>} loader\r\n * @returns {any}\r\n */\r\nexport default function abortAble(loader) {\r\n    var aborted = null;\r\n    var isAborted = function () { return aborted === null; };\r\n    var aborter = new Promise(function (resolve) { return aborted = resolve; });\r\n    var abort = function () {\r\n        if (aborted == null) {\r\n            return;\r\n        }\r\n        aborted(ABORTED);\r\n        aborted = null;\r\n    };\r\n    var race = Promise.race([aborter, loader]);\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\nexport function abortAbleFetch(input, init) {\r\n    var controller = new AbortController();\r\n    var race = new Promise(function (resolve, reject) {\r\n        var r = fetch(input, Object.assign({ signal: controller.signal }, init || {}));\r\n        r.then(resolve);\r\n        r.catch(function (error) {\r\n            if (error instanceof DOMException) {\r\n                resolve(ABORTED);\r\n            }\r\n            else {\r\n                reject(error);\r\n            }\r\n        });\r\n    });\r\n    var abort = controller.abort.bind(controller);\r\n    var isAborted = function () { return controller.signal.aborted; };\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\n/**\r\n * similar to Promise.all but for abortAble\r\n */\r\nexport function abortAbleAll(values) {\r\n    var loader = Promise.all(values);\r\n    var aborted = null;\r\n    var isAborted = function () { return aborted === null; };\r\n    var aborter = new Promise(function (resolve) { return aborted = resolve; });\r\n    var abort = function () {\r\n        if (aborted == null) {\r\n            return;\r\n        }\r\n        aborted(ABORTED);\r\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\r\n            var v = values_1[_i];\r\n            if (isAbortAble(v)) {\r\n                v.abort();\r\n            }\r\n        }\r\n        aborted = null;\r\n    };\r\n    var race = Promise.race([aborter, loader]);\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\n/**\r\n * checked whether the given argument is an abortable Promise\r\n * @param {IAbortAblePromise<any> | any} abortAble\r\n * @returns {boolean}\r\n */\r\nexport function isAbortAble(abortAble) {\r\n    return abortAble != null && abortAble && typeof abortAble.then === 'function' && typeof abortAble.abort === 'function';\r\n}\r\nexport function isAsyncUpdate(update) {\r\n    return update !== undefined && update !== null && update && isAbortAble(update.ready);\r\n}\r\n/**\r\n * similar to Promise.resolve\r\n */\r\nexport function abortAbleResolveNow(value) {\r\n    function then(onfulfilled, _onrejected) {\r\n        var res = onfulfilled ? onfulfilled(value) : value;\r\n        if (isAbortAble(res)) {\r\n            return res;\r\n        }\r\n        if (isPromiseLike(res)) {\r\n            return abortAble(res);\r\n        }\r\n        return {\r\n            then: abortAbleResolveNow(res),\r\n            abort: function () { return undefined; },\r\n            isAborted: function () { return false; }\r\n        };\r\n    }\r\n    return {\r\n        then: then,\r\n        abort: function () { return undefined; },\r\n        isAborted: function () { return false; }\r\n    };\r\n}\r\n//# sourceMappingURL=abortAble.js.map","import {Column, Ranking, IColumnConstructor, IColumnDesc, IGroup, IndicesArray, IDataRow, IRankingDump, EAggregationState, IColorMappingFunctionConstructor, IMappingFunctionConstructor, ITypeFactory} from '../model';\nimport {AEventDispatcher, ISequence} from '../internal';\nimport {IRenderTasks} from '../renderer';\nimport {IAbortAblePromise as IAbortAblePromiseImpl} from 'lineupengine';\n\nexport {ABORTED} from 'lineupengine';\nexport declare type IAbortAblePromise<T> = IAbortAblePromiseImpl<T>;\n\nexport declare type IAggregationStrategy = 'group' | 'item' | 'group+item' | 'group+top+item' | 'group+item+top';\n\nexport interface IDataProviderOptions {\n  columnTypes: {[columnType: string]: IColumnConstructor};\n  colorMappingFunctionTypes: {[colorMappingFunctionType: string]: IColorMappingFunctionConstructor};\n  mappingFunctionTypes: {[mappingFunctionType: string]: IMappingFunctionConstructor};\n\n  /**\n   * allow just single selected rows\n   * @default: false\n   */\n  singleSelection: boolean;\n\n  /**\n   * show top N rows as sample rows\n   * @default 10\n   */\n  showTopN: number;\n\n  /**\n   * aggregation strategy to show upon grouping, see also showTopN\n   * @default 'item'\n   */\n  aggregationStrategy: IAggregationStrategy;\n}\n\nexport interface IDataProvider extends AEventDispatcher {\n  readonly columnTypes: {[columnType: string]: IColumnConstructor};\n\n  getTotalNumberOfRows(): number;\n\n  getTaskExecutor(): IRenderTasks;\n\n  getTypeFactory(): ITypeFactory;\n\n  takeSnapshot(col: Column): void;\n\n  selectAllOf(ranking: Ranking): void;\n\n  getSelection(): number[];\n\n  setSelection(dataIndices: IndicesArray): void;\n\n  toggleSelection(i: number, additional?: boolean): boolean;\n\n  isSelected(i: number): boolean;\n\n  removeRanking(ranking: Ranking): void;\n\n  ensureOneRanking(): void;\n\n  find(id: string): Column | null;\n\n  clone(col: Column): Column;\n\n  create(desc: IColumnDesc): Column | null;\n\n  toDescRef(desc: IColumnDesc): any;\n\n  fromDescRef(ref: any): IColumnDesc;\n\n  mappingSample(col: Column): Promise<ISequence<number>> | ISequence<number>;\n\n  searchAndJump(search: string | RegExp, col: Column): void;\n\n  getRankings(): Ranking[];\n\n  getFirstRanking(): Ranking | null;\n  getLastRanking(): Ranking;\n\n  getColumns(): IColumnDesc[];\n\n  getAggregationStrategy(): IAggregationStrategy;\n\n  isAggregated(ranking: Ranking, group: IGroup): boolean;\n\n  setAggregationState(ranking: Ranking, group: IGroup, state: EAggregationState): void;\n\n  getAggregationState(ranking: Ranking, group: IGroup): EAggregationState;\n\n  aggregateAllOf(ranking: Ranking, aggregateAll: boolean | number | EAggregationState, groups?: IGroup[]): void;\n\n  getTopNAggregated(ranking: Ranking, group: IGroup): number;\n\n  setTopNAggregated(ranking: Ranking, group: IGroup, value: number): void;\n\n  setShowTopN(value: number): void;\n  getShowTopN(): number;\n\n  getRow(dataIndex: number): Promise<IDataRow> | IDataRow;\n\n  clearFilters(): void;\n}\n\n\n\nexport const SCHEMA_REF = `https://lineup.js.org/develop/schema.4.0.0.json`;\n\nexport interface IDataProviderDump {\n  '$schema'?: string;\n  /**\n   * base for generating new uids\n   */\n  uid?: number;\n\n  /**\n   * current selection\n   */\n  selection?: number[];\n\n  /**\n   * list of aggregated group paths\n   */\n  aggregations?: string[] | {[key: string]: number};\n  /**\n   * ranking dumps\n   */\n  rankings?: IRankingDump[];\n\n  /**\n   * custom show top N setting\n   */\n  showTopN?: number;\n}\n\n\n\nexport interface IDeriveOptions {\n  /**\n   * maximal percentage of unique values to be treated as a categorical column\n   */\n  categoricalThreshold: number | ((unique: number, total: number) => boolean);\n\n  columns: string[];\n\n  /**\n   * date pattern to check for string matching them\n   * @default %x\n   */\n  datePattern: string | string[];\n}\n\n\nexport interface IExportOptions {\n  /**\n   * export separator, default: '\\t'\n   */\n  separator: string;\n  /**\n   * new line character, default: '\\n'\n   */\n  newline: string;\n  /**\n   * should a header be generated, default: true\n   */\n  header: boolean;\n  /**\n   * quote strings, default: false\n   */\n  quote: boolean;\n  /**\n   * quote string to use, default: '\"'\n   */\n  quoteChar: string;\n  /**\n   * filter specific column types, default: exclude all support types (selection, action, rank)\n   * @param col the column description to filter\n   */\n  filter: (col: Column) => boolean; //!isSupportType\n\n  /**\n   * whether the description should be part of the column header\n   */\n  verboseColumnHeaders: boolean;\n}\n","import {IDataRow} from '../model';\nimport get from 'lodash.get';\n\n/**\n * @internal\n */\nexport function isComplexAccessor(column: any) {\n  // something like a.b or a[4]\n  return typeof column === 'string' && (column.includes('.') || column.includes('['));\n}\n\n/**\n * @internal\n */\nexport function resolveValue(value: any, column: string | number) {\n  if (value != null && value.hasOwnProperty(column)) { // well complex but a direct hit\n    return value[column];\n  }\n  return get(value, column);\n}\n\n/**\n * @internal\n */\nexport function rowComplexGetter(row: IDataRow, desc: any) {\n  return resolveValue(row.v, desc.column);\n}\n\n\n/**\n * simple row getter\n * @internal\n */\nexport function rowGetter(row: IDataRow, desc: any) {\n  return row.v[desc.column];\n}\n\n\n/**\n * @internal\n */\nexport function rowGuessGetter(row: IDataRow, desc: any) {\n  const column = desc.column;\n  if (isComplexAccessor(column)) {\n    return rowComplexGetter(row, desc);\n  }\n  return rowGetter(row, desc);\n}\n\n","import {Ranking, isNumberColumn, Column, IColumnDesc, isSupportType, isMapAbleColumn, DEFAULT_COLOR} from '../model';\nimport {colorPool, MAX_COLORS} from '../model/internal';\nimport {concat, equal, extent, range, resolveValue} from '../internal';\nimport {timeParse} from 'd3-time-format';\nimport {IDataProvider, IDeriveOptions, IExportOptions} from './interfaces';\n\n\n/**\n * @internal\n */\nexport function cleanCategories(categories: Set<string>) {\n  // remove missing values\n  categories.delete(<any>null);\n  categories.delete(<any>undefined);\n  categories.delete('');\n  categories.delete('NA');\n  categories.delete('NaN');\n  categories.delete('na');\n\n  return Array.from(categories).map(String).sort();\n}\n\nfunction hasDifferentSizes(data: any[][]) {\n  if (data.length === 0) {\n    return false;\n  }\n  const base = data[0].length;\n\n  return data.some((d) => d != null && base !== (Array.isArray(d) ? d.length : -1));\n}\n\nfunction isEmpty(v: any) {\n  return v == null || (Array.isArray(v) && v.length === 0) || (v instanceof Set && v.size === 0) || (v instanceof Map && v.size === 0) || equal({}, v);\n}\n\nfunction deriveBaseType(value: any, all: () => any[], column: number | string, options: IDeriveOptions) {\n  if (value == null) {\n    console.warn('cannot derive from null value for column: ', column);\n    return null;\n  }\n  // primitive\n  if (typeof value === 'number') {\n    return {\n      type: 'number',\n      domain: extent(all())\n    };\n  }\n  if (typeof value === 'boolean') {\n    return {\n      type: 'boolean'\n    };\n  }\n\n  if (value instanceof Date) {\n    return {\n      type: 'date'\n    };\n  }\n  const formats = Array.isArray(options.datePattern) ? options.datePattern : [options.datePattern];\n  for (const format of formats) {\n    const dateParse = timeParse(format);\n    if (dateParse(value) == null) {\n      continue;\n    }\n    return {\n      type: 'date',\n      dateParse: format\n    };\n  }\n  const treatAsCategorical = typeof options.categoricalThreshold === 'function' ? options.categoricalThreshold : (u: number, t: number) => u < t * (<number>options.categoricalThreshold);\n\n  if (typeof value === 'string') {\n    //maybe a categorical\n    const values = all();\n    const categories = new Set(values);\n    if (treatAsCategorical(categories.size, values.length)) {\n      return {\n        type: 'categorical',\n        categories: cleanCategories(categories)\n      };\n    }\n    return {\n      type: 'string'\n    };\n  }\n\n  if (typeof value === 'object' && value.alt != null && value.href != null) {\n    return {\n      type: 'link'\n    };\n  }\n\n  return null;\n}\n\nfunction deriveType(label: string, value: any, column: number | string, all: () => any[], options: IDeriveOptions): IColumnDesc {\n  const base: any = {\n    type: 'string',\n    label,\n    column\n  };\n\n  const primitive = deriveBaseType(value, all, column, options);\n  if (primitive != null) {\n    return Object.assign(base, primitive);\n  }\n\n  // set\n  if (value instanceof Set) {\n    const cats = new Set<string>();\n    for (const value of all()) {\n      if (!(value instanceof Set)) {\n        continue;\n      }\n      value.forEach((vi) =>  {\n        cats.add(String(vi));\n      });\n    }\n    return Object.assign(base, {\n      type: 'set',\n      categories: cleanCategories(cats)\n    });\n  }\n\n  // map\n  if (value instanceof Map) {\n    const first = Array.from(value.values()).find((d) => !isEmpty(d));\n    const mapAll = () => {\n      const r: any[] = [];\n      for (const vi of all()) {\n        if (!(vi instanceof Map)) {\n          continue;\n        }\n        vi.forEach((vii) => {\n          if (!isEmpty(vii)) {\n            r.push(vii);\n          }\n        });\n      }\n      return r;\n    };\n    const p = deriveBaseType(first, mapAll, column, options);\n    return Object.assign(base, p || {}, {\n      type: p ? `${p.type}Map` : 'stringMap'\n    });\n  }\n\n  // array\n  if (Array.isArray(value)) {\n    const values = all();\n    const sameLength = !hasDifferentSizes(values);\n    if (sameLength) {\n      base.dataLength = value.length;\n    }\n    const first = value.find((v) => !isEmpty(v));\n    const p = deriveBaseType(first, () => concat(values).filter((d) => !isEmpty(d)), column, options);\n    if (p && p.type === 'categorical' && !sameLength) {\n      return Object.assign(base, p, {\n        type : 'set'\n      });\n    }\n    if (p || isEmpty(first)) {\n      return Object.assign(base, p || {}, {\n        type: p ? `${p.type}s` : 'strings'\n      });\n    }\n\n    if (typeof first === 'object' && first.key != null && first.value != null) {\n      // key,value pair map\n      const mapAll = () => {\n        const r: any[] = [];\n        for (const vi of values) {\n          if (!Array.isArray(vi)) {\n            continue;\n          }\n          for (const vii of vi) {\n            if (!isEmpty(vii)) {\n              r.push(vii);\n            }\n          }\n        }\n        return r;\n      };\n      const p = deriveBaseType(first.value, mapAll, column, options);\n      return Object.assign(base, p || {}, {\n        type: p ? `${p.type}Map` : 'stringMap'\n      });\n    }\n  }\n\n  // check boxplot\n  const bs = ['min', 'max', 'median', 'q1', 'q3'];\n  if (typeof value === 'object' && bs.every((b) => typeof value[b] === 'number')) {\n    //  boxplot\n    const vs = all();\n    return Object.assign(base, {\n      type: 'boxplot',\n      domain: [\n        vs.reduce((a, b) => Math.min(a, b.min), Number.POSITIVE_INFINITY),\n        vs.reduce((a, b) => Math.max(a, b.max), Number.NEGATIVE_INFINITY)\n      ]\n    });\n  }\n\n  if (typeof value === 'object') {\n    // object map\n    const first = Object.keys(value).map((k) => value[k]).filter((d) => !isEmpty(d));\n    const mapAll = () => {\n      const r: any[] = [];\n      for (const vi of all()) {\n        if (vi == null) {\n          continue;\n        }\n        Object.keys(vi).forEach((k) => {\n          const vii = vi[k];\n          if (!isEmpty(vii)) {\n            r.push(vii);\n          }\n        });\n      }\n      return r;\n    };\n    const p = deriveBaseType(first, mapAll, column, options);\n    return Object.assign(base, p || {}, {\n      type: p ? `${p.type}Map` : 'stringMap'\n    });\n  }\n\n  console.log('cannot infer type of column:', column);\n  //unknown type\n  return base;\n}\n\nfunction selectColumns(existing: string[], columns: string[]) {\n  const allNots = columns.every((d) => d.startsWith('-'));\n  if (!allNots) {\n    return columns;\n  }\n  // negate case, exclude columns that are given using -notation\n  const exclude = new Set(columns);\n  return existing.filter((d) => !exclude.has(`-${d}`));\n}\n\nfunction toLabel(key: string | number) {\n  if (typeof(key) === 'number') {\n    return `Col ${key + 1}`;\n  }\n  key = key.trim();\n  if (key.length === 0) {\n    return 'Unknown';\n  }\n  return key.split(/[\\s]+/gm).map((k) => k.length === 0 ? k : `${k[0]!.toUpperCase()}${k.slice(1)}`).join(' ');\n}\n\nexport function deriveColumnDescriptions(data: any[], options: Partial<IDeriveOptions> = {}) {\n  const config = Object.assign({\n    categoricalThreshold: (u: number, n: number) => u <= MAX_COLORS && u < n * 0.7, //70% unique and less equal to 22 categories\n    columns: [],\n    datePattern: ['%x', '%Y-%m-%d', '%Y-%m-%dT%H:%M:%S.%LZ']\n  }, options);\n\n  const r: IColumnDesc[] = [];\n  if (data.length === 0) {\n    // no data to derive something from\n    return r;\n  }\n\n  const first = data[0];\n  const columns: (number|string)[] = Array.isArray(first) ? range(first.length) : (config.columns.length > 0 ? selectColumns(Object.keys(first), config.columns) : Object.keys(first));\n\n  return columns.map((key) => {\n    let v = resolveValue(first, key);\n    if (isEmpty(v)) {\n      // cannot derive something from null try other rows\n      const foundRow = data.find((row) => !isEmpty(resolveValue(row, key)));\n      v = foundRow ? foundRow[key] : null;\n    }\n    return deriveType(toLabel(key), v, key, () => data.map((d) => resolveValue(d, key)).filter((d) => !isEmpty(d)), config);\n  });\n}\n\n\n/**\n * assigns colors to columns if they are numbers and not yet defined\n * @param columns\n * @returns {IColumnDesc[]}\n */\nexport function deriveColors(columns: IColumnDesc[]) {\n  const colors = colorPool();\n  columns.forEach((col: IColumnDesc) => {\n    if (isMapAbleColumn(col)) {\n      col.colorMapping = col.colorMapping || col.color || colors() || DEFAULT_COLOR;\n    }\n  });\n  return columns;\n}\n\n\n/**\n * utility to export a ranking to a table with the given separator\n * @param ranking\n * @param data\n * @param options\n * @returns {Promise<string>}\n */\nexport function exportRanking(ranking: Ranking, data: any[], options: Partial<IExportOptions> = {}) {\n  const opts = <IExportOptions>Object.assign({\n    separator: '\\t',\n    newline: '\\n',\n    header: true,\n    quote: false,\n    quoteChar: '\"',\n    filter: (c: Column) => !isSupportType(c),\n    verboseColumnHeaders: false\n  }, options);\n\n  //optionally quote not numbers\n  const escape = new RegExp(`[${opts.quoteChar}]`, 'g');\n\n  function quote(v: any, c?: Column) {\n    const l = String(v);\n    if ((opts.quote || l.indexOf('\\n') >= 0) && (!c || !isNumberColumn(c))) {\n      return `${opts.quoteChar}${l.replace(escape, opts.quoteChar + opts.quoteChar)}${opts.quoteChar}`;\n    }\n    return l;\n  }\n\n  const columns = ranking.flatColumns.filter((c) => opts.filter(c));\n  const order = ranking.getOrder();\n\n  const r: string[] = [];\n  if (opts.header) {\n    r.push(columns.map((d) => quote(`${d.label}${opts.verboseColumnHeaders && d.description ? `\\n${d.description}` : ''}`)).join(opts.separator));\n  }\n  data.forEach((row, i) => {\n    r.push(columns.map((c) => quote(c.getExportValue({v: row, i: order[i]}, 'text'), c)).join(opts.separator));\n  });\n  return r.join(opts.newline);\n}\n\n\n/** @internal */\nexport function map2Object<T>(map: Map<string, T>) {\n  const r : { [key: string]: T} = {};\n  map.forEach((v, k) => r[k] = v);\n  return r;\n}\n\n/** @internal */\nexport function object2Map<T>(obj: { [key: string]: T}) {\n  const r = new Map<string, T>();\n  for (const k of Object.keys(obj)) {\n    r.set(k, obj[k]);\n  }\n  return r;\n}\n\n\n/** @internal */\nexport function rangeSelection(provider: IDataProvider, rankingId: string, dataIndex: number, relIndex: number, ctrlKey: boolean) {\n  const ranking = provider.getRankings().find((d) => d.id === rankingId);\n  if (!ranking) { // no known reference\n    return false;\n  }\n  const selection = provider.getSelection();\n  if (selection.length === 0 || selection.includes(dataIndex)) {\n    return false; // no other or deselect\n  }\n  const order = ranking.getOrder();\n  const lookup = new Map(Array.from(order).map((d, i) => <[number, number]>[d, i]));\n  const distances = selection.map((d) => {\n    const index = (lookup.has(d) ? lookup.get(d)! : Infinity);\n    return {s: d, index, distance: Math.abs(relIndex - index)};\n  });\n  const nearest = distances.sort((a, b) => a.distance - b.distance)[0]!;\n  if (!isFinite(nearest.distance)) {\n    return false; // all outside\n  }\n  if (!ctrlKey) {\n    selection.splice(0, selection.length);\n    selection.push(nearest.s);\n  }\n  if (nearest.index < relIndex) {\n    for (let i = nearest.index + 1; i <= relIndex; ++i) {\n      selection.push(order[i]);\n    }\n  } else {\n    for (let i = relIndex; i <= nearest.index; ++i) {\n      selection.push(order[i]);\n    }\n  }\n  provider.setSelection(selection);\n  return true;\n}\n","import {AEventDispatcher, debounce, ISequence, OrderedSet, IDebounceContext, IEventListener, suffix, IEventContext} from '../internal';\nimport {Column, IColumnConstructor, Ranking, AggregateGroupColumn, createAggregateDesc, IAggregateGroupColumnDesc, isSupportType, EDirtyReason, RankColumn, createRankDesc, createSelectionDesc, IColumnDesc, IDataRow, IGroup, IndicesArray, IOrderedGroup, ISelectionColumnDesc, EAggregationState, IColumnDump, IRankingDump, IColorMappingFunctionConstructor, IMappingFunctionConstructor, ITypeFactory} from '../model';\nimport {models} from '../model/models';\nimport {forEachIndices, everyIndices, toGroupID, unifyParents} from '../model/internal';\nimport {IDataProvider, IDataProviderDump, IDataProviderOptions, SCHEMA_REF, IExportOptions} from './interfaces';\nimport {exportRanking, map2Object, object2Map} from './utils';\nimport {IRenderTasks} from '../renderer';\nimport {restoreCategoricalColorMapping} from '../model/CategoricalColorMappingFunction';\nimport {createColorMappingFunction, colorMappingFunctions} from '../model/ColorMappingFunction';\nimport {createMappingFunction, mappingFunctions} from '../model/MappingFunction';\n\n\n\n/**\n * emitted when a column has been added\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function addColumn(col: Column, index: number): void;\n\n/**\n * emitted when a column has been moved within this composite columm\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function moveColumn(col: Column, index: number, oldIndex: number): void;\n\n/**\n * emitted when a column has been removed\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function removeColumn(col: Column, index: number): void;\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function orderChanged(previous: number[], current: number[], previousGroups: IOrderedGroup[], currentGroups: IOrderedGroup[], dirtyReason: EDirtyReason[]): void;\n\n\n/**\n * emitted when state of the column is dirty\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function dirty(): void;\n\n/**\n * emitted when state of the column related to its header is dirty\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function dirtyHeader(): void;\n\n/**\n * emitted when state of the column related to its values is dirty\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function dirtyValues(): void;\n\n/**\n * emitted when state of the column related to cached values (hist, compare, ...) is dirty\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function dirtyCaches(): void;\n\n\n/**\n * emitted when the data changes\n * @asMemberOf ADataProvider\n * @param rows the new data rows\n * @event\n */\nexport declare function dataChanged(rows: IDataRow[]): void;\n\n/**\n * emitted when the selection changes\n * @asMemberOf ADataProvider\n * @param dataIndices the selected data indices\n * @event\n */\nexport declare function selectionChanged(dataIndices: number[]): void;\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function addRanking(ranking: Ranking, index: number): void;\n/**\n * @asMemberOf ADataProvider\n * @param ranking if null all rankings are removed else just the specific one\n * @event\n */\nexport declare function removeRanking(ranking: Ranking | null, index: number): void;\n\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function addDesc(desc: IColumnDesc): void;\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function clearDesc(): void;\n\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function showTopNChanged(previous: number, current: number): void;\n\n/**\n * emitted when the selection changes\n * @asMemberOf ADataProvider\n * @param dataIndices the selected data indices\n * @event\n */\nexport declare function jumpToNearest(dataIndices: number[]): void;\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function aggregate(ranking: Ranking, group: IGroup | IGroup[], value: boolean, state: EAggregationState): void;\n\n\n/**\n * @asMemberOf ADataProvider\n * @event\n */\nexport declare function busy(busy: boolean): void;\n\nfunction toDirtyReason(ctx: IEventContext) {\n  const primary = ctx.primaryType;\n  switch (primary || '') {\n    case Ranking.EVENT_DIRTY_ORDER:\n      return ctx.args[0] || [EDirtyReason.UNKNOWN];\n    case Ranking.EVENT_SORT_CRITERIA_CHANGED:\n      return [EDirtyReason.SORT_CRITERIA_CHANGED];\n    case Ranking.EVENT_GROUP_CRITERIA_CHANGED:\n      return [EDirtyReason.GROUP_CRITERIA_CHANGED];\n    case Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED:\n      return [EDirtyReason.GROUP_SORT_CRITERIA_CHANGED];\n    default:\n      return [EDirtyReason.UNKNOWN];\n  }\n}\n\nfunction mergeDirtyOrderContext(current: IDebounceContext, next: IDebounceContext) {\n  const currentReason = toDirtyReason(current.self);\n  const nextReason = toDirtyReason(next.self);\n  const combined = new Set(currentReason);\n  for (const r of nextReason) {\n    combined.add(r);\n  }\n  const args = [Array.from(combined)];\n  return {\n    self: {\n      primaryType: Ranking.EVENT_DIRTY_ORDER,\n      args\n    },\n    args\n  };\n}\n\n/**\n * a basic data provider holding the data and rankings\n */\nabstract class ADataProvider extends AEventDispatcher implements IDataProvider {\n  static readonly EVENT_SELECTION_CHANGED = 'selectionChanged';\n  static readonly EVENT_DATA_CHANGED = 'dataChanged';\n  static readonly EVENT_ADD_COLUMN = Ranking.EVENT_ADD_COLUMN;\n  static readonly EVENT_MOVE_COLUMN = Ranking.EVENT_MOVE_COLUMN;\n  static readonly EVENT_REMOVE_COLUMN = Ranking.EVENT_REMOVE_COLUMN;\n  static readonly EVENT_ADD_RANKING = 'addRanking';\n  static readonly EVENT_REMOVE_RANKING = 'removeRanking';\n  static readonly EVENT_DIRTY = Ranking.EVENT_DIRTY;\n  static readonly EVENT_DIRTY_HEADER = Ranking.EVENT_DIRTY_HEADER;\n  static readonly EVENT_DIRTY_VALUES = Ranking.EVENT_DIRTY_VALUES;\n  static readonly EVENT_DIRTY_CACHES = Ranking.EVENT_DIRTY_CACHES;\n  static readonly EVENT_ORDER_CHANGED = Ranking.EVENT_ORDER_CHANGED;\n  static readonly EVENT_SHOWTOPN_CHANGED = 'showTopNChanged';\n  static readonly EVENT_ADD_DESC = 'addDesc';\n  static readonly EVENT_CLEAR_DESC = 'clearDesc';\n  static readonly EVENT_JUMP_TO_NEAREST = 'jumpToNearest';\n  static readonly EVENT_GROUP_AGGREGATION_CHANGED = AggregateGroupColumn.EVENT_AGGREGATE;\n  static readonly EVENT_BUSY = 'busy';\n\n  private static readonly FORWARD_RANKING_EVENTS = suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN,\n    Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_MOVE_COLUMN,\n    Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES);\n\n  /**\n   * all rankings\n   * @type {Array}\n   * @private\n   */\n  private readonly rankings: Ranking[] = [];\n\n  /**\n   * the current selected indices\n   * @type {OrderedSet}\n   */\n  private readonly selection = new OrderedSet<number>();\n\n  //Map<ranking.id@group.name, -1=expand,0=collapse,N=topN>\n  private readonly aggregations = new Map<string, number>(); // not part of = show all\n\n  private uid = 0;\n  private readonly typeFactory: ITypeFactory;\n\n  private readonly options: Readonly<IDataProviderOptions> = {\n    columnTypes: {},\n    colorMappingFunctionTypes: {},\n    mappingFunctionTypes: {},\n    singleSelection: false,\n    showTopN: 10,\n    aggregationStrategy: 'item'\n  };\n\n  /**\n   * lookup map of a column type to its column implementation\n   */\n  readonly columnTypes: {[columnType: string]: IColumnConstructor};\n  readonly colorMappingFunctionTypes: {[colorMappingFunctionType: string]: IColorMappingFunctionConstructor};\n  readonly mappingFunctionTypes: {[mappingFunctionType: string]: IMappingFunctionConstructor};\n\n  private showTopN: number;\n\n  constructor(options: Partial<IDataProviderOptions> = {}) {\n    super();\n    Object.assign(this.options, options);\n    this.columnTypes = Object.assign(models(), this.options.columnTypes);\n    this.colorMappingFunctionTypes = Object.assign(colorMappingFunctions(), this.options.colorMappingFunctionTypes);\n    this.mappingFunctionTypes = Object.assign(mappingFunctions(), this.options.mappingFunctionTypes);\n    this.showTopN = this.options.showTopN;\n\n    this.typeFactory = this.createTypeFactory();\n  }\n\n  private createTypeFactory() {\n    const factory = <ITypeFactory><any>((d: IColumnDump) => {\n      const desc = this.fromDescRef(d.desc);\n      if (!desc || !desc.type) {\n        console.warn('cannot restore column dump', d);\n        return new Column(d.id || '', d.desc || {});\n      }\n      this.fixDesc(desc);\n      const type = this.columnTypes[desc.type];\n      if (type == null) {\n        console.warn('invalid column type in column dump using column', d);\n        return new Column(d.id || '', desc);\n      }\n      const c = this.instantiateColumn(type, '', desc, this.typeFactory);\n      c.restore(d, factory);\n      return c;\n    });\n    factory.colorMappingFunction = createColorMappingFunction(this.colorMappingFunctionTypes, factory);\n    factory.mappingFunction = createMappingFunction(this.mappingFunctionTypes);\n    factory.categoricalColorMappingFunction = restoreCategoricalColorMapping;\n    return factory;\n  }\n\n  getTypeFactory() {\n    return this.typeFactory;\n  }\n\n  /**\n   * events:\n   *  * column changes: addColumn, removeColumn\n   *  * ranking changes: addRanking, removeRanking\n   *  * dirty: dirty, dirtyHeder, dirtyValues\n   *  * selectionChanged\n   * @returns {string[]}\n   */\n  protected createEventList() {\n    return super.createEventList().concat([\n      ADataProvider.EVENT_DATA_CHANGED, ADataProvider.EVENT_BUSY,\n      ADataProvider.EVENT_SHOWTOPN_CHANGED,\n      ADataProvider.EVENT_ADD_COLUMN, ADataProvider.EVENT_REMOVE_COLUMN, ADataProvider.EVENT_MOVE_COLUMN,\n      ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_REMOVE_RANKING,\n      ADataProvider.EVENT_DIRTY, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY_CACHES,\n      ADataProvider.EVENT_ORDER_CHANGED, ADataProvider.EVENT_SELECTION_CHANGED,\n      ADataProvider.EVENT_ADD_DESC, ADataProvider.EVENT_CLEAR_DESC,\n      ADataProvider.EVENT_JUMP_TO_NEAREST, ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED]);\n  }\n\n  on(type: typeof ADataProvider.EVENT_BUSY, listener: typeof busy | null): this;\n  on(type: typeof ADataProvider.EVENT_DATA_CHANGED, listener: typeof dataChanged | null): this;\n  on(type: typeof ADataProvider.EVENT_SHOWTOPN_CHANGED, listener: typeof showTopNChanged | null): this;\n  on(type: typeof ADataProvider.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\n  on(type: typeof ADataProvider.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\n  on(type: typeof ADataProvider.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\n  on(type: typeof ADataProvider.EVENT_ADD_RANKING, listener: typeof addRanking | null): this;\n  on(type: typeof ADataProvider.EVENT_REMOVE_RANKING, listener: typeof removeRanking | null): this;\n  on(type: typeof ADataProvider.EVENT_DIRTY, listener: typeof dirty | null): this;\n  on(type: typeof ADataProvider.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\n  on(type: typeof ADataProvider.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\n  on(type: typeof ADataProvider.EVENT_DIRTY_CACHES, listener: typeof dirtyCaches | null): this;\n  on(type: typeof ADataProvider.EVENT_ORDER_CHANGED, listener: typeof orderChanged | null): this;\n  on(type: typeof ADataProvider.EVENT_ADD_DESC, listener: typeof addDesc | null): this;\n  on(type: typeof ADataProvider.EVENT_CLEAR_DESC, listener: typeof clearDesc | null): this;\n  on(type: typeof ADataProvider.EVENT_JUMP_TO_NEAREST, listener: typeof jumpToNearest | null): this;\n  on(type: typeof ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, listener: typeof aggregate | null): this;\n  on(type: typeof ADataProvider.EVENT_SELECTION_CHANGED, listener: typeof selectionChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  abstract getTotalNumberOfRows(): number;\n\n  /**\n   * returns a list of all known column descriptions\n   * @returns {Array}\n   */\n  abstract getColumns(): IColumnDesc[];\n\n  abstract getTaskExecutor(): IRenderTasks;\n\n  /**\n   * adds a new ranking\n   * @param existing an optional existing ranking to clone\n   * @return the new ranking\n   */\n  pushRanking(existing?: Ranking): Ranking {\n    const r = this.cloneRanking(existing);\n\n    this.insertRanking(r);\n    return r;\n  }\n\n  protected fireBusy(busy: boolean) {\n    this.fire(ADataProvider.EVENT_BUSY, busy);\n  }\n\n  takeSnapshot(col: Column): Ranking {\n    this.fireBusy(true);\n    const r = this.cloneRanking();\n    const ranking = col.findMyRanker();\n    // by convention copy all support types and the first string column\n    let hasString = col.desc.type === 'string';\n    let hasColumn = false;\n    const toClone = !ranking ? [col] : ranking.children.filter((c) => {\n      if (c === col) {\n        hasColumn = true;\n        return true;\n      }\n      if (!hasString && c.desc.type === 'string') {\n        hasString = true;\n        return true;\n      }\n      return isSupportType(c);\n    });\n\n    if (!hasColumn) {\n      // maybe a nested one thus not in the top level\n      toClone.push(col);\n    }\n\n    toClone.forEach((c) => {\n      const clone = this.clone(c);\n      r.push(clone);\n      if (c === col) {\n        clone.sortByMe();\n      }\n    });\n    this.insertRanking(r);\n    this.fireBusy(false);\n    return r;\n  }\n\n  insertRanking(r: Ranking, index = this.rankings.length) {\n    this.rankings.splice(index, 0, r);\n    this.forward(r, ...ADataProvider.FORWARD_RANKING_EVENTS);\n    //delayed reordering per ranking\n    const that = this;\n    r.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, debounce(function(this: IEventContext) {\n      that.triggerReorder(r, toDirtyReason(this));\n    }, 100, mergeDirtyOrderContext));\n    this.fire([ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], r, index);\n    this.triggerReorder(r);\n  }\n\n  private triggerReorder(ranking: Ranking, dirtyReason?: EDirtyReason[]) {\n    this.fireBusy(true);\n    const reason = dirtyReason || [EDirtyReason.UNKNOWN];\n    Promise.resolve(this.sort(ranking, reason)).then(({groups, index2pos}) => {\n      groups = unifyParents(groups);\n      this.initAggregateState(ranking, groups);\n      ranking.setGroups(groups, index2pos, reason);\n      this.fireBusy(false);\n    });\n  }\n\n  /**\n   * removes a ranking from this data provider\n   * @param ranking\n   * @returns {boolean}\n   */\n  removeRanking(ranking: Ranking) {\n    const i = this.rankings.indexOf(ranking);\n    if (i < 0) {\n      return false;\n    }\n    this.unforward(ranking, ...ADataProvider.FORWARD_RANKING_EVENTS);\n    this.rankings.splice(i, 1);\n    ranking.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, null);\n    this.cleanUpRanking(ranking);\n    this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, i);\n    return true;\n  }\n\n  /**\n   * removes all rankings\n   */\n  clearRankings() {\n    this.rankings.forEach((ranking) => {\n      this.unforward(ranking, ...ADataProvider.FORWARD_RANKING_EVENTS);\n      ranking.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, null);\n      this.cleanUpRanking(ranking);\n    });\n    // clear\n    this.rankings.splice(0, this.rankings.length);\n    this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], null, -1);\n  }\n\n  clearFilters() {\n    this.rankings.forEach((ranking) => ranking.clearFilters());\n  }\n\n  /**\n   * returns a list of all current rankings\n   * @returns {Ranking[]}\n   */\n  getRankings() {\n    return this.rankings.slice();\n  }\n\n  /**\n   * returns the last ranking for quicker access\n   * @returns {Ranking}\n   */\n  getFirstRanking() {\n    return this.rankings[0] || null;\n  }\n\n  /**\n   * returns the last ranking for quicker access\n   * @returns {Ranking}\n   */\n  getLastRanking() {\n    return this.rankings[this.rankings.length - 1];\n  }\n\n  ensureOneRanking() {\n    if (this.rankings.length === 0) {\n      const r = this.pushRanking();\n      this.push(r, createRankDesc());\n    }\n  }\n\n  destroy() {\n    // dummy\n  }\n\n  /**\n   * hook method for cleaning up a ranking\n   * @param _ranking\n   */\n  cleanUpRanking(_ranking: Ranking) {\n    // dummy\n  }\n\n  /**\n   * abstract method for cloning a ranking\n   * @param existing\n   * @returns {null}\n   */\n  abstract cloneRanking(existing?: Ranking): Ranking;\n\n  /**\n   * adds a column to a ranking described by its column description\n   * @param ranking the ranking to add the column to\n   * @param desc the description of the column\n   * @return {Column} the newly created column or null\n   */\n  push(ranking: Ranking, desc: IColumnDesc): Column | null {\n    const r = this.create(desc);\n    if (r) {\n      ranking.push(r);\n      return r;\n    }\n    return null;\n  }\n\n  /**\n   * adds a column to a ranking described by its column description\n   * @param ranking the ranking to add the column to\n   * @param index the position to insert the column\n   * @param desc the description of the column\n   * @return {Column} the newly created column or null\n   */\n  insert(ranking: Ranking, index: number, desc: IColumnDesc) {\n    const r = this.create(desc);\n    if (r) {\n      ranking.insert(r, index);\n      return r;\n    }\n    return null;\n  }\n\n  /**\n   * creates a new unique id for a column\n   * @returns {string}\n   */\n  private nextId() {\n    return `col${this.uid++}`;\n  }\n\n  private fixDesc(desc: IColumnDesc) {\n    //hacks for provider dependent descriptors\n    if (desc.type === 'selection') {\n      (<ISelectionColumnDesc>desc).accessor = (row: IDataRow) => this.isSelected(row.i);\n      (<ISelectionColumnDesc>desc).setter = (index: number, value: boolean) => value ? this.select(index) : this.deselect(index);\n      (<ISelectionColumnDesc>desc).setterAll = (indices: IndicesArray, value: boolean) => value ? this.selectAll(indices) : this.deselectAll(indices);\n    } else if (desc.type === 'aggregate') {\n      (<IAggregateGroupColumnDesc>desc).isAggregated = (ranking: Ranking, group: IGroup) => this.getAggregationState(ranking, group);\n      (<IAggregateGroupColumnDesc>desc).setAggregated = (ranking: Ranking, group: IGroup, value: EAggregationState) => this.setAggregationState(ranking, group, value);\n    }\n    return desc;\n  }\n\n  protected cleanDesc(desc: IColumnDesc) {\n    //hacks for provider dependent descriptors\n    if (desc.type === 'selection') {\n      delete (<ISelectionColumnDesc>desc).accessor;\n      delete (<ISelectionColumnDesc>desc).setter;\n      delete (<ISelectionColumnDesc>desc).setterAll;\n    } else if (desc.type === 'aggregate') {\n      delete (<IAggregateGroupColumnDesc>desc).isAggregated;\n      delete (<IAggregateGroupColumnDesc>desc).setAggregated;\n    }\n    return desc;\n  }\n\n  /**\n   * creates an internal column model out of the given column description\n   * @param desc\n   * @returns {Column} the new column or null if it can't be created\n   */\n  create(desc: IColumnDesc): Column | null {\n    this.fixDesc(desc);\n    //find by type and instantiate\n    const type = this.columnTypes[desc.type];\n    if (type) {\n      return this.instantiateColumn(type, this.nextId(), desc, this.typeFactory);\n    }\n    return null;\n  }\n\n  protected instantiateColumn(type: IColumnConstructor, id: string, desc: IColumnDesc, typeFactory: ITypeFactory) {\n    return new type(id, desc, typeFactory);\n  }\n\n  /**\n   * clones a column by dumping and restoring\n   * @param col\n   * @returns {Column}\n   */\n  clone(col: Column) {\n    const dump = this.dumpColumn(col);\n    return this.restoreColumn(dump);\n  }\n\n  /**\n   * restores a column from a dump\n   * @param dump\n   * @returns {Column}\n   */\n  restoreColumn(dump: any): Column {\n    const c = this.typeFactory(dump);\n    c.assignNewId(this.nextId.bind(this));\n    return c;\n  }\n\n  /**\n   * finds a column in all rankings returning the first match\n   * @param idOrFilter by id or by a filter function\n   * @returns {Column}\n   */\n  find(idOrFilter: string | ((col: Column) => boolean)): Column | null {\n    //convert to function\n    const filter = typeof (idOrFilter) === 'string' ? (col: Column) => col.id === idOrFilter : idOrFilter;\n\n    for (const ranking of this.rankings) {\n      const r = ranking.find(filter);\n      if (r) {\n        return r;\n      }\n    }\n    return null;\n  }\n\n\n  /**\n   * dumps this whole provider including selection and the rankings\n   * @returns {{uid: number, selection: number[], rankings: *[]}}\n   */\n  dump(): IDataProviderDump {\n    return {\n      '$schema': SCHEMA_REF,\n      uid: this.uid,\n      selection: this.getSelection(),\n      aggregations: map2Object(this.aggregations),\n      rankings: this.rankings.map((r) => r.dump(this.toDescRef.bind(this))),\n      showTopN: this.showTopN\n    };\n  }\n\n  /**\n   * dumps a specific column\n   */\n  dumpColumn(col: Column): IColumnDump {\n    return col.dump(this.toDescRef.bind(this));\n  }\n\n  /**\n   * for better dumping describe reference, by default just return the description\n   */\n  toDescRef(desc: any): any {\n    return desc;\n  }\n\n  /**\n   * inverse operation of toDescRef\n   */\n  fromDescRef(descRef: any): any {\n    return descRef;\n  }\n\n  restoreRanking(dump: IRankingDump) {\n    const ranking = this.cloneRanking();\n    ranking.restore(dump, this.typeFactory);\n    const idGenerator = this.nextId.bind(this);\n    ranking.children.forEach((c) => c.assignNewId(idGenerator));\n    return ranking;\n  }\n\n  restore(dump: IDataProviderDump) {\n    //clean old\n    this.clearRankings();\n\n    //restore selection\n    this.uid = dump.uid || 0;\n    if (dump.selection) {\n      dump.selection.forEach((s: number) => this.selection.add(s));\n    }\n    if (dump.showTopN != null) {\n      this.showTopN = dump.showTopN;\n    }\n    if (dump.aggregations) {\n      this.aggregations.clear();\n      if (Array.isArray(dump.aggregations)) {\n        dump.aggregations.forEach((a: string) => this.aggregations.set(a, 0));\n      } else {\n        object2Map(dump.aggregations).forEach((v, k) => this.aggregations.set(k, v));\n      }\n    }\n\n\n    //restore rankings\n    if (dump.rankings) {\n      dump.rankings.forEach((r: any) => {\n        const ranking = this.cloneRanking();\n        ranking.restore(r, this.typeFactory);\n        //if no rank column add one\n        if (!ranking.children.some((d) => d instanceof RankColumn)) {\n          ranking.insert(this.create(createRankDesc())!, 0);\n        }\n        this.insertRanking(ranking);\n      });\n    }\n\n    //assign new ids\n    const idGenerator = this.nextId.bind(this);\n    this.rankings.forEach((r) => {\n      r.children.forEach((c) => c.assignNewId(idGenerator));\n    });\n  }\n\n  abstract findDesc(ref: string): IColumnDesc | null;\n\n  /**\n   * generates a default ranking by using all column descriptions ones\n   */\n  deriveDefault(addSupportType: boolean = true) {\n    const r = this.pushRanking();\n    if (addSupportType) {\n      r.push(this.create(createAggregateDesc())!);\n      r.push(this.create(createRankDesc())!);\n      if (this.options.singleSelection !== false) {\n        r.push(this.create(createSelectionDesc())!);\n      }\n    }\n    this.getColumns().forEach((col) => {\n      const c = this.create(col);\n      if (!c || isSupportType(c)) {\n        return;\n      }\n      r.push(c);\n    });\n    return r;\n  }\n\n  isAggregated(ranking: Ranking, group: IGroup) {\n    return this.getTopNAggregated(ranking, group) >= 0;\n  }\n\n  getAggregationState(ranking: Ranking, group: IGroup) {\n    const n = this.getTopNAggregated(ranking, group);\n    return n < 0 ? EAggregationState.EXPAND : (n === 0 ? EAggregationState.COLLAPSE : EAggregationState.EXPAND_TOP_N);\n  }\n\n  setAggregated(ranking: Ranking, group: IGroup, value: boolean) {\n    return this.setAggregationState(ranking, group, value ? EAggregationState.COLLAPSE : EAggregationState.EXPAND);\n  }\n\n  setAggregationState(ranking: Ranking, group: IGroup, value: EAggregationState) {\n    this.setTopNAggregated(ranking, group, value === EAggregationState.COLLAPSE ? 0 : (value === EAggregationState.EXPAND_TOP_N ? this.showTopN  : -1));\n  }\n\n  getTopNAggregated(ranking: Ranking, group: IGroup) {\n    let g: IGroup | undefined | null = group;\n    while (g) {\n      const key = `${ranking.id}@${toGroupID(g)}`;\n      if (this.aggregations.has(key)) {\n        // propagate to leaf\n        const v = this.aggregations.get(key)!;\n        this.aggregations.set(`${ranking.id}@${toGroupID(group)}`, v);\n        return v;\n      }\n      g = g.parent;\n    }\n    return -1;\n  }\n\n  private unaggregateParents(ranking: Ranking, group: IGroup) {\n    let g: IGroup | undefined | null = group.parent;\n    while (g) {\n      this.aggregations.delete(`${ranking.id}@${toGroupID(g)}`);\n      g = g.parent;\n    }\n  }\n\n  getAggregationStrategy() {\n    return this.options.aggregationStrategy;\n  }\n\n  private initAggregateState(ranking: Ranking, groups: IGroup[]) {\n    let initial = -1;\n    switch(this.getAggregationStrategy()) {\n      case 'group':\n        initial = 0;\n        break;\n      case 'item':\n      case 'group+item':\n      case 'group+item+top':\n        initial = -1;\n        break;\n      case 'group+top+item':\n        initial = this.showTopN;\n        break;\n    }\n\n    for (const group of groups) {\n      const key = `${ranking.id}@${toGroupID(group)}`;\n      if (!this.aggregations.has(key) && initial >= 0) {\n        this.aggregations.set(key, initial);\n      }\n    }\n  }\n\n  setTopNAggregated(ranking: Ranking, group: IGroup, value: number) {\n    this.unaggregateParents(ranking, group);\n    const key = `${ranking.id}@${toGroupID(group)}`;\n    const current = this.getTopNAggregated(ranking, group);\n    if (current === value) {\n      return;\n    }\n    if (value >= 0) {\n      this.aggregations.set(key, value);\n    } else {\n      this.aggregations.delete(key);\n    }\n    this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, group, value);\n  }\n\n  aggregateAllOf(ranking: Ranking, aggregateAll: boolean | number | EAggregationState, groups = ranking.getGroups()) {\n    let v: number;\n    if (typeof aggregateAll === 'boolean') {\n      v = aggregateAll ? 0 : -1;\n    } else if (aggregateAll === EAggregationState.COLLAPSE) {\n      v = 0;\n    } else if (aggregateAll === EAggregationState.EXPAND) {\n      v = -1;\n    } else if (aggregateAll === EAggregationState.EXPAND_TOP_N) {\n      v = this.showTopN;\n    } else {\n      v = aggregateAll;\n    }\n\n    for(const group of groups) {\n      this.unaggregateParents(ranking, group);\n      const current = this.getTopNAggregated(ranking, group);\n      if (current === v) {\n        continue;\n      }\n      const key = `${ranking.id}@${toGroupID(group)}`;\n      if (v >= 0) {\n        this.aggregations.set(key, v);\n      } else {\n        this.aggregations.delete(key);\n      }\n    }\n    this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, groups, v >= 0, v);\n  }\n\n  getShowTopN() {\n    return this.showTopN;\n  }\n\n  setShowTopN(value: number) {\n    if (this.showTopN === value) {\n      return;\n    }\n    // update entries\n    for (const [k, v] of Array.from(this.aggregations.entries())) {\n      if (v === this.showTopN) {\n        this.aggregations.set(k, value);\n      }\n    }\n    this.fire([ADataProvider.EVENT_SHOWTOPN_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], this.showTopN, this.showTopN = value);\n  }\n\n  /**\n   * sorts the given ranking and eventually return a ordering of the data items\n   * @param ranking\n   * @return {Promise<any>}\n   */\n  abstract sort(ranking: Ranking, dirtyReason: EDirtyReason[]): Promise<{groups: IOrderedGroup[], index2pos: IndicesArray}> | {groups: IOrderedGroup[], index2pos: IndicesArray};\n\n  /**\n   * returns a view in the order of the given indices\n   * @param indices\n   * @return {Promise<any>}\n   */\n  abstract view(indices: ArrayLike<number>): Promise<any[]> | any[];\n\n\n  abstract getRow(index: number): Promise<IDataRow> | IDataRow;\n\n  /**\n   * returns a data sample used for the mapping editor\n   * @param col\n   * @return {Promise<any>}\n   */\n  abstract mappingSample(col: Column): Promise<ISequence<number>> | ISequence<number>;\n\n  /**\n   * is the given row selected\n   * @param index\n   * @return {boolean}\n   */\n  isSelected(index: number) {\n    return this.selection.has(index);\n  }\n\n  /**\n   * also select the given row\n   * @param index\n   */\n  select(index: number) {\n    if (this.selection.has(index)) {\n      return; //no change\n    }\n    if (this.options.singleSelection === true && this.selection.size > 0) {\n      this.selection.clear();\n    }\n    this.selection.add(index);\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n  }\n\n  /**\n   * hook for selecting elements matching the given arguments\n   * @param search\n   * @param col\n   */\n  abstract searchAndJump(search: string | RegExp, col: Column): void;\n\n  jumpToNearest(indices: number[]) {\n    if (indices.length === 0) {\n      return;\n    }\n    this.fire(ADataProvider.EVENT_JUMP_TO_NEAREST, indices);\n  }\n\n  /**\n   * also select all the given rows\n   * @param indices\n   */\n  selectAll(indices: IndicesArray) {\n    if (everyIndices(indices, (i) => this.selection.has(i))) {\n      return; //no change\n    }\n    if (this.options.singleSelection === true) {\n      this.selection.clear();\n      if (indices.length > 0) {\n        this.selection.add(indices[0]);\n      }\n    } else {\n      forEachIndices(indices, (index) => {\n        this.selection.add(index);\n      });\n    }\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n  }\n\n  selectAllOf(ranking: Ranking) {\n    this.setSelection(Array.from(ranking.getOrder()));\n  }\n\n  /**\n   * set the selection to the given rows\n   * @param indices\n   */\n  setSelection(indices: number[]) {\n    if (indices.length === 0) {\n      return this.clearSelection();\n    }\n    if (this.selection.size === indices.length && indices.every((i) => this.selection.has(i))) {\n      return; //no change\n    }\n    this.selection.clear();\n    this.selectAll(indices);\n  }\n\n  /**\n   * toggles the selection of the given data index\n   * @param index\n   * @param additional just this element or all\n   * @returns {boolean} whether the index is currently selected\n   */\n  toggleSelection(index: number, additional = false) {\n    if (this.isSelected(index)) {\n      if (additional) {\n        this.deselect(index);\n      } else {\n        this.clearSelection();\n      }\n      return false;\n    }\n    if (additional) {\n      this.select(index);\n    } else {\n      this.setSelection([index]);\n    }\n    return true;\n  }\n\n  /**\n   * deselect the given row\n   * @param index\n   */\n  deselect(index: number) {\n    if (!this.selection.has(index)) {\n      return; //no change\n    }\n    this.selection.delete(index);\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n  }\n\n  /**\n   * also select all the given rows\n   * @param indices\n   */\n  deselectAll(indices: IndicesArray) {\n    if (everyIndices(indices, (i) => !this.selection.has(i))) {\n      return; //no change\n    }\n    forEachIndices(indices, (index) => {\n      this.selection.delete(index);\n    });\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n  }\n\n  /**\n   * returns a promise containing the selected rows\n   * @return {Promise<any[]>}\n   */\n  selectedRows(): Promise<any[]> | any[] {\n    if (this.selection.size === 0) {\n      return [];\n    }\n    return this.view(this.getSelection());\n  }\n\n  /**\n   * returns the currently selected indices\n   * @returns {Array}\n   */\n  getSelection() {\n    return Array.from(this.selection);\n  }\n\n  /**\n   * clears the selection\n   */\n  clearSelection() {\n    if (this.selection.size === 0) {\n      return; //no change\n    }\n    this.selection.clear();\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, [], false);\n  }\n\n  /**\n   * utility to export a ranking to a table with the given separator\n   * @param ranking\n   * @param options\n   * @returns {Promise<string>}\n   */\n  exportTable(ranking: Ranking, options: Partial<IExportOptions> = {}) {\n    return Promise.resolve(this.view(ranking.getOrder())).then((data) => exportRanking(ranking, data, options));\n  }\n}\n\nexport default ADataProvider;\n","import {ActionColumn, AggregateGroupColumn, AnnotateColumn, BooleanColumn, BooleansColumn, BoxPlotColumn, CategoricalColumn, CategoricalMapColumn, CategoricalsColumn, DateColumn, DatesColumn, DatesMapColumn, GroupColumn, HierarchyColumn, ImpositionBoxPlotColumn, ImpositionCompositeColumn, ImpositionCompositesColumn, LinkColumn, LinkMapColumn, LinksColumn, NestedColumn, NumberColumn, NumberMapColumn, NumbersColumn, OrdinalColumn, RankColumn, ReduceColumn, ScriptColumn, SelectionColumn, SetColumn, StackColumn, StringColumn, StringMapColumn, StringsColumn} from './';\n\n/**\n * a map of all known column types\n */\nexport function models() {\n  return {\n    actions: ActionColumn,\n    aggregate: AggregateGroupColumn,\n    annotate: AnnotateColumn,\n    boolean: BooleanColumn,\n    booleans: BooleansColumn,\n    boxplot: BoxPlotColumn,\n    categorical: CategoricalColumn,\n    categoricalMap: CategoricalMapColumn,\n    categoricals: CategoricalsColumn,\n    date: DateColumn,\n    dateMap: DatesMapColumn,\n    dates: DatesColumn,\n    group: GroupColumn,\n    hierarchy: HierarchyColumn,\n    imposition: ImpositionCompositeColumn,\n    impositionBoxPlot: ImpositionBoxPlotColumn,\n    impositions: ImpositionCompositesColumn,\n    reduce: ReduceColumn,\n    nested: NestedColumn,\n    number: NumberColumn,\n    numbers: NumbersColumn,\n    numberMap: NumberMapColumn,\n    ordinal: OrdinalColumn,\n    rank: RankColumn,\n    script: ScriptColumn,\n    selection: SelectionColumn,\n    set: SetColumn,\n    stack: StackColumn,\n    string: StringColumn,\n    stringMap: StringMapColumn,\n    strings: StringsColumn,\n    link: LinkColumn,\n    linkMap: LinkMapColumn,\n    links: LinksColumn\n  };\n}\n","import {IColumnDesc, Ranking} from '../model';\nimport ADataProvider from './ADataProvider';\nimport {IDataProviderDump, IDataProviderOptions} from './interfaces';\nimport {isComplexAccessor, rowGetter, rowComplexGetter, rowGuessGetter} from '../internal';\n\n\nfunction injectAccessor(d: any) {\n  d.accessor = d.accessor || (d.column ? (isComplexAccessor(d.column) ? rowComplexGetter : rowGetter) : rowGuessGetter);\n  d.label = d.label || d.column;\n  return d;\n}\n\n/**\n * common base implementation of a DataProvider with a fixed list of column descriptions\n */\nabstract class ACommonDataProvider extends ADataProvider {\n\n  private rankingIndex = 0;\n\n  constructor(private columns: IColumnDesc[] = [], options: Partial<IDataProviderOptions> = {}) {\n    super(options);\n    //generate the accessor\n    columns.forEach(injectAccessor);\n  }\n\n  cloneRanking(existing?: Ranking) {\n    const id = this.nextRankingId();\n    const clone = new Ranking(id);\n\n    if (existing) { //copy the ranking of the other one\n      //TODO better cloning\n      existing.children.forEach((child) => {\n        this.push(clone, child.desc);\n      });\n    }\n\n    return clone;\n  }\n\n  /**\n   * adds another column description to this data provider\n   * @param column\n   */\n  pushDesc(column: IColumnDesc) {\n    injectAccessor(column);\n    this.columns.push(column);\n    this.fire(ADataProvider.EVENT_ADD_DESC, column);\n  }\n\n  clearColumns() {\n    this.clearRankings();\n    this.columns.splice(0, this.columns.length);\n    this.fire(ADataProvider.EVENT_CLEAR_DESC);\n  }\n\n  getColumns(): IColumnDesc[] {\n    return this.columns.slice();\n  }\n\n  findDesc(ref: string) {\n    return this.columns.filter((c) => (<any>c).column === ref)[0];\n  }\n\n  /**\n   * identify by the tuple type@columnname\n   * @param desc\n   * @returns {string}\n   */\n  toDescRef(desc: any): any {\n    return typeof desc.column !== 'undefined' ? `${desc.type}@${desc.column}` : this.cleanDesc(Object.assign({}, desc));\n  }\n\n  fromDescRef(descRef: any): any {\n    if (typeof (descRef) === 'string') {\n      return this.columns.find((d: any) => `${d.type}@${d.column}` === descRef || d.type === descRef);\n    }\n    const existing = this.columns.find((d) => descRef.column === (<any>d).column && descRef.label === d.label && descRef.type === d.type);\n    if (existing) {\n      return existing;\n    }\n    return descRef;\n  }\n\n  restore(dump: IDataProviderDump) {\n    super.restore(dump);\n    this.rankingIndex = 1 + Math.max(...this.getRankings().map((r) => +r.id.substring(4)));\n  }\n\n  nextRankingId() {\n    return `rank${this.rankingIndex++}`;\n  }\n}\n\nexport default ACommonDataProvider;\n","import {createIndexArray, ILookUpArray} from '../internal';\nimport {FIRST_IS_MISSING, FIRST_IS_NAN, ECompareValueType, ICompareValue, Column, UIntTypedArray, Ranking, IDataRow} from '../model';\n\n\nconst missingUInt8 = FIRST_IS_MISSING > 0 ? 255 : 0;\nconst missingBinary = missingUInt8;\nconst missingUInt16 = FIRST_IS_MISSING > 0 ? 65535 : 0; // max or 0\nconst missingUInt32 = FIRST_IS_MISSING > 0 ? 4294967295 : 0; // max or 0\nconst missingInt8 = FIRST_IS_MISSING > 0 ? 127 : -128; // max or min\nconst missingInt16 = FIRST_IS_MISSING > 0 ? 32767 : -32768; // max or min\nconst missingInt32 = FIRST_IS_MISSING > 0 ? 2147483647 : -2147483648; // max or min\nconst missingFloat = FIRST_IS_NAN > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\nconst missingFloatAsc = FIRST_IS_MISSING > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\nconst missingString = FIRST_IS_MISSING > 0 ? '\\uffff' : '\\u0000'; // first or last character\n\n\nfunction chooseMissingByLength(length: number) {\n  if (length <= 255) {\n    return missingBinary;\n  }\n  if (length <= 65535) {\n    return missingUInt16;\n  }\n  return missingUInt32;\n}\n\n\nfunction toCompareLookUp(rawLength: number, type: ECompareValueType): ILookUpArray {\n  switch (type) {\n    case ECompareValueType.COUNT:\n      return createIndexArray(rawLength + 1);\n    case ECompareValueType.BINARY:\n    case ECompareValueType.UINT8:\n      return new Uint8Array(rawLength);\n    case ECompareValueType.UINT16:\n      return new Uint16Array(rawLength);\n    case ECompareValueType.UINT32:\n      return new Uint32Array(rawLength);\n    case ECompareValueType.INT8:\n      return new Int8Array(rawLength);\n    case ECompareValueType.INT16:\n      return new Int16Array(rawLength);\n    case ECompareValueType.INT32:\n      return new Int32Array(rawLength);\n    case ECompareValueType.STRING:\n      return <string[]>[];\n    case ECompareValueType.FLOAT_ASC:\n    case ECompareValueType.FLOAT:\n      return new Float32Array(rawLength);\n    case ECompareValueType.DOUBLE_ASC:\n    case ECompareValueType.DOUBLE:\n      return new Float64Array(rawLength);\n  }\n}\n\nfunction createSetter(type: ECompareValueType, lookup: ILookUpArray, missingCount: number): ((index: number, v: ICompareValue) => void) {\n  switch (type) {\n    case ECompareValueType.BINARY: // just 0 or 1 -> convert to 0=-Ininity 1 2 255=+Infinity\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingBinary : (<number>v) + 1;\n    case ECompareValueType.COUNT: // uint32\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingCount : (<number>v) + 1;\n    case ECompareValueType.UINT8: // shift by one to have 0 for -Inf\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt8 : (<number>v) + 1;\n    case ECompareValueType.UINT16: // shift by one to have 0 for -Inf\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt16 : (<number>v) + 1;\n    case ECompareValueType.UINT32: // shift by one to have 0 for -Inf\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt32 : (<number>v) + 1;\n    case ECompareValueType.INT8:\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt8 : (<number>v);\n    case ECompareValueType.INT16:\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt16 : (<number>v);\n    case ECompareValueType.INT32:\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingInt32 : (<number>v);\n    case ECompareValueType.STRING:\n      return (index, v) => lookup[index] = v == null || v === '' ? missingString : v;\n    case ECompareValueType.FLOAT:\n    case ECompareValueType.DOUBLE:\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingFloat : v;\n    case ECompareValueType.FLOAT_ASC:\n    case ECompareValueType.DOUBLE_ASC:\n      return (index, v) => lookup[index] = v == null || isNaN(<number>v) ? missingFloatAsc : v;\n  }\n}\n\nexport class CompareLookup {\n  private readonly criteria: {col: Column, valueCache?(dataIndex: number): any}[] = [];\n  private readonly data: {asc: boolean, v: ECompareValueType, lookup: ILookUpArray, setter: (dataIndex: number, value: ICompareValue) => void}[] = [];\n\n  constructor(rawLength: number, isSorting: boolean, ranking: Ranking, valueCaches?: (col: Column) => (undefined | ((i: number) => any))) {\n    const missingCount = chooseMissingByLength(rawLength + 1); // + 1 for the value shift to have 0 as start\n\n    for (const c of (isSorting ? ranking.getSortCriteria() : ranking.getGroupSortCriteria())) {\n      const v = (isSorting ? c.col.toCompareValueType() : c.col.toCompareGroupValueType());\n      const valueCache = valueCaches ? valueCaches(c.col) : undefined;\n      this.criteria.push({col: c.col, valueCache});\n      if (!Array.isArray(v)) {\n        const lookup = toCompareLookUp(rawLength, v);\n        this.data.push({asc: c.asc, v, lookup, setter: createSetter(v, lookup, missingCount)});\n        continue;\n      }\n      for (const vi of v) {\n        const lookup = toCompareLookUp(rawLength, vi);\n        this.data.push({asc: c.asc, v: vi, lookup, setter: createSetter(vi, lookup, missingCount)});\n      }\n    }\n\n    if (isSorting) {\n      return;\n    }\n\n    {\n      const v = ECompareValueType.STRING;\n      const lookup = toCompareLookUp(rawLength, v);\n      this.data.push({asc: true, v, lookup, setter: createSetter(v, lookup, missingCount)});\n    }\n  }\n\n  get sortOrders() {\n    return this.data.map((d) => ({asc: d.asc, lookup: d.lookup}));\n  }\n\n  get transferAbles() {\n    // so a typed array\n    return this.data.map((d) => d.lookup).filter((d): d is UIntTypedArray | Float32Array => !Array.isArray(d)).map((d) => d.buffer);\n  }\n\n  push(row: IDataRow) {\n    let i = 0;\n    for (const c of this.criteria) {\n      const r = c.col.toCompareValue(row, c.valueCache ? c.valueCache(row.i) : undefined);\n      if (!Array.isArray(r)) {\n        this.data[i++].setter(row.i, r);\n        continue;\n      }\n      for (const ri of r) {\n        this.data[i++].setter(row.i, ri);\n      }\n    }\n  }\n\n  pushValues(dataIndex: number, vs: ICompareValue[]) {\n    for (let i = 0; i < vs.length; ++i) {\n      this.data[i].setter(dataIndex, vs[i]);\n    }\n  }\n\n  free() {\n    // free up to save memory\n    this.data.splice(0, this.data.length);\n  }\n}\n","import {IAbortAblePromise, ABORTED, IAbortAblePromiseBase} from 'lineupengine';\nexport {ABORTED} from 'lineupengine';\n\n/**\n * @internal\n */\nexport interface IPoorManIdleDeadline {\n  didTimeout: boolean;\n  timeRemaining(): number;\n}\n\n/**\n * helper since not part of the typings\n * @internal\n */\nexport interface IPoorManIdleCallback {\n  requestIdleCallback(callback: (deadline: IPoorManIdleDeadline) => void, options?: {timeout: number}): number;\n\n  clearIdleCallback(callbackId: number): void;\n}\n\n/**\n * @internal\n */\nexport interface ITask<T> {\n  /**\n   * external task id\n   */\n  id: string;\n  /**\n   * iterator for the incremental task, return null for another round\n   */\n  it: Iterator<T | PromiseLike<T> | null>;\n  /**\n   * function to the resolve the resulting promise\n   */\n  resolve(r: T | PromiseLike<T> | symbol): void;\n  /**\n   * the resulting promise\n   */\n  result: PromiseLike<T | symbol>;\n\n  /**\n   * aborts this task\n   */\n  abort: () => void;\n\n  isAborted: boolean;\n}\n\n/**\n * iterator result for another round\n * @internal\n */\nexport const ANOTHER_ROUND = {\n  value: null,\n  done: false\n};\n\n/**\n * iterator for just one entry\n * @internal\n */\nexport function oneShotIterator<T>(calc: () => T): Iterator<T> {\n  return {\n    next: () => ({done: true, value: calc()})\n  };\n}\n\n\nfunction thenFactory<T>(wrappee: PromiseLike<T>, abort: () => void, isAborted: () => boolean) {\n  function then<TResult1 = T | symbol, TResult2 = never>(onfulfilled?: ((value: T | symbol) => TResult1 | PromiseLike<TResult1>) | undefined | null, onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): IAbortAblePromiseBase<TResult1 | TResult2> {\n    const r = wrappee.then(onfulfilled, onrejected);\n    return {\n      then: <any>thenFactory(r, abort, isAborted),\n      abort,\n      isAborted\n    };\n  }\n  return then;\n}\n\n/**\n * task scheduler for running tasks in idle callbacks\n * @internal\n */\nexport default class TaskScheduler {\n  private tasks: ITask<any>[] = [];\n  // idle callback id\n  private taskId: number = -1;\n\n  private runTasks = (deadline: IPoorManIdleDeadline) => {\n    // while more tasks and not timed out\n    while (this.tasks.length > 0 && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\n      const task = this.tasks.shift()!;\n\n      let r = task.it.next();\n      // call next till done or ran out of time\n      while (!r.done && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\n        r = task.it.next();\n      }\n\n      if (r.done) {\n        // resolve async\n        requestAnimationFrame(() => task.resolve(r.value));\n      } else {\n        // reschedule again\n        this.tasks.unshift(task);\n      }\n    }\n\n    this.taskId = -1;\n    this.reSchedule();\n  }\n\n  private reSchedule() {\n    if (this.tasks.length === 0 || this.taskId > -1) {\n      return;\n    }\n\n    const ww = (<IPoorManIdleCallback><any>self);\n    if (ww.requestIdleCallback) {\n      this.taskId = ww.requestIdleCallback(this.runTasks);\n    } else {\n      this.taskId = self.setTimeout(this.runTasks, 1);\n    }\n  }\n\n  /**\n   * pushes a task with multi hops using an iterator\n   * @param id task id\n   * @param it iterator to execute\n   */\n  pushMulti<T>(id: string, it: Iterator<T | PromiseLike<T> | null>, abortAble = true): IAbortAblePromise<T> {\n    // abort task with the same id\n    const abort = () => {\n      const index = this.tasks.findIndex((d) => d.id === id);\n      if (index < 0) {\n        return; // too late or none\n      }\n      const task = this.tasks[index];\n      this.tasks.splice(index, 1);\n\n      task.isAborted = true;\n      task.resolve(ABORTED);\n    };\n\n    {\n      // abort existing\n      const index = this.tasks.findIndex((d) => d.id === id);\n      if (index >= 0) {\n        const task = this.tasks[index];\n        task.abort();\n      }\n    }\n\n    let resolve: (value: T | symbol) => void;\n\n    const p = new Promise<T | symbol>((r) => {\n      // called during constructor\n      resolve = r;\n    });\n\n    const task: ITask<T> = {\n      id,\n      it,\n      result: p,\n      abort,\n      isAborted: false,\n      resolve: resolve!\n    };\n    const isAborted = () => task.isAborted;\n\n    this.tasks.push(task);\n\n    this.reSchedule();\n\n    const abortOrDummy = abortAble ? abort : () => undefined;\n    const isAbortedOrDummy = abortAble ? isAborted : () => false;\n\n    return {\n      then: thenFactory(p, abortOrDummy, isAbortedOrDummy),\n      abort: abortOrDummy,\n      isAborted: isAbortedOrDummy\n    };\n  }\n\n  /**\n   * pushes a simple task\n   * @param id task id\n   * @param calc task function\n   */\n  push<T>(id: string, calc: () => T | PromiseLike<T>): IAbortAblePromise<T> {\n    return this.pushMulti(id, oneShotIterator(calc));\n  }\n\n  /**\n   * abort a task with the given id\n   * @param id task id\n   */\n  abort(id: string) {\n    const index = this.tasks.findIndex((d) => d.id === id);\n    if (index < 0) {\n      return false; // too late or none\n    }\n    const task = this.tasks[index];\n    task.abort();\n    return true;\n  }\n\n  abortAll(filter: (task: ITask<any>) => boolean) {\n    const abort = this.tasks.filter(filter);\n    if (abort.length === 0) {\n      return;\n    }\n    this.tasks = this.tasks.filter((d) => !filter(d));\n    for (const task of abort) {\n      task.resolve(ABORTED);\n      task.abort();\n    }\n  }\n\n  clear() {\n    if (this.taskId === -1) {\n      return;\n    }\n    const ww = (<IPoorManIdleCallback><any>self);\n    if (ww.requestIdleCallback) {\n      ww.clearIdleCallback(this.taskId);\n    } else {\n      self.clearTimeout(this.taskId);\n    }\n    this.taskId = -1;\n\n    this.tasks.splice(0, this.tasks.length).forEach((d) => {\n      d.resolve(ABORTED);\n      d.abort();\n    });\n  }\n}\n","import {abortAbleAll, IAbortAblePromise} from 'lineupengine';\nimport {ANOTHER_ROUND} from '../internal/scheduler';\nimport {IForEachAble, lazySeq, boxplotBuilder, categoricalStatsBuilder, categoricalValueCacheBuilder, dateStatsBuilder, dateValueCacheBuilder, IAdvancedBoxPlotData, ICategoricalStatistics, IDateStatistics, IStatistics, normalizedStatsBuilder, dateValueCache2Value, categoricalValueCache2Value, joinIndexArrays, IBuilder, ISequence} from '../internal';\nimport {CategoricalColumn, Column, ICompareValue, DateColumn, ICategoricalLikeColumn, IDataRow, IDateColumn, IGroup, ImpositionCompositeColumn, IndicesArray, INumberColumn, NumberColumn, OrdinalColumn, Ranking, UIntTypedArray, ICategory} from '../model';\nimport {IRenderTask, IRenderTasks} from '../renderer';\nimport {CompareLookup} from './sort';\n\n\n/**\n * a render task that is already resolved\n */\nexport class TaskNow<T> implements IRenderTask<T> {\n  constructor(public readonly v: T) {\n\n  }\n\n  then<U = void>(onfullfilled: (value: T) => U) {\n    return onfullfilled(this.v);\n  }\n}\n\n/**\n * factory function for\n */\nexport function taskNow<T>(v: T) {\n  return new TaskNow(v);\n}\n\n/**\n * a render task based on an abortable promise\n */\nexport class TaskLater<T> implements IRenderTask<T> {\n  constructor(public readonly v: IAbortAblePromise<T>) {\n\n  }\n\n  then<U = void>(onfullfilled: (value: T | symbol) => U): IAbortAblePromise<U> {\n    return this.v.then(onfullfilled);\n  }\n}\n\nexport function taskLater<T>(v: IAbortAblePromise<T>) {\n  return new TaskLater(v);\n}\n\n/**\n * similar to Promise.all\n */\nexport function tasksAll<T>(tasks: IRenderTask<T>[]): IRenderTask<T[]> {\n  if (tasks.every((t) => t instanceof TaskNow)) {\n    return taskNow(tasks.map((d) => (<TaskNow<T>>d).v));\n  }\n  return taskLater(abortAbleAll((<(TaskNow<T> | TaskLater<T>)[]>tasks).map((d) => d.v)));\n}\n\n\n\nexport interface IRenderTaskExectutor extends IRenderTasks {\n  setData(data: IDataRow[]): void;\n\n  dirtyColumn(col: Column, type: 'data' | 'summary' | 'group'): void;\n  dirtyRanking(ranking: Ranking, type: 'data' | 'summary' | 'group'): void;\n\n  groupCompare(ranking: Ranking, group: IGroup, rows: IndicesArray): IRenderTask<ICompareValue[]>;\n\n  preCompute(ranking: Ranking, groups: {rows: IndicesArray, group: IGroup}[], maxDataIndex: number): void;\n  preComputeCol(col: Column): void;\n  preComputeData(ranking: Ranking): void;\n  copyData2Summary(ranking: Ranking): void;\n  copyCache(col: Column, from: Column): void;\n\n  sort(ranking: Ranking, group: IGroup, indices: IndicesArray, singleCall: boolean, maxDataIndex: number, lookups?: CompareLookup): Promise<IndicesArray>;\n\n  terminate(): void;\n\n  valueCache(col: Column): undefined | ((dataIndex: number) => any);\n}\n\nexport class MultiIndices {\n  private _joined: IndicesArray | null = null;\n\n  constructor(public readonly indices: IndicesArray[], private readonly maxDataIndex: number) {\n\n  }\n\n  get joined() {\n    if (this.indices.length === 1) {\n      return this.indices[0];\n    }\n    if (this.indices.length === 0) {\n      return new Uint8Array(0);\n    }\n    if (this._joined) {\n      return this._joined;\n    }\n    return this._joined = joinIndexArrays(this.indices, this.maxDataIndex);\n  }\n}\n\n/**\n * number of data points to build per iteration / chunk\n */\nconst CHUNK_SIZE = 100;\n\n\nexport class ARenderTasks {\n  protected readonly valueCacheData = new Map<string, Float32Array | UIntTypedArray | Int32Array | Float64Array>();\n\n  protected readonly byIndex = (i: number) => this.data[i];\n\n  constructor(protected data: IDataRow[] = []) {\n\n  }\n\n\n  protected byOrder(indices: IndicesArray): ISequence<IDataRow> {\n    return lazySeq(indices).map(this.byIndex);\n  }\n\n  protected byOrderAcc<T>(indices: IndicesArray, acc: (row: IDataRow) => T) {\n    return lazySeq(indices).map((i) => acc(this.data[i]));\n  }\n\n  /**\n   * builder factory to create an iterator that can be used to schedule\n   * @param builder the builder to use\n   * @param order the order to iterate over\n   * @param acc the accessor to get the value out of the data\n   * @param build optional build mapper\n   */\n  private builder<T, BR, B extends {push: (v: T) => void, build: () => BR}, R = BR>(builder: B, order: IndicesArray | null | MultiIndices, acc: (dataIndex: number) => T, build?: (r: BR) => R): Iterator<R | null> {\n    let i = 0;\n\n    // no indices given over the whole data\n    const nextData = (currentChunkSize: number = CHUNK_SIZE) => {\n      let chunkCounter = currentChunkSize;\n      const data = this.data;\n      for (; i < data.length && chunkCounter > 0; ++i, --chunkCounter) {\n        builder.push(acc(i));\n      }\n      if (i < data.length) { // need another round\n        return ANOTHER_ROUND;\n      }\n      // done\n      return {\n        done: true,\n        value: build ? build(builder.build()) : <R><any>builder.build()\n      };\n    };\n\n    let o = 0;\n    const orders = order instanceof MultiIndices ? order.indices : [order];\n\n    const nextOrder = (currentChunkSize: number = CHUNK_SIZE) => {\n      let chunkCounter = currentChunkSize;\n\n      while (o < orders.length) {\n        const actOrder = orders[o]!;\n        for (; i < actOrder.length && chunkCounter > 0; ++i, --chunkCounter) {\n          builder.push(acc(actOrder[i]));\n        }\n        if (i < actOrder.length) { // need another round\n          return ANOTHER_ROUND;\n        }\n        // done with this order\n        o++;\n        i = 0;\n      }\n      return {\n        done: true,\n        value: build ? build(builder.build()) : <R><any>builder.build()\n      };\n    };\n    return {next: order == null ? nextData : nextOrder};\n  }\n\n  private builderForEach<T, BR, B extends {pushAll: (v: IForEachAble<T>) => void, build: () => BR}, R = BR>(builder: B, order: IndicesArray | null | MultiIndices, acc: (dataIndex: number) => IForEachAble<T>, build?: (r: BR) => R): Iterator<R | null> {\n    return this.builder({\n      push: builder.pushAll,\n      build: builder.build\n    }, order, acc, build);\n  }\n\n  protected boxplotBuilder<R = IAdvancedBoxPlotData>(order: IndicesArray | null | MultiIndices, col: INumberColumn, raw?: boolean, build?: (stat: IAdvancedBoxPlotData) => R) {\n    const b = boxplotBuilder();\n    return this.numberStatsBuilder(b, order, col, raw, build);\n  }\n\n  protected normalizedStatsBuilder<R = IStatistics>(order: IndicesArray | null | MultiIndices, col: INumberColumn, numberOfBins: number, raw?: boolean, build?: (stat: IStatistics) => R) {\n    const b = normalizedStatsBuilder(numberOfBins);\n    return this.numberStatsBuilder(b, order, col, raw, build);\n  }\n\n  private numberStatsBuilder<R, B extends IBuilder<number, BR>, BR>(b: B, order: IndicesArray | null | MultiIndices, col: INumberColumn, raw?: boolean, build?: (stat: BR) => R) {\n    if (col instanceof NumberColumn || col instanceof OrdinalColumn || col instanceof ImpositionCompositeColumn) {\n      const key = raw ? `${col.id}:r` : col.id;\n      const dacc: (i: number) => number = raw ? (i) => col.getRawNumber(this.data[i]) : (i) => col.getNumber(this.data[i]);\n\n      if (order == null && !this.valueCacheData.has(key)) {\n        // build and valueCache\n        const vs = new Float32Array(this.data.length);\n        let i = 0;\n        return this.builder({\n          push: (v) => {\n            b.push(v);\n            vs[i++] = v;\n          },\n          build: () => {\n            this.setValueCacheData(key, vs);\n            return b.build();\n          }\n        }, null, dacc, build);\n      }\n\n      const cache = this.valueCacheData.get(key);\n      const acc: (i: number) => number = cache ? (i) => cache[i] : dacc;\n      return this.builder(b, order, acc, build);\n    }\n    const acc: (i: number) => IForEachAble<number> = raw ? (i) => col.iterRawNumber(this.data[i]) : (i) => col.iterNumber(this.data[i]);\n    return this.builderForEach(b, order, acc, build);\n  }\n\n  protected dateStatsBuilder<R = IDateStatistics>(order: IndicesArray | null | MultiIndices, col: IDateColumn, template?: IDateStatistics, build?: (stat: IDateStatistics) => R) {\n    const b = dateStatsBuilder(template);\n    if (col instanceof DateColumn) {\n      if (order == null) {\n        // build and valueCache\n        const vs = dateValueCacheBuilder(this.data.length);\n        return this.builder({\n          push: (v) => {\n            b.push(v);\n            vs.push(v);\n          },\n          build: () => {\n            this.setValueCacheData(col.id, vs.cache);\n            return b.build();\n          }\n        }, null, (i: number) => col.getDate(this.data[i]), build);\n      }\n      const cache = this.valueCacheData.get(col.id);\n      const acc: (i: number) => Date | null = cache ? (i) => dateValueCache2Value(cache[i]) : (i) => col.getDate(this.data[i]);\n      return this.builder(b, order, acc, build);\n    }\n    return this.builderForEach(b, order, (i: number) => col.iterDate(this.data[i]), build);\n  }\n\n  protected categoricalStatsBuilder<R = ICategoricalStatistics>(order: IndicesArray | null | MultiIndices, col: ICategoricalLikeColumn, build?: (stat: ICategoricalStatistics) => R) {\n    const b = categoricalStatsBuilder(col.categories);\n    if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\n      if (order == null) {\n        // build and valueCache\n        const vs = categoricalValueCacheBuilder(this.data.length, col.categories);\n        return this.builder({\n          push: (v) => {\n            b.push(v);\n            vs.push(v);\n          },\n          build: () => {\n            this.setValueCacheData(col.id, vs.cache);\n            return b.build();\n          }\n        }, null, (i: number) => col.getCategory(this.data[i]), build);\n      }\n      const cache = this.valueCacheData.get(col.id);\n      const acc: (i: number) => ICategory | null = cache ? (i) => categoricalValueCache2Value(cache[i], col.categories) : (i) => col.getCategory(this.data[i]);\n      return this.builder(b, order, acc, build);\n    }\n    return this.builderForEach(b, order, (i: number) => col.iterCategory(this.data[i]), build);\n  }\n\n  dirtyColumn(col: Column, type: 'data' | 'summary' | 'group') {\n    if (type !== 'data') {\n      return;\n    }\n    this.valueCacheData.delete(col.id);\n    this.valueCacheData.delete(`${col.id}:r`);\n  }\n\n  protected setValueCacheData(key: string, value: Float32Array | UIntTypedArray | Int32Array | Float64Array | null) {\n    if (value == null) {\n      this.valueCacheData.delete(key);\n    } else {\n      this.valueCacheData.set(key, value);\n    }\n  }\n\n  valueCache(col: Column) {\n    const v = this.valueCacheData.get(col.id);\n    if (!v) {\n      return undefined;\n    }\n    if (col instanceof DateColumn) {\n      return (dataIndex: number) => dateValueCache2Value(v[dataIndex]);\n    }\n    if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\n      return (dataIndex: number) => categoricalValueCache2Value(v[dataIndex], col.categories);\n    }\n    return (dataIndex: number) => v[dataIndex];\n  }\n}\n","import Column, {IDataRow, Ranking, IndicesArray, IGroup, IOrderedGroup, INumberColumn, IDateColumn, ICategoricalLikeColumn, ICompareValue} from '../model';\nimport {ARenderTasks, IRenderTaskExectutor, taskNow} from './tasks';\nimport {ISequence, toIndexArray, sortComplex, getNumberOfBins} from '../internal';\nimport {CompareLookup} from './sort';\nimport {IRenderTask} from '..';\n\n/**\n * @internal\n */\nexport function sortDirect(indices: IndicesArray, maxDataIndex: number, lookups?: CompareLookup) {\n  const order = toIndexArray(indices, maxDataIndex);\n  if (lookups) {\n    sortComplex(order, lookups.sortOrders);\n  }\n  return order;\n}\n\n/**\n * @internal\n */\nexport class DirectRenderTasks extends ARenderTasks implements IRenderTaskExectutor {\n\n  protected readonly cache = new Map<string, any>();\n\n  setData(data: IDataRow[]) {\n    this.data = data;\n    this.cache.clear();\n    this.valueCacheData.clear();\n  }\n\n\n  dirtyColumn(col: Column, type: 'data' | 'summary' | 'group') {\n    super.dirtyColumn(col, type);\n\n    if (type === 'group') {\n      return; // not cached\n    }\n    this.cache.delete(`${col.id}:summary`);\n    this.cache.delete(`${col.id}:summary:raw`);\n    this.cache.delete(`${col.id}:summary:b`);\n    this.cache.delete(`${col.id}:summary:braw`);\n\n    if (type === 'summary') {\n      return;\n    }\n    this.cache.delete(`${col.id}:data`);\n    this.cache.delete(`${col.id}:data:raw`);\n    this.cache.delete(`${col.id}:data:b`);\n    this.cache.delete(`${col.id}:data:braw`);\n  }\n\n  dirtyRanking(ranking: Ranking, type: 'data' | 'summary' | 'group') {\n    for (const col of ranking.flatColumns) {\n      this.dirtyColumn(col, type);\n    }\n  }\n\n  preCompute() {\n    // dummy\n  }\n\n  preComputeData() {\n    // dummy\n  }\n\n  preComputeCol() {\n    // dummy\n  }\n\n  copyData2Summary() {\n    // dummy\n  }\n\n  copyCache(col: Column, from: Column) {\n    const fromPrefix = `${from.id}:`;\n\n    for (const key of Array.from(this.cache.keys()).sort()) {\n      if (!key.startsWith(fromPrefix)) {\n        continue;\n      }\n      const tkey = `${col.id}:${key.slice(fromPrefix.length)}`;\n      this.cache.set(tkey, this.cache.get(key)!);\n    }\n  }\n\n  sort(_ranking: Ranking, _group: IGroup, indices: IndicesArray, _singleCall: boolean, maxDataIndex: number, lookups?: CompareLookup) {\n    return Promise.resolve(sortDirect(indices, maxDataIndex, lookups));\n  }\n\n  groupCompare(ranking: Ranking, group: IGroup, rows: IndicesArray): IRenderTask<ICompareValue[]> {\n    const rg = ranking.getGroupSortCriteria();\n    if (rg.length === 0) {\n      return taskNow([group.name.toLowerCase()]);\n    }\n    const o = this.byOrder(rows);\n    const vs: ICompareValue[] = [];\n    for (const s of rg) {\n      const r = s.col.toCompareGroupValue(o, group);\n      if (Array.isArray(r)) {\n        vs.push(...r);\n      } else {\n        vs.push(r);\n      }\n    }\n    vs.push(group.name.toLowerCase());\n    return taskNow(vs);\n  }\n\n  groupRows<T>(_col: Column, group: IOrderedGroup, _key: string, compute: (rows: ISequence<IDataRow>) => T): IRenderTask<T> {\n    return taskNow(compute(this.byOrder(group.order)));\n  }\n\n  groupExampleRows<T>(_col: Column, group: IOrderedGroup, _key: string, compute: (rows: ISequence<IDataRow>) => T): IRenderTask<T> {\n    return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\n  }\n\n  groupBoxPlotStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean) {\n    const {summary, data} = this.summaryBoxPlotStatsD(col, raw);\n    return taskNow({group: this.boxplotBuilder(group.order, col, raw).next(Infinity).value!, summary, data});\n  }\n\n  groupNumberStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean) {\n    const {summary, data} = this.summaryNumberStatsD(col, raw);\n    return taskNow({group: this.normalizedStatsBuilder(group.order, col, summary.hist.length, raw).next(Infinity).value!, summary, data});\n  }\n\n  groupCategoricalStats(col: Column & ICategoricalLikeColumn, group: IOrderedGroup) {\n    const {summary, data} = this.summaryCategoricalStatsD(col);\n    return taskNow({group: this.categoricalStatsBuilder(group.order, col).next(Infinity).value!, summary, data});\n  }\n\n  groupDateStats(col: Column & IDateColumn, group: IOrderedGroup) {\n    const {summary, data} = this.summaryDateStatsD(col);\n    return taskNow({group: this.dateStatsBuilder(group.order, col, summary).next(Infinity).value!, summary, data});\n  }\n\n  summaryBoxPlotStats(col: Column & INumberColumn, raw?: boolean) {\n    return taskNow(this.summaryBoxPlotStatsD(col, raw));\n  }\n\n  summaryNumberStats(col: Column & INumberColumn, raw?: boolean) {\n    return taskNow(this.summaryNumberStatsD(col, raw));\n  }\n\n  summaryCategoricalStats(col: Column & ICategoricalLikeColumn) {\n    return taskNow(this.summaryCategoricalStatsD(col));\n  }\n\n  summaryDateStats(col: Column & IDateColumn) {\n    return taskNow(this.summaryDateStatsD(col));\n  }\n\n  private summaryNumberStatsD(col: Column & INumberColumn, raw?: boolean) {\n    return this.cached('summary', col, () => {\n      const ranking = col.findMyRanker()!.getOrder();\n      const data = this.dataNumberStats(col, raw);\n      return {summary: this.normalizedStatsBuilder(ranking, col, data.hist.length, raw).next(Infinity).value!, data};\n    }, raw ? ':raw' : '', col.findMyRanker()!.getOrderLength() === 0);\n  }\n\n  private summaryBoxPlotStatsD(col: Column & INumberColumn, raw?: boolean) {\n    return this.cached('summary', col, () => {\n      const ranking = col.findMyRanker()!.getOrder();\n      const data = this.dataBoxPlotStats(col, raw);\n      return {summary: this.boxplotBuilder(ranking, col, raw).next(Infinity).value!, data};\n    }, raw ? ':braw' : ':b' , col.findMyRanker()!.getOrderLength() === 0);\n  }\n\n  private summaryCategoricalStatsD(col: Column & ICategoricalLikeColumn) {\n    return this.cached('summary', col, () => {\n      const ranking = col.findMyRanker()!.getOrder();\n      const data = this.dataCategoricalStats(col);\n      return {summary: this.categoricalStatsBuilder(ranking, col).next(Infinity).value!, data};\n    }, '', col.findMyRanker()!.getOrderLength() === 0);\n  }\n\n  private summaryDateStatsD(col: Column & IDateColumn) {\n    return this.cached('summary', col, () => {\n      const ranking = col.findMyRanker()!.getOrder();\n      const data = this.dataDateStats(col);\n      return {summary: this.dateStatsBuilder(ranking, col, data).next(Infinity).value!, data};\n    }, '', col.findMyRanker()!.getOrderLength() === 0);\n  }\n\n  private cached<T>(prefix: string, col: Column, creator: () => T, suffix: string = '', dontCache = false): T {\n    const key = `${col.id}:${prefix}${suffix}`;\n    if (this.cache.has(key)) {\n      return this.cache.get(key)!;\n    }\n    const s = creator();\n    if (!dontCache) {\n      this.cache.set(key, s);\n    }\n    return s;\n  }\n\n  dataBoxPlotStats(col: Column & INumberColumn, raw?: boolean) {\n    return this.cached('data', col, () => this.boxplotBuilder(null, col, raw).next(Infinity).value!, raw ? ':braw' : ':b');\n  }\n\n  dataNumberStats(col: Column & INumberColumn, raw?: boolean) {\n    return this.cached('data', col, () => this.normalizedStatsBuilder(null, col, getNumberOfBins(this.data.length), raw).next(Infinity).value!, raw ? ':raw' : '');\n  }\n\n  dataCategoricalStats(col: Column & ICategoricalLikeColumn) {\n    return this.cached('data', col, () => this.categoricalStatsBuilder(null, col).next(Infinity).value!);\n  }\n\n  dataDateStats(col: Column & IDateColumn) {\n    return this.cached('data', col, () => this.dateStatsBuilder(null, col).next(Infinity).value!);\n  }\n\n  terminate() {\n    this.cache.clear();\n  }\n}\n\n\n","import Column from './Column';\nimport {IDataRow, IColumnDesc} from './interfaces';\n\n\nexport interface IArrayDesc {\n  dataLength?: number;\n  labels?: string[];\n}\n\nexport interface IKeyValue<T> {\n  key: string;\n  value: T;\n}\n\nexport interface IMapColumn<T> extends Column {\n  getMap(row: IDataRow): IKeyValue<T>[];\n\n  getMapLabel(row: IDataRow): IKeyValue<string>[];\n}\n\nexport function isMapColumn(col: Column): col is IMapColumn<any>;\nexport function isMapColumn(col: IColumnDesc): boolean;\nexport function isMapColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<IMapColumn<any>>col).getMap === 'function' && typeof (<IMapColumn<any>>col).getMapLabel === 'function') || (!(col instanceof Column) && (<IColumnDesc>col).type.endsWith('Map'));\n}\n\nexport interface IArrayColumn<T> extends IMapColumn<T> {\n  readonly labels: string[];\n  readonly dataLength: number | null;\n\n  getLabels(row: IDataRow): string[];\n\n  getValues(row: IDataRow): T[];\n}\n\nexport function isArrayColumn(col: Column): col is IArrayColumn<any>;\nexport function isArrayColumn(col: IColumnDesc): col is IArrayDesc & IColumnDesc;\nexport function isArrayColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<IArrayColumn<any>>col).getLabels === 'function' && typeof (<IArrayColumn<any>>col).getValues === 'function' && isMapColumn(col) || (!(col instanceof Column) && (<IColumnDesc>col).type.endsWith('s') && (<IColumnDesc>col).type !== 'actions'));\n}\n","import {IForEachAble} from '../internal';\nimport Column from './Column';\nimport {IArrayColumn, isArrayColumn} from './IArrayColumn';\nimport {IValueColumnDesc, IColumnDesc, IDataRow, ITypedDump} from './interfaces';\n\nexport interface ICategoricalDesc {\n  categories: (string | Partial<ICategory>)[];\n}\n\nexport declare type ICategoricalColumnDesc = IValueColumnDesc<string> & ICategoricalDesc;\n\nexport interface ICategoricalColorMappingFunction {\n  apply(v: ICategory): string;\n\n  toJSON(): ITypedDump | null;\n\n  clone(): ICategoricalColorMappingFunction;\n\n  eq(other: ICategoricalColorMappingFunction): boolean;\n}\n\nexport interface ICategoricalColorMappingFunctionConstructor {\n  new(dump: ITypedDump): ICategoricalColorMappingFunction;\n}\n\nexport interface ICategoricalLikeColumn extends Column {\n  readonly categories: ICategory[];\n\n  getColorMapping(): ICategoricalColorMappingFunction;\n  setColorMapping(mapping: ICategoricalColorMappingFunction): void;\n\n  iterCategory(row: IDataRow): IForEachAble<ICategory | null>;\n\n  getCategories(row: IDataRow): (ICategory | null)[];\n}\n\nexport function isCategoricalLikeColumn(col: Column): col is ICategoricalLikeColumn {\n  return typeof (<ICategoricalLikeColumn>col).categories !== 'undefined' && typeof (<ICategoricalLikeColumn>col).iterCategory === 'function';\n}\n\nexport interface ISetColumn extends IArrayColumn<boolean>, ICategoricalLikeColumn {\n  getSet(row: IDataRow): Set<ICategory>;\n}\n\nexport function isSetColumn(col: Column): col is ISetColumn {\n  return isCategoricalLikeColumn(col) && typeof (<ISetColumn>col).getSet === 'function';\n}\n\nexport interface ICategoricalColumn extends ISetColumn {\n  getCategory(row: IDataRow): ICategory | null;\n}\n\nexport interface ICategory {\n  readonly name: string;\n\n  /**\n   * optional label of this category (the one to render)\n   */\n  readonly label: string;\n  /**\n   * category color\n   * @default next in d3 color 10 range\n   */\n  readonly color: string;\n\n  value: number;\n}\n/**\n * checks whether the given column or description is a categorical column, i.e. the value is a list of categories\n * @param col\n * @returns {boolean}\n */\nexport function isCategoricalColumn(col: Column): col is ICategoricalColumn;\nexport function isCategoricalColumn(col: IColumnDesc): col is ICategoricalColumnDesc & IColumnDesc;\nexport function isCategoricalColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<ICategoricalColumn>col).getCategory === 'function' || (!(col instanceof Column) && (<IColumnDesc>col).type.match(/(categorical|ordinal|hierarchy)/) != null));\n}\n\nexport declare type ICategoricalsColumn = ICategoricalLikeColumn & IArrayColumn<string | null>;\n\nexport function isCategoricalsColumn(col: Column): col is ICategoricalsColumn {\n  return isCategoricalLikeColumn(col) && isArrayColumn(col) && !isSetColumn(col);\n}\n\n\nexport interface ICategoricalFilter {\n  filter: string[] | string | RegExp;\n  filterMissing: boolean;\n}\n\nexport interface ISetCategoricalFilter extends ICategoricalFilter {\n  mode?: 'every' | 'some';\n}\n\nexport function isCategory(v: any): v is ICategory {\n  return typeof v.name === 'string' && typeof v.label === 'string' && typeof v.color === 'string' && typeof v.value === 'number';\n}\n","import {IForEachAble} from '../internal';\nimport Column from './Column';\nimport {IColumnDesc, IDataRow} from './interfaces';\nimport {INumberFilter} from './INumberColumn';\nimport {IArrayColumn} from './IArrayColumn';\n\nexport interface IDateColumn extends Column {\n  getFormatter(): (v: Date | null) => string;\n\n  getDate(row: IDataRow): Date | null;\n\n  iterDate(row: IDataRow): IForEachAble<Date | null>;\n\n  getFilter(): IDateFilter;\n  setFilter(value: IDateFilter | null): void;\n}\n\nexport interface IDatesColumn extends IDateColumn, IArrayColumn<Date | null> {\n  getDates(row: IDataRow): (Date | null)[];\n}\n\nexport interface IDateDesc {\n  /**\n   * d3 formatting option\n   * @default %x\n   */\n  dateFormat?: string;\n\n  /**\n   * d3 formation option\n   * @dfeault dateFormat\n   */\n  dateParse?: string;\n}\n\n\n/**\n * checks whether the given column or description is a date column, i.e. the value is a date\n * @param col\n * @returns {boolean}\n */\nexport function isDateColumn(col: Column): col is IDateColumn;\nexport function isDateColumn(col: IColumnDesc): col is IDateDesc & IColumnDesc;\nexport function isDateColumn(col: Column | IColumnDesc) {\n  return (col instanceof Column && typeof (<IDateColumn>col).getDate === 'function' || (!(col instanceof Column) && (<IColumnDesc>col).type.startsWith('date')));\n}\n\nexport function isDatesColumn(col: Column): col is IDatesColumn {\n  return typeof (<IDatesColumn>col).getDates === 'function';\n}\n\nexport declare type IDateFilter = INumberFilter;\n\nexport declare type IDateGranularity = 'century' | 'decade' | 'year' | 'month' | 'week' | 'day_of_week' | 'day_of_month' | 'day_of_year' | 'hour' | 'minute' | 'second';\n\nexport interface IDateGrouper {\n  /**\n   * granuality level for the grouping\n   */\n  granularity: IDateGranularity;\n  /**\n   * whether circular occurrences should be in the same bin\n   * e.g. granularity = month\n   * circular: 01.2018 == 01.2017\n   * not circular: 01.2018 != 01.2017\n   */\n  circular: boolean;\n}\n","import {abortAble} from 'lineupengine';\nimport {getNumberOfBins, IAdvancedBoxPlotData, ICategoricalStatistics, IDateStatistics, ISequence, ISortMessageResponse, IStatistics, lazySeq, toIndexArray, WorkerTaskScheduler, createWorkerBlob} from '../internal';\nimport TaskScheduler, {ABORTED, oneShotIterator} from '../internal/scheduler';\nimport Column, {ICategoricalLikeColumn, ICompareValue, IDataRow, IDateColumn, IGroup, IndicesArray, INumberColumn, IOrderedGroup, isCategoricalLikeColumn, isDateColumn, isNumberColumn, Ranking, UIntTypedArray} from '../model';\nimport {IRenderTask} from '../renderer';\nimport {sortDirect} from './DirectRenderTasks';\nimport {CompareLookup} from './sort';\nimport {ARenderTasks, IRenderTaskExectutor, MultiIndices, taskLater, TaskLater, taskNow, TaskNow} from './tasks';\n\nexport class ScheduleRenderTasks extends ARenderTasks implements IRenderTaskExectutor {\n\n  private readonly cache = new Map<string, IRenderTask<any>>();\n  private readonly tasks = new TaskScheduler();\n  private readonly workers = new WorkerTaskScheduler(createWorkerBlob());\n\n  setData(data: IDataRow[]) {\n    this.data = data;\n    this.cache.clear();\n    this.tasks.clear();\n    this.valueCacheData.clear();\n    this.workers.deleteRefs();\n  }\n\n  dirtyColumn(col: Column, type: 'data' | 'group' | 'summary') {\n    super.dirtyColumn(col, type);\n    // order designed such that first groups, then summaries, then data is deleted\n\n    for (const key of Array.from(this.cache.keys()).sort()) {\n      // data = all\n      // summary = summary + group\n      // group = group only\n      if ((type === 'data' && key.startsWith(`${col.id}:`) ||\n        (type === 'summary' && key.startsWith(`${col.id}:b:summary:`)) ||\n        (key.startsWith(`${col.id}:a:group`)))) {\n        this.cache.delete(key);\n        this.tasks.abort(key);\n      }\n    }\n\n    if (type !== 'data') {\n      return;\n    }\n\n    this.valueCacheData.delete(col.id);\n    this.workers.deleteRef(col.id);\n  }\n\n  dirtyRanking(ranking: Ranking, type: 'data' | 'group' | 'summary') {\n    const cols = ranking.flatColumns;\n\n    let checker: ((key: string) => boolean)[];\n    switch (type) {\n      case 'group':\n        checker = cols.map((col) => (key: string) => key.startsWith(`${col.id}:a:group`));\n        break;\n      case 'summary':\n        checker = cols.map((col) => (key: string) => key.startsWith(`${col.id}:b:summary`) || key.startsWith(`${col.id}:a:group`));\n        break;\n      case 'data':\n      default:\n        checker = cols.map((col) => (key: string) => key.startsWith(`${col.id}:`));\n        break;\n    }\n    for (const key of Array.from(this.cache.keys()).sort()) {\n      if (checker.some((f) => f(key))) {\n        this.cache.delete(key);\n        this.tasks.abort(key);\n      }\n    }\n    // group compare tasks\n    this.tasks.abortAll((t) => t.id.startsWith(`r${ranking.id}:`));\n\n    // delete remote caches\n    this.workers.deleteRef(ranking.id, true);\n\n    if (type !== 'data') {\n      return;\n    }\n\n    for (const col of cols) {\n      super.dirtyColumn(col, type);\n      this.workers.deleteRef(col.id);\n    }\n  }\n\n  preCompute(ranking: Ranking, groups: {rows: IndicesArray, group: IGroup}[], maxDataIndex: number) {\n    if (groups.length === 0) {\n      return;\n    }\n    const cols = ranking.flatColumns;\n    if (groups.length === 1) {\n      const {group, rows} = groups[0];\n      const multi = new MultiIndices([rows], maxDataIndex);\n      for (const col of cols) {\n        if (isCategoricalLikeColumn(col)) {\n          this.summaryCategoricalStats(col, multi);\n        } else if (isNumberColumn(col)) {\n          this.summaryNumberStats(col, false, multi);\n          this.summaryNumberStats(col, true, multi);\n        } else if (isDateColumn(col)) {\n          this.summaryDateStats(col, multi);\n        } else {\n          continue;\n        }\n        // copy from summary to group and create proper structure\n        this.chainCopy(`${col.id}:a:group:${group.name}`, this.cache.get(`${col.id}:b:summary`)!, (v: {summary: any, data: any}) => ({group: v.summary, summary: v.summary, data: v.data}));\n        if (isNumberColumn(col)) {\n          this.chainCopy(`${col.id}:a:group:${group.name}:raw`, this.cache.get(`${col.id}:b:summary:raw`)!, (v: {summary: any, data: any}) => ({group: v.summary, summary: v.summary, data: v.data}));\n        }\n      }\n      return;\n    }\n\n    const ogroups = groups.map(({rows, group}) => Object.assign({order: rows}, group));\n    const full = new MultiIndices(groups.map((d) => d.rows), maxDataIndex);\n    for (const col of cols) {\n      if (isCategoricalLikeColumn(col)) {\n        this.summaryCategoricalStats(col, full);\n        for (const g of ogroups) {\n          this.groupCategoricalStats(col, g);\n        }\n      } else if (isDateColumn(col)) {\n        this.summaryDateStats(col, full);\n        for (const g of ogroups) {\n          this.groupDateStats(col, g);\n        }\n      } else if (isNumberColumn(col)) {\n        this.summaryNumberStats(col, false, full);\n        this.summaryNumberStats(col, true, full);\n        for (const g of ogroups) {\n          this.groupNumberStats(col, g, false);\n          this.groupNumberStats(col, g, true);\n        }\n      }\n    }\n  }\n\n  preComputeData(ranking: Ranking) {\n    for (const col of ranking.flatColumns) {\n      if (isCategoricalLikeColumn(col)) {\n        this.dataCategoricalStats(col);\n      } else if (isNumberColumn(col)) {\n        this.dataNumberStats(col, false);\n        this.dataNumberStats(col, true);\n      } else if (isDateColumn(col)) {\n        this.dataDateStats(col);\n      }\n    }\n  }\n\n  preComputeCol(col: Column) {\n    const ranking = col.findMyRanker();\n\n    if (isCategoricalLikeColumn(col)) {\n      this.dataCategoricalStats(col);\n      if (!ranking) {\n        return;\n      }\n      this.summaryCategoricalStats(col);\n      for (const group of ranking.getGroups()) {\n        this.groupCategoricalStats(col, group);\n      }\n      return;\n    }\n\n    if (isNumberColumn(col)) {\n      this.dataNumberStats(col, false);\n      this.dataNumberStats(col, true);\n\n      if (!ranking) {\n        return;\n      }\n      this.summaryNumberStats(col, false);\n      this.summaryNumberStats(col, true);\n      for (const group of ranking.getGroups()) {\n        this.groupNumberStats(col, group, false);\n        this.groupNumberStats(col, group, true);\n      }\n      return;\n    }\n\n    if (!isDateColumn(col)) {\n      return;\n    }\n\n    this.dataDateStats(col);\n\n    if (!ranking) {\n      return;\n    }\n    this.summaryDateStats(col);\n    for (const group of ranking.getGroups()) {\n      this.groupDateStats(col, group);\n    }\n  }\n\n  copyData2Summary(ranking: Ranking) {\n    for (const col of ranking.flatColumns) {\n      if (isCategoricalLikeColumn(col)) {\n        this.dataCategoricalStats(col);\n      } else if (isNumberColumn(col)) {\n        this.dataNumberStats(col, false);\n        this.dataNumberStats(col, true);\n      } else if (isDateColumn(col)) {\n        this.dataDateStats(col);\n      } else {\n        continue;\n      }\n      // copy from data to summary and create proper structure\n      this.chainCopy(`${col.id}:b:summary`, this.cache.get(`${col.id}:c:data`)!, (data: any) => ({summary: data, data}));\n      if (isNumberColumn(col)) {\n        this.chainCopy(`${col.id}:b:summary:raw`, this.cache.get(`${col.id}:c:data:raw`)!, (data: any) => ({summary: data, data}));\n      }\n    }\n  }\n\n  copyCache(col: Column, from: Column) {\n    const fromPrefix = `${from.id}:`;\n\n    for (const key of Array.from(this.cache.keys()).sort()) {\n      if (!key.startsWith(fromPrefix)) {\n        continue;\n      }\n      const tkey = `${col.id}:${key.slice(fromPrefix.length)}`;\n      this.chainCopy(tkey, this.cache.get(key)!, (data: any) => data);\n    }\n  }\n\n  groupCompare(ranking: Ranking, group: IGroup, rows: IndicesArray) {\n    return taskLater(this.tasks.push(`r${ranking.id}:${group.name}`, () => {\n      const rg = ranking.getGroupSortCriteria();\n      if (rg.length === 0) {\n        return [group.name.toLowerCase()];\n      }\n      const o = this.byOrder(rows);\n      const vs: ICompareValue[] = [];\n      for (const s of rg) {\n        const cache = this.valueCache(s.col);\n        const r = s.col.toCompareGroupValue(o, group, cache ? lazySeq(rows).map((d) => cache(d)) : undefined);\n        if (Array.isArray(r)) {\n          vs.push(...r);\n        } else {\n          vs.push(r);\n        }\n      }\n      vs.push(group.name.toLowerCase());\n      return vs;\n    }));\n  }\n\n  groupRows<T>(col: Column, group: IOrderedGroup, key: string, compute: (rows: ISequence<IDataRow>) => T) {\n    return this.cached(`${col.id}:a:group:${group.name}:${key}`, true, oneShotIterator(() => compute(this.byOrder(group.order))));\n  }\n\n  groupExampleRows<T>(_col: Column, group: IOrderedGroup, _key: string, compute: (rows: ISequence<IDataRow>) => T) {\n    return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\n  }\n\n  groupBoxPlotStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean) {\n    return this.chain(`${col.id}:a:group:${group.name}${raw ? ':braw' : ':b'}`, this.summaryBoxPlotStats(col, raw), ({summary, data}) => {\n      const ranking = col.findMyRanker()!;\n      const key = raw ? `${col.id}:r` : col.id;\n      if (this.valueCacheData.has(key) && group.order.length > 0) {\n        // web worker version\n        return () => this.workers.pushStats('boxplotStats', {}, key, <Float32Array>this.valueCacheData.get(key), `${ranking.id}:${group.name}`, group.order)\n          .then((group) => ({group, summary, data}));\n      }\n      return this.boxplotBuilder(group.order, col, raw, (group) => ({group, summary, data}));\n    });\n  }\n\n  groupNumberStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean) {\n    return this.chain(`${col.id}:a:group:${group.name}${raw ? ':raw' : ''}`, this.summaryNumberStats(col, raw), ({summary, data}) => {\n      const ranking = col.findMyRanker()!;\n      const key = raw ? `${col.id}:r` : col.id;\n      if (this.valueCacheData.has(key) && group.order.length > 0) {\n        // web worker version\n        return () => this.workers.pushStats('numberStats', {numberOfBins: summary.hist.length}, key, <Float32Array>this.valueCacheData.get(key), `${ranking.id}:${group.name}`, group.order)\n          .then((group) => ({group, summary, data}));\n      }\n      return this.normalizedStatsBuilder(group.order, col, summary.hist.length, raw, (group) => ({group, summary, data}));\n    });\n  }\n\n  groupCategoricalStats(col: Column & ICategoricalLikeColumn, group: IOrderedGroup) {\n    return this.chain(`${col.id}:a:group:${group.name}`, this.summaryCategoricalStats(col), ({summary, data}) => {\n      const ranking = col.findMyRanker()!;\n      if (this.valueCacheData.has(col.id) && group.order.length > 0) {\n        // web worker version\n        return () => this.workers.pushStats('categoricalStats', {categories: col.categories.map((d) => d.name)}, col.id, <UIntTypedArray>this.valueCacheData.get(col.id), `${ranking.id}:${group.name}`, group.order)\n          .then((group) => ({group, summary, data}));\n      }\n      return this.categoricalStatsBuilder(group.order, col, (group) => ({group, summary, data}));\n    });\n  }\n\n  groupDateStats(col: Column & IDateColumn, group: IOrderedGroup) {\n    const key = `${col.id}:a:group:${group.name}`;\n    return this.chain(key, this.summaryDateStats(col), ({summary, data}) => {\n      const ranking = col.findMyRanker()!;\n      if (this.valueCacheData.has(col.id) && group.order.length > 0) {\n        // web worker version\n        return () => this.workers.pushStats('dateStats', {template: summary}, col.id, <Float64Array>this.valueCacheData.get(col.id), `${ranking.id}:${group.name}`, group.order)\n          .then((group) => ({group, summary, data}));\n      }\n      return this.dateStatsBuilder(group.order, col, summary, (group) => ({group, summary, data}));\n    });\n  }\n\n  summaryBoxPlotStats(col: Column & INumberColumn, raw?: boolean, order?: MultiIndices) {\n    return this.chain(`${col.id}:b:summary${raw ? ':braw' : ':b'}`, this.dataBoxPlotStats(col, raw), (data) => {\n      const ranking = col.findMyRanker()!;\n      const key = raw ? `${col.id}:r` : col.id;\n      if (this.valueCacheData.has(key)) {\n        // web worker version\n        return () => this.workers.pushStats('boxplotStats', {}, key, <Float32Array>this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\n          .then((summary) => ({summary, data}));\n      }\n      return this.boxplotBuilder(order ? order : ranking.getOrder(), col, raw, (summary) => ({summary, data}));\n    });\n  }\n\n  summaryNumberStats(col: Column & INumberColumn, raw?: boolean, order?: MultiIndices) {\n    return this.chain(`${col.id}:b:summary${raw ? ':raw' : ''}`, this.dataNumberStats(col, raw), (data) => {\n      const ranking = col.findMyRanker()!;\n      const key = raw ? `${col.id}:r` : col.id;\n      if (this.valueCacheData.has(key)) {\n        // web worker version\n        return () => this.workers.pushStats('numberStats', {numberOfBins: data.hist.length}, key, <Float32Array>this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\n          .then((summary) => ({summary, data}));\n      }\n      return this.normalizedStatsBuilder(order ? order : ranking.getOrder(), col, data.hist.length, raw, (summary) => ({summary, data}));\n    });\n  }\n\n  summaryCategoricalStats(col: Column & ICategoricalLikeColumn, order?: MultiIndices) {\n    return this.chain(`${col.id}:b:summary`, this.dataCategoricalStats(col), (data) => {\n      const ranking = col.findMyRanker()!;\n      if (this.valueCacheData.has(col.id)) {\n        // web worker version\n        return () => this.workers.pushStats('categoricalStats', {categories: col.categories.map((d) => d.name)}, col.id, <UIntTypedArray>this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\n          .then((summary) => ({summary, data}));\n      }\n      return this.categoricalStatsBuilder(order ? order : ranking.getOrder(), col, (summary) => ({summary, data}));\n    });\n  }\n\n  summaryDateStats(col: Column & IDateColumn, order?: MultiIndices) {\n    return this.chain(`${col.id}:b:summary`, this.dataDateStats(col), (data) => {\n      const ranking = col.findMyRanker()!;\n      if (this.valueCacheData.has(col.id)) {\n        // web worker version\n        return () => this.workers.pushStats('dateStats', {template: data}, col.id, <Float64Array>this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\n          .then((summary) => ({summary, data}));\n      }\n      return this.dateStatsBuilder(order ? order : ranking.getOrder(), col, data, (summary) => ({summary, data}));\n    });\n  }\n\n  private cached<T>(key: string, canAbort: boolean, it: Iterator<T | null> | (() => Promise<T>)): IRenderTask<T> {\n    const dontCache = this.data.length === 0;\n\n    if (this.isValidCacheEntry(key) && !dontCache) {\n      return this.cache.get(key)!;\n    }\n\n    const task = typeof it === 'function' ? abortAble(it()) : this.tasks.pushMulti(key, it, canAbort);\n    const s = taskLater(task);\n    if (!dontCache) {\n      this.cache.set(key, s);\n    }\n    task.then((r) => {\n      if (this.cache.get(key) !== s) {\n        return;\n      }\n      if (typeof r === 'symbol') {\n        this.cache.delete(key);\n      } else {\n        this.cache.set(key, taskNow(r));\n      }\n    });\n    return s;\n  }\n\n  private chain<T, U>(key: string, task: IRenderTask<T>, creator: (data: T) => Iterator<U | null> | (() => Promise<U>)): IRenderTask<U> {\n    if (this.isValidCacheEntry(key)) {\n      return this.cache.get(key)!;\n    }\n    if (task instanceof TaskNow) {\n      if (typeof task.v === 'symbol') {\n        // aborted\n        return taskNow(ABORTED);\n      }\n      return this.cached(key, true, creator(task.v));\n    }\n\n    const v = (<TaskLater<T>>task).v;\n    const subTask = v.then((data) => {\n      if (typeof data === 'symbol') {\n        return ABORTED;\n      }\n      const created = creator(data);\n      if (typeof created === 'function') {\n        // promise\n        return created();\n      }\n      return this.tasks.pushMulti(key, created);\n    });\n    const s = taskLater(subTask);\n    this.cache.set(key, s);\n    subTask.then((r) => {\n      if (this.cache.get(key) !== s) {\n        return;\n      }\n      if (typeof r === 'symbol') {\n        this.cache.delete(key);\n      } else {\n        this.cache.set(key, taskNow(r));\n      }\n    });\n    return s;\n  }\n\n  private isValidCacheEntry(key: string) {\n    if (!this.cache.has(key)) {\n      return false;\n    }\n    const v = this.cache.get(key);\n    // not an aborted task\n    return !((v instanceof TaskNow) && typeof v.v === 'symbol') && !(v instanceof TaskLater && v.v.isAborted());\n  }\n\n  private chainCopy<T, U>(key: string, task: IRenderTask<T>, creator: (data: T) => U): IRenderTask<U> {\n    if (this.isValidCacheEntry(key)) {\n      return this.cache.get(key)!;\n    }\n    if (task instanceof TaskNow) {\n      if (typeof task.v === 'symbol') {\n        // aborted\n        return taskNow(ABORTED);\n      }\n      const subTask = taskNow(creator(task.v));\n      this.cache.set(key, subTask);\n      return subTask;\n    }\n\n    const v = (<TaskLater<T>>task).v;\n    const subTask = v.then((data) => {\n      if (typeof data === 'symbol') {\n        return ABORTED;\n      }\n      return creator(data);\n    });\n    const s = taskLater(subTask);\n    this.cache.set(key, s);\n    subTask.then((r) => {\n      if (this.cache.get(key) !== s) {\n        return;\n      }\n      if (typeof r === 'symbol') {\n        this.cache.delete(key);\n      } else {\n        this.cache.set(key, taskNow(r));\n      }\n    });\n    return s;\n  }\n\n  dataBoxPlotStats(col: Column & INumberColumn, raw?: boolean) {\n    const key = `${col.id}:c:data${raw ? ':braw' : ':b'}`;\n    const valueCacheKey = raw ? `${col.id}:r` : col.id;\n    if (this.valueCacheData.has(valueCacheKey) && this.data.length > 0) {\n      // use webworker\n      return this.cached(key, false, () => this.workers.pushStats('boxplotStats', {}, valueCacheKey, <Float32Array>this.valueCacheData.get(valueCacheKey)!));\n    }\n    return this.cached(key, false, this.boxplotBuilder<IAdvancedBoxPlotData>(null, col, raw));\n  }\n\n  dataNumberStats(col: Column & INumberColumn, raw?: boolean) {\n    return this.cached(`${col.id}:c:data${raw ? ':raw' : ''}`, false, this.normalizedStatsBuilder<IStatistics>(null, col, getNumberOfBins(this.data.length), raw));\n  }\n\n  dataCategoricalStats(col: Column & ICategoricalLikeColumn) {\n    return this.cached(`${col.id}:c:data`, false, this.categoricalStatsBuilder<ICategoricalStatistics>(null, col));\n  }\n\n  dataDateStats(col: Column & IDateColumn) {\n    return this.cached(`${col.id}:c:data`, false, this.dateStatsBuilder<IDateStatistics>(null, col));\n  }\n\n  sort(ranking: Ranking, group: IGroup, indices: IndicesArray, singleCall: boolean, maxDataIndex: number, lookups?: CompareLookup) {\n    if (!lookups || indices.length < 1000) {\n      // no thread needed\n      const order = sortDirect(indices, maxDataIndex, lookups);\n      return Promise.resolve(order);\n    }\n\n    const indexArray = toIndexArray(indices, maxDataIndex);\n    const toTransfer = [indexArray.buffer];\n\n    if (singleCall) {\n      // can transfer otherwise need to copy\n      toTransfer.push(...lookups.transferAbles);\n    }\n\n    return this.workers.push('sort', {\n      ref: `${ranking.id}:${group.name}`,\n      indices: indexArray,\n      sortOrders: lookups.sortOrders\n    }, toTransfer, (r: ISortMessageResponse) => r.order);\n  }\n\n  terminate() {\n    this.workers.terminate();\n    this.cache.clear();\n    this.valueCacheData.clear();\n  }\n}\n","import {IAbortAblePromise} from 'lineupengine';\nimport {Column, IDataRow, IOrderedGroup, INumberColumn, ICategoricalLikeColumn, IDateColumn} from '../model';\nimport {IDataProvider} from '../provider';\nimport DialogManager from '../ui/dialogs/DialogManager';\nimport {ISequence, IDateStatistics, ICategoricalStatistics, IAdvancedBoxPlotData, IStatistics} from '../internal';\n\n\nexport interface IImposer {\n  color?(row: IDataRow | null, valueHint?: number): string | null;\n}\n\nexport declare type IRenderCallback = (ctx: CanvasRenderingContext2D) => void;\n\n/**\n * a cell renderer for rendering a cell of specific column\n */\nexport interface ICellRenderer {\n  /**\n   * template as a basis for the update\n   */\n  readonly template: string;\n\n  /**\n   * update a given node (create using the template) with the given data\n   * @param node the node to update\n   * @param d the data item\n   * @param i the order relative index\n   * @param group the group this row is part of\n   */\n  update(node: HTMLElement, d: IDataRow, i: number, group: IOrderedGroup): void | IAbortAblePromise<void> | null;\n\n  /**\n   * render a low detail canvas row\n   * @return true if a dom element is needed\n   */\n  render?(ctx: CanvasRenderingContext2D, d: IDataRow, i: number, group: IOrderedGroup): void | IAbortAblePromise<IRenderCallback> | boolean | null;\n}\n\n/**\n * a cell renderer for rendering a cell of specific column\n */\nexport interface IGroupCellRenderer {\n  /**\n   * template as a basis for the update\n   */\n  readonly template: string;\n\n  /**\n   * update a given node (create using the template) with the given data\n   * @param node the node to update\n   * @param group the group to render\n   */\n  update(node: HTMLElement, group: IOrderedGroup): void | IAbortAblePromise<void> | null;\n}\n\nexport interface ISummaryRenderer {\n  /**\n   * template as a basis for the update\n   */\n  readonly template: string;\n\n  update(node: HTMLElement): void | IAbortAblePromise<void> | null;\n}\n\n\nexport interface IRenderTask<T> {\n  then<U = void>(onfullfilled: (value: T | symbol) => U): U | IAbortAblePromise<U>;\n}\n\nexport interface IRenderTasks {\n  groupRows<T>(col: Column, group: IOrderedGroup, key: string, compute: (rows: ISequence<IDataRow>) => T): IRenderTask<T>;\n  groupExampleRows<T>(col: Column, group: IOrderedGroup, key: string, compute: (rows: ISequence<IDataRow>) => T): IRenderTask<T>;\n\n  groupBoxPlotStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean): IRenderTask<{group: IAdvancedBoxPlotData, summary: IAdvancedBoxPlotData, data: IAdvancedBoxPlotData}>;\n  groupNumberStats(col: Column & INumberColumn, group: IOrderedGroup, raw?: boolean): IRenderTask<{group: IStatistics, summary: IStatistics, data: IStatistics}>;\n  groupCategoricalStats(col: Column & ICategoricalLikeColumn, group: IOrderedGroup): IRenderTask<{group: ICategoricalStatistics, summary: ICategoricalStatistics, data: ICategoricalStatistics}>;\n  groupDateStats(col: Column & IDateColumn, group: IOrderedGroup): IRenderTask<{group: IDateStatistics, summary: IDateStatistics, data: IDateStatistics}>;\n\n  summaryBoxPlotStats(col: Column & INumberColumn, raw?: boolean): IRenderTask<{summary: IAdvancedBoxPlotData, data: IAdvancedBoxPlotData}>;\n  summaryNumberStats(col: Column & INumberColumn, raw?: boolean): IRenderTask<{summary: IStatistics, data: IStatistics}>;\n  summaryCategoricalStats(col: Column & ICategoricalLikeColumn): IRenderTask<{summary: ICategoricalStatistics, data: ICategoricalStatistics}>;\n  summaryDateStats(col: Column & IDateColumn): IRenderTask<{summary: IDateStatistics, data: IDateStatistics}>;\n}\n\n/**\n * context for rendering, wrapped as an object for easy extensibility\n */\nexport interface IRenderContext {\n  readonly tasks: IRenderTasks;\n  /**\n   * render a column\n   * @param col\n   */\n  renderer(col: Column, imposer?: IImposer): ICellRenderer;\n\n  /**\n   * render a column\n   * @param col\n   */\n  groupRenderer(col: Column, imposer?: IImposer): IGroupCellRenderer;\n\n  summaryRenderer(co: Column, interactive: boolean, imposer?: IImposer): ISummaryRenderer;\n\n  /**\n   * prefix used for all generated id names\n   */\n  readonly idPrefix: string;\n\n  asElement(html: string): HTMLElement;\n\n  colWidth(col: Column): number;\n\n  readonly provider: IDataProvider;\n  readonly dialogManager: DialogManager;\n}\n\nexport enum ERenderMode {\n  CELL, GROUP, SUMMARY\n}\n\n\nexport interface ICellRendererFactory {\n  readonly title: string;\n  readonly groupTitle?: string;\n  readonly summaryTitle?: string;\n\n  canRender(col: Column, mode: ERenderMode): boolean;\n\n  create?(col: Column, context: IRenderContext, imposer?: IImposer): ICellRenderer;\n\n  createGroup?(col: Column, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer;\n\n  createSummary?(col: Column, context: IRenderContext, interactive: boolean, imposer?: IImposer): ISummaryRenderer;\n}\n","import {createIndexArray, sortComplex, ISequence, lazySeq, IEventContext} from '../internal';\nimport {Column, EDirtyReason, Ranking, defaultGroup, IColumnDesc, ICompareValue, IDataRow, IGroup, IndicesArray, INumberColumn, IOrderedGroup, CompositeColumn} from '../model';\nimport ACommonDataProvider from './ACommonDataProvider';\nimport ADataProvider from './ADataProvider';\nimport {IDataProviderOptions} from './interfaces';\nimport {CompareLookup} from './sort';\nimport {IRenderTaskExectutor} from './tasks';\nimport {DirectRenderTasks} from './DirectRenderTasks';\nimport {ScheduleRenderTasks} from './ScheduledTasks';\nimport {joinGroups, mapIndices, duplicateGroup} from '../model/internal';\n\n\nexport interface ILocalDataProviderOptions {\n  /**\n   * whether the filter should be applied to all rankings regardless where they are\n   * default: false\n   */\n  filterGlobally: boolean;\n  /**\n   * jump to search results such that they are visible\n   * default: false\n   */\n  jumpToSearchResult: boolean;\n\n  /**\n   * specify the task executor to use direct = no delay, scheduled = run when idle\n   */\n  taskExecutor: 'direct' | 'scheduled';\n}\n\ninterface ISortHelper {\n  group: IGroup;\n  rows: IndicesArray;\n}\n\n/**\n * a data provider based on an local array\n */\nexport default class LocalDataProvider extends ACommonDataProvider {\n  private readonly ooptions: ILocalDataProviderOptions = {\n    /**\n     * whether the filter should be applied to all rankings regardless where they are\n     */\n    filterGlobally: false,\n\n    jumpToSearchResult: false,\n\n    taskExecutor: 'direct'\n  };\n\n  private readonly reorderAll: () => void;\n\n  private _dataRows: IDataRow[];\n  private filter: ((row: IDataRow) => boolean) | null = null;\n  private readonly tasks: IRenderTaskExectutor;\n\n  constructor(private _data: any[], columns: IColumnDesc[] = [], options: Partial<ILocalDataProviderOptions & IDataProviderOptions> = {}) {\n    super(columns, options);\n    Object.assign(this.ooptions, options);\n    this._dataRows = toRows(_data);\n    this.tasks = this.ooptions.taskExecutor === 'direct' ? new DirectRenderTasks() : new ScheduleRenderTasks();\n    this.tasks.setData(this._dataRows);\n\n    const that = this;\n    this.reorderAll = function (this: {source?: Ranking, type: string}) {\n      //fire for all other rankings a dirty order event, too\n      const ranking = this.source;\n      const type = this.type;\n      for (const r of that.getRankings()) {\n        if (r !== ranking) {\n          r.dirtyOrder(type === Ranking.EVENT_FILTER_CHANGED ? [EDirtyReason.FILTER_CHANGED] : [EDirtyReason.UNKNOWN]);\n        }\n      }\n    };\n  }\n\n  /**\n   * set a globally applied filter to all data without changing the data source itself\n   * @param {((row: IDataRow) => boolean) | null} filter\n   */\n  setFilter(filter: ((row: IDataRow) => boolean) | null) {\n    this.filter = filter;\n    this.reorderAll.call({type: Ranking.EVENT_FILTER_CHANGED});\n  }\n\n  getFilter() {\n    return this.filter;\n  }\n\n  getTotalNumberOfRows() {\n    return this.data.length;\n  }\n\n  getTaskExecutor() {\n    return this.tasks;\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  destroy() {\n    super.destroy();\n    this.tasks.terminate();\n  }\n\n  /**\n   * replaces the dataset rows with a new one\n   * @param data\n   */\n  setData(data: any[]) {\n    this._data = data;\n    this._dataRows = toRows(data);\n    this.dataChanged();\n  }\n\n  private dataChanged() {\n    this.tasks.setData(this._dataRows);\n\n    for (const ranking of this.getRankings()) {\n      this.tasks.preComputeData(ranking);\n    }\n\n    this.fire(ADataProvider.EVENT_DATA_CHANGED, this._dataRows);\n    this.reorderAll.call({type: Ranking.EVENT_FILTER_CHANGED});\n\n  }\n\n  clearData() {\n    this.setData([]);\n  }\n\n  /**\n   * append rows to the dataset\n   * @param data\n   */\n  appendData(data: any[]) {\n    for (const d of data) {\n      this._data.push(d);\n      this._dataRows.push({v: d, i: this._dataRows.length});\n    }\n    this.dataChanged();\n  }\n\n  cloneRanking(existing?: Ranking) {\n    const ranking = super.cloneRanking(existing);\n\n    if (this.ooptions.filterGlobally) {\n      ranking.on(`${Ranking.EVENT_FILTER_CHANGED}.reorderAll`, this.reorderAll);\n    }\n\n    this.trackRanking(ranking, existing);\n    return ranking;\n  }\n\n  private trackRanking(ranking: Ranking, existing?: Ranking) {\n\n    const that = this;\n    ranking.on(`${Column.EVENT_DIRTY_CACHES}.cache`, function (this: IEventContext) {\n      let col: any = this.origin;\n      while (col instanceof Column) {\n        // console.log(col.label, 'dirty data');\n        that.tasks.dirtyColumn(col, 'data');\n        that.tasks.preComputeCol(col);\n        col = col.parent;\n      }\n    });\n\n    const cols = ranking.flatColumns;\n    const addKey = `${Ranking.EVENT_ADD_COLUMN}.cache`;\n    const removeKey = `${Ranking.EVENT_REMOVE_COLUMN}.cache`;\n\n    const removeCol = (col: Column) => {\n      this.tasks.dirtyColumn(col, 'data');\n      if (col instanceof CompositeColumn) {\n        col.on(addKey, null);\n        col.on(removeKey, null);\n      }\n    };\n\n    const addCol = (col: Column) => {\n      this.tasks.preComputeCol(col);\n      if (col instanceof CompositeColumn) {\n        col.on(addKey, addCol);\n        col.on(removeKey, removeCol);\n      }\n    };\n\n\n    ranking.on(addKey, addCol);\n    ranking.on(removeKey, removeCol);\n    for (const col of cols) {\n      if (col instanceof CompositeColumn) {\n        col.on(addKey, addCol);\n        col.on(removeKey, removeCol);\n      }\n    }\n\n    if (existing) {\n      const copy = existing.flatColumns;\n      for (let i = 0; i < cols.length; ++i) {\n        this.tasks.copyCache(cols[i], copy[i]);\n      }\n    }\n\n    this.tasks.preComputeData(ranking);\n  }\n\n  cleanUpRanking(ranking: Ranking) {\n    if (this.ooptions.filterGlobally) {\n      ranking.on(`${Ranking.EVENT_FILTER_CHANGED}.reorderAll`, null);\n    }\n\n\n    const cols = ranking.flatColumns;\n    const addKey = `${Ranking.EVENT_ADD_COLUMN}.cache`;\n    const removeKey = `${Ranking.EVENT_REMOVE_COLUMN}.cache`;\n    ranking.on(addKey, null);\n    ranking.on(removeKey, null);\n    for (const col of cols) {\n      if (col instanceof CompositeColumn) {\n        col.on(addKey, null);\n        col.on(removeKey, null);\n      }\n    }\n\n    this.tasks.dirtyRanking(ranking, 'data');\n\n    super.cleanUpRanking(ranking);\n  }\n\n  private resolveFilter(ranking: Ranking) {\n    //do the optional filtering step\n    const filter: (Column | ((d: IDataRow) => boolean))[] = [];\n\n    if (this.ooptions.filterGlobally) {\n      for (const r of this.getRankings()) {\n        if (r.isFiltered()) {\n          filter.push(...r.flatColumns.filter((d) => d.isFiltered()));\n        }\n      }\n    } else if (ranking.isFiltered()) {\n      filter.push(...ranking.flatColumns.filter((d) => d.isFiltered()));\n    }\n\n    if (this.filter) {\n      filter.push(this.filter);\n    }\n    return filter;\n  }\n\n  private noSorting(ranking: Ranking) {\n    // initial no sorting required just index mapping\n    const l = this._data.length;\n    const order = createIndexArray(l, l - 1);\n    const index2pos = order.slice();\n    for (let i = 0; i < l; ++i) {\n      order[i] = i;\n      index2pos[i] = i + 1; // shift since default is 0\n    }\n\n    this.tasks.preCompute(ranking, [{rows: order, group: defaultGroup}], l - 1);\n    return {groups: [Object.assign({order}, defaultGroup)], index2pos};\n  }\n\n  private createSorter(ranking: Ranking, filter: (Column | ((d: IDataRow) => boolean))[], needsFiltering: boolean, needsGrouping: boolean, needsSorting: boolean) {\n    const groups = new Map<string, ISortHelper>();\n    const groupOrder: ISortHelper[] = [];\n    let maxDataIndex = -1;\n\n    const groupCriteria = ranking.getGroupCriteria();\n    const lookups = needsSorting ? new CompareLookup(this._data.length, true, ranking, this.tasks.valueCache.bind(this.tasks)) : undefined;\n\n    const pushGroup = (group: IGroup, r: IDataRow) => {\n      const groupKey = group.name.toLowerCase();\n      if (groups.has(groupKey)) {\n        (<number[]>groups.get(groupKey)!.rows).push(r.i);\n        return;\n      }\n      const s = {group, rows: [r.i]};\n      groups.set(groupKey, s);\n      groupOrder.push(s);\n    };\n\n    const groupCaches = groupCriteria.map((c) => this.tasks.valueCache(c));\n    const filterCaches = filter.map((c) => typeof c === 'function' ? undefined : this.tasks.valueCache(c));\n\n    const toGroup = groupCriteria.length === 1 ?\n      (r: IDataRow) => joinGroups([groupCriteria[0].group(r, groupCaches[0] ? groupCaches[0]!(r.i) : undefined)]) :\n      (r: IDataRow) => joinGroups(groupCriteria.map((c, i) => c.group(r, groupCaches[i] ? groupCaches[i]!(r.i) : undefined)));\n\n    if (needsFiltering) {\n      // filter, group, sort\n      outer: for (const r of this._dataRows) {\n        for (let f = 0; f < filter.length; ++f) {\n          const fc = filter[f];\n          const c = filterCaches[f];\n          if ((typeof fc === 'function' && !fc(r)) || (fc instanceof Column && !fc.filter(r, c ? c(r.i) : undefined))) {\n            continue outer;\n          }\n        }\n        if (maxDataIndex < r.i) {\n          maxDataIndex = r.i;\n        }\n        if (lookups) {\n          lookups.push(r);\n        }\n        pushGroup(toGroup(r), r);\n      }\n\n      // some default sorting\n      groupOrder.sort((a, b) => a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()));\n      return {maxDataIndex, lookups, groupOrder};\n    }\n\n    // reuse the existing groups\n\n    for (const before of ranking.getGroups()) {\n      const order = before.order;\n      if (!needsGrouping) {\n        const clone = duplicateGroup(before);\n        // reuse in full\n        groupOrder.push({group: clone, rows: order});\n\n        if (!lookups) {\n          maxDataIndex = (<ReadonlyArray<number>>order).reduce((a, b) => Math.max(a, b), maxDataIndex);\n          continue;\n        }\n        // sort\n        // tslint:disable-next-line:prefer-for-of\n        for (let o = 0; o < order.length; ++o) {\n          const i = order[o];\n          if (maxDataIndex < i) {\n            maxDataIndex = i;\n          }\n          lookups.push(this._dataRows[i]);\n        }\n        continue;\n      }\n\n      // group, [sort]\n      // tslint:disable-next-line:prefer-for-of\n      for (let o = 0; o < order.length; ++o) {\n        const i = order[o];\n        if (maxDataIndex < i) {\n          maxDataIndex = i;\n        }\n        const r = this._dataRows[i];\n        if (lookups) {\n          lookups.push(r);\n        }\n        pushGroup(toGroup(r), r);\n      }\n    }\n\n    if (needsGrouping) {\n      // some default sorting\n      groupOrder.sort((a, b) => a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()));\n    }\n    return {maxDataIndex, lookups, groupOrder};\n  }\n\n  private sortGroup(g: ISortHelper, i: number, ranking: Ranking, lookups: CompareLookup | undefined, groupLookup: CompareLookup | undefined, singleGroup: boolean, maxDataIndex: number): Promise<IOrderedGroup> {\n    const group = g.group;\n\n    const sortTask = this.tasks.sort(ranking, group, g.rows, singleGroup, maxDataIndex, lookups);\n\n    // compute sort group value as task\n    const groupSortTask = groupLookup ? this.tasks.groupCompare(ranking, group, g.rows).then((r) => r) : <ICompareValue[]>[];\n\n    // trigger task for groups to compute for this group\n\n\n    return Promise.all([sortTask, groupSortTask]).then(([order, groupC]) => {\n      if (groupLookup && Array.isArray(groupC)) {\n        groupLookup.pushValues(i, groupC);\n      }\n      return Object.assign(group, {order});\n    });\n  }\n\n  private sortGroups(groups: IOrderedGroup[], groupLookup: CompareLookup | undefined, enforceSorting: boolean) {\n    // sort groups\n    if (groupLookup) {\n      const groupIndices = groups.map((_, i) => i);\n      sortComplex(groupIndices, groupLookup.sortOrders);\n      return groupIndices.map((i) => groups[i]);\n    }\n    if (enforceSorting) {\n      // create a default sorting\n      return groups.sort((a, b) => a.name.localeCompare(b.name));\n    }\n    return groups;\n  }\n\n  private index2pos(groups: IOrderedGroup[], maxDataIndex: number) {\n    const total = groups.reduce((a, b) => a + b.order.length, 1);\n    const index2pos = createIndexArray(maxDataIndex + 1, total);\n    let offset = 1;\n    for (const g of groups) {\n      // tslint:disable-next-line\n      for (let i = 0; i < g.order.length; i++ , offset++) {\n        index2pos[g.order[i]] = offset;\n      }\n    }\n\n    return {groups, index2pos};\n  }\n\n  sort(ranking: Ranking, dirtyReason: EDirtyReason[]) {\n    const reasons = new Set(dirtyReason);\n\n    if (this._data.length === 0) {\n      return {groups: [], index2pos: []};\n    }\n\n    // console.log(dirtyReason);\n\n    const filter = this.resolveFilter(ranking);\n\n    const needsFiltering = reasons.has(EDirtyReason.UNKNOWN) || reasons.has(EDirtyReason.FILTER_CHANGED);\n    const needsGrouping = needsFiltering || reasons.has(EDirtyReason.GROUP_CRITERIA_CHANGED) || reasons.has(EDirtyReason.GROUP_CRITERIA_DIRTY);\n    const needsSorting = needsGrouping || reasons.has(EDirtyReason.SORT_CRITERIA_CHANGED) || reasons.has(EDirtyReason.SORT_CRITERIA_DIRTY);\n    const needsGroupSorting = needsGrouping || reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_CHANGED) || reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_DIRTY);\n\n    if (needsFiltering) {\n      this.tasks.dirtyRanking(ranking, 'summary');\n    } else if (needsGrouping) {\n      this.tasks.dirtyRanking(ranking, 'group');\n    }\n    // otherwise the summary and group summaries should still be valid\n\n    if (filter.length === 0) {\n      // all rows so summary = data\n      this.tasks.copyData2Summary(ranking);\n    }\n\n    const isGroupedBy = ranking.getGroupCriteria().length > 0;\n    const isSortedBy = ranking.getSortCriteria().length > 0;\n    const isGroupedSortedBy = ranking.getGroupSortCriteria().length > 0;\n\n    if (!isGroupedBy && !isSortedBy && filter.length === 0) {\n      return this.noSorting(ranking);\n    }\n\n    const {maxDataIndex, lookups, groupOrder} = this.createSorter(ranking, filter, needsFiltering, needsGrouping, needsSorting);\n\n    if (groupOrder.length === 0) {\n      return {groups: [], index2pos: []};\n    }\n\n    this.tasks.preCompute(ranking, groupOrder, maxDataIndex);\n\n\n    if (groupOrder.length === 1) {\n      const g = groupOrder[0]!;\n\n      // not required if: group sort criteria changed -> lookups will be none\n      return this.sortGroup(g, 0, ranking, lookups, undefined, true, maxDataIndex).then((group) => {\n        return this.index2pos([group], maxDataIndex);\n      });\n    }\n\n    const groupLookup = isGroupedSortedBy && needsGroupSorting ? new CompareLookup(groupOrder.length, false, ranking) : undefined;\n\n    return Promise.all(groupOrder.map((g, i) => {\n      // not required if: group sort criteria changed -> lookups will be none\n      return this.sortGroup(g, i, ranking, lookups, groupLookup, false, maxDataIndex);\n    })).then((groups) => {\n      // not required if: sort criteria changed -> groupLookup will be none\n      const sortedGroups = this.sortGroups(groups, groupLookup, needsGroupSorting);\n      return this.index2pos(sortedGroups, maxDataIndex);\n    });\n  }\n\n  private readonly mapToDataRow = (i: number) => {\n    if (i < 0 || i >= this._dataRows.length) {\n      return {i, v: {}};\n    }\n    return this._dataRows[i];\n  };\n\n  viewRaw(indices: IndicesArray) {\n    return mapIndices(indices, (i) => this._data[i] || {});\n  }\n\n  viewRawRows(indices: IndicesArray) {\n    return mapIndices(indices, this.mapToDataRow);\n  }\n\n  getRow(index: number) {\n    return this._dataRows[index];\n  }\n\n  seq(indices: IndicesArray) {\n    return lazySeq(indices).map(this.mapToDataRow);\n  }\n\n  view(indices: IndicesArray) {\n    return this.viewRaw(indices);\n  }\n\n  mappingSample(col: INumberColumn): ISequence<number> {\n    const MAX_SAMPLE = 120; //at most 120 sample lines\n    const l = this._dataRows.length;\n    if (l <= MAX_SAMPLE) {\n      return lazySeq(this._dataRows).map((v) => col.getRawNumber(v));\n    }\n    //randomly select 500 elements\n    const indices = new Set<number>();\n\n    for (let i = 0; i < MAX_SAMPLE; ++i) {\n      let j = Math.floor(Math.random() * (l - 1));\n      while (indices.has(j)) {\n        j = Math.floor(Math.random() * (l - 1));\n      }\n      indices.add(j);\n    }\n    return lazySeq(Array.from(indices)).map((i) => col.getRawNumber(this._dataRows[i]));\n  }\n\n  searchAndJump(search: string | RegExp, col: Column) {\n    //case insensitive search\n    search = typeof search === 'string' ? search.toLowerCase() : search;\n    const f = typeof search === 'string' ? (v: string) => v.toLowerCase().indexOf((<string>search)) >= 0 : (<RegExp>search).test.bind(search);\n    const indices = <number[]>[];\n    for (let i = 0; i < this._dataRows.length; ++i) {\n      if (f(col.getLabel(this._dataRows[i]))) {\n        indices.push(i);\n      }\n    }\n    this.jumpToNearest(indices);\n  }\n\n}\n\nfunction toRows(data: any[]) {\n  return data.map((v, i) => ({v, i}));\n}\n","/**\n * number of bins before switching to dense mode\n * @internal\n */\nexport const DENSE_HISTOGRAM = 19;\n/**\n * minimal witdh of a column to show the label in the header\n * @internal\n */\nexport const MIN_LABEL_WIDTH = 30;\n/**\n * number of milliseconds to wait before a hovered canvas row will be replaced with a DOM one\n * @type {number}\n * @internal\n */\nexport const HOVER_DELAY_SHOW_DETAIL = 500;\n\nexport const GUESSED_ROW_HEIGHT = 18;\nexport const GUESSES_GROUP_HEIGHT = 40;\n","\nconst styles = new Map<string, string>();\n// {\n//   const r = /^[$]([\\w]+): ([\\w #.()'\\/,-]+)( !default)?;/gmi;\n//   const s = String(vars);\n\n//   let m: RegExpMatchArray | null = r.exec(s);\n//   while (m != null) {\n//     styles.set(m[1], m[2]);\n//     m = r.exec(s);\n//   }\n// }\n\n/** @internal */\nexport default function getStyle(key: string, defaultValue = '') {\n  if (key[0] === '$') {\n    key = key.slice(1);\n  }\n  if (styles.has(key)) {\n    return styles.get(key)!;\n  }\n  return defaultValue;\n}\n\n/** @internal */\nexport const COLUMN_PADDING = parseInt(getStyle('lu_engine_grip_gap', '5px'), 10);\n/** @internal */\nexport const FILTERED_OPACITY = parseFloat(getStyle('lu_filtered_opacity', '0.2'));\n/** @internal */\nexport const DASH = {\n  width: parseInt(getStyle('lu_missing_dash_width', '3px'), 10),\n  height: parseInt(getStyle('lu_missing_dash_height', '10px'), 10),\n  color: getStyle('lu_missing_dash_color', 'gray')\n};\n/** @internal */\nexport const UPSET = {\n  color: getStyle('lu_renderer_upset_color'),\n  inactive: parseFloat(getStyle('lu_renderer_upset_inactive_opacity', '0.1'))\n};\n/** @internal */\nexport const DOT = {\n  color: getStyle('lu_renderer_dot_color', 'gray'),\n  size: parseInt(getStyle('lu_renderer_dot_size', '5px'), 10),\n  opacity: parseFloat(getStyle('lu_renderer_dot_opacity', '0.5'))\n};\n/** @internal */\nexport const BOX_PLOT = {\n  box: getStyle('lu_renderer_boxplot_box', '#e0e0e0'),\n  stroke: getStyle('lu_renderer_boxplot_stroke', 'black'),\n  sort: getStyle('lu_renderer_boxplot_sort_indicator', '#ffa500'),\n  outlier: getStyle('lu_renderer_boxplot_outlier', '#e0e0e0')\n};\n/** @internal */\nexport const AGGREGATE = {\n  width: parseInt(getStyle('lu_aggregate_square_bracket_width', '4px'), 10),\n  strokeWidth: parseInt(getStyle('lu_aggregate_square_bracket_stroke_width', '2px'), 10),\n  color: getStyle('lu_aggregate_square_bracket_stroke_color', '#000'),\n  levelOffset: parseInt(getStyle('lu_aggregate_level_offset', '2px'), 10),\n  levelWidth: parseInt(getStyle('lu_aggregate_level_width', '22px'), 10)\n};\n/** @internal */\nexport const SLOPEGRAPH_WIDTH = parseInt(getStyle('lu_slope_width', '200px'), 10);\n/** @internal */\nexport const CANVAS_HEIGHT = 4;\n\n/** @internal */\nexport const CSS_PREFIX = getStyle('lu_css_prefix', 'lu');\n/** @internal */\nexport const ENGINE_CSS_PREFIX = 'le';\n\n/** @internal */\nexport const RESIZE_SPACE = parseInt(getStyle('lu_engine_resize_space', '50px'), 10);\n/** @internal */\nexport const RESIZE_ANIMATION_DURATION = parseInt(getStyle('lu_engine_resize_animation_duration', '1000ms'), 10);\n\n/** @internal */\nexport function cssClass(suffix?: string) {\n  return suffix? `${CSS_PREFIX}-${suffix}` : CSS_PREFIX;\n}\n/** @internal */\nexport function engineCssClass(suffix?: string) {\n  return suffix? `${ENGINE_CSS_PREFIX}-${suffix}` : ENGINE_CSS_PREFIX;\n}\n\n/** @internal */\nexport function aria(text: string) {\n  return `<span class=\"${cssClass('aria')}\" aria-hidden=\"true\">${text}</span>`;\n}\n","import {MIN_LABEL_WIDTH} from '../constants';\nimport {Column, IArrayColumn, IDataRow, ICategoricalLikeColumn, isMapAbleColumn, DEFAULT_COLOR} from '../model';\nimport {hsl} from 'd3-color';\nimport {cssClass} from '../styles';\nimport {IRenderContext} from '.';\nimport {ISequence} from '../internal';\n\n/** @internal */\nexport function noop() {\n  // no op\n}\n\nexport const noRenderer = {\n  template: `<div></div>`,\n  update: <() => void>noop\n};\n\n/** @internal */\nexport function setText<T extends Node>(node: T, text?: string): T {\n  if (text === undefined) {\n    return node;\n  }\n  //no performance boost if setting the text node directly\n  //const textNode = <Text>node.firstChild;\n  //if (textNode == null) {\n  //  node.appendChild(node.ownerDocument!.createTextNode(text));\n  //} else {\n  //  textNode.data = text;\n  //}\n  if (node.textContent !== text) {\n    node.textContent = text;\n  }\n  return node;\n}\n\n/**\n * for each item matching the selector execute the callback\n * @param node\n * @param selector\n * @param callback\n * @internal\n */\nexport function forEach<T extends Element>(node: Element, selector: string, callback: (d: T, i: number) => void) {\n  (<T[]>Array.from(node.querySelectorAll(selector))).forEach(callback);\n}\n\n/** @internal */\nexport function forEachChild<T extends Element>(node: Element, callback: (d: T, i: number) => void) {\n  (<T[]>Array.from(node.children)).forEach(callback);\n}\n\n/**\n * matches the columns and the dom nodes representing them\n * @param {HTMLElement} node row\n * @param columns columns to check\n * @internal\n */\nexport function matchColumns(node: HTMLElement, columns: {column: Column, template: string, rendererId: string}[], ctx: IRenderContext) {\n  if (node.childElementCount === 0) {\n    // initial call fast method\n    node.innerHTML = columns.map((c) => c.template).join('');\n    const children = Array.from(node.children);\n    columns.forEach((col, i) => {\n      const cnode = <HTMLElement>children[i];\n      // set attribute for finding again\n      cnode.dataset.columnId = col.column.id;\n      // store current renderer\n      cnode.dataset.renderer = col.rendererId;\n      cnode.classList.add(cssClass(`renderer-${col.rendererId}`));\n    });\n    return;\n  }\n\n  function matches(c: {column: Column, rendererId: string}, i: number) {\n    //do both match?\n    const n = <HTMLElement>node.children[i];\n    return n != null && n.dataset.columnId === c.column.id && n.dataset.renderer === c.rendererId;\n  }\n\n  if (columns.every(matches)) {\n    return; //nothing to do\n  }\n\n  const idsAndRenderer = new Set(columns.map((c) => `${c.column.id}@${c.rendererId}`));\n  //remove all that are not existing anymore\n  forEachChild(node, (n: HTMLElement) => {\n    const id = n.dataset.columnId;\n    const renderer = n.dataset.renderer;\n    const idAndRenderer = `${id}@${renderer}`;\n    if (!idsAndRenderer.has(idAndRenderer)) {\n      node.removeChild(n);\n    }\n  });\n  columns.forEach((col) => {\n    let cnode = <HTMLElement>node.querySelector(`[data-column-id=\"${col.column.id}\"]`);\n    if (!cnode) {\n      cnode = ctx.asElement(col.template);\n      cnode.dataset.columnId = col.column.id;\n      cnode.dataset.renderer = col.rendererId;\n      cnode.classList.add(cssClass(`renderer-${col.rendererId}`));\n    }\n    node.appendChild(cnode);\n  });\n}\n\nexport function wideEnough(col: IArrayColumn<any>, length: number = col.labels.length) {\n  const w = col.getWidth();\n  return w / length > MIN_LABEL_WIDTH; // at least 30 pixel\n}\n\nexport function wideEnoughCat(col: ICategoricalLikeColumn) {\n  const w = col.getWidth();\n  return w / col.categories.length > MIN_LABEL_WIDTH; // at least 30 pixel\n}\n\n\n\n// side effect\nconst adaptColorCache: {[bg: string]: string} = {};\n/**\n * Adapts the text color for a given background color\n * @param {string} bgColor as `#ff0000`\n * @returns {string} returns `black` or `white` for best contrast\n */\nexport function adaptTextColorToBgColor(bgColor: string): string {\n  const bak = adaptColorCache[bgColor];\n  if (bak) {\n    return bak;\n  }\n  return adaptColorCache[bgColor] = hsl(bgColor).l > 0.5 ? 'black' : 'white';\n}\n\n\n/**\n *\n * Adapts the text color for a given background color\n * @param {HTMLElement} node the node containing the text\n * @param {string} bgColor as `#ff0000`\n * @param {string} title the title to render\n * @param {number} width for which percentages of the cell this background applies (0..1)\n */\nexport function adaptDynamicColorToBgColor(node: HTMLElement, bgColor: string, title: string, width: number) {\n  const adapt = adaptTextColorToBgColor(bgColor);\n  if ((width <= 0.05 || adapt === 'black') || width > 0.9) { // almost empty or full\n    node.style.color = adapt === 'black' || width <= 0.05 ? null : adapt; // null = black\n    // node.classList.remove('lu-gradient-text');\n    // node.style.backgroundImage = null;\n    return;\n  }\n\n  node.style.color = null;\n  node.innerText = title;\n\n  const span = node.ownerDocument!.createElement('span');\n  span.classList.add(cssClass('gradient-text'));\n  span.style.color = adapt;\n  span.innerText = title;\n  node.appendChild(span);\n}\n\n\n/** @internal */\nexport const uniqueId: (prefix: string) => string = (function () {\n  // side effect but just within the function itself, so good for the library\n  let idCounter = 0;\n  return (prefix: string) => `${prefix}${(idCounter++).toString(36)}`;\n})();\n\n\nconst NUM_EXAMPLE_VALUES = 5;\n\n/** @internal */\nexport function exampleText(col: Column, rows: ISequence<IDataRow>) {\n  const examples = <string[]>[];\n  rows.every((row) => {\n    if (col.getValue(row) == null) {\n      return true;\n    }\n    const v = col.getLabel(row);\n    examples.push(v);\n    return examples.length < NUM_EXAMPLE_VALUES;\n  });\n  if (examples.length === 0) {\n    return '';\n  }\n  return `${examples.join(', ')}${examples.length < rows.length ? ', ...' : ''}`;\n}\n\n\n/** @internal */\nexport function multiLevelGridCSSClass(idPrefix: string, column: Column) {\n  return cssClass(`stacked-${idPrefix}-${column.id}`);\n}\n\n\n/** @internal */\nexport function colorOf(col: Column) {\n  if (isMapAbleColumn(col)) {\n    return col.getColorMapping().apply(0);\n  }\n  return DEFAULT_COLOR;\n}\n","import {IDataRow, IOrderedGroup, ActionColumn, Column} from '../model';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {forEachChild, noRenderer} from './utils';\nimport {cssClass} from '../styles';\n\nexport default class ActionRenderer implements ICellRendererFactory {\n  readonly title = 'Default';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return col instanceof ActionColumn && mode !== ERenderMode.SUMMARY;\n  }\n\n  create(col: ActionColumn): ICellRenderer {\n    const actions = col.actions;\n    return {\n      template: `<div class=\"${cssClass('actions')} ${cssClass('hover-only')}\">${actions.map((a) => `<span title='${a.name}' class='${a.className || ''}'>${a.icon || ''}</span>`).join('')}</div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        forEachChild(n, (ni: HTMLSpanElement, i: number) => {\n          ni.onclick = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            setTimeout(() => actions[i].action(d), 1); // async\n          };\n        });\n      }\n    };\n  }\n\n  createGroup(col: ActionColumn, context: IRenderContext): IGroupCellRenderer {\n    const actions = col.groupActions;\n    return {\n      template: `<div class=\"${cssClass('actions')} ${cssClass('hover-only')}\">${actions.map((a) => `<span title='${a.name}' class='${a.className || ''}'>${a.icon || ''}</span>`).join('')}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        forEachChild(n, (ni: HTMLSpanElement, i: number) => {\n          ni.onclick = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            context.tasks.groupRows(col, group, 'identity', (r) => r).then((rows) => {\n              if (typeof rows === 'symbol') {\n                return;\n              }\n              setTimeout(() => actions[i].action(group, Array.from(rows)), 1); // async\n            });\n          };\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {IAggregationStrategy} from './interfaces';\nimport {IOrderedGroup, IGroup, IGroupParent, IGroupData, IGroupItem, isGroup} from '../model';\n\nexport function isAlwaysShowingGroupStrategy(strategy: IAggregationStrategy) {\n  return strategy === 'group+item' || strategy === 'group+item+top' || strategy === 'group+top+item';\n}\n\nexport function hasTopNStrategy(strategy: IAggregationStrategy) {\n  return strategy === 'group+item+top' || strategy === 'group+top+item';\n}\n\nexport declare type IGroupMeta = 'first' | 'last' | 'first last' | null;\n\nexport function toItemMeta(relativeIndex: number, group: IOrderedGroup, topN: number): IGroupMeta {\n  if (relativeIndex === 0) {\n    return group.order.length === 1 ? 'first last' : 'first';\n  }\n  if ((relativeIndex === (group.order.length - 1)) || (topN > 0 && relativeIndex === (topN - 1))) {\n    return 'last';\n  }\n  return null;\n}\n\nexport function groupParents(group: IGroup, meta: IGroupMeta) {\n  const parents: {group: IGroup, meta: IGroupMeta}[] = [{group, meta}];\n\n  let prev = group;\n  let prevMeta = meta;\n  let parent: IGroupParent | undefined | null = group.parent;\n\n  while (parent) {\n    if (parent.subGroups.length === 1 && (prevMeta === 'first last')) {\n      meta = 'first last';\n    } else if (parent.subGroups[0] === prev && (prevMeta === 'first last' || prevMeta === 'first')) {\n      meta = 'first';\n    } else if (parent.subGroups[parent.subGroups.length - 1] === prev && (prevMeta === 'last' || prevMeta === 'first last')) {\n      meta = 'last';\n    } else {\n      meta = null;\n    }\n    parents.unshift({group: parent, meta});\n\n    prev = parent;\n    prevMeta = meta;\n    parent = parent.parent;\n  }\n  return parents;\n}\n\nexport interface ITopNGetter {\n  (item: IGroup): number;\n}\n\n/**\n * number of group levels this items ends\n */\nexport function groupEndLevel(item: IGroupData | IGroupItem, topNGetter: ITopNGetter) {\n  const group: IGroup = isGroup(item) ? item : item.group;\n  const last = isGroup(item) ? 'first last' : toItemMeta(item.relativeIndex, item.group, topNGetter(group));\n  if (last !== 'last' && last !== 'first last') {\n    return 0;\n  }\n\n  let prev = group;\n  let parent: IGroupParent | undefined | null = group.parent;\n  let i = 1;\n\n  while (parent) {\n    if (!(parent.subGroups.length === 1 || (parent.subGroups[parent.subGroups.length - 1] === prev))) {\n      // not last of group - end\n      return i;\n    }\n    ++i;\n    prev = parent;\n    parent = parent.parent;\n  }\n\n  return i;\n}\n\nexport function isSummaryGroup(group: IGroup, strategy: IAggregationStrategy, topNGetter: ITopNGetter) {\n  const topN = topNGetter(group);\n  return isAlwaysShowingGroupStrategy(strategy) && topN !== 0;\n}\n\nexport function toRowMeta(item: IGroupData | IGroupItem, strategy: IAggregationStrategy, topNGetter: ITopNGetter): string | null {\n  if (isGroup(item)) {\n    if (isSummaryGroup(item, strategy, topNGetter)) {\n      return 'first';\n    }\n    const level = groupEndLevel(item, topNGetter);\n    if (level === 0) {\n      return 'first';\n    }\n    return `first last${level === 1 ? '' : level - 1}`;\n  }\n\n  const last =  toItemMeta(item.relativeIndex, item.group, topNGetter(item.group));\n  if (last == null) {\n    return null;\n  }\n  const level = groupEndLevel(item, topNGetter);\n  if (level === 0) {\n    return null;\n  }\n  return `last${level === 1 ? '' : level - 1}`;\n}\n","import {IDataRow, Column, AggregateGroupColumn, EAggregationState, IOrderedGroup, IGroupParent, IGroup, defaultGroup} from '../model';\nimport {AGGREGATE, CANVAS_HEIGHT, cssClass} from '../styles';\nimport {IRenderContext, ICellRendererFactory, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {IDataProvider} from '../provider';\nimport {groupParents, toItemMeta, isAlwaysShowingGroupStrategy, hasTopNStrategy, isSummaryGroup} from '../provider/internal';\nimport {clear} from '../internal';\n\nfunction preventDefault(event: Event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nfunction matchNodes(node: HTMLElement, length: number, clazz = 'agg-level', addTopN = false) {\n  const doc = node.ownerDocument!;\n  const children = <HTMLElement[]>Array.from(node.children);\n  if (addTopN) { // top N buttons\n    length = length + 1;\n  }\n\n  // add missing\n  for (let i = children.length; i < length; ++i) {\n    const child = doc.createElement('div');\n    child.classList.add(cssClass(clazz));\n    children.push(child);\n    node.appendChild(child);\n  }\n  // remove too many\n  for (const r of children.splice(length, children.length - length)) {\n    r.remove();\n  }\n  if (addTopN) {\n    const last = children[children.length - 1];\n    last.classList.remove(cssClass(clazz));\n    last.classList.add(cssClass('agg-all'));\n  }\n  return children;\n}\n\nfunction renderGroups(node: HTMLElement, group: IOrderedGroup, relativeIndex: number, col: AggregateGroupColumn, provider: IDataProvider) {\n  const strategy = provider.getAggregationStrategy();\n  const ranking = col.findMyRanker()!;\n  const topNGetter = (group: IGroup) => provider.getTopNAggregated(ranking, group);\n\n  const isRow = relativeIndex >= 0;\n  const isLeafGroup = !(<IGroupParent><any>group).subGroups || (<IGroupParent><any>group).subGroups.length === 0;\n\n  const alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\n  const isSummary = !isRow && isSummaryGroup(group, strategy, topNGetter);\n  const hasTopN = isSummary && isLeafGroup && hasTopNStrategy(strategy);\n\n  const parents = groupParents(group, relativeIndex >= 0 ? toItemMeta(relativeIndex, group, provider.getTopNAggregated(ranking, group)) : 'first last');\n  const children = matchNodes(node, parents.length, 'agg-level', hasTopN);\n\n  const lastParent = parents.length - 1;\n\n  for (let i = 0; i < parents.length; ++i) {\n    const parent = parents[i];\n    const child = children[i];\n    const state = provider.getAggregationState(ranking, parent.group);\n    const isLastGroup = i === lastParent;\n    child.dataset.level = String(parents.length - 1 - i); // count backwards\n\n    if (alwaysShowGroup && (isRow || i < lastParent)) {\n      // inner or last\n      if (!isSummary && (parent.meta === 'last' || parent.meta === 'first last')) {\n        child.dataset.meta = 'last';\n      } else {\n        delete child.dataset.meta;\n      }\n      child.classList.toggle(cssClass('agg-inner'), isRow && isLastGroup);\n      child.classList.remove(cssClass('agg-expand'), cssClass('agg-collapse'));\n      child.title = '';\n      delete child.onclick;\n      continue;\n    }\n\n    const isCollapsed = state === EAggregationState.COLLAPSE;\n    const isFirst = parent.meta === 'first' || parent.meta === 'first last';\n    const isShowAll = state === EAggregationState.EXPAND;\n    const childTopN = hasTopN && isLastGroup ? children[parents.length] : null;\n\n    let meta = parent.meta;\n    if (isSummary && parent.meta === 'first last') {\n      meta = 'first';\n    }\n\n    if (meta) {\n      child.dataset.meta = meta;\n    } else {\n      delete child.dataset.meta;\n    }\n\n    child.classList.toggle(cssClass('agg-expand'), isFirst);\n    child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\n    child.title = isFirst ? (isCollapsed ? 'Expand Group' : 'Collapse Group') : '';\n\n    if (!isFirst) {\n      delete child.onclick;\n    } else {\n      child.onclick = (evt) => {\n        preventDefault(evt);\n        let nextState: EAggregationState;\n        switch (strategy) {\n          case 'group+top+item':\n            nextState = state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND_TOP_N : EAggregationState.COLLAPSE;\n            break;\n          case 'group':\n          case 'item':\n          case 'group+item':\n          case 'group+item+top':\n          default:\n            nextState = state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND : EAggregationState.COLLAPSE;\n            break;\n        }\n        col.setAggregated(parent.group, nextState);\n      };\n    }\n\n    if (!childTopN) {\n      continue;\n    }\n    childTopN.dataset.level = String(i); // count upwards\n    childTopN.classList.toggle(cssClass('agg-compress'), isShowAll);\n    childTopN.title = isShowAll ? `Show Top ${provider.getShowTopN()} Only` : 'Show All';\n    childTopN.onclick = (evt) => {\n      preventDefault(evt);\n      col.setAggregated(parent.group, state === EAggregationState.EXPAND ? EAggregationState.EXPAND_TOP_N : EAggregationState.EXPAND);\n    };\n  }\n}\n\nfunction isDummyGroup(group: IGroup) {\n  return group.parent == null && group.name === defaultGroup.name;\n}\n\nexport default class AggregateGroupRenderer implements ICellRendererFactory {\n  readonly title: string = 'Default';\n\n  canRender(col: Column): boolean {\n    return col instanceof AggregateGroupColumn;\n  }\n\n  create(col: AggregateGroupColumn, context: IRenderContext): ICellRenderer {\n    return {\n      template: `<div></div>`,\n      update(node: HTMLElement, _row: IDataRow, i: number, group: IOrderedGroup) {\n        if (isDummyGroup(group)) {\n          clear(node);\n          return;\n        }\n        renderGroups(node, group, i, col, context.provider);\n      },\n      render(ctx: CanvasRenderingContext2D, _row: IDataRow, i: number, group: IOrderedGroup) {\n        if (isDummyGroup(group)) {\n          return;\n        }\n        const parents = groupParents(group, toItemMeta(i, group, context.provider.getTopNAggregated(col.findMyRanker()!, group)));\n        ctx.fillStyle = AGGREGATE.color;\n        for (let i = 0; i < parents.length; ++i) {\n          ctx.fillRect(AGGREGATE.levelWidth * i + AGGREGATE.levelOffset, 0, AGGREGATE.strokeWidth, CANVAS_HEIGHT);\n        }\n        return parents.some((d) => d.meta != null);\n      }\n    };\n  }\n\n  createGroup(col: AggregateGroupColumn, context: IRenderContext): IGroupCellRenderer {\n    return {\n      template: `<div><div class=\"${cssClass('agg-level')}\"></div></div>`,\n      update(node: HTMLElement, group: IOrderedGroup) {\n        renderGroups(node, group, -1, col, context.provider);\n      }\n    };\n  }\n\n  createSummary(col: AggregateGroupColumn, context: IRenderContext): ISummaryRenderer {\n    return {\n      template: `<div></div>`,\n      update: (node: HTMLElement) => {\n        const ranking = col.findMyRanker()!;\n        const groups = ranking.getGroups();\n        if (groups.length === 1 && groups[0].name === defaultGroup.name) {\n          clear(node);\n          return;\n        }\n\n        const gparents = groups.map((group) => groupParents(group, 'first last'));\n\n        const max = gparents.reduce((a, b) => Math.max(a, b.length), Number.NEGATIVE_INFINITY);\n        const children = matchNodes(node, max, 'agg-expand');\n\n        for (let i = 0; i < max; ++i) {\n          const child = children[i];\n          const subGroups = <IOrderedGroup[]>gparents.map((d) => d[i] ? d[i].group : null).filter((d) => d != null);\n\n          const isCollapsed = subGroups.every((d) => context.provider.getAggregationState(ranking, d) === EAggregationState.COLLAPSE);\n          child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\n          child.title = isCollapsed ? 'Expand All Groups' : 'Collapse All Groups';\n\n          child.onclick = (evt) => {\n            preventDefault(evt);\n            context.provider.aggregateAllOf(ranking, isCollapsed ? EAggregationState.EXPAND : EAggregationState.COLLAPSE, subGroups);\n          };\n        }\n      }\n    };\n  }\n}\n","import {cssClass} from '../styles';\n\n/** @internal */\nexport const filterMissingText = 'Filter rows containing missing values';\n\n/** @internal */\nexport function filterMissingMarkup(bakMissing: boolean) {\n  return `<label class=\"${cssClass('checkbox')}\">\n    <input type=\"checkbox\" ${bakMissing ? 'checked=\"checked\"' : ''}>\n    <span class=\"${cssClass('filter-missing')}\">${filterMissingText}</span>\n  </label>`;\n}\n\n/** @internal */\nexport function filterMissingNumberMarkup(bakMissing: boolean, count: number) {\n  return `<label class=\"${cssClass('checkbox')}\">\n    <input type=\"checkbox\" ${bakMissing ? 'checked=\"checked\"' : ''} ${count === 0 ? 'disabled' : ''}>\n    <span class=\"${cssClass('filter-missing')} ${count === 0 ? cssClass('disabled') : ''}\">Filter ${count} missing value rows</span>\n  </label>`;\n}\n\n/** @internal */\nexport function findFilterMissing(node: HTMLElement) {\n  return <HTMLInputElement>(<HTMLElement>node.getElementsByClassName(cssClass('filter-missing'))[0]!).previousElementSibling!;\n}\n\n/** @internal */\nexport function updateFilterMissingNumberMarkup(element: HTMLElement, count: number) {\n  const checked = element.getElementsByTagName('input')![0];\n  checked.disabled = count === 0;\n  element.lastElementChild!.classList.toggle(cssClass('disabled'), count === 0);\n  element.lastElementChild!.textContent = `Filter ${count} missing value rows`;\n}\n","import {Column, IDataRow, isMissingValue} from '../model';\nimport {CANVAS_HEIGHT, DASH, cssClass} from '../styles';\n\nexport function renderMissingValue(ctx: CanvasRenderingContext2D, width: number, height: number, x = 0, y = 0) {\n\n  const dashX = Math.max(0, x + (width - DASH.width) / 2); // center horizontally\n  const dashY = Math.max(0, y + (height - DASH.height) / 2); // center vertically\n  ctx.fillStyle = DASH.color;\n  ctx.fillRect(dashX, dashY, Math.min(width, DASH.width), Math.min(height, DASH.height));\n}\n\nexport function renderMissingDOM(node: HTMLElement, col: Column, d: IDataRow) {\n  const missing = isMissingValue(col.getValue(d));\n  node.classList.toggle(cssClass('missing'), missing);\n  return missing;\n}\n\nexport function renderMissingCanvas(ctx: CanvasRenderingContext2D, col: Column, d: IDataRow, width: number, x = 0, y = 0) {\n  const missing = isMissingValue(col.getValue(d));\n  if (missing) {\n    renderMissingValue(ctx, width, CANVAS_HEIGHT, x, y);\n  }\n  return missing;\n}\n","import {StringColumn, Column, IDataRow, IOrderedGroup, IStringFilter} from '../model';\nimport {filterMissingMarkup, findFilterMissing} from '../ui/missing';\nimport {IRenderContext, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {setText, exampleText} from './utils';\nimport {cssClass} from '../styles';\nimport {debounce} from '../internal';\n\n\n/**\n * renders a string with additional alignment behavior\n * one instance factory shared among strings\n */\nexport default class StringCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Default';\n\n  canRender(col: Column): boolean {\n    return col instanceof StringColumn;\n  }\n\n  create(col: StringColumn): ICellRenderer {\n    const align = col.alignment || 'left';\n    return {\n      template: `<div${align !== 'left' ? ` class=\"${cssClass(align)}\"` : ''}> </div>`,\n      update: (n: HTMLDivElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        if (col.escape) {\n          setText(n, col.getLabel(d));\n        } else {\n          n.innerHTML = col.getLabel(d);\n        }\n        n.title = n.textContent!;\n      }\n    };\n  }\n\n\n  createGroup(col: StringColumn, context: IRenderContext): IGroupCellRenderer {\n    return {\n      template: `<div> </div>`,\n      update: (n: HTMLDivElement, group: IOrderedGroup) => {\n        return context.tasks.groupExampleRows(col, group, 'string', (rows) => exampleText(col, rows)).then((text) => {\n          if (typeof text === 'symbol') {\n            return;\n          }\n          n.classList.toggle(cssClass('missing'), !text);\n          if (col.escape) {\n            setText(n, text);\n          } else {\n            n.innerHTML = text;\n            n.title = text;\n          }\n        });\n      }\n    };\n  }\n\n  private static interactiveSummary(col: StringColumn, node: HTMLElement) {\n    const form = <HTMLFormElement>node;\n    const filterMissing = findFilterMissing(node);\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]');\n    const isRegex = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]');\n\n    const update = () => {\n      const valid = input.value.trim();\n      if (valid.length <= 0) {\n        const filter = filterMissing.checked ? {filter: null, filterMissing: filterMissing.checked} : null;\n        col.setFilter(filter);\n        return;\n      }\n      col.setFilter({\n        filter: isRegex.checked ? new RegExp(input.value) : input.value,\n        filterMissing: filterMissing.checked\n      });\n    };\n\n    filterMissing.onchange = update;\n    input.onchange = update;\n    input.oninput = debounce(update, 100);\n    isRegex.onchange = update;\n    form.onsubmit = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      update();\n      return false;\n    };\n\n    return (actCol: StringColumn) => {\n      col = actCol;\n      const f = col.getFilter() || {filter: null, filterMissing: false};\n      const bak = f.filter;\n      filterMissing.checked = f.filterMissing;\n      input.value = bak instanceof RegExp ? bak.source : bak || '';\n      isRegex.checked = bak instanceof RegExp;\n    };\n  }\n\n  createSummary(col: StringColumn, _context: IRenderContext, interactive: boolean): ISummaryRenderer {\n    if (!interactive) {\n      return {\n        template: `<div></div>`,\n        update: (node: HTMLElement) => {\n          const filter = col.getFilter();\n          node.textContent = toString(filter);\n        }\n      };\n    }\n    const f = col.getFilter() || {filter: null, filterMissing: false};\n    const bak = f.filter || '';\n    let update: (col: StringColumn) => void;\n    return {\n      template: `<form><input type=\"text\" placeholder=\"Filter ${col.desc.label}...\" autofocus value=\"${(bak instanceof RegExp) ? bak.source : bak}\">\n          <label class=\"${cssClass('checkbox')}\">\n            <input type=\"checkbox\" ${(bak instanceof RegExp) ? 'checked=\"checked\"' : ''}>\n            <span>Use regular expressions</span>\n          </label>\n          ${filterMissingMarkup(f.filterMissing)}</form>`,\n      update: (node: HTMLElement) => {\n        if (!update) {\n          update = StringCellRenderer.interactiveSummary(col, node);\n        }\n        update(col);\n      }\n    };\n  }\n}\n\nfunction toString(filter: IStringFilter | null) {\n  if (filter == null || !filter.filter) {\n    return '';\n  }\n  if (filter.filter instanceof RegExp) {\n    return filter.filter.source;\n  }\n  return filter.filter;\n}\n","import {IDataRow, AnnotateColumn, Column} from '../model';\nimport StringCellRenderer from './StringCellRenderer';\nimport {cssClass} from '../styles';\nimport {ICellRenderer} from './interfaces';\n\nexport default class AnnotationRenderer extends StringCellRenderer {\n  readonly title: string = 'Default';\n\n  canRender(col: Column) {\n    return super.canRender(col) && col instanceof AnnotateColumn;\n  }\n\n  create(col: AnnotateColumn): ICellRenderer {\n    return {\n      template: `<div>\n        <span></span>\n        <input class=\"${cssClass('hover-only')} ${cssClass('annotate-input')}\">\n       </div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const label = <HTMLElement>n.firstElementChild!;\n        const input = <HTMLInputElement>n.lastElementChild!;\n        input.onchange = () => {\n          label.textContent = input.value;\n          col.setValue(d, input.value);\n        };\n        input.onclick = (event) => {\n          event.stopPropagation();\n        };\n        label.textContent = input.value = col.getLabel(d);\n      }\n    };\n  }\n}\n","import {Column, isMapAbleColumn, IDataRow, DEFAULT_COLOR} from '../model';\nimport {IImposer} from './interfaces';\n\nexport function colorOf(col: Column, row: IDataRow | null, imposer?: IImposer, valueHint?: number) {\n  if (imposer && imposer.color) {\n    return imposer.color(row, valueHint);\n  }\n  if (!row) {\n    if (isMapAbleColumn(col)) {\n      return col.getColorMapping().apply(valueHint != null ? valueHint : 0);\n    }\n    return DEFAULT_COLOR;\n  }\n  return col.getColor(row);\n}\n","import {round} from '../internal';\nimport {Column, isNumbersColumn, IDataRow, INumberColumn, isNumberColumn, DEFAULT_COLOR} from '../model';\nimport {setText, adaptDynamicColorToBgColor, noRenderer} from './utils';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {colorOf} from './impose';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, IGroupCellRenderer, ISummaryRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\n\n\nexport default class BarCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Bar';\n\n  /**\n   * flag to always render the value\n   * @type {boolean}\n   */\n\n  constructor(private readonly renderValue: boolean = false) {\n  }\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return mode === ERenderMode.CELL && isNumberColumn(col) && !isNumbersColumn(col);\n  }\n\n  create(col: INumberColumn, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const width = context.colWidth(col);\n    return {\n      template: `<div title=\"\">\n          <div class=\"${cssClass('bar-label')}\" style='background-color: ${DEFAULT_COLOR}'>\n            <span ${this.renderValue ? '' : `class=\"${cssClass('hover-only')}\"`}></span>\n          </div>\n        </div>`,\n      update: (n: HTMLDivElement, d: IDataRow) => {\n        const value = col.getNumber(d);\n        const missing = renderMissingDOM(n, col, d);\n        const w = isNaN(value) ? 0 : round(value * 100, 2);\n        const title = col.getLabel(d);\n        n.title = title;\n\n        const bar = <HTMLElement>n.firstElementChild!;\n        bar.style.width = missing ? '100%' : `${w}%`;\n        const color = colorOf(col, d, imposer, value);\n        bar.style.backgroundColor = missing ? null : color;\n        setText(bar.firstElementChild!, title);\n        const item = <HTMLElement>bar.firstElementChild!;\n        setText(item, title);\n        adaptDynamicColorToBgColor(item, color || DEFAULT_COLOR, title, w / 100);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        const value = col.getNumber(d);\n        ctx.fillStyle = colorOf(col, d, imposer, value) || DEFAULT_COLOR;\n        const w = width * value;\n        ctx.fillRect(0, 0, isNaN(w) ? 0 : w, CANVAS_HEIGHT);\n\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {Column, IDataRow} from '../model';\nimport {ERenderMode, ICellRendererFactory, IGroupCellRenderer, ISummaryRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer, setText} from './utils';\n\n/**\n * default renderer instance rendering the value as a text\n */\nexport class DefaultCellRenderer implements ICellRendererFactory {\n  title: string = 'String';\n  groupTitle: string = 'None';\n  summaryTitle: string = 'None';\n\n  canRender(_col: Column, _mode: ERenderMode): boolean {\n    return true;\n  }\n\n  create(col: Column): ICellRenderer {\n    return {\n      template: `<div> </div>`,\n      update: (n: HTMLDivElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        const l = col.getLabel(d);\n        setText(n, l);\n        n.title = l;\n      }\n    };\n  }\n\n  createGroup(_col: Column): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {Column, BooleanColumn} from '../model';\nimport {DefaultCellRenderer} from './DefaultCellRenderer';\nimport {ERenderMode, ICellRenderer} from './interfaces';\nimport {cssClass} from '../styles';\n\nexport default class BooleanCellRenderer extends DefaultCellRenderer {\n  readonly title: string = 'Default';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return col instanceof BooleanColumn && mode === ERenderMode.CELL;\n  }\n\n  create(col: Column): ICellRenderer {\n    const r = super.create(col);\n    (<any>r).template = `<div class=\"${cssClass('center')}\"> </div>`;\n    return r;\n  }\n}\n","import {IBoxPlotData, IAdvancedBoxPlotData, round} from '../internal';\nimport {NumberColumn, IBoxPlotColumn, INumberColumn, isBoxPlotColumn, Column, IDataRow, isNumberColumn, isMapAbleColumn, IOrderedGroup} from '../model';\nimport {BOX_PLOT, CANVAS_HEIGHT, DOT, cssClass} from '../styles';\nimport {colorOf} from './impose';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas} from './missing';\nimport {tasksAll} from '../provider';\n\nconst BOXPLOT = `<div title=\"\">\n  <div class=\"${cssClass('boxplot-whisker')}\">\n    <div class=\"${cssClass('boxplot-box')}\"></div>\n    <div class=\"${cssClass('boxplot-median')}\"></div>\n    <div class=\"${cssClass('boxplot-mean')}\"></div>\n  </div>\n</div>`;\n\nconst MAPPED_BOXPLOT = `<div title=\"\">\n  <div class=\"${cssClass('boxplot-whisker')}\">\n    <div class=\"${cssClass('boxplot-box')}\"></div>\n    <div class=\"${cssClass('boxplot-median')}\"></div>\n    <div class=\"${cssClass('boxplot-mean')}\"></div>\n  </div>\n  <span class=\"${cssClass('mapping-hint')}\"></span><span class=\"${cssClass('mapping-hint')}\"></span>\n</div>`;\n\n\n/** @internal */\nexport function computeLabel(col: INumberColumn, v: IBoxPlotData | IAdvancedBoxPlotData) {\n  if (v == null) {\n    return '';\n  }\n  const f = col.getNumberFormat();\n  const mean = (<IAdvancedBoxPlotData>v).mean != null ? `mean = ${f((<IAdvancedBoxPlotData>v).mean)} (dashed line)\\n` : '';\n  return `min = ${f(v.min)}\\nq1 = ${f(v.q1)}\\nmedian = ${f(v.median)}\\n${mean}q3 = ${f(v.q3)}\\nmax = ${f(v.max)}`;\n}\n\nexport default class BoxplotCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Box Plot';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return (isBoxPlotColumn(col) && mode === ERenderMode.CELL || (isNumberColumn(col) && mode !== ERenderMode.CELL));\n  }\n\n  create(col: IBoxPlotColumn, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const sortMethod = <keyof IBoxPlotData>col.getSortMethod();\n    const sortedByMe = col.isSortedByMe().asc !== undefined;\n    const width = context.colWidth(col);\n    return {\n      template: BOXPLOT,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const data = col.getBoxPlotData(d);\n        n.classList.toggle(cssClass('missing'), !data);\n        if (!data) {\n          return;\n        }\n        const label = col.getRawBoxPlotData(d)!;\n        renderDOMBoxPlot(col, n, data!, label, sortedByMe ? sortMethod : '', colorOf(col, d, imposer));\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n\n        // Rectangle\n        const data = col.getBoxPlotData(d);\n        if (!data) {\n          return;\n        }\n\n        const scaled = {\n          min: data.min * width,\n          median: data.median * width,\n          mean: (<IAdvancedBoxPlotData>data).mean != null ? (<IAdvancedBoxPlotData>data).mean * width : undefined,\n          q1: data.q1 * width,\n          q3: data.q3 * width,\n          max: data.max * width,\n          outlier: data.outlier ? data.outlier.map((d) => d * width) : undefined,\n          whiskerLow: data.whiskerLow != null ? data.whiskerLow * width : undefined,\n          whiskerHigh: data.whiskerHigh != null ? data.whiskerHigh * width : undefined\n        };\n        renderBoxPlot(ctx, scaled, sortedByMe ? sortMethod : '', colorOf(col, d, imposer), CANVAS_HEIGHT, 0);\n      }\n    };\n  }\n\n  createGroup(col: INumberColumn, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\n    return {\n      template: BOXPLOT,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return tasksAll([context.tasks.groupBoxPlotStats(col, group, false), context.tasks.groupBoxPlotStats(col, group, true)]).then((data) => {\n          if (typeof data === 'symbol') {\n            return;\n          }\n          // render\n          const isMissing = data == null || data[0] == null || data[0].group.count === 0 || data[0].group.count === data[0].group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          renderDOMBoxPlot(col, n, data[0].group, data[1].group, sort, colorOf(col, null, imposer));\n        });\n      }\n    };\n  }\n\n  createSummary(col: INumberColumn, context: IRenderContext, _interactive: boolean, imposer?: IImposer): ISummaryRenderer {\n    return {\n      template: isMapAbleColumn(col) ? MAPPED_BOXPLOT : BOXPLOT,\n      update: (n: HTMLElement) => {\n        return tasksAll([context.tasks.summaryBoxPlotStats(col, false), context.tasks.summaryBoxPlotStats(col, true)]).then((data) => {\n          if (typeof data === 'symbol') {\n            return;\n          }\n          const isMissing = data == null || data[0] == null || data[0].summary.count === 0 || data[0].summary.count === data[0].summary.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          const mappedSummary = data[0].summary;\n          const rawSummary = data[1].summary;\n          const sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\n\n          if (isMapAbleColumn(col)) {\n            const range = col.getRange();\n            Array.from(n.getElementsByTagName('span')).forEach((d: HTMLElement, i) => d.textContent = range[i]);\n          }\n\n          renderDOMBoxPlot(col, n, mappedSummary, rawSummary, sort, colorOf(col, null, imposer), isMapAbleColumn(col));\n        });\n      }\n    };\n  }\n}\n\nfunction renderDOMBoxPlot(col: INumberColumn, n: HTMLElement, data: IBoxPlotData | IAdvancedBoxPlotData, label: IBoxPlotData | IAdvancedBoxPlotData, sort: string, color: string | null, hasRange: boolean = false) {\n  n.title = computeLabel(col, label);\n\n  const whiskers = <HTMLElement>n.firstElementChild;\n  const box = <HTMLElement>whiskers.firstElementChild;\n  const median = <HTMLElement>box.nextElementSibling;\n  const mean = <HTMLElement>whiskers.lastElementChild;\n\n  const leftWhisker = data.whiskerLow != null ? data.whiskerLow : Math.max(data.q1 - 1.5 * (data.q3 - data.q1), data.min);\n  const rightWhisker = data.whiskerHigh != null ? data.whiskerHigh : Math.min(data.q3 + 1.5 * (data.q3 - data.q1), data.max);\n  whiskers.style.left = `${round(leftWhisker * 100, 2)}%`;\n  const range = rightWhisker - leftWhisker;\n  whiskers.style.width = `${round(range * 100, 2)}%`;\n\n  //relative within the whiskers\n  box.style.left = `${round((data.q1 - leftWhisker) / range * 100, 2)}%`;\n  box.style.width = `${round((data.q3 - data.q1) / range * 100, 2)}%`;\n  box.style.backgroundColor = color;\n\n  //relative within the whiskers\n  median.style.left = `${round((data.median - leftWhisker) / range * 100, 2)}%`;\n  if ((<IAdvancedBoxPlotData>data).mean != null) {\n    mean.style.left = `${round(((<IAdvancedBoxPlotData>data).mean - leftWhisker) / range * 100, 2)}%`;\n    mean.style.display = null;\n  } else {\n    mean.style.display = 'none';\n  }\n\n  // match lengths\n  const outliers = <HTMLElement[]>Array.from(n.children).slice(1, hasRange ? -2 : undefined);\n  const numOutliers = data.outlier ? data.outlier.length : 0;\n  outliers.splice(numOutliers, outliers.length - numOutliers).forEach((v) => v.remove());\n\n  whiskers.dataset.sort = sort;\n\n  if (!data.outlier || numOutliers === 0) {\n    return;\n  }\n\n  for (let i = outliers.length; i < numOutliers; ++i) {\n    const p = n.ownerDocument!.createElement('div');\n    p.classList.add(cssClass('boxplot-outlier'));\n    outliers.unshift(p);\n    whiskers.insertAdjacentElement('afterend', p);\n  }\n  data.outlier.forEach((v, i) => {\n    delete outliers[i].dataset.sort;\n    outliers[i].style.left = `${round(v * 100, 2)}%`;\n  });\n\n  if (sort === 'min' && data.outlier[0] <= leftWhisker) {\n    // first outliers is the min\n    whiskers.dataset.sort = '';\n    outliers[0].dataset.sort = 'min';\n    if (outliers.length > 1) {\n      // append at the end of the DOM to be on top\n      outliers[outliers.length - 1].insertAdjacentElement('afterend', outliers[0]);\n    }\n  } else if (sort === 'max' && data.outlier[outliers.length - 1] >= rightWhisker) {\n    // last outlier is the max\n    whiskers.dataset.sort = '';\n    outliers[outliers.length - 1].dataset.sort = 'max';\n  }\n}\n\nfunction renderBoxPlot(ctx: CanvasRenderingContext2D, box: IBoxPlotData, sort: string, color: string | null, height: number, topPadding: number) {\n  const left = box.whiskerLow != null ? box.whiskerLow : Math.max((box.q1 - 1.5 * (box.q3 - box.q1)), box.min);\n  const right = box.whiskerHigh != null ? box.whiskerHigh : Math.min((box.q3 + 1.5 * (box.q3 - box.q1)), box.max);\n\n  ctx.fillStyle = color || BOX_PLOT.box;\n  ctx.strokeStyle = BOX_PLOT.stroke;\n  ctx.beginPath();\n  ctx.rect(box.q1, 0, box.q3 - box.q1, height);\n  ctx.fill();\n  ctx.stroke();\n\n  //Line\n  const bottomPos = height - topPadding;\n  const middlePos = height / 2;\n\n  ctx.beginPath();\n  ctx.moveTo(left, middlePos);\n  ctx.lineTo(box.q1, middlePos);\n  ctx.moveTo(left, topPadding);\n  ctx.lineTo(left, bottomPos);\n  ctx.moveTo(box.median, 0);\n  ctx.lineTo(box.median, height);\n  ctx.moveTo(box.q3, middlePos);\n  ctx.lineTo(right, middlePos);\n  ctx.moveTo(right, topPadding);\n  ctx.lineTo(right, bottomPos);\n  ctx.stroke();\n  ctx.fill();\n\n  if (sort !== '') {\n    ctx.strokeStyle = BOX_PLOT.sort;\n    ctx.beginPath();\n    ctx.moveTo(<number>box[<keyof IBoxPlotData>sort], topPadding);\n    ctx.lineTo(<number>box[<keyof IBoxPlotData>sort], height - topPadding);\n    ctx.stroke();\n    ctx.fill();\n  }\n\n  if (!box.outlier) {\n    return;\n  }\n  ctx.fillStyle = BOX_PLOT.outlier;\n  box.outlier.forEach((v) => {\n    // currently dots with 3px\n    ctx.fillRect(Math.max(v - DOT.size / 2, 0), middlePos - DOT.size / 2, DOT.size, DOT.size);\n  });\n}\n","import {hsl} from 'd3-color';\nimport {Column, isNumbersColumn, IDataRow, INumberColumn, isNumberColumn, isMapAbleColumn, DEFAULT_COLOR, SolidColorFunction} from '../model';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {colorOf} from './impose';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {noRenderer, setText} from './utils';\n\nexport function toHeatMapColor(v: number | null, row: IDataRow, col: INumberColumn, imposer?: IImposer) {\n  if (v == null || isNaN(v)) {\n    v = 1; // max = brightest\n  }\n  if (imposer || !isMapAbleColumn(col)) {\n    //hsl space encoding, encode in lightness\n    const color = hsl(colorOf(col, row, imposer, v) || DEFAULT_COLOR);\n    color.l = 1 - v; // largest value = darkest color\n    return color.toString();\n  }\n  const map = col.getColorMapping();\n  const valueColor = map.apply(v);\n  if (map instanceof SolidColorFunction) {\n    //hsl space encoding, encode in lightness\n    const color = hsl(valueColor);\n    color.l = 1 - v; // largest value = darkest color\n    return color.toString();\n  }\n  // some custom logic that maps to another value\n  return valueColor;\n}\n\nexport default class BrightnessCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Brightness';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\n  }\n\n  create(col: INumberColumn, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const width = context.colWidth(col);\n    return {\n      template: `<div title=\"\">\n        <div class=\"${cssClass('cat-color')}\" style=\"background-color: ${DEFAULT_COLOR}\"></div><div class=\"${cssClass('cat-label')}\"> </div>\n      </div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const missing = renderMissingDOM(n, col, d);\n        n.title = col.getLabel(d);\n        (<HTMLDivElement>n.firstElementChild!).style.backgroundColor = missing ? null : toHeatMapColor(col.getNumber(d), d, col, imposer);\n        setText(<HTMLSpanElement>n.lastElementChild!, n.title);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        ctx.fillStyle = toHeatMapColor(col.getNumber(d), d, col, imposer);\n        ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {DENSE_HISTOGRAM} from '../constants';\nimport {ICategoricalStatistics, round} from '../internal';\nimport {OrdinalColumn, isCategoricalColumn, isCategoricalLikeColumn, ICategoricalLikeColumn, ICategory, Column, CategoricalColumn, ICategoricalColumn, IDataRow, IOrderedGroup, SetColumn} from '../model';\nimport {CANVAS_HEIGHT, cssClass, FILTERED_OPACITY} from '../styles';\nimport {filterMissingNumberMarkup, updateFilterMissingNumberMarkup} from '../ui/missing';\nimport {IRenderContext, ICellRendererFactory, ERenderMode, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {setText, wideEnough, forEach} from './utils';\nimport {color} from 'd3-color';\n\n/** @internal */\nexport declare type HasCategoricalFilter = CategoricalColumn | OrdinalColumn | SetColumn;\n\nexport default class CategoricalCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Color';\n  readonly groupTitle: string = 'Histogram';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isCategoricalLikeColumn(col) && (mode !== ERenderMode.CELL || isCategoricalColumn(col));\n  }\n\n  create(col: ICategoricalColumn, context: IRenderContext): ICellRenderer {\n    const width = context.colWidth(col);\n    return {\n      template: `<div>\n        <div class=\"${cssClass('cat-color')}\"></div><div class=\"${cssClass('cat-label')}\"></div>\n      </div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        const v = col.getCategory(d);\n        (<HTMLDivElement>n.firstElementChild!).style.backgroundColor = v ? col.getColor(d) : null;\n        setText(<HTMLSpanElement>n.lastElementChild!, col.getLabel(d));\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        const v = col.getCategory(d);\n        ctx.fillStyle = v ? col.getColor(d) : '';\n        ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\n      }\n    };\n  }\n\n  createGroup(col: ICategoricalLikeColumn, context: IRenderContext): IGroupCellRenderer {\n    const {template, update} = hist(col, false);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupCategoricalStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          const isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          update(n, r.group);\n        });\n      }\n    };\n  }\n\n  createSummary(col: ICategoricalLikeColumn, context: IRenderContext, interactive: boolean): ISummaryRenderer {\n    return (col instanceof CategoricalColumn || col instanceof OrdinalColumn || col instanceof SetColumn) ? interactiveSummary(col, context, interactive) : staticSummary(col, context, interactive);\n  }\n}\n\nfunction staticSummary(col: ICategoricalLikeColumn, context: IRenderContext, interactive: boolean) {\n  const {template, update} = hist(col, interactive);\n  return {\n    template: `${template}</div>`,\n    update: (n: HTMLElement) => {\n      return context.tasks.summaryCategoricalStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n        n.classList.toggle(cssClass('missing'), isMissing);\n        if (isMissing) {\n          return;\n        }\n        update(n, r.summary);\n      });\n    }\n  };\n}\n\nfunction interactiveSummary(col: HasCategoricalFilter, context: IRenderContext, interactive: boolean) {\n  const {template, update} = hist(col, interactive || wideEnough(col));\n  let filterUpdate: (missing: number, col: HasCategoricalFilter) => void;\n  return {\n    template: `${template}${interactive ? filterMissingNumberMarkup(false, 0) : ''}</div>`,\n    update: (n: HTMLElement) => {\n      n.classList.toggle(cssClass('histogram-i'), interactive);\n\n      if (!filterUpdate) {\n        filterUpdate = interactiveHist(col, n);\n      }\n      return context.tasks.summaryCategoricalStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const {summary, data} = r;\n        filterUpdate((interactive && data) ? data.missing : (summary ? summary.missing : 0), col);\n\n        const isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n        n.classList.toggle(cssClass('missing'), isMissing);\n        if (isMissing) {\n          return;\n        }\n        update(n, summary, interactive ? data : undefined);\n      });\n    }\n  };\n}\n\nfunction hist(col: ICategoricalLikeColumn, showLabels: boolean) {\n  const mapping = col.getColorMapping();\n  const bins = col.categories.map((c) => `<div class=\"${cssClass('histogram-bin')}\" title=\"${c.label}: 0\" data-cat=\"${c.name}\" ${showLabels ? `data-title=\"${c.label}\"` : ''}><div style=\"height: 0; background-color: ${mapping.apply(c)}\"></div></div>`).join('');\n  const template = `<div class=\"${cssClass('histogram')} ${col.categories.length! > DENSE_HISTOGRAM ? cssClass('dense') : ''}\">${bins}`; // no closing div to be able to append things\n\n\n  return {\n    template,\n    update: (n: HTMLElement, hist: ICategoricalStatistics, gHist?: ICategoricalStatistics) => {\n      const mapping = col.getColorMapping();\n\n      const selected = col.categories.map((d) => {\n        const c = color(mapping.apply(d))!;\n        c.opacity = FILTERED_OPACITY;\n        return c.toString();\n      });\n\n      const maxBin = gHist ? gHist.maxBin : hist.maxBin;\n      forEach(n, '[data-cat]', (d: HTMLElement, i) => {\n        const cat = col.categories[i];\n        const {count} = hist.hist[i];\n        const inner = <HTMLElement>d.firstElementChild!;\n        if (gHist) {\n          const {count: gCount} = gHist.hist[i];\n          d.title = `${cat.label}: ${count} of ${gCount}`;\n          inner.style.height = `${round(gCount * 100 / maxBin, 2)}%`;\n          const relY = 100 - round(count * 100 / gCount, 2);\n          inner.style.background = relY === 0 ? mapping.apply(cat) : (relY === 100 ? selected[i] : `linear-gradient(${selected[i]} ${relY}%, ${mapping.apply(cat)} ${relY}%, ${mapping.apply(cat)} 100%)`);\n        } else {\n          d.title = `${col.categories[i].label}: ${count}`;\n          const inner = <HTMLElement>d.firstElementChild!;\n          inner.style.height = `${Math.round(count * 100 / maxBin)}%`;\n          inner.style.background = mapping.apply(cat);\n        }\n      });\n    }\n  };\n}\n\nfunction setCategoricalFilter(col: HasCategoricalFilter, filter: string | RegExp | string[], filterMissing: boolean) {\n  if (col instanceof SetColumn) {\n    const f = col.getFilter();\n    const mode = f ? f.mode : undefined;\n    col.setFilter({\n      filter, filterMissing, mode\n    });\n  } else {\n    col.setFilter({\n      filter, filterMissing\n    });\n  }\n}\n\n/** @internal */\nexport function interactiveHist(col: HasCategoricalFilter, node: HTMLElement) {\n  const bins = <HTMLElement[]>Array.from(node.querySelectorAll('[data-cat]'));\n\n  const markFilter = (bin: HTMLElement, cat: ICategory, value: boolean) => {\n    // update filter highlight eagerly for better user feedback\n    const inner = <HTMLElement>bin.firstElementChild!;\n    const base = col.getColorMapping().apply(cat);\n    if (value) {\n      inner.style.background = base;\n      return;\n    }\n    const c = color(base)!;\n    c.opacity = FILTERED_OPACITY;\n    inner.style.background = c.toString();\n  };\n\n  bins.forEach((bin, i) => {\n    const cat = col.categories[i];\n\n    bin.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n\n      // toggle filter\n      const old = col.getFilter();\n      if (old == null || !Array.isArray(old.filter)) {\n        // deselect\n        markFilter(bin, cat, false);\n        const included = col.categories.slice();\n        included.splice(i, 1);\n        setCategoricalFilter(col, included.map((d) => d.name), old ? old.filterMissing : false);\n        return;\n      }\n      const filter = old.filter.slice();\n      const contained = filter.indexOf(cat.name);\n      if (contained >= 0) {\n        // remove\n        filter.splice(contained, 1);\n        markFilter(bin, cat, false);\n      } else {\n        // readd\n        filter.push(cat.name);\n        markFilter(bin, cat, true);\n      }\n      if (!old.filterMissing && filter.length === col.categories.length) {\n        // dummy filter\n        col.setFilter(null);\n        return;\n      }\n      setCategoricalFilter(col, filter, old.filterMissing);\n    };\n  });\n\n\n  const filterMissing = <HTMLInputElement>node.getElementsByTagName('input')[0]!;\n\n  if (filterMissing) {\n    filterMissing.onchange = () => {\n      // toggle filter\n      const v = filterMissing.checked;\n      const old = col.getFilter();\n      if (old == null) {\n        if (v) {\n          setCategoricalFilter(col, col.categories.map((d) => d.name), v);\n        } else {\n          col.setFilter(null);\n        }\n      } else if (!v && Array.isArray(old.filter) && old.filter.length === col.categories.length) {\n        // dummy\n        col.setFilter(null);\n      } else {\n        setCategoricalFilter(col, old.filter, v);\n      }\n    };\n  }\n\n\n  return (missing: number, actCol: HasCategoricalFilter) => {\n    col = actCol;\n    const f = col.getFilter();\n    if (filterMissing) {\n      filterMissing.checked = f != null && f.filterMissing;\n      updateFilterMissingNumberMarkup(<HTMLElement>filterMissing.parentElement, missing);\n    }\n  };\n}\n","import {Column, ICategoricalsColumn, ICategory, IDataRow, IOrderedGroup, isCategoricalsColumn} from '../model';\nimport {toMostFrequentCategoricals} from '../model/internalCategorical';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {ICellRendererFactory, IRenderContext, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingDOM, renderMissingValue} from './missing';\nimport {noop, wideEnough} from './utils';\nimport {GUESSED_ROW_HEIGHT} from '../constants';\n\nexport default class CategoricalHeatmapCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Heatmap';\n\n  canRender(col: Column): boolean {\n    return isCategoricalsColumn(col) && Boolean(col.dataLength);\n  }\n\n  private createContext(col: ICategoricalsColumn, context: IRenderContext) {\n    const width = context.colWidth(col);\n    const cellDimension = width / col.dataLength!;\n    const labels = col.labels;\n    const render = (ctx: CanvasRenderingContext2D, data: (ICategory | null)[], height: number) => {\n      data.forEach((d: ICategory | null, j: number) => {\n        const x = j * cellDimension;\n        if (d == null) {\n          renderMissingValue(ctx, cellDimension, height, x, 0);\n          return;\n        }\n        ctx.fillStyle = d.color;\n        ctx.fillRect(x, 0, cellDimension, height);\n      });\n    };\n    return {\n      template: `<canvas height=\"${GUESSED_ROW_HEIGHT}\" title=\"\"></canvas>`,\n      render,\n      width,\n      mover: (n: HTMLElement, values: string[]) => (evt: MouseEvent) => {\n        const percent = evt.offsetX / width;\n        const index = Math.max(0, Math.min(col.dataLength! - 1, Math.floor(percent * (col.dataLength! - 1) + 0.5)));\n        n.title = `${labels[index]}: ${values[index]}`;\n      }\n    };\n  }\n\n  create(col: ICategoricalsColumn, context: IRenderContext): ICellRenderer {\n    const {template, render, mover, width} = this.createContext(col, context);\n\n    return {\n      template,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const ctx = (<HTMLCanvasElement>n).getContext('2d')!;\n        ctx.canvas.width = width;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        n.onmousemove = mover(n, col.getLabels(d));\n        n.onmouseleave = () => n.title = '';\n        render(ctx, col.getCategories(d), GUESSED_ROW_HEIGHT);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        render(ctx, col.getCategories(d), CANVAS_HEIGHT);\n      }\n    };\n  }\n\n  createGroup(col: ICategoricalsColumn, context: IRenderContext): IGroupCellRenderer {\n    const {template, render, mover, width} = this.createContext(col, context);\n\n    return {\n      template,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, this.title, (rows) => toMostFrequentCategoricals(rows, col)).then((data) => {\n          if (typeof data === 'symbol') {\n            return;\n          }\n          const ctx = (<HTMLCanvasElement>n).getContext('2d')!;\n          ctx.canvas.width = width;\n          ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n          const isMissing = !data || data.length === 0 || data.every((d) => d == null);\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          n.onmousemove = mover(n, data.map((d) => d ? d.label : 'missing'));\n          n.onmouseleave = () => n.title = '';\n          render(ctx, data, GUESSED_ROW_HEIGHT);\n        });\n      }\n    };\n  }\n\n  createSummary(col: ICategoricalsColumn): ISummaryRenderer {\n    let labels = col.labels.slice();\n    while (labels.length > 0 && !wideEnough(col, labels.length)) {\n      labels = labels.filter((_, i) => i % 2 === 0); // even\n    }\n    let templateRows = `<div class=\"${cssClass('heatmap')}\">`;\n    for (const label of labels) {\n      templateRows += `<div class=\"${cssClass('heatmap-cell')}\"  title=\"${label}\" data-title=\"${label}\"></div>`;\n    }\n    templateRows += '</div>';\n    return {\n      template: templateRows,\n      update: noop\n    };\n  }\n}\n","import {ICategoricalStatistics, round} from '../internal';\nimport {CategoricalColumn, Column, OrdinalColumn, ICategoricalColumn, isCategoricalColumn, IOrderedGroup, ISetColumn, DEFAULT_COLOR} from '../model';\nimport {filterMissingNumberMarkup} from '../ui/missing';\nimport {interactiveHist, HasCategoricalFilter} from './CategoricalCellRenderer';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {noRenderer, adaptTextColorToBgColor} from './utils';\nimport {cssClass, FILTERED_OPACITY} from '../styles';\nimport {color} from 'd3-color';\n\nexport default class CategoricalStackedDistributionlCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Distribution Bar';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isCategoricalColumn(col) && mode !== ERenderMode.CELL;\n  }\n\n  create(): ICellRenderer {\n    return noRenderer;\n  }\n\n  createGroup(col: ICategoricalColumn, context: IRenderContext): IGroupCellRenderer {\n    const {template, update} = stackedBar(col);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupCategoricalStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          const isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          update(n, r.group);\n        });\n      }\n    };\n  }\n\n  createSummary(col: ICategoricalColumn, context: IRenderContext, interactive: boolean): ISummaryRenderer {\n    return (col instanceof CategoricalColumn || col instanceof OrdinalColumn) ? interactiveSummary(col, context, interactive) : staticSummary(col, context);\n  }\n}\n\nfunction staticSummary(col: ICategoricalColumn, context: IRenderContext) {\n  const {template, update} = stackedBar(col);\n  return {\n    template: `${template}</div>`,\n    update: (n: HTMLElement) => {\n      return context.tasks.summaryCategoricalStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n        n.classList.toggle(cssClass('missing'), isMissing);\n        if (isMissing) {\n          return;\n        }\n        update(n, r.summary, r.data);\n      });\n    }\n  };\n}\n\nfunction interactiveSummary(col: HasCategoricalFilter, context: IRenderContext, interactive: boolean) {\n  const {template, update} = stackedBar(col);\n  let filterUpdate: (missing: number, col: HasCategoricalFilter) => void;\n  return {\n    template: `${template}${interactive ? filterMissingNumberMarkup(false, 0) : ''}</div>`,\n    update: (n: HTMLElement) => {\n      if (!filterUpdate) {\n        filterUpdate = interactiveHist(col, n);\n      }\n      return context.tasks.summaryCategoricalStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const {summary, data} = r;\n\n        const missing = interactive && data ? data.missing : (summary ? summary.missing : 0);\n        filterUpdate(missing, col);\n\n        const isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n        n.classList.toggle(cssClass('missing'), isMissing);\n        if (isMissing) {\n          return;\n        }\n        update(n, summary, data);\n      });\n    }\n  };\n}\n\nfunction selectedCol(value: string) {\n  const c = color(value)!;\n  c.opacity = FILTERED_OPACITY;\n  return c.toString();\n}\n\nfunction stackedBar(col: ISetColumn) {\n  const mapping = col.getColorMapping();\n  const cats = col.categories.map((c) => ({\n    label: c.label,\n    name: c.name,\n    color: mapping.apply(c),\n    selected: selectedCol(mapping.apply(c))\n  }));\n  cats.push({label: 'Missing Values', name: 'missing', color: DEFAULT_COLOR, selected: 'transparent'});\n\n  const bins = cats.map((c) => `<div class=\"${cssClass('distribution-bar')}\" style=\"background-color: ${c.color}; color: ${adaptTextColorToBgColor(c.color)}\" title=\"${c.label}: 0\" data-cat=\"${c.name}\"><span>${c.label}</span></div>`).join('');\n\n  return {\n    template: `<div>${bins}`, // no closing div to be able to append things\n    update: (n: HTMLElement, hist: ICategoricalStatistics, gHist?: ICategoricalStatistics) => {\n      const bins: {count: number}[] = hist.hist.slice();\n      bins.push({count: hist.missing});\n      const children = <HTMLElement[]>Array.from(n.children);\n\n      if (!gHist) {\n        const total = bins.reduce((acc, {count}) => acc + count, 0);\n\n        for (let i = 0; i < cats.length; ++i) {\n          const d = children[i];\n          const count = bins[i].count;\n          const label = cats[i].label;\n          d.style.flexGrow = `${round(total === 0 ? 0 : count, 2)}`;\n          d.title = `${label}: ${count}`;\n        }\n        return;\n      }\n\n      const gBins: {count: number}[] = gHist.hist.slice();\n      gBins.push({count: gHist.missing});\n      const total = gBins.reduce((acc, {count}) => acc + count, 9);\n\n      for (let i = 0; i < cats.length; ++i) {\n        const d = children[i];\n        const count = bins[i].count;\n        const label = cats[i].label;\n        const gCount = gBins[i].count;\n\n        d.style.flexGrow = `${round(total === 0 ? 0 : gCount, 2)}`;\n        d.title = `${label}: ${count} of ${gCount}`;\n        const relY = 100 - round(count * 100 / gCount, 2);\n        d.style.background = relY === 0 ? cats[i].color : (relY === 100 ? cats[i].selected : `linear-gradient(${cats[i].selected} ${relY}%, ${cats[i].color} ${relY}%, ${cats[i].color} 100%)`);\n      }\n    }\n  };\n}\n","import {Column, isNumbersColumn, IDataRow, INumberColumn, isNumberColumn} from '../model';\nimport {colorOf} from './impose';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer, setText} from './utils';\nimport {cssClass} from '../styles';\n\nexport default class CircleCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Proportional Symbol';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\n  }\n\n  create(col: INumberColumn, _context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    return {\n      template: `<div style=\"background: radial-gradient(circle closest-side, red 100%, transparent 100%)\" title=\"\">\n              <div class=\"${cssClass('hover-only')} ${cssClass('bar-label')}\"></div>\n          </div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const v = col.getNumber(d);\n        const p = Math.round(v * 100);\n        const missing = renderMissingDOM(n, col, d);\n        n.style.background = missing ? null : `radial-gradient(circle closest-side, ${colorOf(col, d, imposer)} ${p}%, transparent ${p}%)`;\n        setText(n.firstElementChild!, col.getLabel(d));\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {GUESSES_GROUP_HEIGHT} from '../constants';\nimport {concatSeq, ISequence, round} from '../internal';\nimport {Column, DEFAULT_COLOR, IDataRow, INumberColumn, IOrderedGroup, isNumberColumn, isNumbersColumn} from '../model';\nimport {CANVAS_HEIGHT, DOT, cssClass} from '../styles';\nimport {colorOf} from './impose';\nimport {ERenderMode, ICellRendererFactory, IImposer, IRenderContext, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {noRenderer} from './utils';\n\n\nexport default class DotCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Dot';\n  readonly groupTitle: string = 'Dots';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isNumberColumn(col) && mode !== ERenderMode.SUMMARY;\n  }\n\n  private static getCanvasRenderer(col: INumberColumn, context: IRenderContext) {\n    const width = context.colWidth(col);\n    const pi2 = Math.PI * 2;\n    const radius = DOT.size / 2;\n    const render = (ctx: CanvasRenderingContext2D, vs: {value: number, color: (string | null)}[], width: number) => {\n      ctx.save();\n      ctx.globalAlpha = DOT.opacity;\n      for (const v of vs) {\n        ctx.fillStyle = v.color || DOT.color;\n        const x = Math.min(width - radius, Math.max(radius, v.value * width));\n        const y = round(Math.random() * (GUESSES_GROUP_HEIGHT - DOT.size) + radius, 2);\n        ctx.beginPath();\n        ctx.moveTo(x + radius, y);\n        ctx.arc(x, y, radius, 0, pi2, true);\n        ctx.fill();\n      }\n      ctx.restore();\n    };\n    return {\n      template: `<canvas height=\"${GUESSES_GROUP_HEIGHT}\"></canvas>`,\n      render,\n      width\n    };\n  }\n\n  private static getDOMRenderer(col: INumberColumn) {\n    const dots = isNumbersColumn(col) ? col.dataLength! : 1;\n    let tmp = '';\n    for (let i = 0; i < dots; ++i) {\n      tmp += `<div style='background-color: ${DEFAULT_COLOR}' title=''></div>`;\n    }\n\n    const update = (n: HTMLElement, data: ISequence<{value: number, label: string, color: string | null}>) => {\n      //adapt the number of children\n      const l = data.length;\n      if (n.children.length !== l) {\n        n.innerHTML = data.reduce((tmp, r) => {\n          return `${tmp}<div style='background-color: ${r.color}' title='${r.label}'></div>`;\n        }, '');\n      }\n      const children = n.children;\n      data.forEach((v, i) => {\n        const d = <HTMLElement>children[i];\n        d.title = v.label;\n        d.style.display = isNaN(v.value) ? 'none' : null;\n        d.style.left = `${round(v.value * 100, 2)}%`;\n        // jitter\n        d.style.top = l > 1 ? `${round(Math.random() * 80 + 10, 2)}%` : null;\n        d.style.backgroundColor = v.color;\n      });\n    };\n\n    const render = (ctx: CanvasRenderingContext2D, vs: number[], colors: (string | null)[], width: number) => {\n      ctx.save();\n      ctx.globalAlpha = DOT.opacity;\n      vs.forEach((v, i) => {\n        ctx.fillStyle = colors[i] || DOT.color;\n        ctx.fillRect(Math.max(0, v * width - DOT.size / 2), 0, DOT.size, CANVAS_HEIGHT);\n      });\n      ctx.restore();\n    };\n\n    return {template: `<div>${tmp}</div>`, update, render};\n  }\n\n  create(col: INumberColumn, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const {template, render, update} = DotCellRenderer.getDOMRenderer(col);\n    const width = context.colWidth(col);\n    const formatter = col.getNumberFormat();\n    return {\n      template,\n      update: (n: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        const color = colorOf(col, d, imposer);\n        if (!isNumbersColumn(col)) {\n          const v = col.getNumber(d);\n          return update(n, [{value: v, label: col.getLabel(d), color}]);\n        }\n        const data = col.getNumbers(d).filter((vi: number) => !isNaN(vi)).map((value) => ({value, label: formatter(value), color}));\n        return update(n, data);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        const color = colorOf(col, d, imposer);\n        if (!isNumbersColumn(col)) {\n          const v = col.getNumber(d);\n          return render(ctx, [v], [color], width);\n        }\n        const vs: number[] = col.getNumbers(d).filter((vi: number) => !isNaN(vi));\n        return render(ctx, vs, vs.map((_: any) => color), width);\n      }\n    };\n  }\n\n  createGroup(col: INumberColumn, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const {template, render, width} = DotCellRenderer.getCanvasRenderer(col, context);\n\n    return {\n      template,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, 'dot', (rows) => {\n          //value, color, label,\n\n          if (!isNumbersColumn(col)) {\n            return Array.from(rows.map((r) => ({value: col.getNumber(r), color: colorOf(col, r, imposer)})));\n          }\n          // concatenate all columns\n          const vs = rows.map((r) => {\n            const color = colorOf(col, r, imposer);\n            return col.getNumbers(r)\n              .filter((vi: number) => !isNaN(vi))\n              .map((value) => ({value, color}));\n          });\n          return Array.from(concatSeq(vs));\n        }).then((data) => {\n          if (typeof data === 'symbol') {\n            return;\n          }\n          const isMissing = !data || data.length === 0 || data.every((v) => Number.isNaN(v.value));\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          const ctx = (<HTMLCanvasElement>n).getContext('2d')!;\n          ctx.canvas.width = width;\n          ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n          render(ctx, data, width);\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {Column, GroupColumn, IOrderedGroup, IGroup, defaultGroup, IDataRow} from '../model';\nimport {ICellRendererFactory, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {noRenderer} from './utils';\n\n\nfunction isDummyGroup(group: IGroup) {\n  return group.parent == null && group.name === defaultGroup.name;\n}\n\nexport default class GroupCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Default';\n\n  canRender(col: Column): boolean {\n    return col instanceof GroupColumn;\n  }\n\n  create(): ICellRenderer {\n    return {\n      template: `<div><div></div></div>`,\n      update(node: HTMLElement, _row: IDataRow, i: number, group: IOrderedGroup) {\n        (<HTMLElement>node.firstElementChild!).textContent = isDummyGroup(group) || i > 0 ? '' : `${group.name} (${group.order.length})`;\n      },\n      render(_ctx: CanvasRenderingContext2D, _row: IDataRow, i: number) {\n        return i === 0;\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return {\n      template: `<div><div></div></div>`,\n      update(node: HTMLElement, group: IOrderedGroup) {\n        (<HTMLElement>node.firstElementChild!).textContent = isDummyGroup(group) ? '' : `${group.name} (${group.order.length})`;\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {IDataRow, INumbersColumn, EAdvancedSortMethod, IOrderedGroup} from '../model';\nimport {IRenderContext, IImposer, ICellRenderer, IGroupCellRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {ISequence, boxplotBuilder, getSortLabel} from '../internal';\n\nexport abstract class ANumbersCellRenderer {\n  abstract readonly title: string;\n\n  protected abstract createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer): {\n    clazz: string,\n    templateRow: string,\n    update: (row: HTMLElement, data: number[], raw: number[], d: IDataRow, tooltipPrefix?: string) => void,\n    render: (ctx: CanvasRenderingContext2D, data: number[], d: IDataRow) => void,\n  };\n\n  static choose(col: INumbersColumn, rows: ISequence<IDataRow>) {\n    let row: IDataRow | null = null;\n    const data = rows.map((r, i) => {\n      if (i === 0) {\n        row = r;\n      }\n      return {n: col.getNumbers(r), raw: col.getRawNumbers(r)};\n    });\n    const cols = col.dataLength!;\n    const normalized = <number[]>[];\n    const raw = <number[]>[];\n    // mean column)\n    for (let i = 0; i < cols; ++i) {\n      const vs = data.map((d) => ({n: d.n[i], raw: d.raw[i]})).filter((d) => !isNaN(d.n));\n      if (vs.length === 0) {\n        normalized.push(NaN);\n        raw.push(NaN);\n      } else {\n        const bbn = boxplotBuilder();\n        const bbr = boxplotBuilder();\n        const s: EAdvancedSortMethod = <any>col.getSortMethod();\n        vs.forEach((d) => {\n          bbn.push(d.n);\n          bbr.push(d.raw);\n        });\n        normalized.push(bbn.build()[s]!);\n        raw.push(bbr.build()[s]!);\n      }\n    }\n    return {normalized, raw, row};\n  }\n\n  create(col: INumbersColumn, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const width = context.colWidth(col);\n    const {templateRow, render, update, clazz} = this.createContext(col, context, imposer);\n    return {\n      template: `<div class=\"${clazz}\">${templateRow}</div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        update(n, col.getNumbers(d), col.getRawNumbers(d), d);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        render(ctx, col.getNumbers(d), d);\n      },\n    };\n  }\n\n  createGroup(col: INumbersColumn, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const {templateRow, update, clazz} = this.createContext(col, context, imposer);\n    return {\n      template: `<div class=\"${clazz}\">${templateRow}</div>`,\n      update: (n: HTMLDivElement, group: IOrderedGroup) => {\n        // render a heatmap\n        return context.tasks.groupRows(col, group, this.title, (rows) => ANumbersCellRenderer.choose(col, rows)).then((data) => {\n          if (typeof data !== 'symbol') {\n            update(n, data.normalized, data.raw, data.row!, `${getSortLabel(col.getSortMethod())} `);\n          }\n        });\n      }\n    };\n  }\n}\n\n/** @internal */\nexport function matchRows(n: HTMLElement | SVGElement, length: number, template: string) {\n  // first match the number of rows\n  const children = <(HTMLElement | SVGElement)[]>Array.from(n.children);\n  if (children.length > length) {\n    children.slice(length).forEach((c) => c.remove());\n  } else if (length > children.length) {\n    n.insertAdjacentHTML('beforeend', template.repeat(length - children.length));\n  }\n}\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.15.0\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width'], 10) + parseFloat(styles['border' + sideB + 'Width'], 10);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop, 10);\n    var marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  var parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nfunction getRoundedOffsets(data, shouldRound) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n  var round = Math.round,\n      floor = Math.floor;\n\n  var noRound = function noRound(v) {\n    return v;\n  };\n\n  var referenceWidth = round(reference.width);\n  var popperWidth = round(popper.width);\n\n  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  var isVariation = data.placement.indexOf('-') !== -1;\n  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;\n  var verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right)\n  };\n}\n\nvar isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized], 10);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width'], 10);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    // flips variation if popper content overflows boundaries\n    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);\n\n    var flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\" — or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","import {Column, INumbersColumn, isNumbersColumn, IDataRow, IOrderedGroup} from '../model';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {ANumbersCellRenderer} from './ANumbersCellRenderer';\nimport {toHeatMapColor} from './BrightnessCellRenderer';\nimport {IRenderContext, ICellRendererFactory, IImposer, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingValue, renderMissingDOM} from './missing';\nimport {noop, wideEnough} from './utils';\nimport {GUESSED_ROW_HEIGHT} from '../constants';\nimport {getSortLabel} from '../internal';\n\n\nexport default class HeatmapCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Heatmap';\n\n  canRender(col: Column): boolean {\n    return isNumbersColumn(col) && Boolean(col.dataLength);\n  }\n\n  private createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer) {\n    const width = context.colWidth(col);\n    const cellDimension = width / col.dataLength!;\n    const labels = col.labels;\n    const render = (ctx: CanvasRenderingContext2D, data: number[], item: IDataRow, height: number) => {\n      data.forEach((d: number, j: number) => {\n        const x = j * cellDimension;\n        if (isNaN(d)) {\n          renderMissingValue(ctx, cellDimension, height, x, 0);\n          return;\n        }\n        ctx.fillStyle = toHeatMapColor(d, item, col, imposer);\n        ctx.fillRect(x, 0, cellDimension, height);\n      });\n    };\n    return {\n      template: `<canvas height=\"${GUESSED_ROW_HEIGHT}\" title=\"\"></canvas>`,\n      render,\n      width,\n      mover: (n: HTMLElement, values: string[], prefix?: string) => (evt: MouseEvent) => {\n        const percent = evt.offsetX / width;\n        const index = Math.max(0, Math.min(col.dataLength! - 1, Math.floor(percent * (col.dataLength! - 1) + 0.5)));\n        n.title = `${prefix || ''}${labels[index]}: ${values[index]}`;\n      }\n    };\n  }\n\n  create(col: INumbersColumn, context: IRenderContext, _hist: any, imposer?: IImposer): ICellRenderer {\n    const {template, render, mover, width} = this.createContext(col, context, imposer);\n\n    return {\n      template,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const ctx = (<HTMLCanvasElement>n).getContext('2d')!;\n        ctx.canvas.width = width;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        n.onmousemove = mover(n, col.getLabels(d));\n        n.onmouseleave = () => n.title = '';\n        render(ctx, col.getNumbers(d), d, GUESSED_ROW_HEIGHT);\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        render(ctx, col.getNumbers(d), d, CANVAS_HEIGHT);\n      }\n    };\n  }\n\n  createGroup(col: INumbersColumn, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const {template, render, mover, width} = this.createContext(col, context, imposer);\n    const formatter = col.getNumberFormat();\n\n    return {\n      template,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, this.title, (rows) => ANumbersCellRenderer.choose(col, rows)).then((data) => {\n          if (typeof data === 'symbol') {\n            return;\n          }\n          const ctx = (<HTMLCanvasElement>n).getContext('2d')!;\n          ctx.canvas.width = width;\n          ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n          const isMissing = !data || data.normalized.length === 0 || data.normalized.every((v) => Number.isNaN(v));\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n\n          n.onmousemove = mover(n, data.raw.map(formatter), `${getSortLabel(col.getSortMethod())} `);\n          n.onmouseleave = () => n.title = '';\n          render(ctx, data.normalized, data.row!, GUESSED_ROW_HEIGHT);\n        });\n      }\n    };\n  }\n\n  createSummary(col: INumbersColumn): ISummaryRenderer {\n    let labels = col.labels.slice();\n    while (labels.length > 0 && !wideEnough(col, labels.length)) {\n      labels = labels.filter((_, i) => i % 2 === 0); // even\n    }\n    let templateRows = `<div class=\"${cssClass('heatmap')}\">`;\n    for (const label of labels) {\n      templateRows += `<div class=\"${cssClass('heatmap-cell')}\"  title=\"${label}\" data-title=\"${label}\"></div>`;\n    }\n    templateRows += '</div>';\n    return {\n      template: templateRows,\n      update: noop\n    };\n  }\n}\n","const TYPE_OBJECT = '[object Object]';\n\n/**\n * deep merge the source object into the target object and return the target object.\n * will concatenate arrays instead of replacing them.\n * @internal\n */\nexport default function merge<T1, T2>(target: T1, source: T2): T1 | T2 {\n  const result: any = target;\n\n  if (!source) {\n    return result;\n  }\n\n  const bKeys: (keyof T2)[] = <(keyof T2)[]>Object.keys(source);\n  if (bKeys.length === 0) {\n    return result;\n  }\n\n  for (const key of bKeys) {\n    const value = source[key];\n\n    //merge just POJOs\n    if (Object.prototype.toString.call(value) === TYPE_OBJECT && (Object.getPrototypeOf(value) === Object.prototype)) { //pojo\n      if (result[key] == null) {\n        result[key] = {};\n      }\n      result[key] = merge(result[key], value);\n    } else if (Array.isArray(value)) {\n      if (result[key] == null) {\n        result[key] = [];\n      }\n      result[key] = result[key].concat(value);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n","import Popper from 'popper.js';\nimport DialogManager from './DialogManager';\nimport {merge} from '../../internal';\nimport {cssClass} from '../../styles';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {ILivePreviewOptions} from '../../config';\n\nexport interface IDialogOptions {\n  title: string;\n  livePreview: boolean | keyof ILivePreviewOptions;\n  popup: boolean;\n  // popper options\n  placement?: Popper.Placement;\n  eventsEnabled?: boolean;\n  modifiers?: Popper.Modifiers;\n  toggleDialog: boolean;\n  cancelSubDialogs?: boolean;\n  autoClose?: boolean;\n}\n\nexport interface IDialogContext {\n  attachment: HTMLElement;\n  level: number;\n  manager: DialogManager;\n  idPrefix: string;\n}\n\nexport function dialogContext(ctx: IRankingHeaderContext, level: number, attachment: HTMLElement | MouseEvent): IDialogContext {\n  return {\n    attachment: (<MouseEvent>attachment).currentTarget != null ? <HTMLElement>(<MouseEvent>attachment).currentTarget : <HTMLElement>attachment,\n    level,\n    manager: ctx.dialogManager,\n    idPrefix: ctx.idPrefix\n  };\n}\n\nabstract class ADialog {\n\n  private readonly options: Readonly<IDialogOptions> = {\n    title: '',\n    livePreview: false,\n    popup: false,\n    placement: 'bottom-start',\n    toggleDialog: true,\n    cancelSubDialogs: false,\n    autoClose: false,\n    modifiers: {\n    }\n  };\n\n  readonly node: HTMLFormElement;\n  private popper: Popper | null = null;\n\n  constructor(protected readonly dialog: Readonly<IDialogContext>, options: Partial<IDialogOptions> = {}) {\n    Object.assign(this.options, options);\n    this.node = dialog.attachment.ownerDocument!.createElement('form');\n    this.node.classList.add(cssClass('dialog'));\n  }\n\n  get autoClose() {\n    return this.options.autoClose;\n  }\n\n  get attachment() {\n    return this.dialog.attachment;\n  }\n\n  get level() {\n    return this.dialog.level;\n  }\n\n  protected abstract build(node: HTMLElement): boolean | void;\n\n  protected showLivePreviews() {\n    return this.options.livePreview === true || (typeof this.options.livePreview === 'string' && this.dialog.manager.livePreviews[this.options.livePreview] === true);\n  }\n\n  protected enableLivePreviews(selector: string | (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[]) {\n    if (!this.showLivePreviews()) {\n      return;\n    }\n    const submitter = () => {\n      this.submit();\n    };\n    if (typeof selector === 'string') {\n      this.forEach(selector, (n: HTMLInputElement | HTMLSelectElement) => {\n        n.addEventListener('change', submitter, {passive: true});\n      });\n    } else {\n      selector.forEach((n) => {\n        n.addEventListener('change', submitter, {passive: true});\n      });\n    }\n  }\n\n  equals(that: ADialog) {\n    return this.dialog.level === that.dialog.level && this.dialog.attachment === that.dialog.attachment;\n  }\n\n  protected appendDialogButtons() {\n    this.node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('dialog-buttons')}\">\n      <button class=\"${cssClass('dialog-button')}\" type=\"submit\" title=\"Apply\"></button>\n      <button class=\"${cssClass('dialog-button')}\" type=\"button\" title=\"Cancel\"></button>\n      <button class=\"${cssClass('dialog-button')}\" type=\"reset\" title=\"Reset to default values\"></button>\n    </div>`);\n  }\n\n  open() {\n    if (this.options.toggleDialog && this.dialog.manager.removeLike(this)) {\n      return;\n    }\n    if (this.build(this.node) === false) {\n      return;\n    }\n    const parent = <HTMLElement>this.attachment.closest(`.${cssClass()}`)!;\n\n    if (this.options.title) {\n      this.node.insertAdjacentHTML('afterbegin', `<strong>${this.options.title}</strong>`);\n    }\n    if (!this.options.popup) {\n      this.appendDialogButtons();\n    }\n\n    parent.appendChild(this.node);\n    this.popper = new Popper(this.attachment, this.node, merge({\n      modifiers: {\n        preventOverflow: {\n          boundariesElement: parent\n        }\n      }\n    }, this.options));\n\n    const auto = this.find<HTMLInputElement>('input[autofocus]');\n    if (auto) {\n      // delay such that it works\n      self.setTimeout(() => auto.focus());\n    }\n\n    const reset = this.find<HTMLButtonElement>('button[type=reset]');\n    if (reset) {\n      reset.onclick = (evt) => {\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.reset();\n        if (this.showLivePreviews()) {\n          this.submit();\n        }\n      };\n    }\n    this.node.onsubmit = (evt) => {\n      evt.stopPropagation();\n      evt.preventDefault();\n      return this.triggerSubmit();\n    };\n    const cancel = this.find<HTMLButtonElement>('button[title=Cancel]');\n    if (cancel) {\n      cancel.onclick = (evt) => {\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.cancel();\n        this.destroy('cancel');\n      };\n    }\n\n    if (this.options.cancelSubDialogs) {\n      this.node.addEventListener('click', () => {\n        this.dialog.manager.removeAboveLevel(this.dialog.level + 1);\n      });\n    }\n\n    this.dialog.manager.push(this);\n  }\n\n  protected triggerSubmit() {\n    if (!this.node.checkValidity()) {\n      return false;\n    }\n    if (this.submit() !== false) {\n      this.destroy('confirm');\n    }\n    return false;\n  }\n\n  protected find<T extends HTMLElement>(selector: string): T {\n    return <T>this.node.querySelector(selector);\n  }\n\n  protected findInput(selector: string) {\n    return this.find<HTMLInputElement>(selector);\n  }\n\n  protected forEach<M extends Element, T>(selector: string, callback: (d: M, i: number) => T): T[] {\n    return (<M[]>Array.from(this.node.querySelectorAll(selector))).map(callback);\n  }\n\n  protected abstract reset(): void;\n\n  protected abstract submit(): boolean | undefined;\n\n  protected abstract cancel(): void;\n\n  cleanUp(action: 'cancel' | 'confirm' | 'handled') {\n    if (action === 'confirm') {\n      this.submit(); // TODO what if submit wasn't successful?\n    } else if (action === 'cancel') {\n      this.cancel();\n    }\n\n    if (action !== 'handled') {\n      this.dialog.manager.triggerDialogClosed(this, action);\n    }\n\n    if (this.popper) {\n      this.popper.destroy();\n    }\n    this.node.remove();\n  }\n\n  protected destroy(action: 'cancel' | 'confirm' = 'cancel') {\n    this.dialog.manager.triggerDialogClosed(this, action);\n    this.dialog.manager.remove(this, true);\n  }\n}\n\nexport default ADialog;\n","import ADialog, {IDialogContext, IDialogOptions} from './ADialog';\n\nabstract class APopup extends ADialog {\n  constructor(dialog: Readonly<IDialogContext>, options: Partial<IDialogOptions> = {}) {\n    super(dialog, Object.assign({\n      popup: true\n    }, options));\n  }\n\n  protected submit() {\n    return true;\n  }\n\n  protected reset() {\n    // dummy\n  }\n\n  protected cancel() {\n    // dummy\n  }\n}\n\nexport default APopup;\n","import {IDialogContext} from './ADialog';\nimport APopup from './APopup';\n\n/** @internal */\nexport interface IInputNumberOptions {\n  min: number;\n  max: number;\n  step: number | 'any';\n  value: number;\n  label: string | null;\n}\n\n/** @internal */\nexport default class InputNumberDialog extends APopup {\n\n  private readonly ioptions: Readonly<IInputNumberOptions> = {\n    min: NaN,\n    max: NaN,\n    step: 'any',\n    value: NaN,\n    label: null\n  };\n\n  constructor(dialog: IDialogContext, private readonly callback: (value: number) => void, options: Partial<IInputNumberOptions> = {}) {\n    super(dialog);\n    Object.assign(this.ioptions, options);\n  }\n\n  protected build(node: HTMLElement) {\n    const o = this.ioptions;\n    node.insertAdjacentHTML('beforeend', `\n     <input type=\"number\" value=\"${isNaN(o.value) ? '' : String(o.value)}\" required autofocus placeholder=\"${o.label ? o.label : 'enter number'}\" ${isNaN(o.min) ? '' : ` min=\"${o.min}\"`} ${isNaN(o.max) ? '' : ` max=\"${o.max}\"`} step=\"${o.step}\">\n    `);\n    this.enableLivePreviews('input');\n  }\n\n  submit() {\n    this.callback(this.findInput('input[type=number]').valueAsNumber);\n    return true;\n  }\n}\n","import {cssClass} from '../styles';\n\n/** @internal */\nexport interface IDragHandleOptions {\n  /**\n   * drag base container\n   * @default handle parentElement\n   */\n  container: HTMLElement | SVGElement;\n  /**\n   * filter to certain mouse events, e.g. shift only\n   */\n  filter(evt: MouseEvent): boolean;\n\n  onStart(handle: HTMLElement | SVGElement, x: number, delta: number, evt: MouseEvent): void;\n\n  onDrag(handle: HTMLElement | SVGElement, x: number, delta: number, evt: MouseEvent): void;\n\n  onEnd(handle: HTMLElement | SVGElement, x: number, delta: number, evt: MouseEvent): void;\n\n  /**\n   * minimal pixel delta\n   * @default 2\n   */\n  minDelta: number;\n}\n\n/**\n * allow to change the width of a column using dragging the handle\n * @internal\n */\nexport function dragHandle(handle: HTMLElement | SVGElement, options: Partial<IDragHandleOptions> = {}) {\n  const o: Readonly<IDragHandleOptions> = Object.assign({\n    container: handle.parentElement!,\n    filter: () => true,\n    onStart: () => undefined,\n    onDrag: () => undefined,\n    onEnd: () => undefined,\n    minDelta: 2\n  }, options);\n\n  let ueberElement: HTMLElement | null = null;\n\n  // converts the given x coordinate to be relative to the given element\n  const toContainerRelative = (x: number, elem: HTMLElement | SVGElement) => {\n    const rect = elem.getBoundingClientRect();\n    return x - rect.left - elem.clientLeft;\n  };\n\n  let start = 0;\n  let last = 0;\n  let handleShift = 0;\n\n  const mouseMove = (evt: MouseEvent) => {\n    if (!o.filter(evt)) {\n      return;\n    }\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    const end = toContainerRelative(evt.clientX, o.container) - handleShift;\n    if (Math.abs(last - end) < o.minDelta) {\n      //ignore\n      return;\n    }\n\n    last = end;\n    o.onDrag(handle, end, last - end, evt);\n  };\n\n  const mouseUp = (evt: MouseEvent) => {\n    if (!o.filter(evt)) {\n      return;\n    }\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    const end = toContainerRelative(evt.clientX, o.container) - handleShift;\n    ueberElement!.removeEventListener('mousemove', <any>mouseMove);\n    ueberElement!.removeEventListener('mouseup', <any>mouseUp);\n    ueberElement!.removeEventListener('mouseleave', <any>mouseUp);\n    ueberElement!.classList.remove(cssClass('dragging'));\n\n    if (Math.abs(start - end) < 2) {\n      //ignore\n      return;\n    }\n\n    o.onEnd(handle, end, start - end, evt);\n  };\n\n  handle.onmousedown = (evt) => {\n    if (!o.filter(evt)) {\n      return;\n    }\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    handleShift = toContainerRelative(evt.clientX, handle);\n    start = last = toContainerRelative(evt.clientX, o.container) - handleShift;\n\n    // register other event listeners\n    ueberElement = <HTMLElement>handle.closest('body') || <HTMLElement>handle.closest(`.${cssClass()}`)!; // take the whole body or root lineup\n    ueberElement.addEventListener('mousemove', <any>mouseMove);\n    ueberElement.addEventListener('mouseup', <any>mouseUp);\n    ueberElement.addEventListener('mouseleave', <any>mouseUp);\n    ueberElement.classList.add(cssClass('dragging'));\n\n    o.onStart(handle, start, 0, evt);\n  };\n}\n","import {DENSE_HISTOGRAM} from '../constants';\nimport {IBin, round, IDragHandleOptions, dragHandle} from '../internal';\nimport {cssClass, FILTERED_OPACITY} from '../styles';\nimport {color} from 'd3-color';\nimport {filterMissingNumberMarkup, updateFilterMissingNumberMarkup} from '../ui/missing';\n\nfunction filteredColor(input: string) {\n  const c = color(input)!;\n  c.opacity = FILTERED_OPACITY;\n  return c.toString();\n}\n\nexport function histogramTemplate(guessedBins: number) {\n  let bins = '';\n  for (let i = 0; i < guessedBins; ++i) {\n    bins += `<div class=\"${cssClass('histogram-bin')}\" title=\"Bin ${i}: 0\" data-x=\"\"><div style=\"height: 0\" ></div></div>`;\n  }\n  // no closing div to be able to append things\n  return `<div class=\"${cssClass('histogram')} ${guessedBins > DENSE_HISTOGRAM ? cssClass('dense') : ''}\">${bins}`;\n}\n\nfunction matchBins(n: HTMLElement, bins: number) {\n  //adapt the number of children\n  let nodes = <HTMLElement[]>Array.from(n.querySelectorAll('[data-x]'));\n  if (nodes.length > bins) {\n    nodes.splice(bins, nodes.length - bins).forEach((d) => d.remove());\n  } else if (nodes.length < bins) {\n    for (let i = nodes.length; i < bins; ++i) {\n      n.insertAdjacentHTML('afterbegin', `<div class=\"${cssClass('histogram-bin')}\" title=\"Bin ${i}: 0\" data-x=\"\"><div style=\"height: 0\" ></div></div>`);\n    }\n    nodes = Array.from(n.querySelectorAll('[data-x]'));\n  }\n  n.classList.toggle(cssClass('dense'), bins > DENSE_HISTOGRAM);\n  return nodes;\n}\n\nexport interface IHistogramLike<T> {\n  readonly maxBin: number;\n  readonly hist: ReadonlyArray<IBin<T>>;\n}\n\n/** @internal */\nexport function histogramUpdate<T>(n: HTMLElement, stats: IHistogramLike<T>, unfiltered: IHistogramLike<T> | null, formatter: (v: T) => string, colorOf: (bin: IBin<T>) => string) {\n  const hist = stats.hist;\n  const nodes = matchBins(n, hist.length);\n\n  nodes.forEach((d: HTMLElement, i) => {\n    const bin = hist[i];\n    const inner = <HTMLElement>d.firstElementChild!;\n    if (!bin) {\n      inner.style.height = '0%';\n      return;\n    }\n\n    const {x0, x1, count} = bin;\n    const color = colorOf(bin);\n    d.dataset.x = formatter(x0);\n\n    if (unfiltered) {\n      const gCount = (unfiltered.hist[i] || {count}).count;\n      d.title = `${formatter(x0)} - ${formatter(x1)} (${count} of ${gCount})`;\n      inner.style.height = `${round(gCount * 100 / unfiltered.maxBin, 2)}%`;\n      const relY = 100 - round(count * 100 / gCount, 2);\n      inner.style.background = relY === 0 ? color : (relY === 100 ? filteredColor(color) : `linear-gradient(${filteredColor(color)} ${relY}%, ${color} ${relY}%, ${color} 100%)`);\n    } else {\n      d.title = `${formatter(x0)} - ${formatter(x1)} (${count})`;\n      inner.style.height = `${round(count * 100 / stats.maxBin, 2)}%`;\n      inner.style.backgroundColor = color;\n    }\n  });\n}\n\n/**\n * @internal\n */\nexport function mappingHintTemplate(range: [string, string]) {\n  return `<span class=\"${cssClass('mapping-hint')}\" title=\"${range[0]}\">${range[0]}</span><span class=\"${cssClass('mapping-hint')}\" title=\"${range[1]}\">${range[1]}</span>`;\n}\n\n/**\n * @internal\n */\nexport function mappingHintUpdate(n: HTMLElement, range: [string, string]) {\n  Array.from(n.getElementsByTagName('span')).forEach((d: HTMLElement, i) => d.textContent = range[i]);\n}\n\n\nexport interface IFilterContext<T> {\n  percent(v: T): number;\n  unpercent(p: number): T;\n  format(v: T): string;\n  formatRaw(v: T): string;\n  parseRaw(v: string): T;\n  setFilter(filterMissing: boolean, min: T, max: T): void;\n  edit(value: T, attachment: HTMLElement, type: 'min' | 'max'): Promise<T>;\n  domain: [T, T];\n}\n\n/** @internal */\nexport interface IFilterInfo<T> {\n  filterMissing: boolean;\n  filterMin: T;\n  filterMax: T;\n}\n\n\nexport function filteredHistTemplate<T>(c: IFilterContext<T>, f: IFilterInfo<T>) {\n  return `\n    <div class=\"${cssClass('histogram-min-hint')}\" style=\"width: ${c.percent(f.filterMin)}%\"></div>\n    <div class=\"${cssClass('histogram-max-hint')}\" style=\"width: ${100 - c.percent(f.filterMax)}%\"></div>\n    <div class=\"${cssClass('histogram-min')}\" data-value=\"${c.format(f.filterMin)}\" data-raw=\"${c.formatRaw(f.filterMin)}\" style=\"left: ${c.percent(f.filterMin)}%\" title=\"min filter, drag or double click to change\"></div>\n    <div class=\"${cssClass('histogram-max')}\" data-value=\"${c.format(f.filterMax)}\" data-raw=\"${c.formatRaw(f.filterMax)}\" style=\"right: ${100 - c.percent(f.filterMax)}%\" title=\"max filter, drag or double click to change\"></div>\n    ${filterMissingNumberMarkup(f.filterMissing, 0)}\n  `;\n}\n\n\nexport function initFilter<T>(node: HTMLElement, context: IFilterContext<T>) {\n  const min = <HTMLElement>node.getElementsByClassName(cssClass('histogram-min'))[0];\n  const max = <HTMLElement>node.getElementsByClassName(cssClass('histogram-max'))[0];\n  const minHint = <HTMLElement>node.getElementsByClassName(cssClass('histogram-min-hint'))[0];\n  const maxHint = <HTMLElement>node.getElementsByClassName(cssClass('histogram-max-hint'))[0];\n  const filterMissing = <HTMLInputElement>node.getElementsByTagName('input')[0];\n\n  const setFilter = () => {\n    const minValue = context.parseRaw(min.dataset.raw!);\n    const maxValue = context.parseRaw(max.dataset.raw!);\n    context.setFilter(filterMissing.checked, minValue, maxValue);\n  };\n\n  const minImpl = (evt: MouseEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    const value = context.parseRaw(min.dataset.raw!);\n\n    context.edit(value, min, 'min').then((newValue) => {\n      minHint.style.width = `${context.percent(newValue)}%`;\n      min.dataset.value = context.format(newValue);\n      min.dataset.raw = context.formatRaw(newValue);\n      min.style.left = `${context.percent(newValue)}%`;\n      min.classList.toggle(cssClass('swap-hint'), context.percent(newValue) > 15);\n      setFilter();\n    });\n  };\n\n  min.onclick = (evt) => {\n    if (!evt.shiftKey && !evt.ctrlKey) {\n      return;\n    }\n    minImpl(evt);\n  };\n  min.ondblclick = minImpl;\n\n  const maxImpl = (evt: MouseEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    const value = context.parseRaw(max.dataset.raw!);\n\n    context.edit(value, max, 'max').then((newValue) => {\n      maxHint.style.width = `${100 - context.percent(newValue)}%`;\n      max.dataset.value = context.format(newValue);\n      max.dataset.raw = context.formatRaw(newValue);\n      max.style.right = `${100 - context.percent(newValue)}%`;\n      max.classList.toggle(cssClass('swap-hint'), context.percent(newValue) < 85);\n      setFilter();\n    });\n  };\n\n  max.onclick = (evt) => {\n    if (!evt.shiftKey && !evt.ctrlKey) {\n      return;\n    }\n    maxImpl(evt);\n  };\n  max.ondblclick = maxImpl;\n\n  filterMissing.onchange = () => setFilter();\n\n  const options: Partial<IDragHandleOptions> = {\n    minDelta: 0,\n    filter: (evt) => evt.button === 0 && !evt.shiftKey && !evt.ctrlKey,\n    onStart: (handle) => handle.classList.add(cssClass('hist-dragging')),\n    onDrag: (handle, x) => {\n      const total = node.clientWidth;\n      const px = Math.max(0, Math.min(x, total));\n      const percent = Math.round(100 * px / total);\n      (<HTMLElement>handle).dataset.value = context.format(context.unpercent(percent));\n      (<HTMLElement>handle).dataset.raw = context.formatRaw(context.unpercent(percent));\n\n      if ((<HTMLElement>handle).classList.contains(cssClass('histogram-min'))) {\n        handle.style.left = `${percent}%`;\n        handle.classList.toggle(cssClass('swap-hint'), percent > 15);\n        minHint.style.width = `${percent}%`;\n        return;\n      }\n      handle.style.right = `${100 - percent}%`;\n      handle.classList.toggle(cssClass('swap-hint'), percent < 85);\n      maxHint.style.width = `${100 - percent}%`;\n    },\n    onEnd: (handle) => {\n      handle.classList.remove(cssClass('hist-dragging'));\n      setFilter();\n    }\n  };\n  dragHandle(min, options);\n  dragHandle(max, options);\n\n  return (missing: number, f: IFilterInfo<T>) => {\n    minHint.style.width = `${context.percent(f.filterMin)}%`;\n    maxHint.style.width = `${100 - context.percent(f.filterMax)}%`;\n    min.dataset.value = context.format(f.filterMin);\n    max.dataset.value = context.format(f.filterMax);\n    min.dataset.raw = context.formatRaw(f.filterMin);\n    max.dataset.raw = context.formatRaw(f.filterMax);\n    min.style.left = `${context.percent(f.filterMin)}%`;\n    max.style.right = `${100 - context.percent(f.filterMax)}%`;\n    min.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMin) > 15);\n    max.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMax) < 85);\n    filterMissing.checked = f.filterMissing;\n    updateFilterMissingNumberMarkup(<HTMLElement>filterMissing.parentElement, missing);\n  };\n}\n","import {normalizedStatsBuilder, IStatistics, getNumberOfBins} from '../internal';\nimport {Column, IDataRow, IOrderedGroup, INumberColumn, INumbersColumn, isNumberColumn, isNumbersColumn, IMapAbleColumn, isMapAbleColumn, Ranking} from '../model';\nimport InputNumberDialog from '../ui/dialogs/InputNumberDialog';\nimport {colorOf} from './impose';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, IRenderTasks, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {cssClass, engineCssClass} from '../styles';\nimport {histogramUpdate, histogramTemplate, IHistogramLike, mappingHintTemplate, mappingHintUpdate, IFilterInfo, filteredHistTemplate, IFilterContext, initFilter} from './histogram';\nimport {noNumberFilter} from '../model/internalNumber';\nimport DialogManager from '../ui/dialogs/DialogManager';\n\nexport default class HistogramCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Histogram';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return (isNumberColumn(col) && mode !== ERenderMode.CELL) || (isNumbersColumn(col) && mode === ERenderMode.CELL);\n  }\n\n  create(col: INumbersColumn, _context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const {template, render, guessedBins} = getHistDOMRenderer(col, imposer);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, row: IDataRow) => {\n        if (renderMissingDOM(n, col, row)) {\n          return;\n        }\n        const b = normalizedStatsBuilder(guessedBins);\n        for (const n of col.getNumbers(row)) {\n          b.push(n);\n        }\n        const hist = b.build();\n        render(n, hist);\n      }\n    };\n  }\n\n  createGroup(col: INumberColumn, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const {template, render} = getHistDOMRenderer(col, imposer);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupNumberStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          const isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n\n          const {summary, group} = r;\n          render(n, group, summary);\n        });\n      }\n    };\n  }\n\n  createSummary(col: INumberColumn, context: IRenderContext, interactive: boolean, imposer?: IImposer): ISummaryRenderer {\n    const r = getHistDOMRenderer(col, imposer);\n\n    const staticHist = !interactive || !isMapAbleColumn(col);\n    return staticHist ? staticSummary(col, context, r.template, r.render) : interactiveSummary(<IMapAbleColumn>col, context, r.template, r.render);\n  }\n}\n\n\nfunction staticSummary(col: INumberColumn, context: IRenderContext, template: string, render: (n: HTMLElement, stats: IStatistics, unfiltered?: IStatistics) => void) {\n  if (isMapAbleColumn(col)) {\n    template += mappingHintTemplate(col.getRange());\n  }\n  return {\n    template: `${template}</div>`,\n    update: (node: HTMLElement) => {\n      if (isMapAbleColumn(col)) {\n        mappingHintUpdate(node, col.getRange());\n      }\n\n      return context.tasks.summaryNumberStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n        node.classList.toggle(cssClass('missing'), isMissing);\n        if (isMissing) {\n          return;\n        }\n        render(node, r.summary);\n      });\n    }\n  };\n}\n\nfunction interactiveSummary(col: IMapAbleColumn, context: IRenderContext, template: string, render: (n: HTMLElement, stats: IStatistics, unfiltered?: IStatistics) => void) {\n  const fContext = createFilterContext(col, context);\n  template += filteredHistTemplate(fContext, createFilterInfo(col));\n\n  let updateFilter: (missing: number, f: IFilterInfo<number>) => void;\n\n  return {\n    template: `${template}</div>`,\n    update: (node: HTMLElement) => {\n      if (!updateFilter) {\n        updateFilter = initFilter(node, fContext);\n      }\n      return context.tasks.summaryNumberStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const {summary, data} = r;\n\n        updateFilter(data ? data.missing : (summary ? summary.missing : 0), createFilterInfo(col));\n\n        node.classList.add(cssClass('histogram-i'));\n        node.classList.toggle(cssClass('missing'), !summary);\n        if (!summary) {\n          return;\n        }\n        render(node, summary, data);\n      });\n    }\n  };\n}\n\n/** @internal */\nexport function createNumberFilter(col: INumberColumn & IMapAbleColumn, parent: HTMLElement, context: {idPrefix: string, dialogManager: DialogManager, tasks: IRenderTasks}, livePreviews: boolean) {\n  const renderer = getHistDOMRenderer(col);\n  const fContext = createFilterContext(col, context);\n\n  parent.innerHTML = `${renderer.template}${filteredHistTemplate(fContext, createFilterInfo(col))}</div>`;\n  const summaryNode = <HTMLElement>parent.firstElementChild!;\n  summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\n  summaryNode.dataset.renderer = 'histogram';\n  summaryNode.dataset.interactive = '';\n  summaryNode.classList.add(cssClass('histogram-i'));\n\n  const applyFilter = fContext.setFilter;\n  let currentFilter = createFilterInfo(col);\n  fContext.setFilter = (filterMissing, min, max) => {\n    currentFilter = {filterMissing, filterMin: min, filterMax: max};\n    if (livePreviews) {\n      applyFilter(filterMissing, min, max);\n    }\n  };\n\n  const updateFilter = initFilter(summaryNode, fContext);\n\n  const rerender = () => {\n    const ready = context.tasks.summaryNumberStats(col).then((r) => {\n      if (typeof r === 'symbol') {\n        return;\n      }\n      const {summary, data} = r;\n      updateFilter(data ? data.missing : (summary ? summary.missing : 0), currentFilter);\n      summaryNode.classList.toggle(cssClass('missing'), !summary);\n      if (!summary) {\n        return;\n      }\n      renderer.render(summaryNode, summary, data);\n    });\n    if (!ready) {\n      return;\n    }\n    summaryNode.classList.add(engineCssClass('loading'));\n    ready.then(() => {\n      summaryNode.classList.remove(engineCssClass('loading'));\n    });\n  };\n\n  const ranking = col.findMyRanker()!;\n\n  if (ranking) {\n    ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.numberFilter`, () => rerender());\n  }\n  rerender();\n\n  return {\n    cleanUp() {\n      if (ranking) {\n        ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.numberFilter`, null);\n      }\n    },\n    reset() {\n      currentFilter = createFilterInfo(col, noNumberFilter());\n      rerender();\n    },\n    submit() {\n      applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\n    }\n  };\n}\n\n/** @internal */\nexport function getHistDOMRenderer(col: INumberColumn, imposer?: IImposer) {\n  const ranking = col.findMyRanker();\n  const guessedBins = ranking ? getNumberOfBins(ranking.getOrderLength()) : 10;\n  const formatter = col.getNumberFormat();\n\n  const render = (n: HTMLElement, stats: IHistogramLike<number>, unfiltered?: IHistogramLike<number>) => {\n    return histogramUpdate(n, stats, unfiltered || null, formatter, (bin) => colorOf(col, null, imposer, (bin.x1 + bin.x0) / 2)!);\n  };\n  return {\n    template: histogramTemplate(guessedBins),\n    render,\n    guessedBins\n  };\n}\n\nfunction createFilterInfo(col: IMapAbleColumn, filter = col.getFilter()): IFilterInfo<number> {\n  const domain = col.getMapping().domain;\n  const filterMin = isFinite(filter.min) ? filter.min : domain[0];\n  const filterMax = isFinite(filter.max) ? filter.max : domain[1];\n  return {\n    filterMissing: filter.filterMissing,\n    filterMin,\n    filterMax\n  };\n}\n\nfunction createFilterContext(col: IMapAbleColumn, context: {idPrefix: string, dialogManager: DialogManager}): IFilterContext<number> {\n  const domain = col.getMapping().domain;\n  const format = col.getNumberFormat();\n  const clamp = (v: number) => Math.max(0, Math.min(100, v));\n  const percent = (v: number) => clamp(Math.round(100 * (v - domain[0]) / (domain[1] - domain[0])));\n  const unpercent = (v: number) => ((v / 100) * (domain[1] - domain[0]) + domain[0]);\n  return {\n    percent,\n    unpercent,\n    domain: <[number, number]>domain,\n    format,\n    formatRaw: String,\n    parseRaw: Number.parseFloat,\n    setFilter: (filterMissing, minValue, maxValue) => col.setFilter({\n      filterMissing,\n      min: minValue === domain[0] ? Number.NEGATIVE_INFINITY : minValue,\n      max: maxValue === domain[1] ? Number.POSITIVE_INFINITY : maxValue\n    }),\n    edit: (value, attachment) => {\n      return new Promise((resolve) => {\n        const dialogCtx = {\n          attachment,\n          manager: context.dialogManager,\n          level: context.dialogManager.maxLevel + 1,\n          idPrefix: context.idPrefix\n        };\n        const dialog = new InputNumberDialog(dialogCtx, resolve, {\n            value, min: domain[0], max: domain[1]\n          });\n        dialog.open();\n      });\n    }\n  };\n}\n","import {Column, IDataRow, LinkColumn} from '../model';\nimport {ERenderMode, ICellRendererFactory, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer} from './utils';\nimport {abortAble} from 'lineupengine';\n\nfunction loadImage(src: string) {\n  return new Promise<HTMLImageElement>((resolve) => {\n    const image = new Image();\n    image.onload = () => resolve(image);\n    image.src = src;\n  });\n}\n\nexport default class ImageCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Image';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return col instanceof LinkColumn && mode === ERenderMode.CELL;\n  }\n\n  create(col: LinkColumn): ICellRenderer {\n    return {\n      template: `<div></div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        const missing = renderMissingDOM(n, col, d);\n        n.style.backgroundImage = null;\n        if (missing) {\n          n.title = '';\n          return;\n        }\n        const v = col.getLink(d);\n        n.title = v ? v.alt : '';\n        if (!v) {\n          return;\n        }\n        return abortAble(loadImage(v.href)).then((image) => {\n          if (typeof image === 'symbol') {\n            return;\n          }\n          n.style.backgroundImage = missing || !v ? null : `url('${image.src}')`;\n        });\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {ISequence} from '../internal';\nimport {Column, IDataRow, IOrderedGroup} from '../model';\nimport {ERenderMode, ICellRenderer, ICellRendererFactory, IGroupCellRenderer, IImposer, IRenderContext} from './interfaces';\nimport {noRenderer} from './utils';\nimport {ISummaryRenderer} from './interfaces';\n\n/**\n * helper class that renders a group renderer as a selected (e.g. median) single item\n */\nexport abstract class AAggregatedGroupRenderer<T extends Column> implements ICellRendererFactory {\n  abstract readonly title: string;\n\n  abstract canRender(col: Column, mode: ERenderMode): boolean;\n\n  abstract create(col: T, context: IRenderContext, imposer?: IImposer): ICellRenderer;\n\n  protected abstract aggregatedIndex(rows: ISequence<IDataRow>, col: T): {row: IDataRow, index: number};\n\n  createGroup(col: T, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    const single = this.create(col, context, imposer);\n    return {\n      template: single.template,\n      update: (node: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, 'aggregated', (rows) => this.aggregatedIndex(rows, col)).then((data) => {\n          if (typeof data !== 'symbol') {\n            single.update(node, data.row, data.index, group);\n          }\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n\nexport default AAggregatedGroupRenderer;\n","import {ISequence, round} from '../internal';\nimport {Column, IDataRow, INumberColumn, isNumberColumn, IMultiLevelColumn, isMultiLevelColumn, IOrderedGroup} from '../model';\nimport {medianIndex} from '../model/internalNumber';\nimport {COLUMN_PADDING} from '../styles';\nimport {AAggregatedGroupRenderer} from './AAggregatedGroupRenderer';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, IRenderCallback, IGroupCellRenderer, ICellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {matchColumns, multiLevelGridCSSClass} from './utils';\nimport {cssClass} from '../styles';\nimport {IAbortAblePromise, abortAbleAll} from 'lineupengine';\n\n/** @internal */\nexport interface ICols {\n  column: Column;\n  shift: number;\n  width: number;\n  template: string;\n  rendererId: string;\n  renderer: ICellRenderer | null;\n  groupRenderer: IGroupCellRenderer | null;\n  summaryRenderer: ISummaryRenderer | null;\n}\n\n/**\n * @internal\n * @param parent Parent column\n * @param context Render context\n * @param stacked Are the columns stacked?\n * @param mode Render mode\n * @param imposer Imposer object\n */\nexport function createData(parent: {children: Column[]} & Column, context: IRenderContext, stacked: boolean, mode: ERenderMode, imposer?: IImposer): {cols: ICols[], stacked: boolean, padding: number} {\n  const padding = COLUMN_PADDING;\n  let offset = 0;\n  const cols = parent.children.map((column) => {\n    const shift = offset;\n    const width = column.getWidth();\n    offset += width;\n    offset += (!stacked ? padding : 0);\n\n    const renderer = mode === ERenderMode.CELL ? context.renderer(column, imposer) : null;\n    const groupRenderer = mode === ERenderMode.GROUP ? context.groupRenderer(column, imposer) : null;\n    const summaryRenderer = mode === ERenderMode.GROUP ? context.summaryRenderer(column, false, imposer) : null;\n    let template: string = '';\n    let rendererId: string = '';\n    switch (mode) {\n      case ERenderMode.CELL:\n        template = renderer!.template;\n        rendererId = column.getRenderer();\n        break;\n      case ERenderMode.GROUP:\n        template = groupRenderer!.template;\n        rendererId = column.getGroupRenderer();\n        break;\n      case ERenderMode.SUMMARY:\n        template = summaryRenderer!.template;\n        rendererId = column.getSummaryRenderer();\n        break;\n    }\n    // inject data attributes\n    template = template.replace(/^<([^ >]+)([ >])/, `<$1 data-column-id=\"${column.id}\" data-renderer=\"${rendererId}\"$2`);\n    // inject classes\n    if (/^<([^>]+) class=\"([ >]*)/.test(template)) {\n      // has class attribute\n      template = template.replace(/^<([^>]+) class=\"([ >]*)/, `<$1 class=\"${cssClass(`renderer-${rendererId}`)} $2`);\n    } else {\n      // inject as the others\n      template = template.replace(/^<([^ >]+)([ >])/, `<$1 class=\"${cssClass(`renderer-${rendererId}`)}\"$2`);\n    }\n    return {\n      column,\n      shift,\n      width,\n      template,\n      rendererId,\n      renderer,\n      groupRenderer,\n      summaryRenderer\n    };\n  });\n  return {cols, stacked, padding};\n}\n\nexport default class MultiLevelCellRenderer extends AAggregatedGroupRenderer<IMultiLevelColumn & Column> implements ICellRendererFactory {\n  readonly title: string;\n\n  constructor(private readonly stacked: boolean = true) {\n    super();\n    this.title = this.stacked ? 'Stacked Bar' : 'Nested';\n  }\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isMultiLevelColumn(col) && mode !== ERenderMode.SUMMARY;\n  }\n\n  create(col: IMultiLevelColumn & Column, context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const {cols, stacked} = createData(col, context, this.stacked, ERenderMode.CELL, imposer);\n    const width = context.colWidth(col);\n    return {\n      template: `<div class='${multiLevelGridCSSClass(context.idPrefix, col)} ${!stacked ? cssClass('grid-space') : ''}'>${cols.map((d) => d.template).join('')}</div>`,\n      update: (n: HTMLDivElement, d: IDataRow, i: number, group: IOrderedGroup) => {\n        if (renderMissingDOM(n, col, d)) {\n          return null;\n        }\n        matchColumns(n, cols, context);\n\n        const toWait: IAbortAblePromise<void>[] = [];\n        const children = <HTMLElement[]>Array.from(n.children);\n        const total = col.getWidth();\n        let missingWeight = 0;\n        cols.forEach((col, ci) => {\n          const weight = col.column.getWidth() / total;\n          const cnode = children[ci];\n          cnode.classList.add(cssClass(this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('detail'));\n          cnode.dataset.group = 'd';\n          cnode.style.transform = stacked ? `translate(-${round((missingWeight / weight) * 100, 4)}%,0)` : null;\n          (<any>cnode.style).gridColumnStart = (ci + 1).toString();\n          const r = col.renderer!.update(cnode, d, i, group);\n          if (stacked) {\n            missingWeight += (1 - (<INumberColumn>col.column).getNumber(d)) * weight;\n            if (ci < cols.length - 1) {\n              const span = cnode.querySelector('span');\n              if (span) {\n                span.style.overflow = 'hidden';\n              }\n            }\n          }\n          if (r) {\n            toWait.push(r);\n          }\n        });\n\n        if (toWait.length > 0) {\n          return <IAbortAblePromise<void>>abortAbleAll(toWait);\n        }\n        return null;\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow, i: number, group: IOrderedGroup) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return null;\n        }\n        const toWait: {shift: number, r: IAbortAblePromise<IRenderCallback>}[] = [];\n        let stackShift = 0;\n        for (const col of cols) {\n          const cr = col.renderer!;\n          if (cr.render) {\n            const shift = col.shift - stackShift;\n            ctx.translate(shift, 0);\n            const r = cr.render(ctx, d, i, group);\n            if (typeof r !== 'boolean' && r) {\n              toWait.push({shift, r});\n            }\n            ctx.translate(-shift, 0);\n          }\n          if (stacked) {\n            stackShift += col.width * (1 - (<INumberColumn>col.column).getNumber(d));\n          }\n        }\n\n        if (toWait.length === 0) {\n          return null;\n        }\n\n        return abortAbleAll(toWait.map((d) => d.r)).then((callbacks) => {\n          return (ctx: CanvasRenderingContext2D) => {\n            if (typeof callbacks === 'symbol') {\n              return;\n            }\n            for (let i = 0; i < callbacks.length; ++i) {\n              const callback = callbacks[i];\n              if (typeof callback !== 'function') {\n                continue;\n              }\n              const shift = toWait[i].shift;\n              ctx.translate(shift, 0);\n              callback(ctx);\n              ctx.translate(-shift, 0);\n            }\n          };\n        });\n      }\n    };\n  }\n\n\n  createGroup(col: IMultiLevelColumn & Column, context: IRenderContext, imposer?: IImposer): IGroupCellRenderer {\n    if (this.stacked && isNumberColumn(col)) {\n      return super.createGroup(col, context, imposer);\n    }\n\n    const {cols} = createData(col, context, false, ERenderMode.GROUP, imposer);\n    return {\n      template: `<div class='${multiLevelGridCSSClass(context.idPrefix, col)} ${cssClass('grid-space')}'>${cols.map((d) => d.template).join('')}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        matchColumns(n, cols, context);\n\n        const toWait: IAbortAblePromise<void>[] = [];\n        const children = <HTMLElement[]>Array.from(n.children);\n        cols.forEach((col, ci) => {\n          const cnode = children[ci];\n          cnode.classList.add(cssClass(this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('group'));\n          cnode.dataset.group = 'g';\n          (<any>cnode.style).gridColumnStart = (ci + 1).toString();\n          const r = col.groupRenderer!.update(cnode, group);\n          if (r) {\n            toWait.push(r);\n          }\n        });\n\n        if (toWait.length > 0) {\n          return <IAbortAblePromise<void>>abortAbleAll(toWait);\n        }\n        return null;\n      }\n    };\n  }\n\n  protected aggregatedIndex(rows: ISequence<IDataRow>, col: IMultiLevelColumn & Column) {\n    console.assert(isNumberColumn(col));\n    return medianIndex(rows, (<INumberColumn><any>col));\n  }\n}\n","import {INumberBin, IStatistics} from '../internal';\nimport {Column, CompositeNumberColumn, IDataRow, IOrderedGroup, INumberColumn} from '../model';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {getHistDOMRenderer} from './HistogramCellRenderer';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {createData} from './MultiLevelCellRenderer';\nimport {colorOf, matchColumns, forEachChild} from './utils';\nimport {tasksAll} from '../provider';\nimport {IHistogramLike} from './histogram';\n\n\nexport default class InterleavingCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Interleaved';\n\n  canRender(col: Column) {\n    return col instanceof CompositeNumberColumn;\n  }\n\n  create(col: CompositeNumberColumn, context: IRenderContext): ICellRenderer {\n    const {cols} = createData(col, context, false, ERenderMode.CELL);\n    const width = context.colWidth(col);\n    return {\n      template: `<div>${cols.map((r) => r.template).join('')}</div>`,\n      update: (n: HTMLDivElement, d: IDataRow, i: number, group: IOrderedGroup) => {\n        const missing = renderMissingDOM(n, col, d);\n        if (missing) {\n          return;\n        }\n        matchColumns(n, cols, context);\n        forEachChild(n, (ni: HTMLElement, j) => {\n          cols[j].renderer!.update(ni, d, i, group);\n        });\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow, _i: number, group: IOrderedGroup) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n\n        ctx.save();\n        ctx.scale(1, 1 / cols.length); // scale since internal use the height, too\n        cols.forEach((r, i) => {\n          const rr = r.renderer!;\n          if (rr.render) {\n            rr.render(ctx, d, i, group);\n          }\n          ctx.translate(0, CANVAS_HEIGHT);\n        });\n        ctx.restore();\n      }\n    };\n  }\n\n  createGroup(col: CompositeNumberColumn, context: IRenderContext): IGroupCellRenderer {\n    const {cols} = createData(col, context, false, ERenderMode.GROUP);\n    return {\n      template: `<div>${cols.map((r) => r.template).join('')}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        matchColumns(n, cols, context);\n        forEachChild(n, (ni: HTMLElement, j) => {\n          cols[j].groupRenderer!.update(ni, group);\n        });\n      }\n    };\n  }\n\n  createSummary(col: CompositeNumberColumn, context: IRenderContext, _interactive: boolean): ISummaryRenderer {\n    const cols = col.children;\n    let acc = 0;\n    const {template, render} = getHistDOMRenderer(col, {\n      color: () => colorOf(cols[(acc++) % cols.length])\n    });\n    return {\n      template,\n      update: (n: HTMLElement) => {\n        const tasks = cols.map((col) => context.tasks.summaryNumberStats(<INumberColumn>col));\n\n        return tasksAll(tasks).then((vs) => {\n          if (typeof vs === 'symbol') {\n            return;\n          }\n          const summaries = vs.map((d) => d.summary);\n          if (!summaries.some(Boolean)) {\n            n.classList.add(cssClass('missing'));\n            return;\n          }\n          n.classList.remove(cssClass('missing'));\n          const grouped = groupedHist(summaries)!;\n          render(n, grouped);\n        });\n      }\n    };\n  }\n}\n\nconst dummyBin: INumberBin = {\n  count: 0,\n  x0: 0,\n  x1: 0\n};\n\nfunction groupedHist(stats: (IStatistics | null)[]): IHistogramLike<number> | null {\n  const sample = stats.find(Boolean)!;\n  if (!sample) {\n    return null;\n  }\n\n  const bins = sample.hist.length;\n  // assert all have the same bin size\n  const hist = <INumberBin[]>[];\n  let maxBin = 0;\n  for (let i = 0; i < bins; ++i) {\n    stats.forEach((s) => {\n      const bin = s ? s.hist[i] : null;\n      if (!bin) {\n        hist.push(dummyBin);\n        return;\n      }\n      if (bin.count > maxBin) {\n        maxBin = bin.count;\n      }\n      hist.push(bin);\n    });\n  }\n  return {\n    maxBin,\n    hist\n  };\n}\n","import {LinkColumn, Column, IDataRow, IOrderedGroup} from '../model';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer, setText} from './utils';\nimport {cssClass} from '../styles';\nimport {ISequence} from '../internal';\n\nexport default class LinkCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Link';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return col instanceof LinkColumn && mode !== ERenderMode.SUMMARY;\n  }\n\n  create(col: LinkColumn): ICellRenderer {\n    const align = col.alignment || 'left';\n    return {\n      template: `<a${align !== 'left' ? ` class=\"${cssClass(align)}\"` : ''} target=\"_blank\" rel=\"noopener\" href=\"\"></a>`,\n      update: (n: HTMLAnchorElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        const v = col.getLink(d);\n        n.href = v ? v.href : '';\n        if (col.escape) {\n          setText(n, v ? v.alt : '');\n        } else {\n          n.innerHTML = v ? v.alt : '';\n        }\n      }\n    };\n  }\n\n  private static exampleText(col: LinkColumn, rows: ISequence<IDataRow>) {\n    const numExampleRows = 5;\n    const examples = <string[]>[];\n    rows.every((row) => {\n      const v = col.getLink(row);\n      if (!v) {\n        return true;\n      }\n      examples.push(`<a target=\"_blank\" rel=\"noopener\"  href=\"${v.href}\">${v.alt}</a>`);\n      return examples.length < numExampleRows;\n    });\n    if (examples.length === 0) {\n      return '';\n    }\n    return `${examples.join(', ')}${examples.length < rows.length ? ', &hellip;' : ''}`;\n  }\n\n  createGroup(col: LinkColumn, context: IRenderContext): IGroupCellRenderer {\n    return {\n      template: `<div> </div>`,\n      update: (n: HTMLDivElement, group: IOrderedGroup) => {\n        return context.tasks.groupExampleRows(col, group, 'link', (rows) => LinkCellRenderer.exampleText(col, rows)).then((text) => {\n          if (typeof text === 'symbol') {\n            return;\n          }\n          n.classList.toggle(cssClass('missing'), !text);\n          n.innerHTML = text;\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {IArrayColumn, IKeyValue, IMapColumn, isArrayColumn, isMapColumn, Column, IDataRow, isMissingValue, IOrderedGroup} from '../model';\nimport {IRenderContext, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {forEach, noop} from './utils';\nimport {cssClass} from '../styles';\nimport {ISequence} from '../internal';\n\nexport default class TableCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Table';\n\n  canRender(col: Column) {\n    return isMapColumn(col);\n  }\n\n  create(col: IMapColumn<any>): ICellRenderer {\n    if (isArrayColumn(col) && col.dataLength) {\n      // fixed length optimized rendering\n      return this.createFixed(col);\n    }\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"></div>`,\n      update: (node: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(node, col, d)) {\n          return;\n        }\n        node.innerHTML = col.getMapLabel(d).map(({key, value}) => `<div class=\"${cssClass('table-cell')}\">${key}</div><div class=\"${cssClass('table-cell')}\">${value}</div>`).join('');\n      }\n    };\n  }\n\n  private static template(col: IArrayColumn<any>) {\n    const labels = col.labels;\n    return `<div>${labels.map((l) => `<div class=\"${cssClass('table-cell')}\">${l}</div><div  class=\"${cssClass('table-cell')}\" data-v></div>`).join('\\n')}</div>`;\n  }\n\n  private createFixed(col: IArrayColumn<any>) {\n    return {\n      template: TableCellRenderer.template(col),\n      update: (node: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(node, col, d)) {\n          return;\n        }\n        const value = col.getLabels(d);\n        forEach(node, '[data-v]', (n: HTMLElement, i) => {\n          n.innerHTML = value[i];\n        });\n      }\n    };\n  }\n\n  private static example(arr: IKeyValue<string>[]) {\n    const numExampleRows = 5;\n    return `${arr.slice(0, numExampleRows).map((d) => d.value).join(', ')}${numExampleRows < arr.length ? ', &hellip;' : ''}`;\n  }\n\n  createGroup(col: IMapColumn<any>, context: IRenderContext): IGroupCellRenderer {\n    if (isArrayColumn(col) && col.dataLength) {\n      // fixed length optimized rendering\n      return this.createFixedGroup(col, context);\n    }\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"></div>`,\n      update: (node: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, 'table', (rows) => groupByKey(rows.map((d) => col.getMapLabel(d)))).then((entries) => {\n          if (typeof entries === 'symbol') {\n            return;\n          }\n          node.innerHTML = entries.map(({key, values}) => `<div class=\"${cssClass('table-cell')}\">${key}</div><div class=\"${cssClass('table-cell')}\">${TableCellRenderer.example(values)}</div>`).join('');\n        });\n      }\n    };\n  }\n\n  private createFixedGroup(col: IArrayColumn<any>, context: IRenderContext) {\n    return {\n      template: TableCellRenderer.template(col),\n      update: (node: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupExampleRows(col, group, 'table', (rows) => {\n          const values: string[][] = col.labels.map(() => []);\n          rows.forEach((row) => {\n            const labels = col.getLabels(row);\n            for (let i = 0; i < Math.min(values.length, labels.length); ++i) {\n              if (!isMissingValue(labels[i])) {\n                values[i].push(labels[i]);\n              }\n            }\n          });\n          return values;\n        }).then((values) => {\n          if (typeof values === 'symbol') {\n            return;\n          }\n          forEach(node, '[data-v]', (n: HTMLElement, i) => {\n            n.innerHTML = `${values[i].join(', ')}&hellip;`;\n          });\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"><div>Key</div><div>Value</div></div>`,\n      update: noop\n    };\n  }\n\n}\n\n/** @internal */\nexport function groupByKey<T extends {key: string}>(arr: ISequence<ISequence<T>>) {\n  const m = new Map<string, T[]>();\n  arr.forEach((a) => a.forEach((d) => {\n    if (!m.has(d.key)) {\n      m.set(d.key, [d]);\n    } else {\n      m.get(d.key)!.push(d);\n    }\n  }));\n  return Array.from(m).sort((a, b) => a[0].localeCompare(b[0])).map(([key, values]) => ({key, values}));\n}\n","import {IDataRow, LinkMapColumn, Column, ILink, IKeyValue, IOrderedGroup} from '../model';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {groupByKey} from './TableCellRenderer';\nimport {noRenderer, noop} from './utils';\nimport {cssClass} from '../styles';\n\nexport default class LinkMapCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Table with Links';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return col instanceof LinkMapColumn && mode !== ERenderMode.SUMMARY;\n  }\n\n  create(col: LinkMapColumn): ICellRenderer {\n    const align = col.alignment || 'left';\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"></div>`,\n      update: (node: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(node, col, d)) {\n          return;\n        }\n        node.innerHTML = col.getLinkMap(d).map(({key, value}) => `\n          <div class=\"${cssClass('table-cell')}\">${key}</div>\n          <div class=\"${cssClass('table-cell')} ${align !== 'left' ? cssClass(align) : ''}\">\n            <a href=\"${value.href}\" target=\"_blank\" rel=\"noopener\">${value.alt}</a>\n          </div>`).join('');\n      },\n      render: noop\n    };\n  }\n\n  private static example(arr: IKeyValue<ILink>[]) {\n    const numExampleRows = 5;\n    const examples = <string[]>[];\n    for (const row of arr) {\n      if (!row || !row.value.href) {\n        continue;\n      }\n      examples.push(`<a target=\"_blank\" rel=\"noopener\" href=\"${row.value.href}\">${row.value.alt}</a>`);\n      if (examples.length >= numExampleRows) {\n        break;\n      }\n    }\n    if (examples.length === 0) {\n      return '';\n    }\n    return `${examples.join(', ')}${examples.length < arr.length} ? ', &hellip;': ''}`;\n  }\n\n  createGroup(col: LinkMapColumn, context: IRenderContext): IGroupCellRenderer {\n    const align = col.alignment || 'left';\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"></div>`,\n      update: (node: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupRows(col, group, 'linkmap', (rows) => groupByKey(rows.map((d) => col.getLinkMap(d)))).then((entries) => {\n          if (typeof entries === 'symbol') {\n            return;\n          }\n          node.innerHTML = entries.map(({key, values}) => {\n            const data = LinkMapCellRenderer.example(values);\n            if (!data) {\n              return `<div>${key}</div><div class=\"${cssClass('missing')}\"></div>`;\n            }\n            return `<div>${key}</div><div${align !== 'left' ? ` class=\"${cssClass(align)}\"` : ''}>${data}</div>`;\n          }).join('');\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {ICellRendererFactory, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {noop} from './utils';\n\nexport default class LoadingCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Loading';\n\n  canRender(): boolean {\n    return false; // just direct selection\n  }\n\n  create() { // no typing because ICellRenderer would not be assignable to IGroupCellRenderer and ISummaryRenderer\n    return {\n      template: `<div>Loading &hellip;</div>`,\n      update: <() => void>noop\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return this.create();\n  }\n\n  createSummary(): ISummaryRenderer {\n    return this.create();\n  }\n}\n","import {round} from '../internal';\nimport {Column, IMapColumn, IMapAbleColumn, isMapAbleColumn, isMapColumn, IDataRow, isNumberColumn, INumberColumn} from '../model';\nimport {colorOf} from './impose';\nimport {ICellRendererFactory, IImposer, IRenderContext, ERenderMode, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer} from './utils';\nimport {cssClass} from '../styles';\n\nexport default class MapBarCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Bar Table';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isMapColumn(col) && isNumberColumn(col) && (mode === ERenderMode.CELL || (mode === ERenderMode.SUMMARY && isMapAbleColumn(col)));\n  }\n\n  create(col: IMapColumn<number> & INumberColumn, _context: IRenderContext, imposer?: IImposer): ICellRenderer {\n    const formatter = col.getNumberFormat();\n\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"></div>`,\n      update: (node: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(node, col, d)) {\n          return;\n        }\n        node.innerHTML = col.getMap(d).map(({key, value}) => {\n          if (isNaN(value)) {\n            return `<div class=\"${cssClass('table-cell')}\">${key}</div><div class=\"${cssClass('table-cell')} ${cssClass('missing')}\"></div>`;\n          }\n          const w = round(value * 100, 2);\n          return `<div class=\"${cssClass('table-cell')}\">${key}</div>\n            <div class=\"${cssClass('table-cell')}\" title=\"${formatter(value)}\">\n              <div style=\"width: ${w}%; background-color: ${colorOf(col, d, imposer)}\">\n                <span class=\"${cssClass('hover-only')}\">${value}</span>\n              </div>\n            </div>`;\n        }).join('');\n      }\n    };\n  }\n\n  createGroup(): IGroupCellRenderer {\n    return noRenderer;\n  }\n\n  createSummary(col: IMapColumn<number> & IMapAbleColumn): ISummaryRenderer {\n    return {\n      template: `<div class=\"${cssClass('rtable')}\"><div>Key</div><div><span></span><span></span>Value</div></div>`,\n      update: (node: HTMLElement) => {\n        const range = col.getRange();\n        const value = <HTMLElement>node.lastElementChild!;\n        value.firstElementChild!.textContent = range[0];\n        value.children[1]!.textContent = range[1];\n      }\n    };\n  }\n}\n","import {Column, RankColumn, IDataRow, IOrderedGroup} from '../model';\nimport {ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noRenderer, setText} from './utils';\nimport {cssClass} from '../styles';\n\nexport default class RankCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Default';\n\n  canRender(col: Column) {\n    return col instanceof RankColumn;\n  }\n\n  create(col: Column): ICellRenderer {\n    return {\n      template: `<div class=\"${cssClass('right')}\"> </div>`,\n      update: (n: HTMLDivElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        setText(n, col.getLabel(d));\n      }\n    };\n  }\n\n  createGroup(col: Column): IGroupCellRenderer {\n    const ranking = col.findMyRanker()!;\n    return {\n      template: `<div><div></div><div></div></div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        const fromTSpan = <HTMLElement>n.firstElementChild!;\n        const toTSpan = <HTMLElement>n.lastElementChild!;\n        if (group.order.length === 0) {\n          fromTSpan.textContent = '';\n          toTSpan.textContent = '';\n          return;\n        }\n        fromTSpan.textContent = ranking.getRank(group.order[0]).toString();\n        toTSpan.textContent = ranking.getRank(group.order[group.order.length - 1]).toString();\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {Column, SelectionColumn, IDataRow, IOrderedGroup} from '../model';\nimport {IRenderContext, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {cssClass} from '../styles';\nimport {everyIndices} from '../model/internal';\nimport {rangeSelection} from '../provider/utils';\n\nexport default class SelectionRenderer implements ICellRendererFactory {\n  readonly title: string = 'Default';\n\n  canRender(col: Column) {\n    return col instanceof SelectionColumn;\n  }\n\n  create(col: SelectionColumn, ctx: IRenderContext): ICellRenderer {\n    return {\n      template: `<div></div>`,\n      update: (n: HTMLElement, d: IDataRow, i: number) => {\n        n.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (event.shiftKey) {\n            const ranking = col.findMyRanker()!.id;\n            if (rangeSelection(ctx.provider, ranking, d.i, i, event.ctrlKey)) {\n              return;\n            }\n          }\n\n          col.toggleValue(d);\n        };\n      }\n    };\n  }\n\n  createGroup(col: SelectionColumn, context: IRenderContext): IGroupCellRenderer {\n    return {\n      template: `<div></div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        let selected = 0;\n        let unselected = 0;\n        const total = group.order.length;\n        everyIndices(group.order, (i) => {\n          const s = context.provider.isSelected(i);\n          if (s) {\n            selected++;\n          } else {\n            unselected++;\n          }\n          if (selected * 2 > total || unselected * 2 > total) {\n            // more than half already, can abort already decided\n            return false;\n          }\n          return true;\n        });\n\n        n.classList.toggle(cssClass('group-selected'), selected * 2 > total);\n        n.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n          const value = n.classList.toggle(cssClass('group-selected'));\n          col.setValues(group.order, value);\n        };\n      }\n    };\n  }\n\n  createSummary(col: SelectionColumn, context: IRenderContext): ISummaryRenderer {\n    const unchecked = cssClass('icon-unchecked');\n    const checked = cssClass('icon-checked');\n    return {\n      template: `<div title=\"(Un)Select All\" class=\"${unchecked}\"></div>`,\n      update: (node: HTMLElement) => {\n        node.onclick = (evt) => {\n          evt.stopPropagation();\n          const isunchecked = node.classList.contains(unchecked);\n          if (isunchecked) {\n            context.provider.selectAllOf(col.findMyRanker()!);\n            node.classList.remove(unchecked);\n            node.classList.add(checked);\n          } else {\n            context.provider.setSelection([]);\n            node.classList.remove(checked);\n            node.classList.add(unchecked);\n          }\n        };\n      }\n    };\n  }\n}\n","import {Column, ICategoricalLikeColumn, IDataRow, IOrderedGroup, ISetColumn, isSetColumn} from '../model';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {ICellRendererFactory, IRenderContext, ICellRenderer, IGroupCellRenderer, ISummaryRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\nimport {forEachChild, noop, wideEnoughCat} from './utils';\nimport {round} from '../internal';\n\nexport default class SetCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Matrix';\n\n  canRender(col: Column): boolean {\n    return isSetColumn(col);\n  }\n\n  private static createDOMContext(col: ICategoricalLikeColumn) {\n    const categories = col.categories;\n    const mapping = col.getColorMapping();\n    let templateRows = '';\n    for (const cat of categories) {\n      templateRows += `<div class=\"${cssClass('heatmap-cell')}\" title=\"${cat.label}\" style=\"background-color: ${mapping.apply(cat)}\"></div>`;\n    }\n    return {\n      templateRow: templateRows,\n      render: (n: HTMLElement, value: (number | boolean)[]) => {\n        forEachChild(n, (d: HTMLElement, i) => {\n          const v = value[i];\n          d.style.opacity = typeof v === 'boolean' ? (v ? '1' : '0') : round(v, 2).toString();\n        });\n      }\n    };\n  }\n\n  create(col: ISetColumn, context: IRenderContext): ICellRenderer {\n    const {templateRow, render} = SetCellRenderer.createDOMContext(col);\n    const width = context.colWidth(col);\n    const cellDimension = width / col.dataLength!;\n    const cats = col.categories;\n    const mapping = col.getColorMapping();\n\n    return {\n      template: `<div class=\"${cssClass('heatmap')}\">${templateRow}</div>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        render(n, col.getValues(d));\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        // Circle\n        const data = col.getValues(d);\n\n        ctx.save();\n        cats.forEach((d, j) => {\n          if (!data[j]) {\n            return;\n          }\n          const posx = (j * cellDimension);\n          ctx.fillStyle = mapping.apply(d);\n          ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\n        });\n\n        ctx.restore();\n      }\n    };\n  }\n\n  createGroup(col: ISetColumn, context: IRenderContext): IGroupCellRenderer {\n    const {templateRow, render} = SetCellRenderer.createDOMContext(col);\n    return {\n      template: `<div class=\"${cssClass('heatmap')}\">${templateRow}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupCategoricalStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          const isMissing = !r || !r.group || r.group.count === 0 || r.group.count === r.group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          render(n, r.group.hist.map((d) => d.count / r.group.maxBin));\n        });\n      }\n    };\n  }\n\n  createSummary(col: ICategoricalLikeColumn): ISummaryRenderer {\n    const categories = col.categories;\n    const mapping = col.getColorMapping();\n    let templateRows = `<div class=\"${cssClass('heatmap')}\">`;\n    const labels = wideEnoughCat(col);\n    for (const cat of categories) {\n      templateRows += `<div class=\"${cssClass('heatmap-cell')}\" title=\"${cat.label}\"${labels ? ` data-title=\"${cat.label}\"` : ''} style=\"background-color: ${mapping.apply(cat)}\"></div>`;\n    }\n    templateRows += '</div>';\n    return {\n      template: templateRows,\n      update: noop\n    };\n  }\n}\n","import {Column, INumbersColumn, NumbersColumn, isNumbersColumn, IDataRow, IOrderedGroup, isMissingValue} from '../model';\nimport {matchRows} from './ANumbersCellRenderer';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {forEachChild, noRenderer} from './utils';\nimport {ISequence} from '../internal';\nimport {cssClass} from '../styles';\n\n/** @internal */\nexport function line(data: ISequence<number>) {\n  if (data.length === 0) {\n    return '';\n  }\n  let p = '';\n  let moveNext = true;\n\n  data.forEach((d, i) => {\n    if (isNaN(d)) {\n      moveNext = true;\n    } else if (moveNext) {\n      p += `M${i},${1 - d} `;\n      moveNext = false;\n    } else {\n      p += `L${i},${1 - d} `;\n    }\n  });\n  return p;\n}\n\nexport default class SparklineCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Sparkline';\n\n  canRender(col: Column, mode: ERenderMode) {\n    return isNumbersColumn(col) && mode !== ERenderMode.SUMMARY;\n  }\n\n  create(col: INumbersColumn): ICellRenderer {\n    const dataLength = col.dataLength!;\n    const yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\n    return {\n      template: `<svg viewBox=\"0 0 ${dataLength - 1} 1\" preserveAspectRatio=\"none meet\"><line x1=\"0\" x2=\"${dataLength - 1}\" y1=\"${yPos}\" y2=\"${yPos}\"></line><path></path></svg>`,\n      update: (n: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        const data = col.getNumbers(d);\n        n.lastElementChild!.setAttribute('d', line(data));\n      }\n    };\n  }\n\n  createGroup(col: INumbersColumn, context: IRenderContext): IGroupCellRenderer {\n    const dataLength = col.dataLength!;\n    const yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\n    return {\n      template: `<svg viewBox=\"0 0 ${dataLength} 1\" preserveAspectRatio=\"none meet\"><line x1=\"0\" x2=\"${dataLength - 1}\" y1=\"${yPos}\" y2=\"${yPos}\"></line><path></path></svg>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        //overlapping ones\n        matchRows(n, group.order.length, `<path></path>`);\n        return context.tasks.groupRows(col, group, 'numbers', (r) => Array.from(r.map((d) => col.getNumbers(d)))).then((vs) => {\n          if (typeof vs === 'symbol') {\n            return;\n          }\n          const isMissing = vs.length === 0 || vs.every((v) => v.every(isMissingValue));\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          forEachChild(n, ((row, i) => {\n            row.setAttribute('d', line(vs[i]));\n          }));\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n\n}\n","import {Column, IDataRow, IOrderedGroup, ISetColumn, isSetColumn} from '../model';\nimport {CANVAS_HEIGHT, cssClass, UPSET} from '../styles';\nimport {ICellRendererFactory, IRenderContext, ISummaryRenderer, IGroupCellRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\n\nexport default class UpSetCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'UpSet';\n\n  canRender(col: Column) {\n    return isSetColumn(col);\n  }\n\n  private static calculateSetPath(setData: boolean[], cellDimension: number) {\n    const catindexes: number[] = [];\n    setData.forEach((d: boolean, i: number) => (d) ? catindexes.push(i) : -1);\n\n    const left = (catindexes[0] * cellDimension) + (cellDimension / 2);\n    const right = (catindexes[catindexes.length - 1] * cellDimension) + (cellDimension / 2);\n\n    return {left, right};\n  }\n\n  private static createDOMContext(col: ISetColumn) {\n    const categories = col.categories;\n    let templateRows = '';\n    for (const cat of categories) {\n      templateRows += `<div class=\"${cssClass('upset-dot')}\" title=\"${cat.label}\"></div>`;\n    }\n    return {\n      template: `<div><div class=\"${cssClass('upset-line')}\"></div>${templateRows}</div>`,\n      render: (n: HTMLElement, value: boolean[]) => {\n        Array.from(n.children).slice(1).forEach((d, i) => {\n          const v = value[i];\n          d.classList.toggle(cssClass('enabled'), v);\n        });\n\n        const line = <HTMLElement>n.firstElementChild;\n        const left = value.findIndex((d) => d);\n        const right = (value.length - 1) - value.reverse().findIndex((d) => d);\n\n        if (left < 0 || left === right) {\n          line.style.display = 'none';\n          return;\n        }\n        line.style.display = null;\n        line.style.left = `${Math.round(100 * (left + 0.5) / value.length)}%`;\n        line.style.width = `${Math.round(100 * (right - left) / value.length)}%`;\n      }\n    };\n  }\n\n  create(col: ISetColumn, context: IRenderContext): ICellRenderer {\n    const {template, render} = UpSetCellRenderer.createDOMContext(col);\n    const width = context.colWidth(col);\n    const cellDimension = width / col.categories.length;\n\n    return {\n      template,\n      update: (n: HTMLElement, d: IDataRow) => {\n        if (renderMissingDOM(n, col, d)) {\n          return;\n        }\n        render(n, col.getValues(d));\n      },\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\n        if (renderMissingCanvas(ctx, col, d, width)) {\n          return;\n        }\n        // Circle\n        const data = col.getValues(d);\n\n        const hasTrueValues = data.some((d) => d); //some values are true?\n\n        ctx.save();\n        ctx.fillStyle = UPSET.color;\n        ctx.strokeStyle = UPSET.color;\n        if (hasTrueValues) {\n          const {left, right} = UpSetCellRenderer.calculateSetPath(data, cellDimension);\n          ctx.beginPath();\n          ctx.moveTo(left, CANVAS_HEIGHT / 2);\n          ctx.lineTo(right, CANVAS_HEIGHT / 2);\n          ctx.stroke();\n        }\n\n        data.forEach((d, j) => {\n          const posx = (j * cellDimension);\n          ctx.beginPath();\n          ctx.globalAlpha = d ? 1 : UPSET.inactive;\n          ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\n          ctx.fill();\n        });\n\n        ctx.restore();\n      }\n    };\n  }\n\n  createGroup(col: ISetColumn, context: IRenderContext): IGroupCellRenderer {\n    const {template, render} = UpSetCellRenderer.createDOMContext(col);\n    return {\n      template,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupCategoricalStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          render(n, r.group.hist.map((d) => d.count > 0));\n        });\n      }\n    };\n  }\n\n  createSummary(col: ISetColumn, context: IRenderContext): ISummaryRenderer {\n    const {template, render} = UpSetCellRenderer.createDOMContext(col);\n    return {\n      template,\n      update: (n: HTMLElement) => {\n        return context.tasks.summaryCategoricalStats(col).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          render(n, r.summary.hist.map((d) => d.count > 0));\n        });\n      }\n    };\n  }\n}\n","import {Column, NumbersColumn, IDataRow, INumbersColumn, isNumbersColumn} from '../model';\nimport {CANVAS_HEIGHT, cssClass} from '../styles';\nimport {ANumbersCellRenderer} from './ANumbersCellRenderer';\nimport {toHeatMapColor} from './BrightnessCellRenderer';\nimport {IRenderContext, ERenderMode, ICellRendererFactory, IImposer, ISummaryRenderer} from './interfaces';\nimport {forEachChild, noRenderer} from './utils';\n\nexport default class VerticalBarCellRenderer extends ANumbersCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Bar Chart';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return isNumbersColumn(col) && Boolean(col.dataLength) && mode === ERenderMode.CELL;\n  }\n\n  private static compute(v: number, threshold: number, domain: number[]) {\n    if (v < threshold) {\n      //threshold to down\n      return {height: (threshold - v), bottom: (v - domain[0])};\n    }\n    //from top to down\n    return {height: (v - threshold), bottom: (threshold - domain[0])};\n  }\n\n  protected createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer) {\n    const cellDimension = context.colWidth(col) / col.dataLength!;\n    const threshold = col.getMapping().apply(NumbersColumn.CENTER);\n    const range = 1;\n    let templateRows = '';\n    for (let i = 0; i < col.dataLength!; ++i) {\n      templateRows += `<div class=\"${cssClass('heatmap-cell')}\" style=\"background-color: white\" title=\"\"></div>`;\n    }\n    const formatter = col.getNumberFormat();\n\n    return {\n      clazz: cssClass('heatmap'),\n      templateRow: templateRows,\n      update: (row: HTMLElement, data: number[], raw: number[], item: IDataRow, tooltipPrefix?: string) => {\n        const zero = toHeatMapColor(0, item, col, imposer);\n        const one = toHeatMapColor(1, item, col, imposer);\n\n        forEachChild(row, (d: HTMLElement, i) => {\n          const v = data[i];\n          const {bottom, height} = VerticalBarCellRenderer.compute(v, threshold, [0, 1]);\n          d.title = `${tooltipPrefix || ''}${formatter(raw[i])}`;\n          d.style.backgroundColor = v < threshold ? zero : one;\n          d.style.bottom = `${Math.round((100 * bottom) / range)}%`;\n          d.style.height = `${Math.round((100 * height) / range)}%`;\n        });\n      },\n      render: (ctx: CanvasRenderingContext2D, data: number[], item: IDataRow) => {\n        const zero = toHeatMapColor(0, item, col, imposer);\n        const one = toHeatMapColor(1, item, col, imposer);\n        const scale = CANVAS_HEIGHT / range;\n        data.forEach((v, j) => {\n          ctx.fillStyle = v < threshold ? zero : one;\n          const xpos = (j * cellDimension);\n          const {bottom, height} = VerticalBarCellRenderer.compute(v, threshold, [0, 1]);\n          ctx.fillRect(xpos, (range - height - bottom) * scale, cellDimension, height * scale);\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {Column, IDataRow, DateColumn, IOrderedGroup} from '../model';\nimport {IRenderContext, ICellRendererFactory, IGroupCellRenderer, ISummaryRenderer, ICellRenderer} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {noop, noRenderer, setText, exampleText} from './utils';\nimport {chooseAggregatedDate} from '../model/internalDate';\nimport {cssClass} from '../styles';\n\nexport default class DateCellRenderer implements ICellRendererFactory {\n  title: string = 'Date';\n  groupTitle: string = 'Date';\n  summaryTitle: string = 'Date';\n\n  canRender(col: Column): boolean {\n    return col instanceof DateColumn;\n  }\n\n  create(col: DateColumn): ICellRenderer {\n    return {\n      template: `<div> </div>`,\n      update: (n: HTMLDivElement, d: IDataRow) => {\n        renderMissingDOM(n, col, d);\n        setText(n, col.getLabel(d));\n      },\n      render: noop\n    };\n  }\n\n  createGroup(col: DateColumn, context: IRenderContext): IGroupCellRenderer {\n    return {\n      template: `<div> </div>`,\n      update: (n: HTMLDivElement, group: IOrderedGroup) => {\n        const isGrouped = col.isGroupedBy() >= 0;\n        if (isGrouped) {\n          return context.tasks.groupRows(col, group, 'date', (rows) => chooseAggregatedDate(rows, col.getDateGrouper(), col)).then((chosen) => {\n            if (typeof chosen === 'symbol') {\n              return;\n            }\n            n.classList.toggle(cssClass('missing'), !chosen);\n            setText(n, chosen ? chosen.name : '');\n          });\n        }\n        return context.tasks.groupExampleRows(col, group, 'date', (sample) => exampleText(col, sample)).then((text) => {\n          if (typeof text === 'symbol') {\n            return;\n          }\n          n.classList.toggle(cssClass('missing'), !text);\n          setText(n, text);\n        });\n      }\n    };\n  }\n\n  createSummary(): ISummaryRenderer {\n    return noRenderer;\n  }\n}\n","import {IDialogContext} from './ADialog';\nimport {timeFormat} from 'd3-time-format';\nimport APopup from './APopup';\n\n/** @internal */\nexport interface IInputDateOptions {\n  value: Date | null;\n  label: string | null;\n}\n\n/** @internal */\nexport default class InputDateDialog extends APopup {\n\n  private readonly ioptions: Readonly<IInputDateOptions> = {\n    value: null,\n    label: null\n  };\n\n  constructor(dialog: IDialogContext, private readonly callback: (value: Date | null) => void, options: Partial<IInputDateOptions> = {}) {\n    super(dialog);\n    Object.assign(this.ioptions, options);\n  }\n\n  protected build(node: HTMLElement) {\n    const o = this.ioptions;\n\n    const f = timeFormat('%Y-%m-%d');\n\n    node.insertAdjacentHTML('beforeend', `\n     <input type=\"date\" value=\"${o.value ? f(o.value) : ''}\" required autofocus placeholder=\"${o.label ? o.label : 'enter date'}\">\n    `);\n    this.findInput('input[type=date]').addEventListener('keypress', (evt) => {\n      if (evt.key === 'Enter') {\n        this.triggerSubmit();\n      }\n    });\n    this.enableLivePreviews('input');\n  }\n\n  submit() {\n    this.callback(this.findInput('input[type=date]').valueAsDate);\n    return true;\n  }\n}\n","import {dateStatsBuilder, IDateStatistics} from '../internal';\nimport {Column, IDataRow, IDateColumn, IDatesColumn, IOrderedGroup, isDateColumn, isDatesColumn, Ranking} from '../model';\nimport {cssClass, engineCssClass} from '../styles';\nimport {ERenderMode, ICellRendererFactory, IRenderContext, ICellRenderer, IGroupCellRenderer, ISummaryRenderer, IRenderTasks} from './interfaces';\nimport {renderMissingDOM} from './missing';\nimport {colorOf} from './utils';\nimport {histogramUpdate, histogramTemplate, mappingHintTemplate, mappingHintUpdate, IFilterInfo, IFilterContext, filteredHistTemplate, initFilter} from './histogram';\nimport InputDateDialog from '../ui/dialogs/InputDateDialog';\nimport {shiftFilterDateDay, noDateFilter} from '../model/internalDate';\nimport DialogManager from '../ui/dialogs/DialogManager';\n\nexport default class DateHistogramCellRenderer implements ICellRendererFactory {\n  readonly title: string = 'Histogram';\n\n  canRender(col: Column, mode: ERenderMode): boolean {\n    return (isDateColumn(col) && mode !== ERenderMode.CELL) || (isDatesColumn(col) && mode === ERenderMode.CELL);\n  }\n\n  create(col: IDatesColumn, _context: IRenderContext): ICellRenderer {\n    const {template, render} = getHistDOMRenderer(col);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, row: IDataRow) => {\n        if (renderMissingDOM(n, col, row)) {\n          return;\n        }\n        const b = dateStatsBuilder();\n        for (const n of col.getDates(row)) {\n          b.push(n);\n        }\n        const hist = b.build();\n        render(n, hist);\n      }\n    };\n  }\n\n  createGroup(col: IDateColumn, context: IRenderContext): IGroupCellRenderer {\n    const {template, render} = getHistDOMRenderer(col);\n    return {\n      template: `${template}</div>`,\n      update: (n: HTMLElement, group: IOrderedGroup) => {\n        return context.tasks.groupDateStats(col, group).then((r) => {\n          if (typeof r === 'symbol') {\n            return;\n          }\n          const isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n          n.classList.toggle(cssClass('missing'), isMissing);\n          if (isMissing) {\n            return;\n          }\n          render(n, r.group);\n        });\n      }\n    };\n  }\n\n  createSummary(col: IDateColumn, context: IRenderContext, interactive: boolean): ISummaryRenderer {\n    const r = getHistDOMRenderer(col);\n    return interactive ? interactiveSummary(col, context, r.template, r.render) : staticSummary(col, context, false, r.template, r.render);\n  }\n}\n\n\nfunction staticSummary(col: IDateColumn, context: IRenderContext, interactive: boolean, template: string, render: (n: HTMLElement, stats: IDateStatistics, unfiltered?: IDateStatistics) => void) {\n  template += mappingHintTemplate(['', '']);\n\n  return {\n    template: `${template}</div>`,\n    update: (node: HTMLElement) => {\n      return context.tasks.summaryDateStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const {summary, data} = r;\n\n        node.classList.toggle(cssClass('missing'), !summary);\n        if (!summary) {\n          return;\n        }\n        const formatter = col.getFormatter();\n        mappingHintUpdate(node, [formatter(summary.min), formatter(summary.max)]);\n\n        render(node, summary, interactive ? data: undefined);\n      });\n    }\n  };\n}\n\n\nfunction interactiveSummary(col: IDateColumn, context: IRenderContext, template: string, render: (n: HTMLElement, stats: IDateStatistics, unfiltered?: IDateStatistics) => void) {\n  const filter = col.getFilter();\n  const dummyDomain: [number, number] = [isFinite(filter.min) ? filter.min : 0, isFinite(filter.max) ? filter.max : 100];\n\n  template += filteredHistTemplate(createFilterContext(col, context, dummyDomain), createFilterInfo(col, dummyDomain));\n\n  let fContext: IFilterContext<number>;\n  let updateFilter: (missing: number, f: IFilterInfo<number>) => void;\n\n  return {\n    template: `${template}</div>`,\n    update: (node: HTMLElement) => {\n      return context.tasks.summaryDateStats(col).then((r) => {\n        if (typeof r === 'symbol') {\n          return;\n        }\n        const {summary, data} = r;\n        if (!updateFilter) {\n          const domain: [number, number] = [data.min ? data.min.getTime() : Date.now(), data.max ? data.max.getTime() : Date.now()];\n          fContext = createFilterContext(col, context, domain);\n          updateFilter = initFilter(node, fContext);\n        }\n\n        updateFilter(data ? data.missing : (summary ? summary.missing : 0), createFilterInfo(col, fContext.domain));\n\n        node.classList.add(cssClass('histogram-i'));\n        node.classList.toggle(cssClass('missing'), !summary);\n        if (!summary) {\n          return;\n        }\n        render(node, summary, data);\n      });\n    }\n  };\n}\n\n\n/** @internal */\nexport function createDateFilter(col: IDateColumn, parent: HTMLElement, context: {idPrefix: string, dialogManager: DialogManager, tasks: IRenderTasks}, livePreviews: boolean) {\n  const renderer = getHistDOMRenderer(col);\n  const filter = col.getFilter();\n\n  let domain: [number, number] = [isFinite(filter.min) ? filter.min : 0, isFinite(filter.max) ? filter.max : 100];\n\n  let fContext = createFilterContext(col, context, domain);\n  let applyFilter = fContext.setFilter;\n  let currentFilter = createFilterInfo(col, domain);\n  fContext.setFilter = (filterMissing, min, max) => {\n    currentFilter = {filterMissing, filterMin: min, filterMax: max};\n    if (livePreviews) {\n      applyFilter(filterMissing, min, max);\n    }\n  };\n  parent.innerHTML = `${renderer.template}${filteredHistTemplate(fContext, createFilterInfo(col, domain))}</div>`;\n  const summaryNode = <HTMLElement>parent.firstElementChild!;\n  summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\n  summaryNode.dataset.renderer = 'histogram';\n  summaryNode.dataset.interactive = '';\n  summaryNode.classList.add(cssClass('histogram-i'));\n\n\n  let updateFilter: null | ((missing: number, filter: IFilterInfo<number>) => void) = null;\n  const prepareRender = (min: Date | null, max: Date | null) => {\n    // reinit with proper domain\n    domain = [min ? min.getTime() : Date.now(), max ? max.getTime() : Date.now()];\n    fContext = createFilterContext(col, context, domain);\n    applyFilter = fContext.setFilter;\n    currentFilter = createFilterInfo(col, domain);\n    fContext.setFilter = (filterMissing, min, max) => {\n      currentFilter = {filterMissing, filterMin: min, filterMax: max};\n      if (livePreviews) {\n        applyFilter(filterMissing, min, max);\n      }\n    };\n    return initFilter(summaryNode, fContext);\n  };\n\n  const rerender = () => {\n    const ready = context.tasks.summaryDateStats(col).then((r) => {\n      if (typeof r === 'symbol') {\n        return;\n      }\n      const {summary, data} = r;\n      if (!updateFilter) {\n        updateFilter = prepareRender(data.min, data.max);\n      }\n      updateFilter(data ? data.missing : (summary ? summary.missing : 0), currentFilter);\n      summaryNode.classList.toggle(cssClass('missing'), !summary);\n      if (!summary) {\n        return;\n      }\n      renderer.render(summaryNode, summary, data);\n    });\n    if (!ready) {\n      return;\n    }\n    summaryNode.classList.add(engineCssClass('loading'));\n    ready.then(() => {\n      summaryNode.classList.remove(engineCssClass('loading'));\n    });\n  };\n\n  const ranking = col.findMyRanker()!;\n\n  if (ranking) {\n    ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.numberFilter`, () => rerender());\n  }\n  rerender();\n\n  return {\n    cleanUp() {\n      if (ranking) {\n        ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.numberFilter`, null);\n      }\n    },\n    reset() {\n      currentFilter = createFilterInfo(col, domain, noDateFilter());\n      rerender();\n    },\n    submit() {\n      applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\n    }\n  };\n}\n\n\nfunction getHistDOMRenderer(col: IDateColumn) {\n  const guessedBins = 10;\n\n  const formatter = col.getFormatter();\n  const color = colorOf(col)!;\n\n  const render = (n: HTMLElement, stats: IDateStatistics, unfiltered?: IDateStatistics) => {\n    return histogramUpdate(n, stats, unfiltered || null, formatter, () => color);\n  };\n  return {\n    template: histogramTemplate(guessedBins),\n    render,\n    guessedBins\n  };\n}\n\nfunction createFilterInfo(col: IDateColumn, domain: [number, number], filter = col.getFilter()): IFilterInfo<number> {\n  const filterMin = isFinite(filter.min) ? filter.min : domain[0];\n  const filterMax = isFinite(filter.max) ? filter.max : domain[1];\n  return {\n    filterMissing: filter.filterMissing,\n    filterMin,\n    filterMax\n  };\n}\n\nfunction createFilterContext(col: IDateColumn, context: {idPrefix: string, dialogManager: DialogManager}, domain: [number, number]): IFilterContext<number> {\n  const clamp = (v: number) => Math.max(0, Math.min(100, v));\n  const percent = (v: number) => clamp(Math.round(100 * (v - domain[0]) / (domain[1] - domain[0])));\n  const unpercent = (v: number) => ((v / 100) * (domain[1] - domain[0]) + domain[0]);\n  return {\n    percent,\n    unpercent,\n    domain,\n    format: (v) => isNaN(v) ? '' : col.getFormatter()(new Date(v)),\n    formatRaw: String,\n    parseRaw: (v) => Number.parseInt(v, 10),\n    setFilter: (filterMissing, minValue, maxValue) => col.setFilter({\n      filterMissing,\n      min: Math.abs(minValue - domain[0]) < 0.001 ? Number.NEGATIVE_INFINITY : shiftFilterDateDay(minValue, 'min'),\n      max: Math.abs(maxValue - domain[1]) < 0.001 ? Number.POSITIVE_INFINITY : shiftFilterDateDay(maxValue, 'max')\n    }),\n    edit: (value, attachment, type) => {\n      return new Promise((resolve) => {\n        const dialogCtx = {\n          attachment,\n          manager: context.dialogManager,\n          level: context.dialogManager.maxLevel + 1,\n          idPrefix: context.idPrefix\n        };\n        const dialog = new InputDateDialog(dialogCtx, (d) => resolve(d == null ? NaN : shiftFilterDateDay(d.getTime(), type)), {value: isNaN(value) ? null : new Date(value)});\n        dialog.open();\n      });\n    }\n  };\n}\n","import {Column} from '../model';\nimport ActionRenderer from './ActionRenderer';\nimport AggregateGroupRenderer from './AggregateGroupRenderer';\nimport AnnotationRenderer from './AnnotationRenderer';\nimport BarCellRenderer from './BarCellRenderer';\nimport BooleanCellRenderer from './BooleanCellRenderer';\nimport BoxplotCellRenderer from './BoxplotCellRenderer';\nimport BrightnessCellRenderer from './BrightnessCellRenderer';\nimport CategoricalCellRenderer from './CategoricalCellRenderer';\nimport CategoricalHeatmapCellRenderer from './CategoricalHeatmapCellRenderer';\nimport CategoricalStackedDistributionlCellRenderer from './CategoricalStackedDistributionlCellRenderer';\nimport CircleCellRenderer from './CircleCellRenderer';\nimport {DefaultCellRenderer} from './DefaultCellRenderer';\nimport DotCellRenderer from './DotCellRenderer';\nimport GroupCellRenderer from './GroupCellRenderer';\nimport HeatmapCellRenderer from './HeatmapCellRenderer';\nimport HistogramCellRenderer from './HistogramCellRenderer';\nimport ImageCellRenderer from './ImageCellRenderer';\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\nimport InterleavingCellRenderer from './InterleavingCellRenderer';\nimport LinkCellRenderer from './LinkCellRenderer';\nimport LinkMapCellRenderer from './LinkMapCellRenderer';\nimport LoadingCellRenderer from './LoadingCellRenderer';\nimport MapBarCellRenderer from './MapBarCellRenderer';\nimport MultiLevelCellRenderer from './MultiLevelCellRenderer';\nimport RankCellRenderer from './RankCellRenderer';\nimport SelectionRenderer from './SelectionRenderer';\nimport SetCellRenderer from './SetCellRenderer';\nimport SparklineCellRenderer from './SparklineCellRenderer';\nimport StringCellRenderer from './StringCellRenderer';\nimport TableCellRenderer from './TableCellRenderer';\nimport UpSetCellRenderer from './UpSetCellRenderer';\nimport VerticalBarCellRenderer from './VerticalBarCellRenderer';\nimport DateCellRenderer from './DateCellRenderer';\nimport DateHistogramCellRenderer from './DateHistogramCellRenderer';\n\nconst defaultCellRenderer = new DefaultCellRenderer();\n/**\n * default render factories\n */\nexport const renderers: { [key: string]: ICellRendererFactory } = {\n  actions: new ActionRenderer(),\n  aggregate: new AggregateGroupRenderer(),\n  annotate: new AnnotationRenderer(),\n  boolean: new BooleanCellRenderer(),\n  boxplot: new BoxplotCellRenderer(),\n  brightness: new BrightnessCellRenderer(),\n  catdistributionbar: new CategoricalStackedDistributionlCellRenderer(),\n  categorical: new CategoricalCellRenderer(),\n  circle: new CircleCellRenderer(),\n  date: new DateCellRenderer(),\n  default: defaultCellRenderer,\n  dot: new DotCellRenderer(),\n  group: new GroupCellRenderer(),\n  heatmap: new HeatmapCellRenderer(),\n  catheatmap: new CategoricalHeatmapCellRenderer(),\n  histogram: new HistogramCellRenderer(),\n  datehistogram: new DateHistogramCellRenderer(),\n  image: new ImageCellRenderer(),\n  interleaving: new InterleavingCellRenderer(),\n  link: new LinkCellRenderer(),\n  linkMap: new LinkMapCellRenderer(),\n  loading: new LoadingCellRenderer(),\n  nested: new MultiLevelCellRenderer(false),\n  number: new BarCellRenderer(),\n  mapbars: new MapBarCellRenderer(),\n  rank: new RankCellRenderer(),\n  selection: new SelectionRenderer(),\n  set: new SetCellRenderer(),\n  sparkline: new SparklineCellRenderer(),\n  stack: new MultiLevelCellRenderer(),\n  string: new StringCellRenderer(),\n  table: new TableCellRenderer(),\n  upset: new UpSetCellRenderer(),\n  verticalbar: new VerticalBarCellRenderer()\n};\n\nexport function chooseRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\n  const r = renderers[col.getRenderer()];\n  return r && typeof r.create === 'function' ? r : defaultCellRenderer;\n}\n\nexport function chooseGroupRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\n  const r = renderers[col.getGroupRenderer()];\n  return r && typeof r.createGroup === 'function' ? r : defaultCellRenderer;\n}\n\nexport function chooseSummaryRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\n  const r = renderers[col.getSummaryRenderer()];\n  return r && typeof r.createSummary === 'function' ? r : defaultCellRenderer;\n}\n\n/**\n * determined the list of possible renderers for a given colum\n * @param col the column to resolve the renderers\n * @param renderers map of possible renderers\n * @param canRender optional custom canRender function\n */\nexport function getPossibleRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }, canRender?: (type: string, renderer: ICellRendererFactory, col: Column, mode: ERenderMode) => boolean) {\n  const all = Object.keys(renderers).filter(Boolean).map((type) => ({type, factory: renderers[type]}));\n\n  const item = all.filter(({type, factory}) => typeof factory.create === 'function' && factory.canRender(col, ERenderMode.CELL) && (!canRender || canRender(type, factory, col, ERenderMode.CELL)));\n  const group = all.filter(({type, factory}) => typeof factory.createGroup === 'function' && factory.canRender(col, ERenderMode.GROUP) && (!canRender || canRender(type, factory, col, ERenderMode.GROUP)));\n  const summary = all.filter(({type, factory}) => typeof factory.createSummary === 'function' && factory.canRender(col, ERenderMode.SUMMARY) && (!canRender || canRender(type, factory, col, ERenderMode.SUMMARY)));\n\n  return {\n    item: item.map(({type, factory}) => ({type, label: factory.title})),\n    group: group.map(({type, factory}) => ({type, label: factory.groupTitle || factory.title})),\n    summary: summary.map(({type, factory}) => ({type, label: factory.summaryTitle || factory.groupTitle || factory.title}))\n  };\n}\n","import {BooleanColumn} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class BooleanFilterDialog extends ADialog {\n\n  private readonly before: boolean | null;\n\n  constructor(private readonly column: BooleanColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'filter'\n    });\n    this.before = this.column.getFilter();\n  }\n\n  protected build(node: HTMLElement) {\n    node.insertAdjacentHTML('beforeend', `\n     <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"boolean_check\" value=\"null\" ${this.before == null ? 'checked=\"checked\"' : ''}><span>No Filter</span></label>\n     <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"boolean_check\" value=\"true\" ${this.before === true ? 'checked=\"checked\"' : ''}><span>True</span></label>\n     <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"boolean_check\" value=\"false\" ${this.before === false ? 'checked=\"checked\"' : ''}><span>False</span></label>\n    `);\n    this.enableLivePreviews('input[type=radio]');\n  }\n\n  private updateFilter(filter: boolean | null) {\n    this.column.setFilter(filter);\n  }\n\n  protected reset() {\n    const v = 'null';\n    this.forEach('input[type=\"radio\"]', (d: HTMLInputElement) => d.checked = d.value === v);\n  }\n\n  protected cancel() {\n    this.updateFilter(this.before);\n  }\n\n  protected submit() {\n    const isTrue = this.findInput('input[type=\"radio\"][value=\"true\"]').checked;\n    const isFalse = this.findInput('input[type=\"radio\"][value=\"false\"]').checked;\n    this.updateFilter(isTrue ? true : (isFalse ? false : null));\n    return true;\n  }\n}\n","import {ICategoricalColumn, CategoricalsColumn, CategoricalMapColumn, ICategory, ICategoricalColorMappingFunction} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {uniqueId} from './utils';\nimport {cssClass} from '../../styles';\nimport {color} from 'd3-color';\nimport {schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3} from 'd3-scale-chromatic';\nimport {DEFAULT_CATEGORICAL_COLOR_FUNCTION, ReplacmentColorMappingFunction} from '../../model/CategoricalColorMappingFunction';\n\nconst sets: {[key: string]: ReadonlyArray<string>} = {schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3};\n\n/** @internal */\nexport default class CategoricalColorMappingDialog extends ADialog {\n\n  private readonly before: ICategoricalColorMappingFunction;\n\n  constructor(private readonly column: ICategoricalColumn | CategoricalsColumn | CategoricalMapColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'colorMapping'\n    });\n\n    this.before = column.getColorMapping().clone();\n  }\n\n  protected build(node: HTMLElement) {\n    const id = uniqueId(this.dialog.idPrefix);\n    const mapping = this.column.getColorMapping();\n    node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('dialog-table')}\">\n      <div class=\"${cssClass('dialog-color-table-entry')}\">\n        <select id=\"${id}Chooser\">\n          <option value=\"\">Apply Color Scheme...</option>\n          <option value=\"schemeCategory10\">D3 Category 10 (${schemeCategory10.length})</option>\n          <option value=\"schemeSet1\">Set 1 (${schemeSet1.length})</option>\n          <option value=\"schemeSet2\">Set 2 (${schemeSet2.length})</option>\n          <option value=\"schemeSet3\">Set 3 (${schemeSet3.length})</option>\n          <option value=\"schemeAccent\">Accent (${schemeAccent.length})</option>\n          <option value=\"schemeDark2\">Dark2 (${schemeDark2.length})</option>\n          <option value=\"schemePastel1\">Pastel 1 (${schemePastel1.length})</option>\n          <option value=\"schemePastel2\">Pastel 2 (${schemePastel2.length})</option>\n        </select>\n      </div>\n      ${this.column.categories.map((d) => `\n        <label class=\"${cssClass('checkbox')} ${cssClass('dialog-color-table-entry')}\">\n          <input data-cat=\"${d.name}\" type=\"color\" value=\"${color(mapping.apply(d))!.hex()}\">\n          <span>${d.label}</span>\n        </label>`).join('')}\n    </div>`);\n\n    this.findInput('select').onchange = (evt) => {\n      const scheme = sets[(<HTMLInputElement>evt.currentTarget).value];\n      if (!scheme) {\n        return;\n      }\n      this.forEach('[data-cat]', (n: HTMLInputElement, i) => {\n        n.value = scheme[i % scheme.length];\n      });\n      if (this.showLivePreviews()) {\n        this.submit();\n      }\n    };\n\n    this.enableLivePreviews('input[type=color]');\n  }\n\n  reset() {\n    const cats = this.column.categories;\n    this.forEach('[data-cat]', (n: HTMLInputElement, i) => {\n      n.value = color(cats[i]!.color)!.hex();\n    });\n  }\n\n  submit() {\n    const cats = this.column.categories;\n    const map = new Map<ICategory, string>();\n    this.forEach('input[data-cat]', (n: HTMLInputElement, i) => {\n      const cat = cats[i];\n      if (color(cat.color)!.hex() !== n.value) {\n        map.set(cat, n.value);\n      }\n    });\n    if (map.size === 0) {\n      this.column.setColorMapping(DEFAULT_CATEGORICAL_COLOR_FUNCTION);\n    } else {\n      this.column.setColorMapping(new ReplacmentColorMappingFunction(map));\n    }\n    return true;\n  }\n\n  cancel() {\n    this.column.setColorMapping(this.before);\n  }\n}\n","import {SetColumn, CategoricalColumn, ICategoricalFilter, ISetCategoricalFilter} from '../../model';\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {forEach} from './utils';\nimport {cssClass} from '../../styles';\nimport {isCategoryIncluded} from '../../model/internalCategorical';\n\n/** @internal */\nexport default class CategoricalFilterDialog extends ADialog {\n\n  private readonly before: ICategoricalFilter;\n\n  constructor(private readonly column: CategoricalColumn | SetColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'filter'\n    });\n    this.before = this.column.getFilter() || {filter: '', filterMissing: false};\n  }\n\n  protected build(node: HTMLElement) {\n    node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('dialog-table')}\">\n        <label class=\"${cssClass('checkbox')} ${cssClass('dialog-filter-table-entry')}\">\n          <input type=\"checkbox\" checked>\n          <span>\n            <span class=\"${cssClass('dialog-filter-table-color')}\"></span>\n            <div>Un/Select All</div>\n          </span>\n        </label>\n        ${this.column.categories.map((c) => `<label class=\"${cssClass('checkbox')} ${cssClass('dialog-filter-table-entry')}\">\n          <input data-cat=\"${c.name}\" type=\"checkbox\"${isCategoryIncluded(this.before, c) ? 'checked' : ''}>\n          <span>\n            <span class=\"${cssClass('dialog-filter-table-color')}\" style=\"background-color: ${c.color}\"></span>\n            <div>${c.label}</div>\n          </span>\n        </label>`).join('')}\n    </div>`);\n    // selectAll\n    const selectAll = this.findInput('input:not([data-cat])');\n    selectAll.onchange =  () => {\n      forEach(node, 'input[data-cat]', (n: HTMLInputElement) => n.checked = selectAll.checked);\n    };\n    if (this.column instanceof SetColumn) {\n      const some = (<ISetCategoricalFilter>this.before).mode !== 'every';\n      node.insertAdjacentHTML('beforeend', `<strong>Show rows where</strong>`);\n      node.insertAdjacentHTML('beforeend', `<label class=\"${cssClass('checkbox')}\">\n        <input type=\"radio\" ${!some ? 'checked=\"checked\"' : ''} name=\"mode\" value=\"every\">\n        <span>all are selected</span>\n      </label>`);\n      node.insertAdjacentHTML('beforeend', `<label class=\"${cssClass('checkbox')}\" style=\"padding-bottom: 0.6em\">\n        <input type=\"radio\" ${some ? 'checked=\"checked\"' : ''} name=\"mode\" value=\"some\">\n        <span>some are selected</span>\n      </label>`);\n    }\n    node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing));\n\n    this.enableLivePreviews('input[type=checkbox],input[type=radio]');\n  }\n\n  private updateFilter(filter: string[] | null | RegExp | string, filterMissing: boolean, someMode = false) {\n    const noFilter = filter == null && filterMissing === false;\n    const f: ISetCategoricalFilter = {filter: filter!, filterMissing};\n    if (this.column instanceof SetColumn) {\n      f.mode = someMode ? 'some' : 'every';\n    }\n    this.column.setFilter(noFilter ? null : f);\n  }\n\n  protected reset() {\n    this.forEach('input[data-cat]', (n: HTMLInputElement) => n.checked = true);\n    findFilterMissing(this.node).checked = false;\n    const mode = this.findInput('input[value=every]');\n    if (mode) {\n      mode.checked = true;\n    }\n  }\n\n  protected cancel() {\n    this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing, (<ISetCategoricalFilter>this.before).mode === 'some');\n  }\n\n  protected submit() {\n    let f: string[] | null = this.forEach('input[data-cat]', (n: HTMLInputElement) => n.checked ? n.dataset.cat! : '').filter(Boolean);\n    if (f.length === this.column.categories.length) { // all checked = no filter\n      f = null;\n    }\n    const filterMissing = findFilterMissing(this.node).checked;\n    const mode = this.findInput('input[value=some]');\n    this.updateFilter(f, filterMissing, mode != null && mode.checked);\n    return true;\n  }\n}\n","import {round} from '../../internal';\nimport {OrdinalColumn, ICategoricalFilter} from '../../model';\nimport {isCategoryIncluded} from '../../model/internalCategorical';\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {forEach} from './utils';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class CategoricalMappingFilterDialog extends ADialog {\n\n  private readonly before: ICategoricalFilter;\n\n  constructor(private readonly column: OrdinalColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'filter'\n    });\n    this.before = this.column.getFilter() || {filter: this.column.categories.map((d) => d.name), filterMissing: false};\n  }\n\n  protected build(node: HTMLElement) {\n    const joint = this.column.categories.map((d) => Object.assign({\n      range: round(d.value * 100, 2)\n    }));\n    joint.sort((a, b) => a.label.localeCompare(b.label));\n\n    node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('dialog-table')}\">\n        <label class=\"${cssClass('checkbox')} ${cssClass('dialog-filter-table-entry')}\">\n          <input type=\"checkbox\" checked>\n          <span>\n            <div>Un/Select All</div>\n          </span>\n        </label>\n        ${joint.map(({name, color, label, range}) => `\n          <label class=\"${cssClass('checkbox')} ${cssClass('dialog-filter-table-entry')}\">\n            <input data-cat=\"${name}\" type=\"checkbox\"${isCategoryIncluded(this.before, name) ? 'checked' : ''}>\n            <span>\n              <input type=\"number\" value=\"${range}\" min=\"0\" max=\"100\" size=\"5\">\n              <div class=\"${cssClass('dialog-filter-color-bar')}\">\n                <span style=\"background-color: ${color}; width: ${range}%\"></span>\n              </div>\n              <div>${label}</div>\n            </span>\n          </label>`).join('')}\n    </div>`);\n    // selectAll\n    const selectAll = this.findInput('input[type=checkbox]:not([data-cat])');\n    selectAll.onchange = () => {\n      forEach(node, '[data-cat]', (n: HTMLInputElement) => n.checked = selectAll.checked);\n    };\n    this.forEach('input[type=number]', (d: HTMLInputElement) => {\n      d.oninput = () => {\n        (<HTMLElement>d.nextElementSibling!.firstElementChild).style.width = `${d.value}%`;\n      };\n    });\n    node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing));\n\n    this.enableLivePreviews('input[type=checkbox], input[type=number]');\n  }\n\n  private updateFilter(filter: string[] | null | string | RegExp, filterMissing: boolean) {\n    const noFilter = filter == null && filterMissing === false;\n    this.column.setFilter(noFilter ? null : {filter: filter!, filterMissing});\n  }\n\n  protected cancel() {\n    this.updateFilter(this.before.filter, this.before.filterMissing);\n  }\n\n  protected reset() {\n    this.forEach('[data-cat]', (n: HTMLInputElement) => {\n      n.checked = false;\n      (<HTMLInputElement>n.nextElementSibling!).value = '50';\n    });\n  }\n\n  protected submit() {\n    const items = this.forEach('input[data-cat]', (n: HTMLInputElement) => ({\n      checked: n.checked,\n      cat: n.dataset.cat!,\n      range: (<HTMLInputElement>n.nextElementSibling)!.valueAsNumber\n    }));\n    let f: string[] | null = items.filter((d) => d.checked).map((d) => d.cat);\n    if (f.length === this.column.categories.length) { // all checked = no filter\n      f = null;\n    }\n    const filterMissing = findFilterMissing(this.node).checked;\n    this.updateFilter(f, filterMissing);\n    this.column.setMapping(items.map((d) => d.range / 100));\n    return true;\n  }\n}\n","import {Column} from '../../model';\nimport {IRankingHeaderContext, IRenderInfo} from '../interfaces';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class ChangeRendererDialog extends ADialog {\n  private readonly before: {renderer: string, group: string, summary: string};\n\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'vis'\n    });\n\n    this.before = {\n      renderer: column.getRenderer(),\n      group: column.getGroupRenderer(),\n      summary: column.getSummaryRenderer()\n    };\n  }\n\n  protected build(node: HTMLElement) {\n    const current = this.column.getRenderer();\n    const currentGroup = this.column.getGroupRenderer();\n    const currentSummary = this.column.getSummaryRenderer();\n    const {item, group, summary} = this.ctx.getPossibleRenderer(this.column);\n\n    console.assert(item.length > 1 || group.length > 1 || summary.length > 1); // otherwise no need to show this\n\n    const byName = (a: IRenderInfo, b: IRenderInfo) => a.label.localeCompare(b.label);\n    node.insertAdjacentHTML('beforeend', `\n      <strong>Item Visualization</strong>\n      ${item.sort(byName).map((d) => ` <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"renderer\" value=\"${d.type}\" ${(current === d.type) ? 'checked' : ''}><span>${d.label}</span></label>`).join('')}\n      <strong>Group Visualization</strong>\n      ${group.sort(byName).map((d) => ` <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"group\" value=\"${d.type}\" ${(currentGroup === d.type) ? 'checked' : ''}><span>${d.label}</span></label>`).join('')}\n      <strong>Summary Visualization</strong>\n      ${summary.sort(byName).map((d) => ` <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"summary\" value=\"${d.type}\" ${(currentSummary === d.type) ? 'checked' : ''}><span>${d.label}</span></label>`).join('')}\n    `);\n\n    this.enableLivePreviews('input[type=radio]');\n  }\n\n  protected cancel() {\n    this.column.setRenderer(this.before.renderer);\n    this.column.setGroupRenderer(this.before.group);\n    this.column.setSummaryRenderer(this.before.summary);\n  }\n\n  protected reset() {\n    const desc = this.column.desc;\n    const r = this.findInput(`input[name=renderer][value=\"${desc.renderer || desc.type}\"]`);\n    if (r) {\n      r.checked = true;\n    }\n    const g = this.findInput(`input[name=group][value=\"${desc.groupRenderer || desc.type}\"]`);\n    if (g) {\n      g.checked = true;\n    }\n    const s = this.findInput(`input[name=summary][value=\"${desc.summaryRenderer || desc.type}\"]`);\n    if (s) {\n      s.checked = true;\n    }\n  }\n\n  protected submit() {\n    const renderer = this.findInput('input[name=renderer]:checked').value;\n    const group = this.findInput('input[name=group]:checked').value;\n    const summary = this.findInput('input[name=summary]:checked').value;\n\n    this.column.setRenderer(renderer);\n    this.column.setGroupRenderer(group);\n    this.column.setSummaryRenderer(summary);\n\n    return true;\n  }\n\n}\n","import ADialog, {IDialogContext} from './ADialog';\nimport {schemeCategory10, schemeSet1, schemeSet2, schemeSet3, schemeAccent, schemeDark2, schemePastel2, schemePastel1} from 'd3-scale-chromatic';\nimport {round} from '../../internal';\nimport {uniqueId} from '../../renderer/utils';\nimport {QuantizedColorFunction, CustomColorMappingFunction, SolidColorFunction, SequentialColorFunction, DivergentColorFunction} from '../../model/ColorMappingFunction';\nimport {IMapAbleColumn, DEFAULT_COLOR, IColorMappingFunction, IMapAbleDesc} from '../../model';\nimport {cssClass} from '../../styles';\nimport {IRankingHeaderContext} from '../interfaces';\n\nexport default class ColorMappingDialog extends ADialog {\n  private readonly before: IColorMappingFunction;\n  private readonly id = uniqueId('col');\n\n  constructor(private readonly column: IMapAbleColumn, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'colorMapping'\n    });\n\n    this.before = this.column.getColorMapping();\n  }\n\n  private createTemplate(id: string, wrapped: IColorMappingFunction) {\n    const current = wrapped instanceof QuantizedColorFunction ? wrapped.base : wrapped;\n    const entries = current instanceof CustomColorMappingFunction ? current.entries : [];\n\n    let h = '';\n    h += `<datalist id=\"${id}L\">${schemeCategory10.map((d) => `<option>${d}\"</option>`).join('')}</datalist>`;\n    h += `<datalist id=\"${id}LW\"><option>#FFFFFF\"</option>${schemeCategory10.slice(0, -1).map((d) => `<option>${d}</option>`).join('')}</datalist>`;\n\n    h += `<strong data-toggle=\"${current instanceof SolidColorFunction ? 'open' : ''}\">Solid Color</strong>`;\n    h += `<div>`;\n    {\n      const refColor = current instanceof SolidColorFunction ? current.color : '';\n      let has = refColor === DEFAULT_COLOR;\n      const colorsets = [schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3];\n      const renderColor = (d: string) => `<label class=\"${cssClass('checkbox-color')}\">\n        <input name=\"color\" type=\"radio\" value=\"${d}\" ${d === refColor ? 'checked=\"checked\"' : ''}>\n        <span style=\"background: ${d}\"></span>\n      </label>`;\n      colorsets.forEach((colors, i) => {\n        has = has || colors.includes(refColor);\n        h += `<div class=\"${cssClass('color-line')}\">\n          ${colors.map(renderColor).join('')}\n          ${i === 0 ? renderColor(DEFAULT_COLOR) : ''}\n        </div>`;\n      });\n      h += `<label class=\"${cssClass('checkbox')} ${cssClass('color-gradient')}\"><input name=\"color\" type=\"radio\" value=\"custom:solid\" ${refColor && !has ? 'checked=\"checked\"' : ''}>\n        <span class=\"${cssClass('color-custom')}\"><input type=\"color\" name=\"solid\" list=\"${id}L\" value=\"${current instanceof SolidColorFunction ? current.color : DEFAULT_COLOR}\" ${refColor && !has ? '' : 'disabled'}></span>\n      </label>`;\n    }\n    h += '</div>';\n\n    h += `<strong data-toggle=\"${current instanceof SequentialColorFunction || (current instanceof CustomColorMappingFunction && entries.length === 2) ? 'open' : ''}\">Sequential Color</strong>`;\n    h += '<div>';\n    h += `<div><label class=\"${cssClass('checkbox')}\">\n      <input name=\"kindS\" type=\"radio\" id=\"${id}KC_S\" value=\"continuous\" ${!(wrapped instanceof QuantizedColorFunction) ? 'checked' : ''}>\n      <span>Continuous</span>\n    </label>\n    <label class=\"${cssClass('checkbox')}\">\n      <input name=\"kindS\" type=\"radio\" id=\"${id}KQ_S\" value=\"quantized\" ${wrapped instanceof QuantizedColorFunction ? 'checked' : ''}>\n      <span>Discrete&nbsp;<input type=\"number\" id=\"${id}KQS_S\" min=\"2\" step=\"1\" style=\"width: 3em\" value=\"${wrapped instanceof QuantizedColorFunction ? `${wrapped.steps}\"` : '5\" disabled'}>&nbsp; steps</span>\n    </label></div>`;\n    {\n      const name = current instanceof SequentialColorFunction ? current.name : '';\n      for (const colors of Object.keys(SequentialColorFunction.FUNCTIONS)) {\n        h += `<label class=\"${cssClass('checkbox')} ${cssClass('color-gradient')}\"><input name=\"color\" type=\"radio\" value=\"${colors}\" ${colors === name ? 'checked=\"checked\"' : ''}>\n        <span data-c=\"${colors}\" style=\"background: ${gradient(SequentialColorFunction.FUNCTIONS[colors], 9)}\"></span>\n      </label>`;\n      }\n      const isCustom = entries.length === 2;\n      h += `<label class=\"${cssClass('checkbox')} ${cssClass('color-gradient')}\">\n        <input name=\"color\" type=\"radio\" value=\"custom:sequential\" ${isCustom ? 'checked' : ''}>\n        <span class=\"${cssClass('color-custom')}\">\n          <input type=\"color\" name=\"interpolate0\" list=\"${id}LW\" ${!isCustom ? 'disabled' : `value=\"${entries[0].color}\"`}>\n          <input type=\"color\" name=\"interpolate1\" list=\"${id}LW\" ${!isCustom ? 'disabled' : `value=\"${entries[entries.length - 1].color}\"`}>\n        </span>\n      </label>`;\n    }\n    h += '</div>';\n    h += `<strong data-toggle=\"${current instanceof DivergentColorFunction || (current instanceof CustomColorMappingFunction && entries.length === 3) ? 'open' : ''}\">Diverging Color</strong>`;\n    h += '<div>';\n    h += `<div><label class=\"${cssClass('checkbox')}\">\n      <input name=\"kindD\" type=\"radio\" id=\"${id}KC_D\" value=\"continuous\" ${!(wrapped instanceof QuantizedColorFunction) ? 'checked' : ''}>\n      <span>Continuous</span>\n    </label>\n    <label class=\"${cssClass('checkbox')}\">\n      <input name=\"kindD\" type=\"radio\" id=\"${id}KQ_D\" value=\"quantized\" ${wrapped instanceof QuantizedColorFunction ? 'checked' : ''}>\n      <span>Discrete&nbsp;<input type=\"number\" id=\"${id}KQS_D\" min=\"2\" step=\"1\" style=\"width: 3em\" value=\"${wrapped instanceof QuantizedColorFunction ? `${wrapped.steps}\"` : '5\" disabled'}>&nbsp; steps</span>\n    </label></div>`;\n\n    {\n      const name = current instanceof DivergentColorFunction ? current.name : '';\n      for (const colors of Object.keys(DivergentColorFunction.FUNCTIONS)) {\n        h += `<label class=\"${cssClass('checkbox')} ${cssClass('color-gradient')}\"><input name=\"color\" type=\"radio\" value=\"${colors}\" ${colors === name ? 'checked=\"checked\"' : ''}>\n        <span data-c=\"${colors}\" style=\"background: ${gradient(DivergentColorFunction.FUNCTIONS[colors], 11)}\"></span>\n      </label>`;\n      }\n      const isCustom = entries.length === 3;\n      h += `<label class=\"${cssClass('checkbox')} ${cssClass('color-gradient')}\">\n        <input name=\"color\" type=\"radio\" value=\"custom:divergent\" ${isCustom ? 'checked' : ''}>\n        <span class=\"${cssClass('color-custom')}\">\n          <input type=\"color\" name=\"divergingm1\" list=\"${id}L\" ${!isCustom ? 'disabled' : `value=\"${entries[0].color}\"`}>\n          <input type=\"color\" name=\"diverging0\" list=\"${id}LW\" ${!isCustom ? 'disabled' : `value=\"${entries[1].color}\"`}>\n          <input type=\"color\" name=\"diverging1\" list=\"${id}L\" ${!isCustom ? 'disabled' : `value=\"${entries[2].color}\"`}>\n        </span>\n      </label>`;\n    }\n    h += '</div>';\n\n    return h;\n  }\n\n  private applyColor() {\n    const selected = this.findInput(`input[name=color]:checked`);\n    if (!selected) {\n      return;\n    }\n    const quantized = this.findInput(`#${this.id}KQ_S`);\n    const steps = this.findInput(`#${this.id}KQS_S`);\n\n    const base = toColor(selected, this.node);\n    if (quantized.checked && !(base instanceof SolidColorFunction)) {\n      this.column.setColorMapping(new QuantizedColorFunction(base, Number.parseInt(steps.value, 10)));\n    } else {\n      this.column.setColorMapping(base);\n    }\n  }\n\n  protected build(node: HTMLElement) {\n    const content = node.ownerDocument!.createElement('div');\n    content.classList.add(cssClass('dialog-color'));\n    node.appendChild(content);\n    this.render(content, this.column.getColorMapping());\n  }\n\n  private render(node: HTMLElement, value: IColorMappingFunction) {\n    const id = this.id;\n    node.innerHTML = this.createTemplate(id, value);\n\n    const toggles = <HTMLElement[]>Array.from(node.querySelectorAll('strong[data-toggle]'));\n\n    for (const toggle of toggles) {\n      toggle.onclick = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        for (const t2 of toggles) {\n          t2.dataset.toggle = t2.dataset.toggle === 'open' || toggle !== t2 ? '' : 'open';\n        }\n      };\n    }\n\n    const customs: HTMLElement[] = [];\n    const updateColor = (d: HTMLInputElement) => {\n      if (!d.checked) {\n        return;\n      }\n      // disable customs\n      for (const custom of customs) {\n        Array.from(custom.nextElementSibling!.getElementsByTagName('input')).forEach((s) => s.disabled = custom !== d);\n      }\n      if (this.showLivePreviews()) {\n        this.applyColor();\n      }\n    };\n\n    const updateSelectedColor = () => {\n      const selected = this.findInput(`input[name=color]:checked`);\n      if (selected) {\n        updateColor(selected);\n      }\n    };\n\n    this.forEach('input[name=color]', (d: HTMLInputElement) => {\n      if (d.value.startsWith('custom:')) {\n        customs.push(d);\n      }\n      d.onchange = () => updateColor(d);\n    });\n\n    // upon changing custom parameter trigger an update\n    this.forEach(`.${cssClass('color-custom')} input[type=color]`, (d: HTMLInputElement) => {\n      d.onchange = () => {\n        const item = (<HTMLInputElement>d.parentElement!.previousElementSibling!);\n        updateColor(item);\n      };\n    });\n\n    // sync and apply\n    const continuouos = this.findInput(`#${id}KC_S`);\n    const quantized = this.findInput(`#${id}KQ_S`);\n    const steps = this.findInput(`#${id}KQS_S`);\n    const continuouos2 = this.findInput(`#${id}KC_D`);\n    const quantized2 = this.findInput(`#${id}KQ_D`);\n    const steps2 = this.findInput(`#${id}KQS_D`);\n\n    continuouos.onchange = continuouos2.onchange = (evt) => {\n      continuouos.checked = continuouos2.checked = (<HTMLInputElement>evt.currentTarget).checked;\n      steps.disabled = steps2.disabled = !quantized.checked;\n      if (continuouos.checked) {\n        this.updateGradients(-1);\n        updateSelectedColor();\n      }\n    };\n    steps.onchange = steps2.onchange = (evt) => {\n      steps.value = steps2.value = (<HTMLInputElement>evt.currentTarget).value;\n      this.updateGradients(Number.parseInt(steps.value, 10));\n      updateSelectedColor();\n    };\n    quantized.onchange = quantized2.onchange = (evt) => {\n      quantized.checked = quantized2.checked = (<HTMLInputElement>evt.currentTarget).checked;\n      steps.disabled = steps2.disabled = !quantized.checked;\n      if (quantized.checked) {\n        this.updateGradients(Number.parseInt(steps.value, 10));\n        updateSelectedColor();\n      }\n    };\n  }\n\n  protected reset() {\n    const desc = <IMapAbleDesc>this.column.desc;\n    const colorMapping = this.ctx.provider.getTypeFactory().colorMappingFunction(desc.colorMapping || desc.color);\n    this.render(this.node.querySelector<HTMLElement>(`.${cssClass('dialog-color')}`)!, colorMapping);\n  }\n\n  protected submit() {\n    this.applyColor();\n    return true;\n  }\n\n  protected cancel() {\n    this.column.setColorMapping(this.before);\n  }\n\n  private updateGradients(steps: number) {\n    this.forEach(`span[data-c]`, (d: HTMLElement) => {\n      const key = d.dataset.c!;\n      const s = SequentialColorFunction.FUNCTIONS[key];\n      if (s) {\n        d.style.background = steps < 0 ? gradient(s, 9) : steppedGradient(s, steps);\n        return;\n      }\n      const di = DivergentColorFunction.FUNCTIONS[key];\n      if (di) {\n        d.style.background = steps < 0 ? gradient(di, 11) : steppedGradient(di, steps);\n        return;\n      }\n    });\n  }\n}\n\nfunction toColor(input: HTMLInputElement, node: HTMLElement) {\n  switch (input.value) {\n    case 'custom:solid':\n      return new SolidColorFunction((<HTMLInputElement>node.querySelector('input[name=solid]')!).value);\n    case 'custom:sequential':\n      const s0 = (<HTMLInputElement>node.querySelector('input[name=interpolate0]')!).value;\n      const s1 = (<HTMLInputElement>node.querySelector('input[name=interpolate1]')!).value;\n      return new CustomColorMappingFunction([{color: s0, value: 0}, {color: s1, value: 1}]);\n    case 'custom:diverging':\n      const dm1 = (<HTMLInputElement>node.querySelector('input[name=divergentm1]')!).value;\n      const d0 = (<HTMLInputElement>node.querySelector('input[name=divergent0]')!).value;\n      const d1 = (<HTMLInputElement>node.querySelector('input[name=divergent1]')!).value;\n      return new CustomColorMappingFunction([{color: dm1, value: 0}, {color: d0, value: 0.5}, {color: d1, value: 1}]);\n  }\n  if (input.value in SequentialColorFunction.FUNCTIONS) {\n    return new SequentialColorFunction(input.value);\n  }\n  if (input.value in DivergentColorFunction.FUNCTIONS) {\n    return new DivergentColorFunction(input.value);\n  }\n  return new SolidColorFunction(input.value);\n}\n\nfunction gradient(interpolate: (v: number)=>string, steps = 2) {\n  if (steps <= 1) {\n    return `${interpolate(0)}`;\n  }\n  const stepSize = 1 / (steps - 1);\n  let r = `linear-gradient(to right`;\n  for (let i = 0; i < steps; ++i) {\n    r += `, ${interpolate(i * stepSize)} ${round((i * stepSize) * 100, 2)}%`;\n  }\n  r += ')';\n  return r;\n}\n\nfunction steppedGradient(color: (v: number)=>string, count = 2) {\n  if (count === 1) {\n    return `${color(0)}`;\n  }\n  let r = `linear-gradient(to right`;\n  const stepSize = 1 / count;\n  const half = stepSize / 2;\n  for (let i = 0; i < count; ++i) {\n    // stepped\n    // first and last at border else center\n    const shift = i === 0 ? 0 : (i === (count - 1) ? stepSize : half);\n    const c = color(i * stepSize + shift);\n    r += `, ${c} ${round((i * stepSize) * 100, 2)}%, ${c} ${round(((i + 1) * stepSize) * 100, 2)}%`;\n  }\n  r += ')';\n  return r;\n}\n","import {cssClass} from '../styles';\n\n/** @internal */\nexport function hasDnDType(e: DragEvent, ...typesToCheck: string[]) {\n  const available: any = e.dataTransfer!.types;\n\n  /*\n   * In Chrome datatransfer.types is an Array,\n   * while in Firefox it is a DOMStringList\n   * that only implements a contains-method!\n   */\n  if (typeof available.indexOf === 'function') {\n    return typesToCheck.some((type) => available.indexOf(type) >= 0);\n  }\n  if (typeof available.includes === 'function') {\n    return typesToCheck.some((type) => available.includes(type));\n  }\n  if (typeof available.contains === 'function') {\n    return typesToCheck.some((type) => available.contains(type));\n  }\n  return false;\n}\n\n\n/**\n * helper storage for dnd in edge since edge doesn't support custom mime-types\n * @type {Map<number, {[p: string]: string}>}\n */\nconst dndTransferStorage = new Map<number, {[key: string]: string}>();\n\nfunction isEdgeDnD(e: DragEvent) {\n  return dndTransferStorage.size > 0 && hasDnDType(e, 'text/plain');\n}\n\n/**\n * checks whether it is a copy operation\n * @param e\n * @returns {boolean|RegExpMatchArray}\n * @internal\n */\nexport function copyDnD(e: DragEvent) {\n  const dT = e.dataTransfer!;\n  return Boolean((e.ctrlKey && dT.effectAllowed.match(/copy/gi)) || (!dT.effectAllowed.match(/move/gi)));\n}\n\n/**\n * updates the drop effect accoriding to the current copyDnD state\n * @param e\n * @internal\n */\nexport function updateDropEffect(e: DragEvent) {\n  const dT = e.dataTransfer!;\n  if (copyDnD(e)) {\n    dT.dropEffect = 'copy';\n  } else {\n    dT.dropEffect = 'move';\n  }\n}\n\n/** @internal */\nexport type IDragEffect = 'none' | 'copy' | 'copyLink' | 'copyMove' | 'link' | 'linkMove' | 'move' | 'all';\n\n/** @internal */\nexport interface IDragStartResult {\n  effectAllowed: IDragEffect;\n  data: {[mimeType: string]: string};\n}\n\n/** @internal */\nexport interface IDropResult {\n  effect: IDragEffect;\n  data: {[mimeType: string]: string};\n}\n\nlet idCounter = 0;\n\n/**\n * add drag support for the given element\n * @param {HTMLElement} node\n * @param {() => IDragStartResult} onDragStart callback to compute the payload an object of mime types\n * @param {boolean} stopPropagation whether to stop propagation in case of success\n * @internal\n */\nexport function dragAble(node: HTMLElement, onDragStart: () => IDragStartResult, stopPropagation: boolean = false) {\n  const id = ++idCounter;\n\n  node.classList.add(cssClass('dragable'));\n  node.draggable = true;\n\n  node.addEventListener('dragstart', (e) => {\n    node.classList.add(cssClass('dragging'));\n    const payload = onDragStart();\n    e.dataTransfer!.effectAllowed = payload.effectAllowed;\n\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n\n    // copy all data transfer objects\n    const keys = Object.keys(payload.data);\n    const allSucceded = keys.every((k) => {\n      try {\n        e.dataTransfer!.setData(k, payload.data[k]);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    });\n    if (allSucceded) {\n      return;\n    }\n    //compatibility mode for edge\n    const text = payload.data['text/plain'] || '';\n    e.dataTransfer!.setData('text/plain', `${id}${text ? `: ${text}` : ''}`);\n    dndTransferStorage.set(id, payload.data);\n  });\n\n  node.addEventListener('dragend', (e) => {\n    node.classList.remove(cssClass('dragging'));\n\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n\n    if (dndTransferStorage.size > 0) {\n      //clear the id\n      dndTransferStorage.delete(id);\n    }\n\n    // remove all\n    const over = <HTMLElement>node.ownerDocument!.getElementsByClassName(cssClass('dragover'))[0];\n    if (over) {\n      over.classList.remove(cssClass('dragover'));\n    }\n  });\n}\n\n/**\n * add dropable support for the given node\n * @param {HTMLElement} node\n * @param {string[]} mimeTypes mimeTypes to look for\n * @param {(result: IDropResult, e: DragEvent) => boolean} onDrop callback when dropped, returns true if the drop was successful\n * @param {(e: DragEvent) => void} onDragOver optional drag over handler, e.g. for special effects\n * @param {boolean} stopPropagation flag if the event propagation should be stopped in case of success\n * @param {() => boolean} optional whether to enable dropping at all\n * @internal\n */\nexport function dropAble(node: HTMLElement, mimeTypes: string[], onDrop: (result: IDropResult, e: DragEvent) => boolean, onDragOver: null | ((e: DragEvent) => void) = null, stopPropagation: boolean = false, canDrop: () => boolean = (() => true)) {\n  node.addEventListener('dragenter', (e) => {\n    //var xy = mouse($node.node());\n    if (node.classList.contains(cssClass('dragging')) || !(hasDnDType(e, ...mimeTypes) || isEdgeDnD(e)) || !canDrop()) {\n      // not a valid mime type\n      node.classList.remove(cssClass('dragover'));\n      return;\n    }\n    node.classList.add(cssClass('dragover'));\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n    //sounds good\n    return false;\n  });\n\n  node.addEventListener('dragover', (e) => {\n    if (node.classList.contains(cssClass('dragging')) || !(hasDnDType(e, ...mimeTypes) || isEdgeDnD(e)) || !canDrop()) {\n      // not a valid mime type\n      return;\n    }\n\n    e.preventDefault();\n    updateDropEffect(e);\n    node.classList.add(cssClass('dragover'));\n\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n    if (onDragOver) {\n      onDragOver(e);\n    }\n    //sound good\n    return false;\n  });\n\n  node.addEventListener('dragleave', (evt) => {\n    // same fix as in phovea\n    (<HTMLElement>evt.target).classList.remove(cssClass('dragover'));\n  });\n\n  node.addEventListener('drop', (e) => {\n    e.preventDefault();\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n    updateDropEffect(e);\n\n    const effect = <IDragEffect>e.dataTransfer!.dropEffect;\n\n    node.classList.remove(cssClass('dragover'));\n\n    if (isEdgeDnD(e)) {\n      // retrieve from helper\n      const base = e.dataTransfer!.getData('text/plain');\n      const id = parseInt(base.indexOf(':') >= 0 ? base.substring(0, base.indexOf(':')) : base, 10);\n      if (dndTransferStorage.has(id)) {\n        const data = dndTransferStorage.get(id)!;\n        dndTransferStorage.delete(id);\n        return !onDrop({effect, data}, e);\n      }\n      return;\n    }\n\n    if (!hasDnDType(e, ...mimeTypes)) {\n      return;\n    }\n\n    // copy sub mime types\n    const data: any = {};\n    //selects the data contained in the data transfer\n    mimeTypes.forEach((mime) => {\n      const value = e.dataTransfer!.getData(mime);\n      if (value !== '') {\n        data[mime] = value;\n      }\n    });\n    return !onDrop({effect, data}, e);\n  });\n}\n","import {Column} from '../../model';\nimport {createToolbarMenuItems, updateIconState} from '../header';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\nimport APopup from './APopup';\n\n/** @internal */\nexport default class MoreColumnOptionsDialog extends APopup {\n\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly mode: 'header' | 'sidePanel', private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      autoClose: true\n    });\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('more-options'));\n    node.dataset.colId = this.column.id;\n    createToolbarMenuItems(node, this.dialog.level + 1, this.column, this.ctx, this.mode);\n\n    updateIconState(node, this.column);\n  }\n}\n","import {MIN_LABEL_WIDTH} from '../constants';\nimport {equalArrays, dragAble, dropAble, hasDnDType, IDropResult} from '../internal';\nimport {categoryOf, getSortType} from '../model';\nimport {createNestedDesc, createReduceDesc, createStackDesc, IColumnDesc, isArrayColumn, isBoxPlotColumn, isCategoricalColumn, isMapColumn, isNumberColumn, isNumbersColumn, Column, ImpositionCompositeColumn, ImpositionCompositesColumn, createImpositionDesc, createImpositionsDesc, ImpositionBoxPlotColumn, createImpositionBoxPlotDesc, CompositeColumn, IMultiLevelColumn, isMultiLevelColumn} from '../model';\nimport {aria, cssClass, engineCssClass, RESIZE_ANIMATION_DURATION, RESIZE_SPACE} from '../styles';\nimport MoreColumnOptionsDialog from './dialogs/MoreColumnOptionsDialog';\nimport {IRankingHeaderContext, IToolbarAction, IOnClickHandler} from './interfaces';\nimport {getToolbar} from './toolbar';\nimport {dialogContext} from './dialogs';\n\n/** @internal */\nexport interface IHeaderOptions {\n  dragAble: boolean;\n  mergeDropAble: boolean;\n  rearrangeAble: boolean;\n  resizeable: boolean;\n  level: number;\n  extraPrefix: string;\n}\n\n/** @internal */\nexport function createHeader(col: Column, ctx: IRankingHeaderContext, options: Partial<IHeaderOptions> = {}) {\n  options = Object.assign({\n    dragAble: true,\n    mergeDropAble: true,\n    rearrangeAble: true,\n    resizeable: true,\n    level: 0,\n    extraPrefix: ''\n  }, options);\n  const node = ctx.document.createElement('section');\n\n  const extra = options.extraPrefix ? (name: string) => `${cssClass(name)} ${cssClass(`${options.extraPrefix}-${name}`)}` : cssClass;\n  const summary = col.getMetaData().summary;\n  node.innerHTML = `\n    <div class=\"${extra('label')} ${cssClass('typed-icon')}\">${col.getWidth() < MIN_LABEL_WIDTH ? '&nbsp;' : col.label}</div>\n    <div class=\"${extra('sublabel')}\">${col.getWidth() < MIN_LABEL_WIDTH || !summary ? '&nbsp;' : summary}</div>\n    <div class=\"${extra('toolbar')}\"></div>\n    <div class=\"${extra('spacing')}\"></div>\n    <div class=\"${extra('handle')} ${cssClass('feature-advanced')} ${cssClass('feature-ui')}\"></div>\n  `;\n\n  // addTooltip(node, col);\n\n  createShortcutMenuItems(<HTMLElement>node.getElementsByClassName(cssClass('toolbar'))[0]!, options.level!, col, ctx, 'header');\n\n  toggleToolbarIcons(node, col);\n\n  if (options.dragAble) {\n    dragAbleColumn(node, col, ctx);\n  }\n  if (options.mergeDropAble) {\n    mergeDropAble(node, col, ctx);\n  }\n  if (options.rearrangeAble) {\n    rearrangeDropAble(<HTMLElement>node.getElementsByClassName(cssClass('handle'))[0]!, col, ctx);\n  }\n  if (options.resizeable) {\n    dragWidth(col, node);\n  }\n  return node;\n}\n\n\n/** @internal */\nexport function updateHeader(node: HTMLElement, col: Column, minWidth = MIN_LABEL_WIDTH) {\n  const label = <HTMLElement>node.getElementsByClassName(cssClass('label'))[0]!;\n  label.innerHTML = col.getWidth() < minWidth ? '&nbsp;' : col.label;\n  const summary = col.getMetaData().summary;\n  const sublabel = <HTMLElement>node.getElementsByClassName(cssClass('sublabel'))[0];\n  if (sublabel) {\n    sublabel.innerHTML = col.getWidth() < minWidth || !summary ? '&nbsp;' : summary;\n  }\n\n  let title = col.label;\n  if (summary) {\n    title = `${title}\\n${summary}`;\n  }\n  if (col.description) {\n    title = `${title}\\n${col.description}`;\n  }\n  node.title = title;\n  node.dataset.colId = col.id;\n  node.dataset.type = col.desc.type;\n  label.dataset.typeCat = categoryOf(col).name;\n\n  updateIconState(node, col);\n\n  updateMoreDialogIcons(node, col);\n}\n\nfunction updateMoreDialogIcons(node: HTMLElement, col: Column) {\n  const root = node.closest(`.${cssClass()}`);\n  if (!root) {\n    return;\n  }\n  const dialog = root.querySelector<HTMLElement>(`.${cssClass('more-options')}[data-col-id=\"${col.id}\"]`);\n  if (!dialog) {\n    return;\n  }\n  updateIconState(dialog, col);\n}\n\n\n/** @internal */\nexport function updateIconState(node: HTMLElement, col: Column) {\n  const sort = <HTMLElement>node.getElementsByClassName(cssClass('action-sort'))[0]!;\n  if (sort) {\n    const {asc, priority} = col.isSortedByMe();\n    sort.dataset.sort = asc !== undefined ? asc : '';\n    sort.dataset.type = getSortType(col);\n    if (priority !== undefined) {\n      sort.dataset.priority = (priority + 1).toString();\n    } else {\n      delete sort.dataset.priority;\n    }\n  }\n\n  const sortGroups = <HTMLElement>node.getElementsByClassName(cssClass('action-sort-groups'))[0]!;\n  if (sortGroups) {\n    const {asc, priority} = col.isGroupSortedByMe();\n    sortGroups.dataset.sort = asc !== undefined ? asc : '';\n    sortGroups.dataset.type = getSortType(col);\n    if (priority !== undefined) {\n      sortGroups.dataset.priority = (priority + 1).toString();\n    } else {\n      delete sortGroups.dataset.priority;\n    }\n  }\n\n  const group = <HTMLElement>node.getElementsByClassName(cssClass('action-group'))[0]!;\n  if (group) {\n    const groupedBy = col.isGroupedBy();\n    group.dataset.group = groupedBy >= 0 ? 'true' : 'false';\n    if (groupedBy >= 0) {\n      group.dataset.priority = (groupedBy + 1).toString();\n    } else {\n      delete group.dataset.priority;\n    }\n  }\n\n  const filter = <HTMLElement>node.getElementsByClassName(cssClass('action-filter'))[0]!;\n  if (!filter) {\n    return;\n  }\n  if (col.isFiltered()) {\n    filter.dataset.active = '';\n  } else {\n    delete filter.dataset.active;\n  }\n}\n\n/** @internal */\nexport function actionCSSClass(title: string) {\n  if (title.endsWith('&hellip;')) {\n    title = title.slice(0, -'&hellip;'.length - 1);\n  }\n  if (title.endsWith('By')) {\n    title = title.slice(0, -3);\n  }\n  const clean = title.toLowerCase().replace(/[ +-]/mg, '-');\n  return `${cssClass('action')} ${cssClass(`action-${clean}`)}`;\n}\n\nfunction addIconDOM(node: HTMLElement, col: Column, ctx: IRankingHeaderContext, level: number, showLabel: boolean, mode: 'header' | 'sidePanel') {\n  return (action: IToolbarAction) => {\n    const m = isActionMode(col, action, mode, 'shortcut') ? 'o' : isActionMode(col, action, mode, 'menu+shortcut') ? 's' : 'r';\n    node.insertAdjacentHTML('beforeend', `<i data-a=\"${m}\" title=\"${action.title}\" class=\"${actionCSSClass(action.title.toString())} ${cssClass(`feature-${action.options.featureLevel || 'basic'}`)} ${cssClass(`feature-${action.options.featureCategory || 'others'}`)}\"><span${!showLabel ? ` class=\"${cssClass('aria')}\" aria-hidden=\"true\"` : ''}>${action.title}</span> </i>`);\n    const i = <HTMLElement>node.lastElementChild;\n    i.onclick = (evt) => {\n      evt.stopPropagation();\n      ctx.dialogManager.setHighlightColumn(col);\n      action.onClick(col, <any>evt, ctx, level, !showLabel);\n    };\n    return i;\n  };\n}\n\n/** @internal */\nexport interface IAddIcon {\n  (title: string, onClick: IOnClickHandler): void;\n}\n\nfunction isActionMode(col: Column, d: IToolbarAction, mode: 'header' | 'sidePanel', value: 'menu' | 'menu+shortcut' | 'shortcut') {\n  const s = d.options.mode === undefined ? 'menu' : d.options.mode;\n  if (s === value) {\n    return true;\n  }\n  if (typeof s === 'function') {\n    return s(col, mode) === value;\n  }\n  return false;\n}\n\n/** @internal */\nexport function createShortcutMenuItems(node: HTMLElement, level: number, col: Column, ctx: IRankingHeaderContext, mode: 'header' | 'sidePanel', willAutoHide: boolean = true) {\n  const addIcon = addIconDOM(node, col, ctx, level, false, mode);\n  const toolbar = getToolbar(col, ctx);\n  const shortcuts = toolbar.filter((d) => !isActionMode(col, d, mode, 'menu'));\n  const hybrids = shortcuts.reduce((a, b) => a + (isActionMode(col, b, mode, 'menu+shortcut') ? 1 : 0), 0);\n\n  shortcuts.forEach(addIcon);\n  const moreEntries = toolbar.length - shortcuts.length + hybrids;\n\n  if (shortcuts.length === toolbar.length || (moreEntries === hybrids && !willAutoHide)) {\n    // all visible or just hybrids that will always be visible\n    return;\n  }\n\n  // need a more entry\n  node.insertAdjacentHTML('beforeend', `<i data-a=\"m\" data-m=\"${moreEntries}\" title=\"More &hellip;\" class=\"${actionCSSClass('More')}\">${aria('More &hellip;')}</i>`);\n  const i = <HTMLElement>node.lastElementChild;\n  i.onclick = (evt) => {\n    evt.stopPropagation();\n    ctx.dialogManager.setHighlightColumn(col);\n    const dialog = new MoreColumnOptionsDialog(col, dialogContext(ctx, level, <any>evt), mode, ctx);\n    dialog.open();\n  };\n}\n\n/** @internal */\nexport function createToolbarMenuItems(node: HTMLElement, level: number, col: Column, ctx: IRankingHeaderContext, mode: 'header' | 'sidePanel') {\n  const addIcon = addIconDOM(node, col, ctx, level, true, mode);\n  getToolbar(col, ctx).filter((d) => !isActionMode(col, d, mode, 'shortcut')).forEach(addIcon);\n}\n\n/** @internal */\nfunction toggleRotatedHeader(node: HTMLElement, col: Column, defaultVisibleClientWidth: number) {\n  // rotate header flag if needed\n  const label = <HTMLElement>node.getElementsByClassName(cssClass('label'))[0];\n  if (col.getWidth() < MIN_LABEL_WIDTH) {\n    label.classList.remove(`.${cssClass('rotated')}`);\n    return;\n  }\n  const width = label.clientWidth;\n  const rotated = width <= 0 ? (col.label.length * defaultVisibleClientWidth / 3 * 0.6 > col.getWidth()) : (label.scrollWidth * 0.6 > label.clientWidth);\n  label.classList.toggle(`.${cssClass('rotated')}`, rotated);\n}\n\n/** @internal */\nfunction toggleToolbarIcons(node: HTMLElement, col: Column, defaultVisibleClientWidth = 22.5) {\n  toggleRotatedHeader(node, col, defaultVisibleClientWidth);\n\n  const toolbar = <HTMLElement>node.getElementsByClassName(cssClass('toolbar'))[0];\n  if (toolbar.childElementCount === 0) {\n    return;\n  }\n  const availableWidth = col.getWidth();\n  const actions = Array.from(toolbar.children).map((d) => ({node: <HTMLElement>d, width: d.clientWidth > 0 ? d.clientWidth : defaultVisibleClientWidth}));\n\n  const shortCuts = actions.filter((d) => d.node.dataset.a === 'o');\n  const hybrids = actions.filter((d) => d.node.dataset.a === 's');\n  const moreIcon = actions.find((d) => d.node.dataset.a === 'm');\n  const moreEntries = moreIcon ? parseInt(moreIcon.node.dataset.m!, 10) : 0;\n  const needMore = moreEntries > hybrids.length;\n\n  let total = actions.reduce((a, b) => a + b.width, 0);\n\n  for (const action of actions) {\n    // maybe hide not needed \"more\"\n    action.node.classList.remove(cssClass('hidden'));\n  }\n\n  // all visible\n  if (total < availableWidth) {\n    return;\n  }\n  if (moreIcon && !needMore && (total - moreIcon.width) < availableWidth) {\n    // available space is enougth we can skip the \"more\" and then it fits\n    moreIcon.node.classList.add(cssClass('hidden'));\n    return;\n  }\n\n  for (const action of hybrids.reverse().concat(shortCuts.reverse())) { // back to forth and hybrids earlier than pure shortcuts\n    // hide and check if enough\n    action.node.classList.add(cssClass('hidden'));\n    total -= action.width;\n    if (total < availableWidth) {\n      return;\n    }\n  }\n}\n\n\n/**\n * allow to change the width of a column using dragging the handle\n * @internal\n */\nexport function dragWidth(col: Column, node: HTMLElement) {\n  let ueberElement: HTMLElement;\n  let sizeHelper: HTMLElement;\n  let currentFooterTransformation = '';\n  const handle = <HTMLElement>node.getElementsByClassName(cssClass('handle'))[0];\n\n\n  let start = 0;\n  let originalWidth = 0;\n  const mouseMove = (evt: MouseEvent) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    const end = evt.clientX;\n    const delta = end - start;\n\n    if (Math.abs(start - end) < 2) {\n      //ignore\n      return;\n    }\n    start = end;\n    const width = Math.max(0, col.getWidth() + delta);\n\n    sizeHelper.classList.toggle(cssClass('resize-animated'), width < originalWidth);\n    // no idea why shifted by the size compared to the other footer element\n    sizeHelper.style.transform = `${currentFooterTransformation} translate(${width - originalWidth - RESIZE_SPACE}px, 0px)`;\n\n    node.style.width = `${width}px`;\n    col.setWidth(width);\n    toggleToolbarIcons(node, col);\n  };\n\n  const mouseUp = (evt: MouseEvent) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    const end = evt.clientX;\n    node.classList.remove(cssClass('change-width'));\n\n    ueberElement.removeEventListener('mousemove', mouseMove);\n    ueberElement.removeEventListener('mouseup', mouseUp);\n    ueberElement.removeEventListener('mouseleave', mouseUp);\n    ueberElement.classList.remove(cssClass('resizing'));\n    node.style.width = null;\n    setTimeout(() => {\n      sizeHelper.classList.remove(cssClass('resizing'), cssClass('resize-animated'));\n    }, RESIZE_ANIMATION_DURATION * 1.2); // after animation ended\n\n    if (Math.abs(start - end) < 2) {\n      //ignore\n      return;\n    }\n    const delta = end - start;\n    const width = Math.max(0, col.getWidth() + delta);\n    col.setWidth(width);\n    toggleToolbarIcons(node, col);\n  };\n  handle.onmousedown = (evt) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    node.classList.add(cssClass('change-width'));\n\n    originalWidth = col.getWidth();\n    start = evt.clientX;\n    ueberElement = <HTMLElement>node.closest('body') || <HTMLElement>node.closest(`.${cssClass()}`)!; // take the whole body or root lineup\n    ueberElement.addEventListener('mousemove', mouseMove);\n    ueberElement.addEventListener('mouseup', mouseUp);\n    ueberElement.addEventListener('mouseleave', mouseUp);\n    ueberElement.classList.add(cssClass('resizing'));\n\n    sizeHelper = <HTMLElement>node.closest(`.${engineCssClass()}`)!.querySelector<HTMLElement>(`.${cssClass('resize-helper')}`);\n    currentFooterTransformation = (<HTMLElement>sizeHelper.previousElementSibling!).style.transform!;\n    sizeHelper.style.transform = `${currentFooterTransformation} translate(${-RESIZE_SPACE}px, 0px)`;\n    sizeHelper.classList.add(cssClass('resizing'));\n  };\n  handle.onclick = (evt) => {\n    // avoid resorting\n    evt.stopPropagation();\n    evt.preventDefault();\n  };\n}\n\n/** @internal */\nexport const MIMETYPE_PREFIX = 'text/x-caleydo-lineup-column';\n\n/**\n * allow to drag the column away\n * @internal\n */\nexport function dragAbleColumn(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\n  dragAble(node, () => {\n    const ref = JSON.stringify(ctx.provider.toDescRef(column.desc));\n    const data: any = {\n      'text/plain': column.label,\n      [`${MIMETYPE_PREFIX}-ref`]: column.id,\n      [MIMETYPE_PREFIX]: ref\n    };\n    if (isNumberColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-number`] = ref;\n      data[`${MIMETYPE_PREFIX}-number-ref`] = column.id;\n    }\n    if (isCategoricalColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-categorical`] = ref;\n      data[`${MIMETYPE_PREFIX}-categorical-ref`] = column.id;\n    }\n    if (isBoxPlotColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-boxplot`] = ref;\n      data[`${MIMETYPE_PREFIX}-boxplot-ref`] = column.id;\n    }\n    if (isMapColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-map`] = ref;\n      data[`${MIMETYPE_PREFIX}-map-ref`] = column.id;\n    }\n    if (isArrayColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-array`] = ref;\n      data[`${MIMETYPE_PREFIX}-array-ref`] = column.id;\n    }\n    if (isNumbersColumn(column)) {\n      data[`${MIMETYPE_PREFIX}-numbers`] = ref;\n      data[`${MIMETYPE_PREFIX}-numbers-ref`] = column.id;\n    }\n    return {\n      effectAllowed: 'copyMove',\n      data\n    };\n  }, true);\n}\n\n/**\n * dropper for allowing to rearrange (move, copy) columns\n * @internal\n */\nexport function rearrangeDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\n  dropAble(node, [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX], (result) => {\n    let col: Column | null = null;\n    const data = result.data;\n    if (!(`${MIMETYPE_PREFIX}-ref` in data)) {\n      const desc = JSON.parse(data[MIMETYPE_PREFIX]);\n      col = ctx.provider.create(ctx.provider.fromDescRef(desc));\n      return col != null && column.insertAfterMe(col) != null;\n    }\n\n    // find by reference\n    const id = data[`${MIMETYPE_PREFIX}-ref`];\n    col = ctx.provider.find(id);\n    if (!col || (col === column && !result.effect.startsWith('copy'))) {\n      return false;\n    }\n    if (result.effect.startsWith('copy')) {\n      col = ctx.provider.clone(col!);\n      return col != null && column.insertAfterMe(col) != null;\n    }\n    // detect whether it is an internal move operation or an real remove/insert operation\n    const toInsertParent = col.parent;\n    if (!toInsertParent) { // no parent will always be a move\n      return column.insertAfterMe(col) != null;\n    }\n    if (toInsertParent === column.parent) {\n      // move operation\n      return toInsertParent.moveAfter(col, column) != null;\n    }\n    col.removeMe();\n    return column.insertAfterMe(col) != null;\n  }, null, true);\n}\n\n/**\n * dropper for allowing to change the order by dropping it at a certain position\n * @internal\n */\nexport function resortDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext, where: 'before' | 'after', autoGroup: boolean) {\n  dropAble(node, [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX], (result) => {\n    let col: Column | null = null;\n    const data = result.data;\n    if (`${MIMETYPE_PREFIX}-ref` in data) {\n      const id = data[`${MIMETYPE_PREFIX}-ref`];\n      col = ctx.provider.find(id);\n      if (!col || col === column) {\n        return false;\n      }\n    } else {\n      const desc = JSON.parse(data[MIMETYPE_PREFIX]);\n      col = ctx.provider.create(ctx.provider.fromDescRef(desc));\n      if (col) {\n        column.findMyRanker()!.push(col);\n      }\n    }\n    const ranking = column.findMyRanker()!;\n    if (!col || col === column || !ranking) {\n      return false;\n    }\n\n    const criteria = ranking.getSortCriteria();\n    const groups = ranking.getGroupCriteria();\n\n    const removeFromSort = (col: Column) => {\n      const existing = criteria.findIndex((d) => d.col === col);\n      if (existing >= 0) { // remove existing column but keep asc state\n        return criteria.splice(existing, 1)[0].asc;\n      }\n      return false;\n    };\n\n    // remove the one to add\n    const asc = removeFromSort(col);\n\n    const groupIndex = groups.indexOf(column);\n    const index = criteria.findIndex((d) => d.col === column);\n\n    if (autoGroup && groupIndex >= 0) {\n      // before the grouping, so either ungroup or regroup\n      removeFromSort(column);\n      if (isCategoricalColumn(col)) { // we can group by it\n        groups.splice(groupIndex + (where === 'after' ? 1 : 0), 0, col);\n      } else {\n        // remove all before and shift to sorting + sorting\n        const removed = groups.splice(0, groups.length - groupIndex);\n        criteria.unshift(...removed.reverse().map((d) => ({asc: false, col: d}))); // now a first sorting criteria\n        criteria.unshift({asc, col});\n      }\n    } else if (index < 0) {\n      criteria.push({asc, col});\n    } else if (index === 0 && autoGroup && isCategoricalColumn(col)) {\n      // make group criteria\n      groups.push(col);\n    } else {\n      criteria.splice(index + (where === 'after' ? 1 : 0), 0, {asc, col});\n    }\n\n    if (!equalArrays(groups, ranking.getGroupCriteria())) {\n      ranking.setGroupCriteria(groups);\n    }\n    ranking.setSortCriteria(criteria);\n    return true;\n  }, null, true);\n}\n\n/**\n * dropper for merging columns\n * @internal\n */\nexport function mergeDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\n  const resolveDrop = (result: IDropResult) => {\n    const data = result.data;\n    const copy = result.effect === 'copy';\n    const prefix = MIMETYPE_PREFIX;\n    const key = Object.keys(data).find((d) => d.startsWith(prefix) && d.endsWith('-ref'));\n    if (key) {\n      const id = data[key];\n      let col: Column = ctx.provider.find(id)!;\n      if (copy) {\n        col = ctx.provider.clone(col);\n      } else if (col === column) {\n        return null;\n      } else {\n        col.removeMe();\n      }\n      return col;\n    }\n    const alternative = Object.keys(data).find((d) => d.startsWith(prefix));\n    if (!alternative) {\n      return null;\n    }\n    const desc = JSON.parse(alternative);\n    return ctx.provider.create(ctx.provider.fromDescRef(desc))!;\n  };\n\n  const pushChild = (result: IDropResult) => {\n    const col: Column | null = resolveDrop(result);\n    return col != null && (<CompositeColumn>column).push(col) != null;\n  };\n\n  const mergeImpl = (col: Column | null, desc: IColumnDesc) => {\n    if (col == null) {\n      return false;\n    }\n    const ranking = column.findMyRanker()!;\n    const index = ranking.indexOf(column);\n    const parent = <CompositeColumn>ctx.provider.create(desc);\n    column.removeMe();\n    parent.push(column);\n    parent.push(col);\n    return ranking.insert(parent, index) != null;\n  };\n\n  const mergeWith = (desc: IColumnDesc) => (result: IDropResult) => {\n    const col: Column | null = resolveDrop(result);\n    return mergeImpl(col, desc);\n  };\n\n  const all = [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX];\n  const numberish = [`${MIMETYPE_PREFIX}-number-ref`, `${MIMETYPE_PREFIX}-number`];\n  const categorical = [`${MIMETYPE_PREFIX}-categorical-ref`, `${MIMETYPE_PREFIX}-categorical`];\n  const boxplot = [`${MIMETYPE_PREFIX}-boxplot-ref`, `${MIMETYPE_PREFIX}-boxplot`];\n  const numbers = [`${MIMETYPE_PREFIX}-numbers-ref`, `${MIMETYPE_PREFIX}-numbers`];\n\n  node.dataset.draginfo = '+';\n  if (column instanceof ImpositionCompositeColumn) {\n    return dropAble(node, categorical.concat(numberish), pushChild, (e) => {\n      if (hasDnDType(e, ...categorical)) {\n        node.dataset.draginfo = 'Color by';\n        return;\n      }\n      if (hasDnDType(e, ...numberish)) {\n        node.dataset.draginfo = 'Wrap';\n      }\n    }, false, () => column.children.length < 2);\n  }\n  if (column instanceof ImpositionBoxPlotColumn) {\n    return dropAble(node, categorical.concat(boxplot), pushChild, (e) => {\n      if (hasDnDType(e, ...categorical)) {\n        node.dataset.draginfo = 'Color by';\n        return;\n      }\n      if (hasDnDType(e, ...boxplot)) {\n        node.dataset.draginfo = 'Wrap';\n      }\n    }, false, () => column.children.length < 2);\n  }\n  if (column instanceof ImpositionCompositesColumn) {\n    return dropAble(node, categorical.concat(numbers), pushChild, (e) => {\n      if (hasDnDType(e, ...categorical)) {\n        node.dataset.draginfo = 'Color by';\n        return;\n      }\n      if (hasDnDType(e, ...numbers)) {\n        node.dataset.draginfo = 'Wrap';\n      }\n    }, false, () => column.children.length < 2);\n  }\n  if (isMultiLevelColumn(column)) {\n    // stack column or nested\n    return dropAble(node, (<IMultiLevelColumn>column).canJustAddNumbers ? numberish : all, pushChild);\n  }\n  if (column instanceof CompositeColumn) {\n    return dropAble(node, (<CompositeColumn>column).canJustAddNumbers ? numberish : all, pushChild);\n  }\n  if (isNumbersColumn(column)) {\n    node.dataset.draginfo = 'Color by';\n    return dropAble(node, categorical, mergeWith(createImpositionsDesc()));\n  }\n  if (isBoxPlotColumn(column)) {\n    node.dataset.draginfo = 'Color by';\n    return dropAble(node, categorical, mergeWith(createImpositionBoxPlotDesc()));\n  }\n  if (isNumberColumn(column)) {\n    node.dataset.draginfo = 'Merge';\n    return dropAble(node, categorical.concat(numberish), (result: IDropResult, evt: DragEvent) => {\n      const col: Column | null = resolveDrop(result);\n      if (col == null) {\n        return false;\n      }\n      if (isCategoricalColumn(col)) {\n        return mergeImpl(col, createImpositionDesc());\n      }\n      if (isNumberColumn(col)) {\n        return mergeImpl(col, evt.shiftKey ? createReduceDesc() : createStackDesc());\n      }\n      return false;\n    }, (e) => {\n      if (hasDnDType(e, ...categorical)) {\n        node.dataset.draginfo = 'Color by';\n        return;\n      }\n      if (hasDnDType(e, ...numberish)) {\n        node.dataset.draginfo = e.shiftKey ? 'Min/Max' : 'Sum';\n      }\n    });\n  }\n  node.dataset.draginfo = 'Group';\n  return dropAble(node, all, mergeWith(createNestedDesc()));\n}\n","import {debounce, clear, suffix} from '../../internal';\nimport {CompositeColumn} from '../../model';\nimport {createHeader, updateHeader} from '../header';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {IDialogContext} from './ADialog';\nimport {cssClass, engineCssClass} from '../../styles';\nimport APopup from './APopup';\n\n/** @internal */\nexport default class CompositeChildrenDialog extends APopup {\n\n  private readonly id: string;\n\n  constructor(private readonly column: CompositeColumn, dialog: IDialogContext, private ctx: IRankingHeaderContext) {\n    super(dialog);\n    this.id = `.dialog${Math.random().toString(36).slice(-8).substr(0, 3)}`;\n  }\n\n  cleanUp(action: 'cancel' | 'confirm' | 'handled') {\n    super.cleanUp(action);\n    this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), null);\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-sub-nested'));\n    const createChildren = () => {\n      this.column.children.forEach((c) => {\n        const n = createHeader(c, this.ctx, {\n          mergeDropAble: false,\n          resizeable: false,\n          level: this.dialog.level + 1,\n          extraPrefix: 'sub'\n        });\n        n.className = cssClass('header');\n        updateHeader(n, c);\n        const summary = this.ctx.summaryRenderer(c, false);\n        const summaryNode = this.ctx.asElement(summary.template);\n        summaryNode.dataset.renderer = c.getSummaryRenderer();\n        summaryNode.classList.add(cssClass('summary'), cssClass('renderer'), cssClass('th-summary'));\n\n        const r = summary.update(summaryNode);\n        if (r) {\n          summaryNode.classList.add(engineCssClass('loading'));\n          r.then(() => {\n            summaryNode.classList.remove(engineCssClass('loading'));\n          });\n        }\n        n.appendChild(summaryNode);\n        node.appendChild(n);\n      });\n    };\n    createChildren();\n\n    this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), debounce(() => {\n      if (!node.parentElement) {\n        // already closed\n        this.destroy();\n        return;\n      }\n      clear(node);\n      createChildren();\n    }));\n  }\n}\n","import {HierarchyColumn, ICategoryInternalNode, ICutOffNode, resolveInnerNodes} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\n\n/** @internal */\nexport default class CutOffHierarchyDialog extends ADialog {\n\n  private readonly innerNodes: ICategoryInternalNode[];\n  private readonly innerNodePaths: string[];\n\n  private readonly before: ICutOffNode;\n\n\n  constructor(private readonly column: HierarchyColumn, dialog: IDialogContext, private readonly idPrefix: string) {\n    super(dialog, {\n      livePreview: 'cutOff'\n    });\n\n    this.innerNodes = resolveInnerNodes(this.column.hierarchy);\n    this.innerNodePaths = this.innerNodes.map((n) => n.path);\n    this.before = column.getCutOff();\n  }\n\n  protected build(node: HTMLElement) {\n    node.insertAdjacentHTML('beforeend', `\n        <input type=\"text\" value=\"${this.before.node.label}\" required=\"required\" autofocus=\"autofocus\" list=\"ui${this.idPrefix}lineupHierarchyList\" placeholder=\"cut off node\">\n        <input type=\"number\" value=\"${isFinite(this.before.maxDepth) ? this.before.maxDepth : ''}\" placeholder=\"max depth (&infin;)\">\n        <datalist id=\"ui${this.idPrefix}lineupHierarchyList\">${this.innerNodes.map((node) => `<option value=\"${node.path}\">${node.label}</option>`)}</datalist>`);\n\n    //custom validation\n    const innerNodePaths = this.innerNodePaths;\n    this.findInput('input[type=\"text\"]').addEventListener('change', function (this: HTMLInputElement) {\n      const value = this.value;\n      if (innerNodePaths.indexOf(value) < 0) {\n        this.setCustomValidity('invalid node');\n      } else {\n        this.setCustomValidity('');\n      }\n    }, {\n      passive: true\n    });\n\n    this.enableLivePreviews('input[type=text],input[type=number]');\n  }\n\n  protected reset() {\n    this.findInput('input[type=\"text\"]').value = this.column.hierarchy.path;\n    this.findInput('input[type=\"number\"]').value = '';\n  }\n\n  protected cancel() {\n    this.column.setCutOff(this.before);\n  }\n\n  protected submit() {\n    const newNode = this.findInput('input[type=\"text\"]').value;\n    const newNodeIndex = this.innerNodePaths.indexOf(newNode);\n    const node = this.innerNodes[newNodeIndex];\n    const maxDepthText = this.findInput('input[type=\"number\"]').value;\n    const maxDepth = maxDepthText === '' ? Infinity : parseInt(maxDepthText, 10);\n    this.column.setCutOff({node, maxDepth});\n    return true;\n  }\n}\n","import {DateColumn, IDateFilter} from '../../model';\nimport {noDateFilter} from '../../model/internalDate';\nimport {createDateFilter} from '../../renderer/DateHistogramCellRenderer';\nimport {cssClass} from '../../styles';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {IRankingHeaderContext} from '../interfaces';\n\n/** @internal */\nexport default class DateFilterDialog extends ADialog {\n  private readonly before: IDateFilter;\n  private handler: {reset: () => void, submit: () => void, cleanUp: () => void} | null = null;\n\n\n  constructor(private readonly column: DateColumn, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'filter',\n      cancelSubDialogs: true,\n    });\n    this.before = this.column.getFilter() || noDateFilter();\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-mapper'));\n\n    this.handler = createDateFilter(this.column, node, {\n      dialogManager: this.ctx.dialogManager,\n      idPrefix: this.ctx.idPrefix,\n      tasks: this.ctx.provider.getTaskExecutor(),\n    }, this.showLivePreviews());\n  }\n\n\n  cleanUp(action: 'cancel' | 'confirm' | 'handled') {\n    super.cleanUp(action);\n    this.handler!.cleanUp();\n  }\n\n  protected reset() {\n    this.handler!.reset();\n  }\n\n  protected submit() {\n    this.handler!.submit();\n    return true;\n  }\n\n  protected cancel() {\n    this.column.setFilter(this.before);\n  }\n}\n","import {LinkColumn, LinkMapColumn, LinksColumn} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\n\n/** @internal */\nexport default class EditPatternDialog extends ADialog {\n\n  private readonly before: string;\n\n  constructor(private readonly column: LinkColumn | LinksColumn | LinkMapColumn, dialog: IDialogContext, private readonly idPrefix: string) {\n    super(dialog);\n\n    this.before = this.column.getPattern();\n  }\n\n  protected build(node: HTMLElement) {\n    const templates = this.column.patternTemplates;\n    node.insertAdjacentHTML('beforeend', `<strong>Edit Pattern (access via $\\{value}, $\\{item})</strong><input\n        type=\"text\"\n        size=\"30\"\n        value=\"${this.before}\"\n        required\n        autofocus\n        placeholder=\"pattern (access via $\\{value}, $\\{item})\"\n        ${templates.length > 0 ? `list=\"ui${this.idPrefix}lineupPatternList\"` : ''}\n      >`);\n    if (templates.length > 0) {\n      node.insertAdjacentHTML('beforeend', `<datalist id=\"ui${this.idPrefix}lineupPatternList\">${templates.map((t) => `<option value=\"${t}\">`)}</datalist>`);\n    }\n\n    this.enableLivePreviews('input');\n  }\n\n  protected cancel() {\n    this.column.setPattern(this.before);\n  }\n\n  protected reset() {\n    this.node.querySelector('input')!.value = '';\n  }\n\n  protected submit() {\n    const newValue = this.node.querySelector('input')!.value;\n    this.column.setPattern(newValue);\n    return true;\n  }\n}\n","import {Column} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {uniqueId, forEach} from './utils';\nimport {getToolbarDialogAddons} from '../toolbar';\nimport {IRankingHeaderContext, IToolbarDialogAddonHandler} from '../interfaces';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class GroupDialog extends ADialog {\n  private readonly handlers: IToolbarDialogAddonHandler[] = [];\n\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'group'\n    });\n  }\n\n  protected build(node: HTMLElement) {\n    const addons = getToolbarDialogAddons(this.column, 'group', this.ctx);\n    for(const addon of addons) {\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\n      this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\n    }\n\n    this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix));\n\n    for (const handler of this.handlers) {\n      this.enableLivePreviews(handler.elems);\n    }\n  }\n\n  protected submit() {\n    for (const handler of this.handlers) {\n      if (handler.submit() === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  protected cancel() {\n    for (const handler of this.handlers) {\n      handler.cancel();\n    }\n  }\n\n  protected reset() {\n    for (const handler of this.handlers) {\n      handler.reset();\n    }\n  }\n}\n\nfunction sortOrder(node: HTMLElement, column: Column, idPrefix: string): IToolbarDialogAddonHandler {\n  const ranking = column.findMyRanker()!;\n  const current = ranking.getGroupCriteria();\n  let order = current.indexOf(column);\n  const enabled = order >= 0;\n\n  if (order < 0) {\n    order = current.length;\n  }\n\n  const id = uniqueId(idPrefix);\n  node.insertAdjacentHTML('afterbegin', `\n        <strong>Group By</strong>\n        <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"grouped\" value=\"true\" ${enabled ? 'checked' : ''} ><span>Enabled</span></label>\n        <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"grouped\" value=\"false\" ${!enabled ? 'checked' : ''} ><span>Disabled</span></label>\n        <strong>Group Priority</strong>\n        <input type=\"number\" id=\"${id}P\" step=\"1\" min=\"1\" max=\"${current.length + 1}\" value=\"${order + 1}\">\n    `);\n\n  const updateDisabled = (disable: boolean) => {\n    forEach(node, 'input:not([name=grouped]), select, textarea', (d: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) => {\n      d.disabled = disable;\n    });\n  };\n  updateDisabled(!enabled);\n\n  forEach(node, 'input[name=grouped]', (n: HTMLInputElement) => {\n    n.addEventListener('change', () => {\n      const enabled = n.value === 'true';\n      updateDisabled(!enabled);\n    }, {\n      passive: true\n    });\n  });\n\n  return {\n    elems: `input[name=grouped], #${id}P`,\n    submit() {\n      const enabled = node.querySelector<HTMLInputElement>('input[name=grouped]:checked')!.value === 'true';\n      const order = Number.parseInt(node.querySelector<HTMLInputElement>(`#${id}P`)!.value, 10) - 1;\n      ranking.groupBy(column, !enabled ? -1 : order);\n      return true;\n    },\n    reset() {\n      node.querySelector<HTMLInputElement>('input[name=grouped][value=false]')!.checked = true;\n      node.querySelector<HTMLInputElement>(`#${id}P`)!.value = (current.length + (!enabled ? 1 : 0)).toString();\n      updateDisabled(true);\n    },\n    cancel() {\n      ranking.groupBy(column, current.indexOf(column));\n    }\n  };\n}\n","import {round, similar, dragHandle, IDragHandleOptions} from '../../internal';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\nfunction clamp(v: number) {\n  return Math.max(Math.min(v, 100), 0);\n}\n\n/** @internal */\nexport interface IMappingAdapter {\n  destroyed(self: MappingLine): void;\n\n  updated(self: MappingLine): void;\n\n  domain(): number[];\n\n  normalizeRaw(v: number): number;\n\n  unnormalizeRaw(v: number): number;\n\n  dialog: IDialogContext;\n\n  formatter(v: number): string;\n}\n\n/** @internal */\nexport default class MappingLineDialog extends ADialog {\n  private readonly before: {domain: number, range: number};\n\n  constructor(private readonly line: {destroy(): void, domain: number, range: number, frozen: boolean, update(domain: number, range: number, trigger: boolean): void}, dialog: IDialogContext, private readonly adapter: IMappingAdapter) {\n    super(dialog, {\n      livePreview: 'dataMapping'\n    });\n    this.dialog.attachment.classList.add(cssClass('mapping-line-selected'));\n    this.before = {\n      domain: this.line.domain,\n      range: this.line.range\n    };\n  }\n\n  build(node: HTMLElement) {\n    const domain = this.adapter.domain();\n    node.insertAdjacentHTML('beforeend', `\n        <button class=\"${cssClass('dialog-button')} lu-action-remove\" title=\"Remove\" type=\"button\" ${this.line.frozen ? 'style=\"display: none\"' : ''} ><span style=\"margin-left: 3px\">Remove Mapping Line</span></button>\n        <strong>Input Domain Value (min ... max)</strong>\n        <input type=\"number\" value=\"${this.adapter.formatter(this.adapter.unnormalizeRaw(this.line.domain))}\" ${this.line.frozen ? 'readonly disabled' : ''} autofocus required min=\"${domain[0]}\" max=\"${domain[1]}\" step=\"any\">\n        <strong>Output Normalized Value (0 ... 1)</strong>\n        <input type=\"number\" value=\"${round(this.line.range / 100, 3)}\" required min=\"0\" max=\"1\" step=\"any\">\n      `);\n    this.find('button').addEventListener('click', () => {\n      this.destroy('confirm');\n      this.line.destroy();\n    }, {\n      passive: true\n      });\n    this.enableLivePreviews('input');\n  }\n\n  cleanUp(action: 'cancel' | 'confirm' | 'handled') {\n    super.cleanUp(action);\n\n    this.dialog.attachment.classList.remove(cssClass('mapping-line-selected'));\n  }\n\n  protected cancel() {\n    this.line.update(this.before.domain, this.before.range, true);\n  }\n\n  protected reset() {\n    this.findInput('input[type=number]').value = round(this.adapter.unnormalizeRaw(this.before.domain), 3).toString();\n    this.findInput('input[type=number]:last-of-type').value = round(this.before.range / 100, 3).toString();\n  }\n\n  protected submit() {\n    if (!this.node.checkValidity()) {\n      return false;\n    }\n    const domain = this.adapter.normalizeRaw(this.findInput('input[type=number]').valueAsNumber);\n    const range = this.findInput('input[type=number]:last-of-type').valueAsNumber * 100;\n    this.line.update(domain, range, true);\n    return true;\n  }\n}\n\n/** @internal */\nexport class MappingLine {\n  readonly node: SVGGElement;\n\n  constructor(g: SVGGElement, public domain: number, public range: number, private readonly adapter: IMappingAdapter) {\n    const h = 52;\n    g.insertAdjacentHTML('beforeend', `<g class=\"${cssClass('dialog-mapper-mapping')}\" transform=\"translate(${domain},0)\">\n      <line x1=\"0\" x2=\"${range - domain}\" y2=\"${h}\"></line>\n      <line x1=\"0\" x2=\"${range - domain}\" y2=\"${h}\"></line>\n      <circle r=\"2\"></circle>\n      <circle cx=\"${range - domain}\" cy=\"${h}\" r=\"2\"></circle>\n      <text class=\"${cssClass('dialog-mapper-mapping-domain')} ${domain > 25 && domain < 75 ? cssClass('dialog-mapper-mapping-middle') : ''}${domain > 75 ? cssClass('dialog-mapper-mapping-right') : ''}\" dy=\"-3\">\n        ${this.adapter.formatter(this.adapter.unnormalizeRaw(domain))}\n      </text>\n      <text class=\"${cssClass('dialog-mapper-mapping-range')} ${range > 25 && range < 75 ? cssClass('dialog-mapper-mapping-middle') : ''}${range > 50 ? cssClass('dialog-mapper-mapping-right') : ''}\" dy=\"3\" x=\"${range - domain}\" y=\"${h}\">\n        ${round(range / 100, 3)}\n      </text>\n      <title>Drag the anchor circle to change the mapping, double click to edit</title>\n    </g>`);\n    this.node = <SVGGElement>g.lastElementChild!;\n\n    // freeze 0 and 100 domain = raw domain ones\n    this.node.classList.toggle(cssClass('frozen'), similar(0, domain) || similar(domain, 100));\n    {\n      let beforeDomain: number;\n      let beforeRange: number;\n      let shiftDomain: number;\n      let shiftRange: number;\n\n      const normalize = (x: number) => x * 100 / g.getBoundingClientRect().width;\n\n      const common: Partial<IDragHandleOptions> =  {\n        container: g.parentElement!,\n        filter: (evt) => evt.button === 0 && !evt.shiftKey,\n        onStart: (_, x) => {\n          beforeDomain = this.domain;\n          beforeRange = this.range;\n          const normalized = normalize(x);\n          shiftDomain = this.domain - normalized;\n          shiftRange = this.range - normalized;\n        } ,\n        onEnd: () => {\n          if (!similar(beforeDomain, this.domain) || !similar(beforeRange, this.range)) {\n            this.adapter.updated(this);\n          }\n        }\n      };\n\n      const line = this.node.querySelector<SVGLineElement>('line:first-of-type')!;\n      dragHandle(line, { // line\n        ...common,\n        onDrag: (_, x) => {\n          const normalized = normalize(x);\n          this.update(clamp(normalized + shiftDomain), clamp(normalized + shiftRange));\n        },\n      });\n\n      const domainCircle = this.node.querySelector<SVGLineElement>('circle:first-of-type')!;\n      dragHandle(domainCircle, {\n        ...common,\n        onDrag: (_, x) => {\n          const normalized = normalize(x);\n          this.update(clamp(normalized), this.range);\n        },\n      });\n      const rangeCircle = this.node.querySelector<SVGLineElement>('circle:last-of-type')!;\n      dragHandle(rangeCircle, {\n        ...common,\n        onDrag: (_, x) => {\n          const normalized = normalize(x);\n          this.update(this.domain, clamp(normalized));\n        },\n      });\n    }\n\n    this.node.onclick = (evt) => {\n      if (!evt.shiftKey) {\n        return;\n      }\n      this.openDialog();\n    };\n\n    this.node.ondblclick = () => {\n      this.openDialog();\n    };\n  }\n\n  private openDialog() {\n    const ctx = {\n      manager: this.adapter.dialog.manager,\n      level: this.adapter.dialog.level + 1,\n      attachment: <any>this.node,\n      idPrefix: this.adapter.dialog.idPrefix\n    };\n    const dialog = new MappingLineDialog(this, ctx, this.adapter);\n    dialog.open();\n  }\n\n  get frozen() {\n    return this.node.classList.contains(cssClass('frozen'));\n  }\n\n  destroy(handled = false) {\n    this.node.remove();\n    if (!handled) {\n      this.adapter.destroyed(this);\n    }\n  }\n\n  update(domain: number, range: number, trigger = false) {\n    if (similar(domain, 100)) {\n      domain = 100;\n    }\n    if (similar(domain, 0)) {\n      domain = 0;\n    }\n    if (similar(range, 100)) {\n      range = 100;\n    }\n    if (similar(range, 0)) {\n      range = 0;\n    }\n\n    if (similar(domain, this.domain) && similar(range, this.range)) {\n      return;\n    }\n    if (this.frozen) {\n      domain = this.domain;\n    }\n    this.domain = domain;\n    this.range = range;\n    this.node.setAttribute('transform', `translate(${domain},0)`);\n    const shift = range - domain;\n    Array.from(this.node.querySelectorAll<SVGLineElement>('line')).forEach((d) => d.setAttribute('x2', String(shift)));\n    this.node.querySelector<SVGCircleElement>('circle[cx]')!.setAttribute('cx', String(shift));\n\n    const t1 = this.node.querySelector<SVGTextElement>('text')!;\n    t1.textContent = this.adapter.formatter(this.adapter.unnormalizeRaw(domain));\n    t1.classList.toggle(cssClass('dialog-mapper-mapping-right'), domain > 75);\n    t1.classList.toggle(cssClass('dialog-mapper-mapping-middle'), domain >= 25 && domain <= 75);\n\n    const t2 = this.node.querySelector<SVGTextElement>('text[x]')!;\n    t2.textContent = round(range / 100, 3).toString();\n    t2.classList.toggle(cssClass('dialog-mapper-mapping-right'), range > 75);\n    t2.classList.toggle(cssClass('dialog-mapper-mapping-middle'), range >= 25 && range <= 75);\n    t2.setAttribute('x', String(shift));\n\n    if (trigger) {\n      this.adapter.updated(this);\n    }\n  }\n}\n","import {ISequence, round} from '../../internal';\nimport {IMapAbleColumn, IMappingFunction, isMissingValue, isMapAbleColumn} from '../../model';\nimport {IRankingHeaderContext} from '../interfaces';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {IMappingAdapter, MappingLine} from './MappingLineDialog';\nimport {cssClass} from '../../styles';\nimport {ScaleMappingFunction, ScriptMappingFunction} from '../../model/MappingFunction';\n\n/** @internal */\nexport default class MappingDialog extends ADialog {\n\n  private scale: IMappingFunction;\n\n  private readonly mappingLines: MappingLine[] = [];\n  private rawDomain: [number, number];\n\n  private readonly data: Promise<ISequence<number>>;\n  private readonly idPrefix: string;\n\n  private readonly before: IMappingFunction;\n\n  private readonly mappingAdapter: IMappingAdapter = {\n    destroyed: (self: MappingLine) => {\n      this.mappingLines.splice(this.mappingLines.indexOf(self), 1);\n      this.updateLines(this.computeScale());\n    },\n    updated: () => this.updateLines(this.computeScale()),\n    domain: () => this.rawDomain,\n    normalizeRaw: this.normalizeRaw.bind(this),\n    unnormalizeRaw: this.unnormalizeRaw.bind(this),\n    dialog: this.dialog,\n    formatter: this.column.getNumberFormat()\n  };\n\n  constructor(private readonly column: IMapAbleColumn, dialog: IDialogContext, ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'dataMapping',\n      cancelSubDialogs: true,\n    });\n\n    this.idPrefix = `me${ctx.idPrefix}`;\n    this.before = this.column.getMapping().clone();\n    this.scale = this.column.getMapping().clone();\n    const domain = this.scale.domain;\n    this.rawDomain = [domain[0], domain[domain.length - 1]];\n\n    this.data = Promise.resolve(ctx.provider.mappingSample(column));\n  }\n\n  private get scaleType() {\n    if ((this.scale instanceof ScriptMappingFunction)) {\n      return 'script';\n    }\n    if (this.scale instanceof ScaleMappingFunction) {\n      const base = this.scale.scaleType;\n      if (base !== 'linear') {\n        return base;\n      }\n      // check if invert or absolute\n      const r = this.scale.range;\n      if (r.length === 2 && r[0] === 1 && r[1] === 0) {\n        return 'linear_invert';\n      }\n      if (r.length === 3 && r[0] === 1 && r[1] === 0 && r[2] === 1) {\n        return 'linear_abs';\n      }\n      return 'linear';\n    }\n    return 'unknown';\n  }\n\n  build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-mapper'));\n\n    const r = this.column.findMyRanker();\n    const others = !r ? [] : r.flatColumns.filter((d) => isMapAbleColumn(d) && d !== this.column);\n\n    node.insertAdjacentHTML('beforeend', `\n        <div><label for=\"${this.idPrefix}mapping_type\"><strong>Normalization Scaling:</strong></label><select id=\"${this.idPrefix}mapping_type\" class=\"browser-default\">\n        <option value=\"linear\">Linear</option>\n        <option value=\"linear_invert\">Invert</option>\n        <option value=\"linear_abs\">Absolute</option>\n        <option value=\"log\">Log</option>\n        <option value=\"pow1.1\">Pow 1.1</option>\n        <option value=\"pow2\">Pow 2</option>\n        <option value=\"pow3\">Pow 3</option>\n        <option value=\"sqrt\">Sqrt</option>\n        <option value=\"script\">Custom Script</option>\n        <option value=\"unknown\">Unknown</option>\n        ${others.length > 0 ? `<optgroup label=\"Copy From\">${others.map((d) => `<option value=\"copy_${d.id}\">${d.label}</option>`).join('')}</optgroup>`: ''}\n      </select>\n      </div>\n        <div class=${cssClass('dialog-mapper-domain')}>\n          <input id=\"${this.idPrefix}min\" required type=\"number\" value=\"${round(this.rawDomain[0], 3)}\" step=\"any\">\n          <span>Input Domain (min - max)</span>\n          <input id=\"${this.idPrefix}max\" required type=\"number\" value=\"${round(this.rawDomain[1], 3)}\" step=\"any\">\n        </div>\n        <svg class=\"${cssClass('dialog-mapper-details')}\" viewBox=\"0 0 106 66\">\n           <g transform=\"translate(3,7)\">\n              <rect y=\"-3\" width=\"100\" height=\"10\">\n                <title>Click to create a new mapping line</title>\n              </rect>\n              <rect y=\"49\" width=\"100\" height=\"10\">\n                <title>Click to create a new mapping line</title>\n              </rect>\n           </g>\n        </svg>\n        <div class=${cssClass('dialog-mapper-range')}>\n          <span>Output Normalized Domain (0 - 1)</span>\n        </div>\n        <div class=\"${cssClass('dialog-mapper-script')}\">\n          <strong>Custom Normalization Script</strong>\n          <textarea class=\"${cssClass('textarea')}\"></textarea>\n        </div>`);\n\n    const g = <SVGGElement>node.querySelector(`.${cssClass('dialog-mapper-details')} > g`);\n\n    this.forEach(`.${cssClass('dialog-mapper-details')} rect`, (d: SVGRectElement) => d.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      const bb = d.getBoundingClientRect();\n      const x = round((evt.x - bb.left) * 100 / bb.width, 2);\n      const m = new MappingLine(g, x, x, this.mappingAdapter);\n      this.mappingLines.push(m);\n    });\n\n    {\n\n      const select = <HTMLSelectElement>this.find('select');\n      const textarea = <HTMLTextAreaElement>this.find('textarea');\n      select.onchange = (evt) => {\n        const select = <HTMLSelectElement>evt.currentTarget;\n        switch (select.value) {\n          case 'linear_invert':\n            this.scale = new ScaleMappingFunction(this.rawDomain.slice(), 'linear', [1, 0]);\n            break;\n          case 'linear_abs':\n            this.scale = new ScaleMappingFunction([this.rawDomain[0], (this.rawDomain[1] - this.rawDomain[0]) / 2, this.rawDomain[1]], 'linear', [1, 0, 1]);\n            break;\n          case 'script':\n            const s = new ScriptMappingFunction(this.rawDomain.slice());\n            this.scale = s;\n            textarea.value = s.code;\n            break;\n          case 'unknown':\n            // clone original again\n            this.scale = this.column.getOriginalMapping().clone();\n            break;\n          default:\n            if (select.value.startsWith('copy_')) {\n              this.copyMapping(select.value.slice('copy_'.length));\n              return;\n            }\n            this.scale = new ScaleMappingFunction(this.rawDomain.slice(), select.value, [0, 1]);\n            break;\n        }\n        this.createMappings();\n        node.dataset.scale = select.value;\n        this.updateLines();\n      };\n      const scaleType = node.dataset.scale = this.scaleType;\n      select.selectedIndex = Array.from(select.options).findIndex((d) => d.value === scaleType);\n\n      if (scaleType === 'script') {\n        textarea.value = (<ScriptMappingFunction>this.scale).code;\n      }\n      this.createMappings();\n    }\n\n    {\n      this.forEach(`#${this.idPrefix}min, #${this.idPrefix}max`, (d: HTMLInputElement, i) => d.onchange = () => {\n        const v = d.valueAsNumber;\n        if (v === this.rawDomain[i]) {\n          d.setCustomValidity('');\n          return;\n        }\n        const other = this.rawDomain[1 - i];\n        if (isNaN(v) || (i === 0 && v >= other) || (i === 1 && v <= other)) {\n          d.setCustomValidity(`value has to be ${i === 0 ? '<= max' : '>= min'}`);\n          return;\n        }\n        d.setCustomValidity('');\n        this.rawDomain[i] = v;\n        this.scale = this.computeScale();\n        const patchedDomain = this.scale.domain.slice();\n        patchedDomain[0] = this.rawDomain[0];\n        patchedDomain[patchedDomain.length - 1] = this.rawDomain[1];\n        this.scale.domain = patchedDomain;\n        this.createMappings();\n        this.updateLines();\n        if (this.showLivePreviews()) {\n          this.column.setMapping(this.scale);\n        }\n      });\n    }\n\n    this.data.then((values) => {\n      values.forEach((v) => {\n        if (!isMissingValue(v)) {\n          g.insertAdjacentHTML('afterbegin', `<line data-v=\"${v}\" x1=\"${round(this.normalizeRaw(v), 2)}\" x2=\"${round(this.scale.apply(v) * 100, 2)}\" y2=\"52\"></line>`);\n        }\n      });\n    });\n  }\n\n  private createMappings() {\n    this.mappingLines.splice(0, this.mappingLines.length).forEach((d) => d.destroy(true));\n    if (!(this.scale instanceof ScaleMappingFunction)) {\n      return;\n    }\n    const g = <SVGGElement>this.node.querySelector(`.${cssClass('dialog-mapper-details')} > g`);\n    const domain = this.scale.domain;\n    const range = this.scale.range;\n    for (let i = 0; i < domain.length; ++i) {\n      this.mappingLines.push(new MappingLine(g, this.normalizeRaw(domain[i]), range[i] * 100, this.mappingAdapter));\n    }\n  }\n\n  private update() {\n    const scaleType = this.node.dataset.scale = this.scaleType;\n    const select = <HTMLSelectElement>this.find('select');\n    select.selectedIndex = Array.from(select.options).findIndex((d) => d.value === scaleType);\n    if (scaleType === 'script') {\n      (<HTMLTextAreaElement>this.find('textarea')).value = (<ScriptMappingFunction>this.scale).code;\n    }\n    this.forEach(`input[type=number]`, (d: HTMLInputElement, i) => {\n      d.value = round(this.rawDomain[i], 3).toString();\n    });\n  }\n\n  private updateLines(scale = this.scale) {\n    this.forEach(`.${cssClass('dialog-mapper-details')}  > g > line[x1]`, (d: SVGLineElement) => {\n      const v = parseFloat(d.getAttribute('data-v')!);\n      d.setAttribute('x1', round(this.normalizeRaw(v), 2).toString());\n      d.setAttribute('x2', round(scale.apply(v) * 100, 2).toString());\n    });\n  }\n\n  protected reset() {\n    this.scale = this.column.getOriginalMapping().clone();\n    const domain = this.scale.domain;\n    this.rawDomain = [domain[0], domain[domain.length - 1]];\n    this.update();\n    this.createMappings();\n    this.updateLines();\n  }\n\n  private copyMapping(columnId: string) {\n    const r = this.column.findMyRanker();\n    if (!r) {\n      return;\n    }\n    const ref = <IMapAbleColumn>r.find(columnId)!;\n    this.scale = ref.getMapping().clone();\n    this.rawDomain = <[number, number]>this.scale.domain.slice();\n    this.update();\n    this.createMappings();\n    this.updateLines();\n  }\n\n  private normalizeRaw(d: number) {\n    const v = (d - this.rawDomain[0]) * 100 / (this.rawDomain[1] - this.rawDomain[0]);\n    return Math.max(Math.min(v, 100), 0); // clamp\n  }\n\n  private unnormalizeRaw(d: number) {\n    return (d) * (this.rawDomain[1] - this.rawDomain[0]) / 100 + this.rawDomain[0];\n  }\n\n  private computeScale() {\n    const type = this.scaleType;\n    if (type === 'script') {\n      return new ScriptMappingFunction(this.rawDomain.slice(), this.node.querySelector('textarea')!.value);\n    }\n    this.mappingLines.sort((a, b) => a.domain - b.domain);\n    const domain = this.mappingLines.map((d) => this.unnormalizeRaw(d.domain));\n    const range = this.mappingLines.map((d) => d.range / 100);\n    return new ScaleMappingFunction(domain, type, range);\n  }\n\n  protected submit() {\n    if (!this.node.checkValidity()) {\n      return false;\n    }\n    const scale = this.computeScale();\n    this.column.setMapping(scale);\n    return true;\n  }\n\n  protected cancel() {\n    this.column.setMapping(this.before);\n  }\n}\n","import {IMapAbleColumn, INumberFilter} from '../../model';\nimport {createNumberFilter} from '../../renderer/HistogramCellRenderer';\nimport {cssClass} from '../../styles';\nimport {IRankingHeaderContext} from '../interfaces';\nimport ADialog, {IDialogContext} from './ADialog';\n\n/** @internal */\nexport default class NumberFilterDialog extends ADialog {\n  private readonly before: INumberFilter;\n  private handler: {reset: () => void, submit: () => void, cleanUp: () => void} | null = null;\n\n  constructor(private readonly column: IMapAbleColumn, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: 'filter',\n      cancelSubDialogs: true,\n    });\n\n    this.before = column.getFilter();\n  }\n\n  build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-mapper'));\n\n    this.handler = createNumberFilter(this.column, node, {\n      dialogManager: this.ctx.dialogManager,\n      idPrefix: this.ctx.idPrefix,\n      tasks: this.ctx.provider.getTaskExecutor(),\n    }, this.showLivePreviews());\n  }\n\n  cleanUp(action: 'cancel' | 'confirm' | 'handled') {\n    super.cleanUp(action);\n    this.handler!.cleanUp();\n  }\n\n  protected reset() {\n    this.handler!.reset();\n  }\n\n  protected submit() {\n    this.handler!.submit();\n    return true;\n  }\n\n  protected cancel() {\n    this.column.setFilter(this.before);\n  }\n}\n","import {forEach} from '../../renderer/utils';\nimport {cssClass} from '../../styles';\nimport {getSortLabel} from '../../internal';\nimport {IToolbarDialogAddonHandler} from '../interfaces';\n\n/** @internal */\nexport function sortMethods(node: HTMLElement, column: {setSortMethod(v: string): void, getSortMethod(): string}, methods: string[]): IToolbarDialogAddonHandler {\n  const bak = column.getSortMethod();\n  methods.forEach((d) => node.insertAdjacentHTML('beforeend', `<label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"multivaluesort\" value=\"${d}\"  ${(bak === d) ? 'checked' : ''} ><span>${getSortLabel(d)}</span></label>`));\n\n  forEach(node, 'input[name=multivaluesort]', (n: HTMLInputElement) => {\n    n.addEventListener('change', () => column.setSortMethod(n.value), {\n      passive: true\n    });\n  });\n\n  return {\n    elems: 'input[name=multivaluesort]',\n    submit() {\n      const selected = node.querySelector<HTMLInputElement>('input[name=multivaluesort]:checked')!.value;\n      column.setSortMethod(selected);\n      return true;\n    },\n    cancel() {\n      column.setSortMethod(bak);\n    },\n    reset() {\n      node.querySelector<HTMLInputElement>(`input[name=multivaluesort][value=\"${bak}\"]`)!.checked = true;\n    }\n  };\n}\n\n\n/** @internal */\nexport {uniqueId, forEach, forEachChild, colorOf} from '../../renderer/utils';\n","import {EAdvancedSortMethod, ReduceColumn} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {sortMethods} from './utils';\nimport {IToolbarDialogAddonHandler} from '../interfaces';\n\n/** @internal */\nexport default class ReduceDialog extends ADialog {\n  private handler: IToolbarDialogAddonHandler | null = null;\n\n  constructor(private readonly column: ReduceColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'reduce'\n    });\n  }\n\n  protected build(node: HTMLElement) {\n    const wrapper = {\n      getSortMethod: () => this.column.getReduce(),\n      setSortMethod: (s: EAdvancedSortMethod) => this.column.setReduce(s)\n    };\n    this.handler = sortMethods(node, wrapper, Object.keys(EAdvancedSortMethod));\n\n    this.enableLivePreviews(this.handler.elems);\n  }\n\n  protected submit() {\n    return this.handler!.submit();\n  }\n\n  protected reset() {\n    this.handler!.reset();\n  }\n\n  protected cancel() {\n    this.handler!.cancel();\n  }\n}\n","import {Column, IColumnMetaData} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class RenameDialog extends ADialog {\n\n  private readonly before: IColumnMetaData;\n\n  constructor(private readonly column: Column, dialog: IDialogContext) {\n    super(dialog);\n    this.before = column.getMetaData();\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-rename'));\n    node.insertAdjacentHTML('beforeend', `\n      <input type=\"text\" value=\"${this.column.label}\" required autofocus placeholder=\"name\">\n      <input type=\"text\" value=\"${this.column.getMetaData().summary}\" placeholder=\"summary\" name=\"summary\">\n      <textarea class=\"${cssClass('textarea')}\" rows=\"5\" placeholder=\"description\">${this.column.description}</textarea>`);\n  }\n\n  protected reset() {\n    const desc = this.column.desc;\n    const meta = {\n      label: desc.label || this.column.id,\n      summary: desc.summary || '',\n      description: desc.description || ''\n    };\n    this.findInput('input[type=\"text\"]').value = meta.label;\n    this.findInput('input[name=\"summary\"]').value = meta.summary;\n    this.node.querySelector('textarea')!.value = meta.description;\n  }\n\n  protected submit() {\n    const label = this.findInput('input[type=\"text\"]').value;\n    const summary = this.findInput('input[name=\"summary\"]').value.trim();\n    const description = this.node.querySelector('textarea')!.value;\n    this.column.setMetaData({label, description, summary});\n    return true;\n  }\n\n  protected cancel() {\n    this.column.setMetaData(this.before);\n  }\n}\n","import {ScriptColumn} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class ScriptEditDialog extends ADialog {\n  private readonly before: string;\n\n  constructor(private readonly column: ScriptColumn, dialog: IDialogContext) {\n    super(dialog);\n    this.before = column.getScript();\n  }\n\n  protected build(node: HTMLElement) {\n    node.insertAdjacentHTML('beforeend', `<textarea class=\"${cssClass('textarea')}\" autofocus=\"true\" rows=\"5\" autofocus=\"autofocus\" style=\"width: 95%;\">${this.column.getScript()}</textarea>`);\n  }\n\n  protected cancel() {\n    this.column.setScript(this.before);\n  }\n\n  protected reset() {\n    this.node.querySelector('textarea')!.value = (<any>this.column.desc).script || ScriptColumn.DEFAULT_SCRIPT;\n  }\n\n  protected submit() {\n    this.column.setScript(this.node.querySelector('textarea')!.value);\n    return true;\n  }\n}\n","import {Column} from '../../model';\nimport {IDataProvider} from '../../provider';\nimport ADialog, { IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\nimport {debounce} from '../../internal';\n\n/** @internal */\nexport default class SearchDialog extends ADialog {\n\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly provider: IDataProvider) {\n    super(dialog, {\n      livePreview: 'search'\n    });\n  }\n\n  protected build(node: HTMLElement) {\n    node.insertAdjacentHTML('beforeend', `<input type=\"text\" size=\"20\" value=\"\" required autofocus placeholder=\"search... (>= 3 chars)\">\n      <label class=\"${cssClass('checkbox')}\">\n        <input type=\"checkbox\">\n        <span>Use regular expressions</span>\n      </label>\n    `);\n\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]')!;\n    const checkbox = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]')!;\n    const update = () => {\n      const search: any = input.value;\n      if (search.length < 3) {\n        input.setCustomValidity('at least 3 characters');\n        return;\n      }\n      input.setCustomValidity('');\n    };\n    input.addEventListener('input', update, {\n      passive: true\n    });\n    checkbox.addEventListener('change', update, {\n      passive: true\n    });\n    this.enableLivePreviews([input, checkbox]);\n\n    if (!this.showLivePreviews()) {\n      return;\n    }\n    input.addEventListener('input', debounce(() => this.submit(), 100), {\n      passive: true\n    });\n  }\n\n  protected submit() {\n    const input = this.findInput('input[type=\"text\"]')!;\n    const checkbox = this.findInput('input[type=\"checkbox\"]')!;\n\n    let search: any = input.value;\n    const isRegex = checkbox.checked;\n    if (isRegex) {\n      search = new RegExp(search);\n    }\n    this.provider.searchAndJump(search, this.column);\n    return true;\n  }\n\n  protected reset() {\n    const input = this.findInput('input[type=\"text\"]')!;\n    const checkbox = this.findInput('input[type=\"checkbox\"]')!;\n    input.value = '';\n    checkbox.checked = false;\n  }\n\n  protected cancel() {\n    // nothing to do\n  }\n}\n","import ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\nimport {IDataProvider} from '../../provider';\n\n/** @internal */\nexport default class ShowTopNDialog extends ADialog {\n\n  private readonly before: number;\n\n  constructor(private readonly provider: IDataProvider, dialog: IDialogContext) {\n    super(dialog);\n\n    this.before = this.provider.getShowTopN();\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-rename'));\n    node.insertAdjacentHTML('beforeend', `\n      <input type=\"number\" min=\"0\" step=\"1\" value=\"${this.before}\">`);\n\n    this.enableLivePreviews('input');\n  }\n\n  protected cancel() {\n    this.provider.setShowTopN(this.before);\n  }\n\n  protected submit() {\n    const value = this.findInput('input').valueAsNumber;\n    this.provider.setShowTopN(value);\n    return true;\n  }\n\n  protected reset() {\n    const defaultValue = 10;\n    this.findInput('input').value = defaultValue.toString();\n  }\n}\n","import {Column} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {uniqueId, forEach} from './utils';\nimport {getToolbarDialogAddons} from '../toolbar';\nimport {IRankingHeaderContext, IToolbarDialogAddonHandler} from '../interfaces';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class SortDialog extends ADialog {\n  private readonly handlers: IToolbarDialogAddonHandler[] = [];\n\n  constructor(private readonly column: Column, private readonly groupSortBy: boolean, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      livePreview: groupSortBy ? 'groupSort' : 'sort'\n    });\n  }\n\n  protected build(node: HTMLElement) {\n    const addons = getToolbarDialogAddons(this.column, this.groupSortBy ? 'sortGroup' : 'sort', this.ctx);\n    for(const addon of addons) {\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\n      this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\n    }\n\n    this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix, this.groupSortBy));\n\n    for (const handler of this.handlers) {\n      this.enableLivePreviews(handler.elems);\n    }\n  }\n\n  protected submit() {\n    for (const handler of this.handlers) {\n      if (handler.submit() === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  protected cancel() {\n    for (const handler of this.handlers) {\n      handler.cancel();\n    }\n  }\n\n  protected reset() {\n    for (const handler of this.handlers) {\n      handler.reset();\n    }\n  }\n}\n\nfunction sortOrder(node: HTMLElement, column: Column, idPrefix: string, groupSortBy: boolean = false): IToolbarDialogAddonHandler {\n  const ranking = column.findMyRanker()!;\n  const current = groupSortBy  ? ranking.getGroupSortCriteria() : ranking.getSortCriteria();\n  const order = Object.assign({}, groupSortBy ? column.isGroupSortedByMe() : column.isSortedByMe());\n\n  const priority = order.priority === undefined ? current.length : order.priority;\n\n  const id = uniqueId(idPrefix);\n  node.insertAdjacentHTML('afterbegin', `\n        <strong>Sort Order</strong>\n        <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"sortorder\" value=\"asc\"  ${(order.asc === 'asc') ? 'checked' : ''} ><span>Ascending</span></label>\n        <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"sortorder\" value=\"desc\"  ${(order.asc === 'desc') ? 'checked' : ''} ><span>Decending</span></label>\n        <label class=\"${cssClass('checkbox')}\"><input type=\"radio\" name=\"sortorder\" value=\"none\"  ${(order.asc === undefined) ? 'checked' : ''} ><span>Unsorted</span></label>\n        <strong>Sort Priority</strong>\n        <input type=\"number\" id=\"${id}P\" step=\"1\" min=\"1\" max=\"${current.length + 1}\" value=\"${priority + 1}\">\n    `);\n\n  const updateDisabled = (disable: boolean) => {\n    forEach(node, 'input:not([name=sortorder]), select, textarea', (d: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) => {\n      d.disabled = disable;\n    });\n  };\n  updateDisabled(order.asc === undefined);\n\n  forEach(node, 'input[name=sortorder]', (n: HTMLInputElement) => {\n    n.addEventListener('change', () => {\n      updateDisabled(n.value === 'none');\n    }, {\n      passive: true\n    });\n  });\n\n  return {\n    elems: `input[name=sortorder], #${id}P`,\n    submit() {\n      const asc = node.querySelector<HTMLInputElement>('input[name=sortorder]:checked')!.value;\n      const priority = Number.parseInt(node.querySelector<HTMLInputElement>(`#${id}P`)!.value, 10) - 1;\n\n      if (groupSortBy) {\n        ranking.groupSortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\n      } else {\n        ranking.sortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\n      }\n      return true;\n    },\n    reset() {\n      node.querySelector<HTMLInputElement>('input[name=sortorder][value=none]')!.checked = true;\n      node.querySelector<HTMLInputElement>(`#${id}P`)!.value = (current.length + (order.priority === undefined ? 1 : 0)).toString();\n      updateDisabled(true);\n    },\n    cancel() {\n      if (groupSortBy) {\n        ranking.groupSortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\n      } else {\n        ranking.sortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\n      }\n    }\n  };\n}\n","import {StringColumn, IStringFilter} from '../../model';\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\nimport {debounce} from '../../internal';\n\n\nfunction toInput(text: string, isRegex: boolean) {\n  const v = text.trim();\n  if (v === '') {\n    return null;\n  }\n  return isRegex ? new RegExp(v, 'gm') : v;\n}\n\n\n/** @internal */\nexport default class StringFilterDialog extends ADialog {\n\n  private readonly before: IStringFilter | null;\n\n  constructor(private readonly column: StringColumn, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'filter'\n    });\n\n    this.before = this.column.getFilter();\n  }\n\n  private updateFilter(filter: string | RegExp | null, filterMissing: boolean) {\n    if (filter == null && !filterMissing) {\n      this.column.setFilter(null);\n    } else {\n      this.column.setFilter({filter, filterMissing});\n    }\n  }\n\n  protected reset() {\n    this.findInput('input[type=\"text\"]').value = '';\n    this.forEach('input[type=checkbox]', (n: HTMLInputElement) => n.checked = false);\n  }\n\n  protected cancel() {\n    if (this.before) {\n      this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing);\n    } else {\n      this.updateFilter(null, false);\n    }\n  }\n\n  protected submit() {\n    const filterMissing = findFilterMissing(this.node).checked;\n    const input = this.findInput('input[type=\"text\"]').value;\n    const isRegex = this.findInput('input[type=\"checkbox\"]').checked;\n    this.updateFilter(toInput(input, isRegex), filterMissing);\n    return true;\n  }\n\n  protected build(node: HTMLElement) {\n    const bak = this.column.getFilter() || {filter: '', filterMissing: false};\n    node.insertAdjacentHTML('beforeend', `<input type=\"text\" placeholder=\"Filter ${this.column.desc.label}...\" autofocus value=\"${(bak.filter instanceof RegExp) ? bak.filter.source : bak.filter || ''}\" style=\"width: 100%\">\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"checkbox\" ${(bak.filter instanceof RegExp) ? 'checked=\"checked\"' : ''}>\n      <span>Use regular expressions</span>\n    </label>\n    ${filterMissingMarkup(bak.filterMissing)}`);\n\n    const filterMissing = findFilterMissing(node);\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]');\n    const isRegex = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]');\n\n    this.enableLivePreviews([filterMissing, input, isRegex]);\n\n    if (!this.showLivePreviews()) {\n      return;\n    }\n    input.addEventListener('input', debounce(() => this.submit(), 100), {\n      passive: true\n    });\n  }\n}\n","import {round} from '../../internal';\nimport {StackColumn} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {forEach, colorOf} from './utils';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class WeightsEditDialog extends ADialog {\n\n  private readonly weights: number[];\n\n  constructor(private readonly column: StackColumn, dialog: IDialogContext) {\n    super(dialog);\n\n    this.weights = this.column.getWeights();\n  }\n\n  protected cancel() {\n    this.column.setWeights(this.weights.slice());\n  }\n\n  protected reset() {\n    const weight = 100 / this.weights.length;\n    forEach(this.node, 'input[type=number]', (n: HTMLInputElement) => {\n      const v = round(weight, 2);\n      n.value = String(v);\n      (<HTMLElement>n.nextElementSibling!.firstElementChild!).style.width = `${v}%`;\n    });\n  }\n\n  protected build(node: HTMLElement) {\n\n    const children = this.column.children;\n    node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('dialog-table')}\">\n        ${this.weights.map((weight, i) => `<div class=\"${cssClass('dialog-weights-table-entry')}\">\n          <input type=\"number\" value=\"${round(weight * 100, 2)}\" min=\"0\" max=\"100\" step=\"any\" required>\n          <span class=\"${cssClass('dialog-filter-color-bar')}\">\n            <span style=\"background-color: ${colorOf(children[i])}; width: ${round(weight * 100, 2)}%\"></span>\n          </span>\n          ${children[i].label}\n        </div>`).join('')}\n    </div>`);\n    const inputs = Array.from(this.node.querySelectorAll<HTMLInputElement>('input[type=number]'));\n    inputs.forEach((d, i) => {\n      d.oninput = () => {\n        const weight = d.valueAsNumber;\n        if (weight <= 0) {\n          d.setCustomValidity('weight cannot be zero');\n        } else {\n          d.setCustomValidity('');\n        }\n        this.updateBar(d);\n\n        if (inputs.length !== 2) {\n          return;\n        }\n\n        // corner case auto decrease the other\n        const rest = 100 - weight;\n\n        if (rest <= 0) {\n          d.setCustomValidity('weight cannot be 100 in case of two elements');\n        } else {\n          d.setCustomValidity('');\n        }\n\n        const other = inputs[1 - i]!;\n        other.value = round(rest, 2).toString();\n        this.updateBar(other);\n      };\n    });\n  }\n\n  private updateBar(input: HTMLInputElement) {\n    (<HTMLElement>input.nextElementSibling!.firstElementChild!).style.width = `${input.value}%`;\n  }\n\n  private distributeWeights() {\n    const inputs = Array.from(this.node.querySelectorAll<HTMLInputElement>('input[type=number]')).map((d) => ({input: d, weight: d.value ? d.valueAsNumber : NaN}));\n    const hasMissing = inputs.some((d) => isNaN(d.weight));\n    if (hasMissing) {\n      // compute missing ones\n      const missingIndices = inputs.filter((d) => isNaN(d.weight));\n      const correct = inputs.filter((d) => !isNaN(d.weight));\n      const sum = correct.reduce((a, b) => a + b.weight, 0);\n\n      if (sum < 100) {\n        // compute rest\n        const rest = (100 - sum) / missingIndices.length;\n        for (const input of missingIndices) {\n          input.input.value = round(rest, 2).toString();\n          this.updateBar(input.input);\n        }\n        return;\n      }\n      // already above 100, set missing to 0 and do a regular normalization (user has to deal with it)\n      for (const input of missingIndices) {\n        input.input.value = '0';\n        this.updateBar(input.input);\n      }\n    }\n\n    const weights = inputs.map((d) => d.weight);\n    if (validWeights(weights)) {\n      return; // nothing to do\n    }\n\n    // pure distribute the sum\n    const sum = weights.reduce((a, b) => a + b, 0);\n    for (const input of inputs) {\n      input.input.value = round(input.weight * 100 / sum, 2).toString();\n      this.updateBar(input.input);\n    }\n  }\n\n  protected appendDialogButtons() {\n    super.appendDialogButtons();\n    const buttons = this.node.querySelector<HTMLElement>(`.${cssClass('dialog-buttons')}`)!;\n    buttons.insertAdjacentHTML('beforeend', `<button class=\"${cssClass('dialog-button')} ${cssClass('dialog-weights-distribute-button')}\" type=\"button\" title=\"distribute weights\"></button>`);\n\n    const last = <HTMLElement>buttons.lastElementChild!;\n    last.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this.distributeWeights();\n    };\n  }\n\n  submit() {\n    const inputs = Array.from(this.node.querySelectorAll<HTMLInputElement>('input[type=number]')).map((d) => ({input: d, weight: d.valueAsNumber}));\n    let invalid = false;\n    for (const input of inputs) {\n      if (input.weight <= 0) {\n        input.input.setCustomValidity('weight cannot be zero');\n        invalid = true;\n      } else {\n        input.input.setCustomValidity('');\n      }\n    }\n    const weights = inputs.map((d) => d.weight);\n    if (!invalid && !validWeights(weights)) {\n      inputs[inputs.length - 1].input.setCustomValidity('sum of weights has to be 100, change weights or use the redistribute button to fix');\n      invalid = true;\n    }\n    if (invalid) {\n      if (typeof (<any>this.node).reportValidity === 'function') {\n        (<any>this.node).reportValidity();\n      }\n      return false;\n    }\n\n    this.column.setWeights(weights.map((d) => d / 100));\n    return true;\n  }\n}\n\nfunction validWeights(weights: number[]) {\n  return Math.abs(weights.reduce((a, b) => a + b, 0) - 100) < 3;\n}\n","import {getAllToolbarActions, getAllToolbarDialogAddons} from '../model/internal';\nimport {Column, EDateSort, EAdvancedSortMethod, ESortMethod, isSupportType, CompositeColumn, IMultiLevelColumn, isSortingAscByDefault} from '../model';\nimport {cssClass} from '../styles';\nimport ADialog, {IDialogContext, dialogContext} from './dialogs/ADialog';\nimport BooleanFilterDialog from './dialogs/BooleanFilterDialog';\nimport CategoricalColorMappingDialog from './dialogs/CategoricalColorMappingDialog';\nimport CategoricalFilterDialog from './dialogs/CategoricalFilterDialog';\nimport CategoricalMappingFilterDialog from './dialogs/CategoricalMappingFilterDialog';\nimport ChangeRendererDialog from './dialogs/ChangeRendererDialog';\nimport ColorMappingDialog from './dialogs/ColorMappingDialog';\nimport CompositeChildrenDialog from './dialogs/CompositeChildrenDialog';\nimport CutOffHierarchyDialog from './dialogs/CutOffHierarchyDialog';\nimport DateFilterDialog from './dialogs/DateFilterDialog';\nimport EditPatternDialog from './dialogs/EditPatternDialog';\nimport appendDate from './dialogs/groupDate';\nimport GroupDialog from './dialogs/GroupDialog';\nimport appendNumber from './dialogs/groupNumber';\nimport appendString from './dialogs/groupString';\nimport MappingDialog from './dialogs/MappingDialog';\nimport NumberFilterDialog from './dialogs/NumberFilterDialog';\nimport ReduceDialog from './dialogs/ReduceDialog';\nimport RenameDialog from './dialogs/RenameDialog';\nimport ScriptEditDialog from './dialogs/ScriptEditDialog';\nimport SearchDialog from './dialogs/SearchDialog';\nimport ShowTopNDialog from './dialogs/ShowTopNDialog';\nimport SortDialog from './dialogs/SortDialog';\nimport StringFilterDialog from './dialogs/StringFilterDialog';\nimport {sortMethods} from './dialogs/utils';\nimport WeightsEditDialog from './dialogs/WeightsEditDialog';\nimport {IRankingHeaderContext, IOnClickHandler, IUIOptions, IToolbarAction, IToolbarDialogAddon} from './interfaces';\n\ninterface IDialogClass {\n  new(col: any, dialog: IDialogContext, ...args: any[]): ADialog;\n}\n\nfunction ui(title: string, onClick: IOnClickHandler, options: Partial<IUIOptions> = {}): IToolbarAction {\n  return {title, onClick, options};\n}\n\nfunction uiDialog(title: string, dialogClass: IDialogClass, extraArgs: ((ctx: IRankingHeaderContext) => any[]) = () => [], options: Partial<IUIOptions> = {}): IToolbarAction {\n  return {\n    title,\n    onClick: (col, evt, ctx, level) => {\n      const dialog = new dialogClass(col, dialogContext(ctx, level, evt), ...extraArgs(ctx));\n      dialog.open();\n    }, options\n  };\n}\n\nfunction uiSortMethod(methods: string[]): IToolbarDialogAddon {\n  methods = methods.sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));\n  return {\n    title: 'Sort By',\n    order: 2,\n    append(col, node) {\n      return sortMethods(node, <any>col, methods);\n    }\n  };\n}\n\nconst sort: IToolbarAction = {\n  title: 'Sort', // basic ranking\n  onClick: (col, evt, ctx, level) => {\n    ctx.dialogManager.removeAboveLevel(level);\n    if (!evt.ctrlKey) {\n      col.toggleMySorting();\n      return;\n    }\n    const ranking = col.findMyRanker()!;\n    const current = ranking.getSortCriteria();\n    const order = col.isSortedByMe();\n\n    const isAscByDefault = isSortingAscByDefault(col);\n\n    if (order.priority === undefined) {\n      ranking.sortBy(col, isAscByDefault, current.length);\n      return;\n    }\n    let next: string | undefined = undefined;\n    if (isAscByDefault) {\n      next = order.asc ? 'desc' : undefined;\n    } else {\n      next = !order.asc ? 'asc' : undefined;\n    }\n    ranking.sortBy(col, next === 'asc', next ? order.priority : -1);\n  },\n  options: {\n    mode: 'shortcut',\n    order: 1,\n    featureCategory: 'ranking',\n    featureLevel: 'basic'\n  }\n};\n\nconst sortBy: IToolbarAction = {\n  title: 'Sort By &hellip;', // advanced ranking\n  onClick: (col, evt, ctx, level) => {\n    const dialog = new SortDialog(col, false, dialogContext(ctx, level, evt), ctx);\n    dialog.open();\n  },\n  options: {\n    mode: 'menu',\n    order: 1,\n    featureCategory: 'ranking',\n    featureLevel: 'advanced'\n  }\n};\n\nconst sortGroupBy: IToolbarAction = {\n  title: 'Sort Groups By &hellip;', // advanced ranking\n  onClick: (col, evt, ctx, level) => {\n    const dialog = new SortDialog(col, true, dialogContext(ctx, level, evt), ctx);\n    dialog.open();\n  },\n  options: {\n    mode: 'menu',\n    order: 3,\n    featureCategory: 'ranking',\n    featureLevel: 'advanced'\n  }\n};\n\nconst rename: IToolbarAction = {\n  title: 'Rename &hellip;', // advanced\n  onClick: (col, evt, ctx, level) => {\n    const dialog = new RenameDialog(col, dialogContext(ctx, level, evt));\n    dialog.open();\n  },\n  options: {\n    order: 5,\n    featureCategory: 'ui',\n    featureLevel: 'advanced'\n  }\n};\n\nconst vis: IToolbarAction = {\n  title: 'Visualization &hellip;', // advanced view\n  onClick: (col, evt, ctx, level) => {\n    const dialog = new ChangeRendererDialog(col, dialogContext(ctx, level, evt), ctx);\n    dialog.open();\n  },\n  options: {\n    featureCategory: 'ui',\n    featureLevel: 'advanced'\n  }\n};\n\nconst clone: IToolbarAction = {\n  title: 'Clone', // advanced model\n  onClick: (col, _evt, ctx) => {\n    ctx.dialogManager.removeAll(); // since the column will be removed\n    ctx.provider.takeSnapshot(col);\n  },\n  options: {\n    order: 80,\n    featureCategory: 'model',\n    featureLevel: 'advanced'\n  }\n};\n\nconst remove: IToolbarAction = {\n  title: 'Remove', // advanced model\n  onClick: (col, _evt, ctx) => {\n    ctx.dialogManager.removeAll(); // since the column will be removed\n    const ranking = col.findMyRanker()!;\n    const last = ranking.children.every((d) => isSupportType(d) || d.fixed || d === col);\n    if (!last) {\n      col.removeMe();\n      return;\n    }\n    ctx.provider.removeRanking(ranking);\n    ctx.provider.ensureOneRanking();\n  },\n  options: {\n    order: 90,\n    featureCategory: 'model',\n    featureLevel: 'advanced'\n  }\n};\n\n// basic ranking\nconst group = ui('Group', (col, evt, ctx, level) => {\n  ctx.dialogManager.removeAboveLevel(level);\n\n  if (!evt.ctrlKey) {\n    col.groupByMe();\n    return;\n  }\n  const ranking = col.findMyRanker()!;\n  const current = ranking.getGroupCriteria();\n  const order = current.indexOf(col);\n\n  ranking.groupBy(col, order >= 0 ? -1 : current.length);\n}, {mode: 'shortcut', order: 2, featureCategory: 'ranking', featureLevel: 'basic'});\n\n// advanced ranking\nconst groupBy = ui('Group By &hellip;', (col, evt, ctx, level) => {\n  const dialog = new GroupDialog(col, dialogContext(ctx, level, evt), ctx);\n  dialog.open();\n}, {mode: 'menu', order: 2, featureCategory: 'ranking', featureLevel: 'advanced'});\n\nfunction toggleCompressExpand(col: Column, evt: MouseEvent, ctx: IRankingHeaderContext, level: number) {\n  ctx.dialogManager.removeAboveLevel(level);\n  const mcol = <IMultiLevelColumn>col;\n  mcol.setCollapsed(!mcol.getCollapsed());\n\n  const collapsed = mcol.getCollapsed();\n  const i = <HTMLElement>evt.currentTarget;\n  i.title = collapsed ? 'Expand' : 'Compress';\n  i.classList.toggle(cssClass('action-compress'), !collapsed);\n  i.classList.toggle(cssClass('action-expand'), collapsed);\n  const inner = i.getElementsByTagName('span')[0]!;\n  if (inner) {\n    inner.textContent = i.title;\n  }\n}\n\nconst compress: IToolbarAction = {\n  title: 'Compress',\n  enabled: (col: IMultiLevelColumn) => !col.getCollapsed(),\n  onClick: toggleCompressExpand,\n  options: {featureCategory: 'model', featureLevel: 'advanced'}\n};\n\nconst expand: IToolbarAction = {\n  title: 'Expand',\n  enabled: (col: IMultiLevelColumn) => col.getCollapsed(),\n  onClick: toggleCompressExpand,\n  options: {featureCategory: 'model', featureLevel: 'advanced'}\n};\n\nconst setShowTopN: IToolbarAction = {\n  title: 'Change Show Top N',\n  onClick: (_col, evt, ctx, level) => {\n    const dialog = new ShowTopNDialog(ctx.provider, dialogContext(ctx, level, evt));\n    dialog.open();\n  },\n  options: {\n    featureCategory: 'ui',\n    featureLevel: 'advanced'\n  }\n};\n\nexport const toolbarDialogAddons: {[key: string]: IToolbarDialogAddon} = {\n  sortNumber: uiSortMethod(Object.keys(EAdvancedSortMethod)),\n  sortNumbers: uiSortMethod(Object.keys(EAdvancedSortMethod)),\n  sortBoxPlot: uiSortMethod(Object.keys(ESortMethod)),\n  sortDates: uiSortMethod(Object.keys(EDateSort)),\n  sortGroups: uiSortMethod(['count', 'name']),\n  groupNumber: <IToolbarDialogAddon>{\n    title: 'Split',\n    order: 2,\n    append: appendNumber\n  },\n  groupString: <IToolbarDialogAddon>{\n    title: 'Groups',\n    order: 2,\n    append: appendString\n  },\n  groupDate: <IToolbarDialogAddon>{\n    title: 'Granularity',\n    order: 2,\n    append: appendDate\n  },\n};\n\nexport const toolbarActions: {[key: string]: IToolbarAction} = {\n  vis,\n  group,\n  groupBy,\n  compress,\n  expand,\n  sort,\n  sortBy,\n  sortGroupBy,\n  clone,\n  remove,\n  rename,\n  setShowTopN,\n  search: uiDialog('Search &hellip;', SearchDialog, (ctx) => [ctx.provider], {mode: 'menu+shortcut', order: 4, featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterNumber: uiDialog('Filter &hellip;', NumberFilterDialog, (ctx) => [ctx], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterDate: uiDialog('Filter &hellip;', DateFilterDialog, (ctx) => [ctx], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterString: uiDialog('Filter &hellip;', StringFilterDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterCategorical: uiDialog('Filter &hellip;', CategoricalFilterDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterOrdinal: uiDialog('Filter &hellip;', CategoricalMappingFilterDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  filterBoolean: uiDialog('Filter &hellip;', BooleanFilterDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic'}),\n  colorMapped: uiDialog('Color Mapping &hellip;', ColorMappingDialog, (ctx) => [ctx], {mode: 'menu', featureCategory: 'ui', featureLevel: 'advanced'}),\n  colorMappedCategorical: uiDialog('Color Mapping &hellip;', CategoricalColorMappingDialog, () => [], {mode: 'menu', featureCategory: 'ui', featureLevel: 'advanced'}),\n  script: uiDialog('Edit Combine Script &hellip;', ScriptEditDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'model', featureLevel: 'advanced'}),\n  reduce: uiDialog('Reduce by &hellip;', ReduceDialog, () => [], {featureCategory: 'model', featureLevel: 'advanced'}),\n  cutoff: uiDialog('Set Cut Off &hellip;', CutOffHierarchyDialog, (ctx) => [ctx.idPrefix], {featureCategory: 'model', featureLevel: 'advanced'}),\n  editMapping: uiDialog('Data Mapping &hellip;', MappingDialog, (ctx) => [ctx], {featureCategory: 'model', featureLevel: 'advanced'}),\n  editPattern: uiDialog('Edit Pattern &hellip;', EditPatternDialog, (ctx) => [ctx.idPrefix], {featureCategory: 'model', featureLevel: 'advanced'}),\n  editWeights: uiDialog('Edit Weights &hellip;', WeightsEditDialog, () => [], {mode: 'menu+shortcut', featureCategory: 'model', featureLevel: 'advanced'}),\n  compositeContained: uiDialog('Contained Columns &hellip;', CompositeChildrenDialog, (ctx) => [ctx], {featureCategory: 'model', featureLevel: 'advanced'}),\n  splitCombined: ui('Split Combined Column', (col, _evt, ctx, level) => {\n    ctx.dialogManager.removeAboveLevel(level - 1); // close itself\n    // split the combined column into its children\n    (<CompositeColumn>col).children.reverse().forEach((c) => col.insertAfterMe(c));\n    col.removeMe();\n  }, {featureCategory: 'model', featureLevel: 'advanced'}),\n  invertSelection: ui('Invert Selection', (col, _evt, ctx, level) => {\n    ctx.dialogManager.removeAboveLevel(level - 1); // close itself\n    const s = ctx.provider.getSelection();\n    const order = Array.from(col.findMyRanker()!.getOrder());\n    if (s.length === 0) {\n      ctx.provider.setSelection(order);\n      return;\n    }\n    const ss = new Set(s);\n    const others = order.filter((d) => !ss.has(d));\n    ctx.provider.setSelection(others);\n  }, {featureCategory: 'model', featureLevel: 'advanced'})\n};\n\nfunction sortActions(a: IToolbarAction, b: IToolbarAction) {\n  if (a.options.order === b.options.order) {\n    return a.title.toString().localeCompare(b.title.toString());\n  }\n  return (a.options.order || 50) - (b.options.order || 50);\n}\n\nfunction getFullToolbar(col: Column, ctx: IRankingHeaderContext) {\n  const cache = ctx.caches.toolbar;\n  if (cache.has(col.desc.type)) {\n    return cache.get(col.desc.type)!;\n  }\n\n  const keys = getAllToolbarActions(col);\n\n  if (!col.fixed) {\n    keys.push('remove');\n  }\n  {\n    const possible = ctx.getPossibleRenderer(col);\n    if (possible.item.length > 2 || possible.group.length > 2 || possible.summary.length > 2) { // default always possible\n      keys.push('vis');\n    }\n  }\n\n  const actions = ctx.resolveToolbarActions(col, keys);\n\n  const r = Array.from(new Set(actions)).sort(sortActions);\n  cache.set(col.desc.type, r);\n  return r;\n}\n\n/** @internal */\nexport function getToolbar(col: Column, ctx: IRankingHeaderContext) {\n  const toolbar = getFullToolbar(col, ctx);\n  const flags = ctx.flags;\n\n  return toolbar.filter((a) => {\n    if (a.enabled && !a.enabled(col)) {\n      return false;\n    }\n    // level is basic or not one of disabled features\n    return a.options.featureLevel === 'basic' || !((flags.advancedModelFeatures === false && a.options.featureCategory === 'model') || (flags.advancedRankingFeatures === false && a.options.featureCategory === 'ranking') || (flags.advancedUIFeatures === false && a.options.featureCategory === 'ui'));\n  });\n}\n\n/** @internal */\nexport function getToolbarDialogAddons(col: Column, key: string, ctx: IRankingHeaderContext) {\n  const cacheKey = `${col.desc.type}@${key}`;\n  const cacheAddon = ctx.caches.toolbarAddons;\n  if (cacheAddon.has(cacheKey)) {\n    return cacheAddon.get(cacheKey)!;\n  }\n\n  const keys = getAllToolbarDialogAddons(col, key);\n  const actions = ctx.resolveToolbarDialogAddons(col, keys);\n\n  const r = Array.from(new Set(actions)).sort((a, b) => {\n    if (a.order === b.order) {\n      return a.title.localeCompare(b.title);\n    }\n    return (a.order || 50) - (b.order || 50);\n  });\n  cacheAddon.set(cacheKey, r);\n  return r;\n}\n\n/** @internal */\nexport function isSortAble(col: Column, ctx: IRankingHeaderContext) {\n  const toolbar = getFullToolbar(col, ctx);\n  return toolbar.find((d) => d === sort || d === sortBy || d.title === sort.title || d.title.startsWith('Sort By')) != null;\n}\n\n/** @internal */\nexport function isGroupAble(col: Column, ctx: IRankingHeaderContext) {\n  const toolbar = getFullToolbar(col, ctx);\n  return toolbar.find((d) => d === group || d === groupBy || d.title === group.title || d.title.startsWith('Group By')) != null;\n}\n\n/** @internal */\nexport function isGroupSortAble(col: Column, ctx: IRankingHeaderContext) {\n  const toolbar = getFullToolbar(col, ctx);\n  return toolbar.find((d) => d === sortGroupBy || d.title === sortGroupBy.title || d.title.startsWith('Sort Groups By')) != null;\n}\n","import {NumberColumn} from '../../model';\nimport {IDialogContext} from './ADialog';\nimport {round, getNumberOfBins} from '../../internal';\nimport {forEach} from '../../renderer/utils';\nimport {cssClass} from '../../styles';\nimport {IToolbarDialogAddonHandler} from '../interfaces';\n\n\n/** @internal */\nexport default function groupNumber(col: NumberColumn, node: HTMLElement, dialog: IDialogContext): IToolbarDialogAddonHandler {\n  const domain = col.getMapping().domain;\n  const before = col.getGroupThresholds();\n  const isThreshold = before.length <= 1;\n  const ranking =  col.findMyRanker()!;\n  node.insertAdjacentHTML('beforeend', `\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"radio\" name=\"threshold\" value=\"threshold\" ${isThreshold ? 'checked' : ''}>\n      <span>at&nbsp;<input type=\"number\" size=\"10\" id=\"${dialog.idPrefix}N1\" value=\"${before.length > 0 ? before[0] : round((domain[1] - domain[0]) / 2, 2)}\"\n          required min=\"${domain[0]}\" max=\"${domain[1]}\" step=\"any\" ${!isThreshold ? 'disabled': ''}>\n      </span>\n    </label>\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"radio\" name=\"threshold\" value=\"bins\" ${!isThreshold ? 'checked' : ''}>\n      <span> in&nbsp;<input type=\"number\" size=\"5\" id=\"${dialog.idPrefix}N2\" value=\"${before.length > 1 ? before.length : getNumberOfBins(ranking.getOrderLength())}\"\n          required min=\"2\" step=\"1\" ${isThreshold ? 'disabled': ''}>&nbsp;bins\n      </span>\n    </label>\n  `);\n\n  const threshold = <HTMLInputElement>node.querySelector(`#${dialog.idPrefix}N1`);\n  const bins = <HTMLInputElement>node.querySelector(`#${dialog.idPrefix}N2`);\n\n  forEach(node, 'input[name=threshold]', (d: HTMLInputElement) => {\n    d.addEventListener('change', () => {\n      const isThreshold = d.value === 'threshold';\n      threshold.disabled = !isThreshold;\n      bins.disabled = isThreshold;\n    }, { passive: true });\n  });\n\n  return {\n    elems: `input[name=threshold], #${dialog.idPrefix}N1, #${dialog.idPrefix}N2`,\n    submit() {\n      const isThreshold = node.querySelector<HTMLInputElement>('input[name=threshold]:checked')!.value === 'threshold';\n      if (isThreshold) {\n        col.setGroupThresholds([threshold.valueAsNumber]);\n        return true;\n      }\n      const count = parseInt(bins.value, 10);\n      const delta = (domain[1] - domain[0]) / count;\n      let act = domain[0] + delta;\n      const thresholds = [act];\n      for (let i = 1; i < count - 1; ++i) {\n        act += delta;\n        thresholds.push(act);\n      }\n      col.setGroupThresholds(thresholds);\n      return true;\n    },\n    cancel() {\n      col.setGroupThresholds(before);\n    },\n    reset() {\n      const value = round((domain[1] - domain[0]) / 2, 2);\n      threshold.value = value.toString();\n      threshold.disabled = false;\n      bins.value = getNumberOfBins(ranking.getOrderLength()).toString();\n      bins.disabled = true;\n      node.querySelector<HTMLInputElement>('input[name=threshold][value=threshold]')!.checked = true;\n    }\n  };\n}\n","import {IDialogContext} from './ADialog';\nimport {StringColumn, EStringGroupCriteriaType} from '../../model';\nimport {cssClass} from '../../styles';\nimport {IToolbarDialogAddonHandler} from '../interfaces';\n\n/** @internal */\nexport default function groupString(col: StringColumn, node: HTMLElement, dialog: IDialogContext): IToolbarDialogAddonHandler {\n  const current = col.getGroupCriteria();\n  const {type, values} = current;\n\n  node.insertAdjacentHTML('beforeend', `\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"radio\" name=\"${dialog.idPrefix}groupString\" value=\"${EStringGroupCriteriaType.value}\" id=\"${dialog.idPrefix}VAL\" ${type === EStringGroupCriteriaType.value ? 'checked' : ''}>\n      <span>Use text value</span>\n    </label>\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"radio\" name=\"${dialog.idPrefix}groupString\" value=\"${EStringGroupCriteriaType.startsWith}\" id=\"${dialog.idPrefix}RW\" ${type === EStringGroupCriteriaType.startsWith ? 'checked' : ''}>\n      <span>Text starts with &hellip;</span>\n    </label>\n    <label class=\"${cssClass('checkbox')}\">\n      <input type=\"radio\" name=\"${dialog.idPrefix}groupString\" value=\"${EStringGroupCriteriaType.regex}\" id=\"${dialog.idPrefix}RE\" ${type === EStringGroupCriteriaType.regex ? 'checked' : ''}>\n      <span>Use regular expressions</span>\n    </label>\n    <textarea required rows=\"5\" placeholder=\"e.g. Test,a.*\" id=\"${dialog.idPrefix}T\">${values.map((value) => value instanceof RegExp ? value.source : value).join('\\n')}</textarea>\n  `);\n\n  const valueRadioButton = node.querySelector<HTMLInputElement>(`#${dialog.idPrefix}VAL`)!;\n  const startsWithRadioButton = node.querySelector<HTMLInputElement>(`#${dialog.idPrefix}RW`)!;\n  const regexRadioButton = node.querySelector<HTMLInputElement>(`#${dialog.idPrefix}RE`)!;\n  const text = node.querySelector<HTMLTextAreaElement>(`#${dialog.idPrefix}T`)!;\n\n  const showOrHideTextarea = (show: boolean) => {\n    text.style.display = show ? null : 'none';\n  };\n\n  showOrHideTextarea(type !== EStringGroupCriteriaType.value);\n  valueRadioButton.onchange = () => showOrHideTextarea(!valueRadioButton.checked);\n  startsWithRadioButton.onchange = () => showOrHideTextarea(startsWithRadioButton.checked);\n  regexRadioButton.onchange = () => showOrHideTextarea(regexRadioButton.checked);\n\n  text.addEventListener('change', () => {\n    const items: (string | RegExp)[] = text.value.trim().split('\\n').map((d) => d.trim()).filter((d) => d.length > 0);\n    text.setCustomValidity(!valueRadioButton.checked && items.length === 0 ? 'At least one entry is required' : '');\n  });\n\n  return {\n    elems: [text, valueRadioButton, startsWithRadioButton, regexRadioButton],\n    submit() {\n      const checkedNode = node.querySelector<HTMLInputElement>(`input[name=\"${dialog.idPrefix}groupString\"]:checked`)!;\n      const newType = <EStringGroupCriteriaType>checkedNode.value;\n      let items: (string | RegExp)[] = text.value.trim().split('\\n').map((d) => d.trim()).filter((d) => d.length > 0);\n\n      if (newType !== EStringGroupCriteriaType.value) {\n        const invalid = items.length === 0;\n        text.setCustomValidity(invalid ? 'At least one entry is required' : '');\n        if (invalid) {\n          (<any>text).reportValidity(); // typedoc not uptodate\n          return false;\n        }\n      }\n      if (newType === EStringGroupCriteriaType.regex) {\n        items = items.map((d) => new RegExp(d.toString(), 'gm'));\n      }\n      col.setGroupCriteria({\n        type: newType,\n        values: items\n      });\n      return true;\n    },\n    cancel() {\n      col.setGroupCriteria(current);\n    },\n    reset() {\n      text.value = '';\n      startsWithRadioButton.checked = true;\n    }\n  };\n}\n","import {DateColumn, IDateGranularity} from '../../model';\nimport {cssClass} from '../../styles';\nimport {IToolbarDialogAddonHandler} from '../interfaces';\nimport {defaultDateGrouper} from '../../model/internalDate';\n\n\n/** @internal */\nexport default function appendDate(col: DateColumn, node: HTMLElement): IToolbarDialogAddonHandler {\n  const before = col.getDateGrouper();\n\n  let html = '';\n  for (const g of ['century', 'decade', 'year', 'month', 'week', 'day_of_week', 'day_of_month', 'day_of_year', 'hour', 'minute', 'second']) {\n    html += `<label class=\"${cssClass('checkbox')}\">\n    <input type=\"radio\" name=\"granularity\" value=\"${g}\" ${before.granularity === g ? 'checked' : ''}>\n    <span> by ${g} </span>\n  </label>`;\n  }\n  html += `<label class=\"${cssClass('checkbox')}\">\n    <input type=\"checkbox\" name=\"circular\" ${before.circular ? 'checked' : ''}>\n    <span> Circular </span>\n  </label>`;\n\n  node.insertAdjacentHTML('beforeend', html);\n  const circular = node.querySelector<HTMLInputElement>('input[name=circular]')!;\n\n  return {\n    elems: 'input[name=granularity],input[name=circular]',\n    submit() {\n      const granularity = <IDateGranularity> node.querySelector<HTMLInputElement>('input[name=granularity]:checked')!.value;\n      col.setDateGrouper({\n        granularity,\n        circular: circular.checked\n      });\n      return true;\n    },\n    cancel() {\n      col.setDateGrouper(before);\n    },\n    reset() {\n      const r = defaultDateGrouper();\n      circular.checked = r.circular;\n      const g = node.querySelector<HTMLInputElement>(`input[name=granularity][value=\"${r.granularity}\"]`)!;\n      g.checked = true;\n    }\n  };\n}\n","import {renderers} from './renderer/renderers';\nimport {toolbarActions, toolbarDialogAddons} from './ui/toolbar';\nimport {Column, Ranking, IGroupData, IGroupItem} from './model';\nimport {IDataProvider} from './provider';\nimport {ICellRendererFactory, ERenderMode} from './renderer';\nimport {IToolbarAction, IToolbarDialogAddon} from './ui';\n\n/**\n * custom height implementation logic\n */\nexport interface IDynamicHeight {\n  /**\n   * default height for a row for optimized styling\n   */\n  defaultHeight: number;\n\n  /**\n   * returns the height in pixel for the given row\n   * @param {IGroupItem | IGroupData} item the item to show\n   * @returns {number} its height in pixel\n   */\n  height(item: IGroupItem | IGroupData): number;\n\n  /**\n   * returns the padding in pixel after the given row\n   * @param {IGroupItem | IGroupData | null} item item to show\n   * @returns {number} its padding in pixel\n   */\n  padding(item: IGroupItem | IGroupData | null): number;\n}\n\nexport interface ILineUpFlags {\n  /**\n   * optimization flag to disable frozen columns for optimizing rendering performance\n   * @default true\n   */\n  disableFrozenColumns: boolean;\n  /**\n   * flag whether advanced ranking features are enabled\n   * @default true\n   */\n  advancedRankingFeatures: boolean;\n  /**\n   * flag whether advanced model features are enabled\n   * @default true\n   */\n  advancedModelFeatures: boolean;\n  /**\n   * flag whether advanced UI features are enabled\n   * @default true\n   */\n  advancedUIFeatures: boolean;\n}\n\nexport interface IToolbarLookup<T> {\n  [key: string]: T;\n}\n\nexport interface ILivePreviewOptions {\n  search: boolean;\n  filter: boolean;\n  vis: boolean;\n  sort: boolean;\n  group: boolean;\n  groupSort: boolean;\n  colorMapping: boolean;\n  dataMapping: boolean;\n  reduce: boolean;\n  rename: boolean;\n  cutOff: boolean;\n}\n\nexport interface ILineUpOptions {\n  /**\n   * option to enable/disable showing a summary (histogram, ...) in the header\n   * @default true\n   */\n  summaryHeader: boolean;\n  /**\n   * option to enable/disable animated transitions\n   * @default true\n   */\n  animated: boolean;\n  /**\n   * option to enforce that the whole row is shown upon hover without overflow hidden\n   * @default false\n   */\n  expandLineOnHover: boolean;\n  /**\n   * option to enable/disable the panel\n   * @default true\n   */\n  sidePanel: boolean;\n  /**\n   * option to specify whether the panel should be collapsed by default\n   * @default false\n   */\n  sidePanelCollapsed: boolean;\n  /**\n   * show the sorting and grouping hierarchy indicators in the side panel\n   * @default true\n   */\n  hierarchyIndicator: boolean;\n\n  /**\n   * flag whether dialogs should confirm or cancel on clicking the background\n   * @default cancel\n   */\n  onDialogBackgroundClick: 'cancel' | 'confirm';\n\n  /**\n   * flag whether to shows filter previews as soon as the user changes the filter in the dialog\n   * @default {search: true,filter: true, vis: true,sort: true, group: true, groupSort: true, colorMapping: true}\n   */\n  livePreviews: Partial<ILivePreviewOptions>;\n\n  /**\n   * option to specify the default slope graph mode\n   * @default 'item'\n   */\n  defaultSlopeGraphMode: 'item' | 'band';\n\n  /**\n   * how many degrees should a label be rotated in case of narrow columns\n   * @default 0 no rotation\n   */\n  labelRotation: number;\n\n  /**\n   * height of a row\n   * @default 18\n   */\n  rowHeight: number;\n  /**\n   * padding between two rows\n   * @default 2\n   */\n  rowPadding: number;\n  /**\n   * height of an aggregated group in pixel\n   * @default 40\n   */\n  groupHeight: number;\n  /**\n   * padding between two groups in pixel\n   * @default 5\n   */\n  groupPadding: number;\n\n  /**\n   * custom function to compute the level of detail for a row\n   * @param {number} rowIndex the current row index to be rendered\n   * @returns {\"high\" | \"low\"}\n   */\n  levelOfDetail: (rowIndex: number) => 'high' | 'low';\n  /**\n   * custom function to compute the height of a row (group or item)\n   * @param {(IGroupItem | IGroupData)[]} data the data to render\n   * @param {Ranking} ranking the ranking of the data\n   * @returns {IDynamicHeight | null} the height compute function or null to use the default\n   */\n  dynamicHeight: (data: (IGroupItem | IGroupData)[], ranking: Ranking) => IDynamicHeight | null;\n  /**\n   * custom function to be called when updating a HTML row\n   * @param {HTMLElement} row node element to be updated\n   * @param {number} rowIndex row index to be rendered in the row\n   */\n  customRowUpdate: (row: HTMLElement, rowIndex: number) => void;\n\n  /**\n   * register custom toolbar actions and dialog addons\n   */\n  toolbarActions: IToolbarLookup<IToolbarAction>;\n  toolbarDialogAddons: IToolbarLookup<IToolbarDialogAddon>;\n\n  /**\n   * hook for postprocess the toolbar actions for a column\n   */\n  resolveToolbarActions: (col: Column, keys: string[], lookup: IToolbarLookup<IToolbarAction>) => IToolbarAction[];\n  /**\n   * hook for postprocess the toolbar dialog addons for a column\n   */\n  resolveToolbarDialogAddons: (col: Column, keys: string[], lookup: IToolbarLookup<IToolbarDialogAddon>) => IToolbarDialogAddon[];\n\n  /**\n   * register custom renderer factories\n   */\n  renderers: {[type: string]: ICellRendererFactory};\n\n  /**\n   * custom check whether a given renderer can render the given column in the given mode\n   */\n  canRender: (type: string, renderer: ICellRendererFactory, col: Column, mode: ERenderMode) => boolean;\n\n  /**\n   * custom flags for optimization\n   */\n  flags: Partial<ILineUpFlags>;\n\n  /**\n   * ignore incompatible browser and always show (on own risk)\n   * @default false\n   */\n  ignoreUnsupportedBrowser: boolean;\n}\n\nexport interface ITaggleOptions extends ILineUpOptions {\n  /**\n   * whether the overview mode is enabled by default\n   * @default false\n   */\n  overviewMode: boolean;\n}\n\nexport interface ILineUpLike {\n  readonly node: HTMLElement;\n  readonly data: IDataProvider;\n\n  dump(): any;\n\n  destroy(): void;\n}\n\nfunction resolveToolbarActions(col: Column, keys: string[], lookup: IToolbarLookup<IToolbarAction>) {\n  const actions: IToolbarAction[] = [];\n\n  keys.forEach((key) => {\n    if (lookup.hasOwnProperty(key)) {\n      actions.push(lookup[key]);\n    } else {\n      console.warn(`cannot find toolbar action of type: \"${col.desc.type}\" with key \"${key}\"`);\n    }\n  });\n  return actions;\n}\n\nfunction resolveToolbarDialogAddons(col: Column, keys: string[], lookup: IToolbarLookup<IToolbarDialogAddon>) {\n  const actions: IToolbarDialogAddon[] = [];\n\n  keys.forEach((key) => {\n    if (lookup.hasOwnProperty(key)) {\n      actions.push(lookup[key]);\n    } else {\n      console.warn(`cannot find toolbar dialog addon of type: \"${col.desc.type}\" with key \"${key}\"`);\n    }\n  });\n  return actions;\n}\n\n\nexport function defaultOptions(): ITaggleOptions {\n  return {\n    toolbarActions,\n    toolbarDialogAddons,\n    resolveToolbarActions,\n    resolveToolbarDialogAddons,\n    renderers: Object.assign({}, renderers),\n    canRender: () => true,\n\n    labelRotation: 0,\n    summaryHeader: true,\n    animated: true,\n    expandLineOnHover: false,\n    sidePanel: true,\n    sidePanelCollapsed: false,\n    hierarchyIndicator: true,\n    defaultSlopeGraphMode: 'item',\n    overviewMode: false,\n\n    livePreviews: {\n      search: true,\n      filter: true,\n      vis: true,\n      sort: true,\n      group: true,\n      groupSort: true,\n      colorMapping: true\n    },\n    onDialogBackgroundClick: 'cancel',\n\n    rowHeight: 18,\n    groupHeight: 40,\n    groupPadding: 5,\n    rowPadding: 2,\n\n    levelOfDetail: () => 'high',\n    customRowUpdate: () => undefined,\n    dynamicHeight: () => null,\n\n    flags: {\n      disableFrozenColumns: true, //disable by default for speed navigator.userAgent.includes('Firefox/52') // disable by default in Firefox ESR 52\n      advancedRankingFeatures: true,\n      advancedModelFeatures: true,\n      advancedUIFeatures: true,\n    },\n\n    ignoreUnsupportedBrowser: false\n  };\n}\n","import {detect} from 'detect-browser';\n\nexport const SUPPORTED_FIREFOX_VERSION = 57;\nexport const SUPPORTED_CHROME_VERSION = 64;\nexport const SUPPORTED_EDGE_VERSION = 16;\n\n/**\n * @internal\n */\nexport function getUnsupportedBrowserError() {\n  const info = detect();\n  if (!info || !info.version) {\n    return 'browser cannot be detected';\n  }\n  const prefix = `unsupported browser detected:`;\n  switch (info.name) {\n    case 'firefox':\n      const fVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n      if (fVersion <= SUPPORTED_FIREFOX_VERSION && fVersion !== 52) { // ESR\n        return `${prefix} Firefox ${info.version} (&lt; ${SUPPORTED_FIREFOX_VERSION})`;\n      }\n      return null;\n    case 'edge':\n      const eVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n      if (eVersion <= SUPPORTED_EDGE_VERSION) {\n        return `${prefix} Edge ${info.version} (&lt; ${SUPPORTED_EDGE_VERSION})`;\n      }\n      return null;\n    case 'chrome':\n      const cVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n      if (cVersion <= SUPPORTED_CHROME_VERSION) {\n        return `${prefix} Chrome ${info.version} (&lt; ${SUPPORTED_CHROME_VERSION})`;\n      }\n      return null;\n    case 'ie':\n      return `${prefix} Internet Explorer`;\n  }\n  console.warn('unknown browser detected', info, 'assuming fine...');\n  return null;\n}\n/**\n * checks whether the current browser is compatible with lineupjs\n * @return boolean\n */\nexport function isBrowserSupported() {\n  return getUnsupportedBrowserError() == null;\n}\n\n","import ADialog from './ADialog';\nimport Column from '../../model';\nimport {cssClass} from '../../styles';\nimport {ILivePreviewOptions} from '../../config';\nimport {AEventDispatcher, IEventListener} from '../../internal';\n\n/**\n * emitted a dialog is opened\n * @asMemberOf DialogManager\n * @param dialog the opened dialog\n * @event\n */\nexport declare function dialogOpened(dialog: ADialog): void;\n\n/**\n * emitted a dialog is closed\n * @asMemberOf DialogManager\n * @param dialog the closed dialog\n * @param action the action how the dialog was closed\n * @event\n */\nexport declare function dialogClosed(dialog: ADialog, action: 'cancel' | 'confirm'): void;\n\n\nexport default class DialogManager extends AEventDispatcher {\n  static readonly EVENT_DIALOG_OPENED = 'dialogOpened';\n  static readonly EVENT_DIALOG_CLOSED = 'dialogClosed';\n\n  private readonly escKeyListener = (evt: KeyboardEvent) => {\n    if (evt.which === 27) {\n      this.removeLast();\n    }\n  }\n\n  private readonly openDialogs: ADialog[] = [];\n  readonly node: HTMLElement;\n  readonly livePreviews: Partial<ILivePreviewOptions>;\n  readonly onDialogBackgroundClick: 'cancel' | 'confirm';\n\n  constructor(options: {doc: Document, livePreviews: Partial<ILivePreviewOptions>, onDialogBackgroundClick: 'cancel' | 'confirm'}) {\n    super();\n    const doc = options.doc;\n    this.livePreviews = options.livePreviews;\n    this.onDialogBackgroundClick = options.onDialogBackgroundClick;\n    this.node = doc.createElement('div');\n    this.node.classList.add(cssClass('backdrop'));\n    this.node.innerHTML = `<div class=\"${cssClass('backdrop-bg')}\"></div>`;\n    this.node.onclick = () => {\n      this.removeAll();\n    };\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([DialogManager.EVENT_DIALOG_CLOSED, DialogManager.EVENT_DIALOG_OPENED]);\n  }\n\n  on(type: typeof DialogManager.EVENT_DIALOG_OPENED, listener: typeof dialogOpened | null): this;\n  on(type: typeof DialogManager.EVENT_DIALOG_CLOSED, listener: typeof dialogClosed | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  get maxLevel() {\n    return this.openDialogs.reduce((acc, a) => Math.max(acc, a.level), 0);\n  }\n\n\n  setHighlight(mask: {left: number, top: number, width: number, height: number}) {\n    const area = <HTMLElement>this.node.firstElementChild;\n    // @see http://bennettfeely.com/clippy/ -> select `Frame` example\n    // use webkit prefix for safari\n    area.style.clipPath = (<any>area.style).webkitClipPath = `polygon(\n      0% 0%,\n      0% 100%,\n      ${mask.left}px 100%,\n      ${mask.left}px ${mask.top}px,\n      ${mask.left + mask.width}px ${mask.top}px,\n      ${mask.left + mask.width}px ${mask.top + mask.height}px,\n      ${mask.left}px ${mask.top + mask.height}px,\n      ${mask.left}px 100%,\n      100% 100%,\n      100% 0%\n    )`;\n  }\n\n  setHighlightColumn(column: Column) {\n    const root = <HTMLElement>this.node.parentElement!;\n    if (!root) {\n      this.clearHighlight();\n      return;\n    }\n    const header = <HTMLElement>root.querySelector(`.${cssClass('header')}[data-col-id=\"${column.id}\"]`);\n    if (!header) {\n      this.clearHighlight();\n      return;\n    }\n    const base = header.getBoundingClientRect();\n    const offset = root.getBoundingClientRect();\n    this.setHighlight({\n      left: base.left - offset.left,\n      top: base.top - offset.top,\n      width: base.width,\n      height: offset.height\n    });\n  }\n\n  clearHighlight() {\n    const area = <HTMLElement>this.node.firstElementChild;\n    area.style.clipPath = null;\n  }\n\n  private removeLast() {\n    if (this.openDialogs.length === 0) {\n      return;\n    }\n    this.remove(this.openDialogs[this.openDialogs.length - 1]);\n  }\n\n  removeAll() {\n    if (this.openDialogs.length === 0) {\n      return;\n    }\n    const all = this.openDialogs.splice(0, this.openDialogs.length);\n    all.reverse().forEach((d) => d.cleanUp(this.onDialogBackgroundClick));\n    this.takeDown();\n  }\n\n  triggerDialogClosed(dialog: ADialog, action: 'cancel' | 'confirm') {\n    this.fire(DialogManager.EVENT_DIALOG_CLOSED, dialog, action);\n  }\n\n  remove(dialog: ADialog, handled = false) {\n    const index = this.openDialogs.indexOf(dialog);\n    if (index < 0) {\n      return false;\n    }\n    // destroy self and all levels below that = after that\n    const destroyed = this.openDialogs.splice(index, this.openDialogs.length - index);\n    destroyed.reverse().forEach((d) => d.cleanUp(handled ? 'handled' : this.onDialogBackgroundClick));\n    while (handled && this.openDialogs.length > 0 && this.openDialogs[this.openDialogs.length - 1].autoClose) {\n      const dialog = this.openDialogs.pop()!;\n      dialog.cleanUp(this.onDialogBackgroundClick);\n    }\n\n    if (this.openDialogs.length === 0) {\n      this.takeDown();\n    }\n    return true;\n  }\n\n  removeAboveLevel(level: number) {\n    // hide all dialogs which have a higher or equal level to the newly opened one\n    this.openDialogs.filter((d) => d.level >= level).reverse().forEach((d) => this.remove(d));\n  }\n\n  removeLike(dialog: ADialog) {\n    const similar = this.openDialogs.find((d) => dialog.equals(d));\n    if (!similar) {\n      return false;\n    }\n    this.remove(similar);\n    return true;\n  }\n\n  private setUp() {\n    this.node.ownerDocument!.addEventListener('keyup', this.escKeyListener, {\n      passive: true\n    });\n    this.node.style.display = 'block';\n  }\n\n  private takeDown() {\n    this.clearHighlight();\n    this.node.ownerDocument!.removeEventListener('keyup', this.escKeyListener);\n    this.node.style.display = null;\n  }\n\n  push(dialog: ADialog) {\n    this.removeAboveLevel(dialog.level);\n\n    if (this.openDialogs.length === 0) {\n      this.setUp();\n    }\n\n    this.openDialogs.push(dialog);\n    this.fire(DialogManager.EVENT_DIALOG_OPENED, dialog);\n  }\n}\n","export { default as KeyFinder } from './KeyFinder';\r\n/**\r\n * different row animation modes\r\n */\r\nexport var EAnimationMode;\r\n(function (EAnimationMode) {\r\n    /**\r\n     * plain update existed both before and after\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE\"] = 0] = \"UPDATE\";\r\n    /**\r\n     * exists both before and after but wasn't visible yet thus waas created\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE_CREATE\"] = 1] = \"UPDATE_CREATE\";\r\n    /**\r\n     * exists both before and after is visible but not needed anymore and thus removed\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE_REMOVE\"] = 2] = \"UPDATE_REMOVE\";\r\n    /**\r\n     * row appears\r\n     */\r\n    EAnimationMode[EAnimationMode[\"SHOW\"] = 3] = \"SHOW\";\r\n    /**\r\n     * row disappears\r\n     */\r\n    EAnimationMode[EAnimationMode[\"HIDE\"] = 4] = \"HIDE\";\r\n})(EAnimationMode || (EAnimationMode = {}));\r\nvar NO_CHANGE_DELTA = 1;\r\nexport function noAnimationChange(_a, previousHeight, currentHeight) {\r\n    var previous = _a.previous, mode = _a.mode, nodeY = _a.nodeY, current = _a.current;\r\n    // sounds like the same\r\n    var prev = previous.height == null ? previousHeight : previous.height;\r\n    var curr = current.height == null ? currentHeight : current.height;\r\n    return mode === EAnimationMode.UPDATE && (Math.abs(previous.y - nodeY) <= NO_CHANGE_DELTA) && (Math.abs(prev - curr) <= NO_CHANGE_DELTA);\r\n}\r\n/**\r\n * maximal duration of all animations + extra waiting before e.g. rows are really removed\r\n * @type {number}\r\n */\r\nvar MAX_ANIMATION_TIME = 1100;\r\nexport var defaultPhases = [\r\n    {\r\n        delay: 0,\r\n        apply: function (_a) {\r\n            var mode = _a.mode, previous = _a.previous, nodeY = _a.nodeY, current = _a.current, node = _a.node;\r\n            node.dataset.animation = EAnimationMode[mode].toLowerCase();\r\n            node.style.transform = \"translate(0, \" + (previous.y - nodeY) + \"px)\";\r\n            if (mode === EAnimationMode.SHOW) {\r\n                // already target height\r\n                node.style.height = current.height !== null ? current.height + \"px\" : null;\r\n            }\r\n            else { // always set previous height for default height changes\r\n                node.style.height = previous.height + \"px\";\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '0' : (mode === EAnimationMode.HIDE ? '1' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: 10,\r\n        apply: function (_a) {\r\n            var mode = _a.mode, current = _a.current, nodeY = _a.nodeY, node = _a.node;\r\n            // null for added/update since already at the right position\r\n            node.style.transform = (mode === EAnimationMode.HIDE || mode === EAnimationMode.UPDATE_REMOVE) ? \"translate(0, \" + (current.y - nodeY) + \"px)\" : null;\r\n            if (mode !== EAnimationMode.HIDE) { // keep height for removal\r\n                node.style.height = current.height !== null ? current.height + \"px\" : null;\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '1' : (mode === EAnimationMode.HIDE ? '0' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: MAX_ANIMATION_TIME,\r\n        apply: function (_a) {\r\n            var node = _a.node;\r\n            delete node.dataset.animation;\r\n            node.style.opacity = null;\r\n            node.style.transform = null;\r\n        }\r\n    }\r\n];\r\n//# sourceMappingURL=index.js.map","import {getUnsupportedBrowserError, SUPPORTED_CHROME_VERSION, SUPPORTED_EDGE_VERSION, SUPPORTED_FIREFOX_VERSION} from '../browser';\nimport {ILineUpLike} from '../config';\nimport {AEventDispatcher, IEventListener, clear} from '../internal';\nimport {Column} from '../model';\nimport {DataProvider, IDataProviderDump} from '../provider';\nimport {cssClass} from '../styles';\nimport DialogManager from './dialogs/DialogManager';\nimport {ADialog} from './dialogs';\n\n\n/**\n * emitted when the highlight changes\n * @asMemberOf ALineUp\n * @param dataIndex the highlghted data index or -1 for none\n * @event\n */\nexport declare function highlightChanged(dataIndex: number): void;\n\n/**\n * emitted when the selection changes\n * @asMemberOf ALineUp\n * @param dataIndices the selected data indices\n * @event\n */\nexport declare function selectionChanged(dataIndices: number[]): void;\n/**\n * emitted a dialog is opened\n * @asMemberOf ALineUp\n * @param dialog the opened dialog\n * @event\n */\nexport declare function dialogOpened(dialog: ADialog): void;\n/**\n * emitted a dialog is closed\n * @asMemberOf ALineUp\n * @param dialog the closed dialog\n * @param action the action how the dialog was closed\n * @event\n */\nexport declare function dialogClosed(dialog: ADialog, action: 'cancel' | 'confirm'): void;\n\nexport abstract class ALineUp extends AEventDispatcher implements ILineUpLike {\n  static readonly EVENT_SELECTION_CHANGED = DataProvider.EVENT_SELECTION_CHANGED;\n  static readonly EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\n  static readonly EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\n  static readonly EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\n\n  private highlightListeners = 0;\n\n  readonly isBrowserSupported: boolean;\n\n  constructor(public readonly node: HTMLElement, private _data: DataProvider, ignoreIncompatibleBrowser: boolean) {\n    super();\n\n    const error = getUnsupportedBrowserError();\n    this.isBrowserSupported = ignoreIncompatibleBrowser || !error;\n\n    if (!this.isBrowserSupported) {\n      this.node.classList.add(cssClass('unsupported-browser'));\n      this.node.innerHTML = `<span>${error}</span>\n      <div class=\"${cssClass('unsupported-browser')}\">\n        <a href=\"https://www.mozilla.org/en-US/firefox/\" rel=\"noopener\" target=\"_blank\" data-browser=\"firefox\" data-version=\"${SUPPORTED_FIREFOX_VERSION}\"></a>\n        <a href=\"https://www.google.com/chrome/index.html\" rel=\"noopener\" target=\"_blank\" data-browser=\"chrome\" data-version=\"${SUPPORTED_CHROME_VERSION}\" title=\"best support\"></a>\n        <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\" rel=\"noopener\" target=\"_blank\" data-browser=\"edge\" data-version=\"${SUPPORTED_EDGE_VERSION}\"></a>\n      </div><span>use the <code>ignoreUnsupportedBrowser=true</code> option to ignore this error at your own risk</span>`;\n    }\n\n    this.forward(_data, `${DataProvider.EVENT_SELECTION_CHANGED}.main`);\n    _data.on(`${DataProvider.EVENT_BUSY}.busy`, (busy) => this.node.classList.toggle(cssClass('busy'), busy));\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([ALineUp.EVENT_HIGHLIGHT_CHANGED, ALineUp.EVENT_SELECTION_CHANGED, ALineUp.EVENT_DIALOG_OPENED, ALineUp.EVENT_DIALOG_CLOSED]);\n  }\n\n  on(type: typeof ALineUp.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\n  on(type: typeof ALineUp.EVENT_SELECTION_CHANGED, listener: typeof selectionChanged | null): this;\n  on(type: typeof ALineUp.EVENT_DIALOG_OPENED, listener: typeof dialogOpened | null): this;\n  on(type: typeof ALineUp.EVENT_DIALOG_CLOSED, listener: typeof dialogClosed | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  destroy() {\n    // just clear since we hand in the node itself\n    clear(this.node);\n    this._data.destroy();\n  }\n\n  dump() {\n    return this.data.dump();\n  }\n\n  restore(dump: IDataProviderDump) {\n    this._data.restore(dump);\n  }\n\n  abstract update(): void;\n\n  setDataProvider(data: DataProvider, dump?: IDataProviderDump) {\n    if (this._data) {\n      this.unforward(this._data, `${DataProvider.EVENT_SELECTION_CHANGED}.taggle`);\n      this._data.on(`${DataProvider.EVENT_BUSY}.busy`, null);\n    }\n    this._data = data;\n    if (dump) {\n      data.restore(dump);\n    }\n    this.forward(data, `${DataProvider.EVENT_SELECTION_CHANGED}.taggle`);\n\n    data.on(`${DataProvider.EVENT_BUSY}.busy`, (busy) => this.node.classList.toggle(cssClass('busy'), busy));\n  }\n\n  getSelection() {\n    return this._data.getSelection();\n  }\n\n  setSelection(dataIndices: number[]) {\n    this._data.setSelection(dataIndices);\n  }\n\n  /**\n   * sorts LineUp by he given column\n   * @param column callback function finding the column to sort\n   * @param ascending\n   * @returns {boolean}\n   */\n  sortBy(column: string | ((col: Column) => boolean), ascending = false) {\n    const col = this.data.find(column);\n    if (col) {\n      col.sortByMe(ascending);\n    }\n    return col != null;\n  }\n\n  abstract setHighlight(dataIndex: number, scrollIntoView: boolean): boolean;\n\n  abstract getHighlight(): number;\n\n  protected listenersChanged(type: string, enabled: boolean) {\n    super.listenersChanged(type, enabled);\n    if (!type.startsWith(ALineUp.EVENT_HIGHLIGHT_CHANGED)) {\n      return;\n    }\n    if (enabled) {\n      this.highlightListeners++;\n      if (this.highlightListeners === 1) { // first\n        this.enableHighlightListening(true);\n      }\n    } else {\n      this.highlightListeners -= 1;\n      if (this.highlightListeners === 0) { // last\n        this.enableHighlightListening(false);\n      }\n    }\n  }\n\n  protected enableHighlightListening(_enable: boolean) {\n    // hook\n  }\n}\n\nexport default ALineUp;\n","/**\r\n * utility class for optimized row context access\r\n */\r\nvar KeyFinder = /** @class */ (function () {\r\n    /**\r\n     * constructor for fast key based row access\r\n     * @param {IExceptionContext} context context to use\r\n     * @param {(rowIndex: number) => string} key key function\r\n     */\r\n    function KeyFinder(context, key) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.key = key;\r\n        this.cache = [];\r\n        this.lastFilled = 0;\r\n        this.key2index = new Map();\r\n        this.context.exceptions.forEach(function (e) {\r\n            _this.cache[e.index] = e.y;\r\n            _this.key2index.set(key(e.index), e.index);\r\n        });\r\n    }\r\n    KeyFinder.prototype.findValidStart = function (before) {\r\n        for (var i = before - 1; i >= 0; --i) {\r\n            if (this.cache[i] !== undefined) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * returns the position of the given given or -1 if not found\r\n     * @param {string} key\r\n     * @return {number} -1 if not found\r\n     */\r\n    KeyFinder.prototype.posByKey = function (key) {\r\n        if (this.key2index.has(key)) {\r\n            var index = this.key2index.get(key);\r\n            return { index: index, pos: this.pos(index) };\r\n        }\r\n        return this.fillCacheTillKey(key);\r\n    };\r\n    /**\r\n     * returns the position of the tthe given index\r\n     * @param {number} index index to look for\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.pos = function (index) {\r\n        if (this.context.exceptions.length === 0) {\r\n            // fast pass\r\n            return index * this.context.defaultRowHeight;\r\n        }\r\n        var cached = this.cache[index];\r\n        if (cached !== undefined) {\r\n            return cached;\r\n        }\r\n        //need to compute it\r\n        // find the starting point where to start counting\r\n        var start = this.findValidStart(index);\r\n        if (start < 0) {\r\n            this.fillCache(0, index, 0);\r\n        }\r\n        else {\r\n            this.fillCache(start + 1, index, this.cache[start] + this.heightOf(start));\r\n        }\r\n        return this.cache[index];\r\n    };\r\n    KeyFinder.prototype.fillCache = function (first, last, offset, callback) {\r\n        if (last <= this.lastFilled) {\r\n            //everything already there\r\n            if (!callback) {\r\n                return;\r\n            }\r\n            for (var i = first; i <= last; ++i) {\r\n                callback(i, this.key(i), this.cache[i]);\r\n            }\r\n            return;\r\n        }\r\n        var pos = offset;\r\n        for (var i = first; i <= last; ++i) {\r\n            this.cache[i] = pos;\r\n            var key = this.key(i);\r\n            this.key2index.set(key, i);\r\n            if (callback) {\r\n                callback(i, key, pos);\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n    };\r\n    /**\r\n     * returns the height of the row identified by index\r\n     * @param {number} index\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.heightOf = function (index) {\r\n        var lookup = this.context.exceptionsLookup;\r\n        return lookup.has(index) ? lookup.get(index) : this.context.defaultRowHeight;\r\n    };\r\n    /**\r\n     * see heightOf but ignores padding and optional null in case of default height\r\n     * @param {number} index row index\r\n     * @param {boolean} returnDefault return null if default height\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.exceptionHeightOf = function (index, returnDefault) {\r\n        if (returnDefault === void 0) { returnDefault = false; }\r\n        var padding = this.context.padding(index);\r\n        var lookup = this.context.exceptionsLookup;\r\n        if (lookup.has(index)) {\r\n            return lookup.get(index) - padding;\r\n        }\r\n        return returnDefault ? this.context.defaultRowHeight - padding : null;\r\n    };\r\n    /**\r\n     * padding of the given index\r\n     * @param {number} index\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.padding = function (index) {\r\n        return this.context.padding(index);\r\n    };\r\n    KeyFinder.prototype.fillCacheTillKey = function (target) {\r\n        var pos = 0;\r\n        for (var i = this.lastFilled; i < this.context.numberOfRows; ++i, ++this.lastFilled) {\r\n            var c = this.cache[i];\r\n            if (c !== undefined) {\r\n                pos = c + this.heightOf(i);\r\n                continue;\r\n            }\r\n            // new one fill up\r\n            var key = this.key(i);\r\n            this.cache[i] = pos;\r\n            this.key2index.set(key, i);\r\n            if (key === target) {\r\n                return { index: i, pos: pos };\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n        return { index: -1, pos: -1 };\r\n    };\r\n    /**\r\n     * computes the positions and keys for a range of given indices\r\n     * @param {number} first first row index\r\n     * @param {number} last last row index\r\n     * @param {number} offset pos offset for the first row index\r\n     * @param {(index: number, key: string, pos: number) => void} callback callack for each identified index\r\n     */\r\n    KeyFinder.prototype.positions = function (first, last, offset, callback) {\r\n        this.fillCache(first, last, offset, callback);\r\n    };\r\n    return KeyFinder;\r\n}());\r\nexport default KeyFinder;\r\n//# sourceMappingURL=KeyFinder.js.map","export var defaultMode = 'animation'; // Boolean((<any>window).chrome) ? 'animation' : 0, // animation frame on chrome;\r\nfunction dummy() {\r\n    return {\r\n        handler: [],\r\n        prev: null,\r\n        timer: -1\r\n    };\r\n}\r\nvar ScrollHandler = /** @class */ (function () {\r\n    function ScrollHandler(node) {\r\n        // this.current = this.asInfo();\r\n        var _this = this;\r\n        this.node = node;\r\n        this.sync = dummy();\r\n        this.animation = dummy();\r\n        this.numbers = new Map();\r\n        this.handleAnimationImpl = function () {\r\n            if (_this.animation.timer !== 1) {\r\n                return;\r\n            }\r\n            _this.handle(_this.animation);\r\n            _this.animation.timer = -1;\r\n        };\r\n        node.addEventListener('scroll', function () {\r\n            // this.current = this.asInfo();\r\n            // if (this.prev && (Math.abs(this.current.left - this.prev.left) + Math.abs(this.current.top - this.prev.top)) < 4) {\r\n            //   return;\r\n            // }\r\n            // this.prev = this.current;\r\n            if (_this.sync.handler.length > 0) {\r\n                _this.handle(_this.sync);\r\n            }\r\n            _this.handleAnimation();\r\n            _this.handleTimeouts();\r\n        }, {\r\n            passive: true\r\n        });\r\n    }\r\n    Object.defineProperty(ScrollHandler.prototype, \"current\", {\r\n        // current: IScrollInfo;\r\n        // private prev: IScrollInfo | null = null;\r\n        get: function () {\r\n            return this.asInfo();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScrollHandler.prototype.handle = function (handler) {\r\n        var info = this.current;\r\n        if (handler.prev && (Math.abs(info.left - handler.prev.left) + Math.abs(info.top - handler.prev.top)) < 4) {\r\n            return;\r\n        }\r\n        handler.prev = info;\r\n        for (var _i = 0, _a = handler.handler; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            s(info);\r\n        }\r\n    };\r\n    ScrollHandler.prototype.handleAnimation = function () {\r\n        if (this.animation.timer !== -1 || this.animation.handler.length === 0) {\r\n            return;\r\n        }\r\n        this.animation.timer = 1;\r\n        requestAnimationFrame(this.handleAnimationImpl);\r\n    };\r\n    ScrollHandler.prototype.handleTimeouts = function () {\r\n        var _this = this;\r\n        if (this.numbers.size === 0) {\r\n            return;\r\n        }\r\n        this.numbers.forEach(function (handler, n) {\r\n            if (handler.handler.length === 0) {\r\n                return;\r\n            }\r\n            handler.timer = self.setTimeout(function () {\r\n                _this.handle(handler);\r\n                handler.timer = -1;\r\n            }, n);\r\n        });\r\n    };\r\n    ScrollHandler.prototype.asInfo = function () {\r\n        return {\r\n            left: this.node.scrollLeft,\r\n            top: this.node.scrollTop,\r\n            width: this.node.clientWidth,\r\n            height: this.node.clientHeight\r\n        };\r\n    };\r\n    ScrollHandler.prototype.push = function (mode, handler) {\r\n        if (typeof mode === 'number') {\r\n            if (!this.numbers.has(mode)) {\r\n                this.numbers.set(mode, dummy());\r\n            }\r\n            this.numbers.get(mode).handler.push(handler);\r\n        }\r\n        switch (mode) {\r\n            case 'sync':\r\n                this.sync.handler.push(handler);\r\n                break;\r\n            case 'animation':\r\n                this.animation.handler.push(handler);\r\n                break;\r\n        }\r\n    };\r\n    ScrollHandler.prototype.remove = function (handler) {\r\n        var test = [this.sync, this.animation].concat(Array.from(this.numbers.values()));\r\n        return test.some(function (d) {\r\n            var index = d.handler.indexOf(handler);\r\n            if (index >= 0) {\r\n                d.handler.splice(index, 1);\r\n            }\r\n            return index >= 0;\r\n        });\r\n    };\r\n    ScrollHandler.prototype.isWaiting = function (mode) {\r\n        switch (mode) {\r\n            case 'animation':\r\n                return this.animation.timer >= 0;\r\n            case 'sync':\r\n                return false;\r\n            default:\r\n                return this.numbers.has(mode) && this.numbers.get(mode).timer >= 0;\r\n        }\r\n    };\r\n    return ScrollHandler;\r\n}());\r\n/**\r\n * @internal\r\n */\r\nexport function addScroll(scroller, mode, handler) {\r\n    // hide in element to have just one real listener\r\n    if (!scroller.__le_scroller__) {\r\n        scroller.__le_scroller__ = new ScrollHandler(scroller);\r\n    }\r\n    var s = scroller.__le_scroller__;\r\n    s.push(mode, handler);\r\n    return s.asInfo();\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function isScrollEventWaiting(scroller, mode) {\r\n    if (!scroller.__le_scroller__) {\r\n        return false;\r\n    }\r\n    var s = scroller.__le_scroller__;\r\n    return s.isWaiting(mode);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function removeScroll(scroller, handler) {\r\n    if (scroller.__le_scroller__) {\r\n        scroller.__le_scroller__.remove(handler);\r\n    }\r\n}\r\n//# sourceMappingURL=scroll.js.map","export * from './scroll';\r\n/**\r\n * clear node clearing\r\n * @param node\r\n * @internal\r\n */\r\nexport function clear(node) {\r\n    while (node.lastChild) {\r\n        node.removeChild(node.lastChild);\r\n    }\r\n    return node;\r\n}\r\n//# sourceMappingURL=index.js.map","var RowHeightException = /** @class */ (function () {\r\n    function RowHeightException(index, y, height) {\r\n        this.index = index;\r\n        this.y = y;\r\n        this.height = height;\r\n    }\r\n    Object.defineProperty(RowHeightException.prototype, \"y2\", {\r\n        get: function () {\r\n            return this.y + this.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return RowHeightException;\r\n}());\r\n/**\r\n * creates a uniform exception context, i.e no exceptions all rows are of the same height\r\n * @param {number} numberOfRows\r\n * @param {number} rowHeight\r\n * @param {number} rowPadding padding between rows\r\n * @return {IExceptionContext}\r\n */\r\nexport function uniformContext(numberOfRows, rowHeight, rowPadding) {\r\n    if (rowPadding === void 0) { rowPadding = 0; }\r\n    rowHeight += rowPadding;\r\n    var exceptionsLookup = {\r\n        keys: function () { return [].values(); },\r\n        get: function () { return rowHeight; },\r\n        has: function () { return false; },\r\n        size: 0\r\n    };\r\n    return {\r\n        exceptions: [],\r\n        exceptionsLookup: exceptionsLookup,\r\n        totalHeight: numberOfRows * rowHeight,\r\n        numberOfRows: numberOfRows,\r\n        defaultRowHeight: rowHeight,\r\n        padding: function () { return rowPadding; }\r\n    };\r\n}\r\n/**\r\n * computes the most frequent value in a given array like\r\n * @param {} values\r\n * @return {number}\r\n */\r\nfunction mostFrequentValue(values) {\r\n    var lookup = new Map();\r\n    values.forEach(function (value) {\r\n        lookup.set(value, (lookup.get(value) || 0) + 1);\r\n    });\r\n    if (lookup.size === 0) {\r\n        return 20; // default value since it doesn't matter\r\n    }\r\n    // sort desc take first key and asc by the second in case of tie, it is optimized to have exceptions for higher rows less for big rows\r\n    var sorted = Array.from(lookup).sort(function (a, b) {\r\n        if (a[1] !== b[1]) {\r\n            return b[1] - a[1];\r\n        }\r\n        return a[0] - b[0];\r\n    });\r\n    var mostFrequent = sorted[0][0];\r\n    if (mostFrequent === 0) { // cornercase\r\n        return sorted.length > 1 ? sorted[1][0] : 20; // all empty\r\n    }\r\n    return mostFrequent;\r\n}\r\n/**\r\n * creates a non uniform context based on the given array like heights\r\n * @param rowHeights arrayish to get the heights\r\n * @param {number} defaultRowHeight if not given the most frequent value will be used\r\n * @param {number} rowPadding padding between rows\r\n * @return {IExceptionContext}\r\n */\r\nexport function nonUniformContext(rowHeights, defaultRowHeight, rowPadding) {\r\n    if (defaultRowHeight === void 0) { defaultRowHeight = NaN; }\r\n    if (rowPadding === void 0) { rowPadding = 0; }\r\n    var exceptionsLookup = new Map();\r\n    var exceptions = [];\r\n    var padding = typeof rowPadding === 'function' ? rowPadding : function () { return rowPadding; };\r\n    if (isNaN(defaultRowHeight)) {\r\n        defaultRowHeight = mostFrequentValue(rowHeights);\r\n    }\r\n    defaultRowHeight += padding(-1);\r\n    var prev = -1, acc = 0, totalHeight = 0, numberOfRows = 0;\r\n    rowHeights.forEach(function (height, index) {\r\n        height += padding(index);\r\n        totalHeight += height;\r\n        numberOfRows++;\r\n        if (height === defaultRowHeight) {\r\n            //regular\r\n            return;\r\n        }\r\n        exceptionsLookup.set(index, height);\r\n        var between = (index - prev - 1) * defaultRowHeight;\r\n        prev = index;\r\n        var y = acc + between;\r\n        acc = y + height;\r\n        exceptions.push(new RowHeightException(index, y, height));\r\n    });\r\n    return { exceptionsLookup: exceptionsLookup, exceptions: exceptions, totalHeight: totalHeight, defaultRowHeight: defaultRowHeight, numberOfRows: numberOfRows, padding: padding };\r\n}\r\n/**\r\n * creates a random context with the given constraints\r\n * @param {number} numberOfRows\r\n * @param {number} defaultRowHeight\r\n * @param {number} minRowHeight\r\n * @param {number} maxRowHeight\r\n * @param {number} ratio around ratio percent will get a non uniform height\r\n * @param {number} seed random seed\r\n * @return {IExceptionContext}\r\n */\r\nexport function randomContext(numberOfRows, defaultRowHeight, minRowHeight, maxRowHeight, ratio, seed) {\r\n    if (minRowHeight === void 0) { minRowHeight = 2; }\r\n    if (maxRowHeight === void 0) { maxRowHeight = defaultRowHeight * 10; }\r\n    if (ratio === void 0) { ratio = 0.2; }\r\n    if (seed === void 0) { seed = Date.now(); }\r\n    var actSeed = seed;\r\n    var random = function () {\r\n        var x = Math.sin(actSeed++) * 10000;\r\n        return x - Math.floor(x);\r\n    };\r\n    var getter = function () {\r\n        var coin = random();\r\n        if (coin < ratio) {\r\n            //non uniform\r\n            return minRowHeight + Math.round(random() * (maxRowHeight - minRowHeight));\r\n        }\r\n        return defaultRowHeight;\r\n    };\r\n    var forEach = function (callback) {\r\n        for (var index = 0; index < numberOfRows; ++index) {\r\n            callback(getter(), index);\r\n        }\r\n    };\r\n    return nonUniformContext({ forEach: forEach }, defaultRowHeight);\r\n}\r\n/**\r\n * computes the visible range\r\n * @param {number} scrollTop top scrolling\r\n * @param {number} clientHeight visible height\r\n * @param {number} rowHeight height of a row by default\r\n * @param {IRowHeightException[]} heightExceptions exceptions of this default height\r\n * @param {number} numberOfRows the number of rows\r\n * @return {IVisibleRange} the computed visible range\r\n */\r\nexport function range(scrollTop, clientHeight, rowHeight, heightExceptions, numberOfRows) {\r\n    if (numberOfRows === 0) {\r\n        return { first: 0, last: -1, firstRowPos: 0, endPos: 0 };\r\n    }\r\n    if (numberOfRows === 1) {\r\n        return {\r\n            first: 0,\r\n            last: 0,\r\n            firstRowPos: 0,\r\n            endPos: heightExceptions.length === 0 ? rowHeight : heightExceptions[0].y2\r\n        };\r\n    }\r\n    var offset = scrollTop;\r\n    var offset2 = offset + clientHeight;\r\n    function indexOf(pos, indexShift) {\r\n        return Math.min(numberOfRows - 1, indexShift + Math.max(0, Math.floor(pos / rowHeight)));\r\n    }\r\n    function calc(offsetShift, indexShift, isGuess) {\r\n        if (isGuess === void 0) { isGuess = false; }\r\n        var shifted = offset - offsetShift;\r\n        var shifted2 = offset2 - offsetShift;\r\n        var first = indexOf(shifted, indexShift);\r\n        var last = indexOf(shifted2, indexShift);\r\n        var firstRowPos = offsetShift + (first - indexShift) * rowHeight;\r\n        var endPos = offsetShift + (last + 1 - indexShift) * rowHeight;\r\n        //if (!isGuess) {\r\n        //  console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\r\n        //}\r\n        console.assert(!isGuess || !(firstRowPos > offset || (endPos < offset2 && last < numberOfRows - 1)), 'error', isGuess, firstRowPos, endPos, offset, offset2, indexShift, offsetShift);\r\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\r\n    }\r\n    var r = calc(0, 0, true);\r\n    if (heightExceptions.length === 0) {\r\n        //uniform\r\n        return r;\r\n    }\r\n    if (r.last < heightExceptions[0].index) {\r\n        //console.log('before the first exception = uniform with no shift');\r\n        //console.log(r.first, '@', r.firstRowPos, r.last, '#', r.end, offset, offset2, r.firstRowPos <= offset, offset2 <= r.end);\r\n        return r;\r\n    }\r\n    if (r.last === heightExceptions[0].index && heightExceptions[0].height > rowHeight) {\r\n        return Object.assign(r, { endPos: heightExceptions[0].y2 });\r\n    }\r\n    //the position where the exceptions ends\r\n    var lastPos = heightExceptions[heightExceptions.length - 1];\r\n    if (offset >= lastPos.y) {\r\n        var rest = calc(lastPos.y2, lastPos.index + 1);\r\n        if (offset < lastPos.y2) {\r\n            // include me\r\n            return Object.assign(rest, { first: lastPos.index, firstRowPos: lastPos.y });\r\n        }\r\n        return rest;\r\n    }\r\n    //we have some exceptions\r\n    var visible = [];\r\n    var closest = heightExceptions[0]; //closest before not in range\r\n    for (var _i = 0, heightExceptions_1 = heightExceptions; _i < heightExceptions_1.length; _i++) {\r\n        var item = heightExceptions_1[_i];\r\n        var y = item.y, y2 = item.y2;\r\n        if (y >= offset2) {\r\n            break;\r\n        }\r\n        if (y2 <= offset) {\r\n            closest = item;\r\n            continue;\r\n        }\r\n        visible.push(item);\r\n    }\r\n    if (visible.length === 0) {\r\n        //console.log('we are in the between some exceptions and none are visible');\r\n        return calc(closest.y2, closest.index + 1); //skip myself\r\n    }\r\n    {\r\n        //console.log('we show at least one exception');\r\n        var firstException = visible[0];\r\n        var lastException = visible[visible.length - 1];\r\n        var first = Math.max(0, firstException.index - Math.max(0, Math.ceil((firstException.y - offset) / rowHeight)));\r\n        var last = lastException.index;\r\n        if (offset2 >= lastException.y2) {\r\n            last = indexOf(offset2 - lastException.y2, lastException.index + 1);\r\n        }\r\n        var firstRowPos = firstException.y - (firstException.index - first) * rowHeight;\r\n        var endPos = lastException.y2 + (last - lastException.index) * rowHeight;\r\n        //console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\r\n        console.assert(firstRowPos <= offset && (endPos >= offset2 || last === numberOfRows - 1), 'error', firstRowPos, endPos, offset, offset2, firstException, lastException);\r\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\r\n    }\r\n}\r\nexport function frozenDelta(current, target) {\r\n    var clength = current.length;\r\n    var tlength = target.length;\r\n    if (clength === 0) {\r\n        return { added: target, removed: [], common: 0 };\r\n    }\r\n    if (tlength === 0) {\r\n        return { added: [], removed: current, common: 0 };\r\n    }\r\n    if (clength === tlength) { //since sorted and left increasing true\r\n        return { added: [], removed: [], common: clength };\r\n    }\r\n    var removed = current.slice(Math.min(tlength, clength));\r\n    var added = target.slice(Math.min(tlength, clength));\r\n    return { added: added, removed: removed, common: clength - removed.length };\r\n}\r\nexport function updateFrozen(old, columns, first) {\r\n    var oldLast = old.length === 0 ? 0 : old[old.length - 1] + 1;\r\n    var added = [];\r\n    var removed = [];\r\n    for (var i = old.length - 1; i >= 0; --i) {\r\n        var index = old[i];\r\n        if (index >= first) {\r\n            removed.push(old.pop());\r\n        }\r\n        else {\r\n            // can stop since sorted and it will never happen again\r\n            break;\r\n        }\r\n    }\r\n    //added\r\n    for (var i = oldLast; i < first; ++i) {\r\n        if (columns[i].frozen) {\r\n            added.push(i);\r\n            old.push(i);\r\n        }\r\n    }\r\n    return { target: old, added: added, removed: removed };\r\n}\r\n//# sourceMappingURL=logic.js.map","/**\r\n * scrolling result\r\n */\r\nexport var EScrollResult;\r\n(function (EScrollResult) {\r\n    /**\r\n     * nothing has changed\r\n     */\r\n    EScrollResult[EScrollResult[\"NONE\"] = 0] = \"NONE\";\r\n    /**\r\n     * all rows needed to be recreated\r\n     */\r\n    EScrollResult[EScrollResult[\"ALL\"] = 1] = \"ALL\";\r\n    /**\r\n     * unknown\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME\"] = 2] = \"SOME\";\r\n    /**\r\n     * some rows are added at the bottom\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME_BOTTOM\"] = 3] = \"SOME_BOTTOM\";\r\n    /**\r\n     * some rows are added at the top\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME_TOP\"] = 4] = \"SOME_TOP\";\r\n})(EScrollResult || (EScrollResult = {}));\r\n//# sourceMappingURL=IMixin.js.map","var PREFIX = 'le';\r\n/**\r\n * @internal\r\n * @param suffix suffix to suffix\r\n */\r\nexport function cssClass(suffix) {\r\n    if (!suffix) {\r\n        return PREFIX;\r\n    }\r\n    return PREFIX + \"-\" + suffix;\r\n}\r\nexport var CSS_CLASS_LOADING = cssClass('loading');\r\nexport var CSS_CLASS_FROZEN = cssClass('frozen');\r\nexport var CSS_CLASS_HIDDEN = cssClass('hidden');\r\nexport var CSS_CLASS_MULTI = cssClass('multi');\r\nexport var CSS_CLASS_EVEN = cssClass('even');\r\nexport var CSS_CLASS_SHIFTED = cssClass('shifted');\r\nexport var CSS_CLASS_SCROLLBAR_TESTER = cssClass('scrollbar-tester');\r\nexport var CSS_CLASS_HEADER = cssClass('header');\r\nexport var CSS_CLASS_BODY = cssClass('body');\r\nexport var CSS_CLASS_FOOTER = cssClass('footer');\r\nexport var CSS_CLASS_THEAD = cssClass('thead');\r\nexport var CSS_CLASS_TBODY = cssClass('tbody');\r\nexport var CSS_CLASS_TR = cssClass('tr');\r\nexport var CSS_CLASS_TH = cssClass('th');\r\nexport var CSS_CLASS_TD = cssClass('td');\r\nexport var CSS_CLASS_SCROLLING = cssClass('scrolling');\r\nexport var CSS_CLASS_ROW_ANIMATION = cssClass('row-animation');\r\n//# sourceMappingURL=index.js.map","import { ABORTED, isAbortAble } from './abortAble';\r\nimport { defaultPhases, EAnimationMode, noAnimationChange } from './animation';\r\nimport KeyFinder from './animation/KeyFinder';\r\nimport { addScroll, clear, defaultMode, removeScroll } from './internal';\r\nimport { isScrollEventWaiting } from './internal/scroll';\r\nimport { range } from './logic';\r\nimport { EScrollResult } from './mixin';\r\nimport { cssClass, CSS_CLASS_EVEN, CSS_CLASS_FOOTER, CSS_CLASS_LOADING, CSS_CLASS_ROW_ANIMATION, CSS_CLASS_SCROLLING, CSS_CLASS_TR } from './styles';\r\nexport function isLoadingCell(node) {\r\n    return node.classList.contains(CSS_CLASS_LOADING);\r\n}\r\n/**\r\n * base class for creating a scalable table renderer based on rows\r\n */\r\nvar ARowRenderer = /** @class */ (function () {\r\n    function ARowRenderer(body, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this.body = body;\r\n        this.pool = [];\r\n        this.loadingPool = [];\r\n        this.loading = new WeakMap();\r\n        /**\r\n         * currently visible slice\r\n         */\r\n        this.visible = {\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        /**\r\n         * position of the first visible row in pixel\r\n         * @type {number}\r\n         */\r\n        this.visibleFirstRowPos = 0;\r\n        this.scrollListener = null;\r\n        this.lastScrollInfo = null;\r\n        this.abortAnimation = function () { return undefined; };\r\n        this.options = {\r\n            async: defaultMode,\r\n            minScrollDelta: 10,\r\n            mixins: [],\r\n            scrollingHint: false,\r\n            batchSize: 10,\r\n            striped: false,\r\n            viewportOversize: 200\r\n        };\r\n        this.adapter = this.createAdapter();\r\n        Object.assign(this.options, options);\r\n        this.mixins = this.options.mixins.map(function (mixinClass) { return new mixinClass(_this.adapter); });\r\n        this.fragment = body.ownerDocument.createDocumentFragment();\r\n    }\r\n    /**\r\n     * register another mixin to this renderer\r\n     * @param {IMixinClass} mixinClass the mixin class to instantitiate\r\n     * @param options optional constructor options\r\n     */\r\n    ARowRenderer.prototype.addMixin = function (mixinClass, options) {\r\n        this.mixins.push(new mixinClass(this.adapter, options));\r\n    };\r\n    ARowRenderer.prototype.createAdapter = function () {\r\n        var _this = this;\r\n        var r = {\r\n            visible: this.visible,\r\n            addAtBeginning: this.addAtBeginning.bind(this),\r\n            addAtBottom: this.addAtBottom.bind(this),\r\n            removeFromBeginning: this.removeFromBeginning.bind(this),\r\n            removeFromBottom: this.removeFromBottom.bind(this),\r\n            updateOffset: this.updateOffset.bind(this),\r\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.bodyScroller, _this.options.async); }\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: function () { return _this.visibleFirstRowPos; },\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: function () { return _this.context; },\r\n                enumerable: true\r\n            },\r\n            scrollOffset: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.top : 0; },\r\n                enumerable: true\r\n            },\r\n            scrollTotal: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.height : _this.bodyScroller.clientHeight; },\r\n                enumerable: true\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n    Object.defineProperty(ARowRenderer.prototype, \"bodyScroller\", {\r\n        /**\r\n         * get the scrolling container i.e. parent of the body element\r\n         * @returns {HTMLElement}\r\n         */\r\n        get: function () {\r\n            return this.body.parentElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ARowRenderer.prototype, \"bodySizer\", {\r\n        get: function () {\r\n            var parent = this.bodyScroller;\r\n            var sizer = Array.from(parent.children).find(function (d) { return d.tagName.toLowerCase() === 'footer'; });\r\n            if (sizer) {\r\n                return sizer;\r\n            }\r\n            var s = parent.ownerDocument.createElement('footer');\r\n            s.classList.add(CSS_CLASS_FOOTER, cssClass(\"footer-\" + this.idPrefix));\r\n            parent.insertBefore(s, parent.firstChild);\r\n            return s;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * initializes the table and register the onscroll listener\r\n     * @returns {void} nothing\r\n     */\r\n    ARowRenderer.prototype.init = function () {\r\n        var _this = this;\r\n        var scroller = this.bodyScroller;\r\n        var old = addScroll(scroller, this.options.async, this.scrollListener = function (act) {\r\n            _this.lastScrollInfo = act;\r\n            if (Math.abs(old.top - act.top) < _this.options.minScrollDelta && Math.abs(old.height - act.height) < _this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            var isGoingDown = act.top > old.top;\r\n            old = act;\r\n            _this.onScrolledVertically(act.top, act.height, isGoingDown);\r\n            if (_this.options.scrollingHint) {\r\n                _this.body.classList.remove(CSS_CLASS_SCROLLING);\r\n            }\r\n        });\r\n        if (this.options.scrollingHint) {\r\n            addScroll(scroller, 'animation', function () { return _this.body.classList.add(CSS_CLASS_SCROLLING); });\r\n        }\r\n        this.recreate();\r\n    };\r\n    /**\r\n     * destroys this renderer and unregisters all event listeners\r\n     */\r\n    ARowRenderer.prototype.destroy = function () {\r\n        removeScroll(this.bodyScroller, this.scrollListener);\r\n        this.body.remove();\r\n    };\r\n    ARowRenderer.cleanUp = function (item) {\r\n        item.style.height = null;\r\n    };\r\n    ARowRenderer.prototype.select = function (index) {\r\n        var item;\r\n        var result;\r\n        if (this.pool.length > 0) {\r\n            item = this.pool.pop();\r\n            result = this.updateRow(item, index);\r\n        }\r\n        else if (this.loadingPool.length > 0) {\r\n            item = this.loadingPool.pop();\r\n            item.classList.remove(CSS_CLASS_LOADING);\r\n            result = this.createRow(item, index);\r\n        }\r\n        else {\r\n            item = this.body.ownerDocument.createElement('div');\r\n            item.classList.add(CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\r\n            result = this.createRow(item, index);\r\n        }\r\n        item.dataset.index = String(index);\r\n        if (this.options.striped) {\r\n            item.classList.toggle(CSS_CLASS_EVEN, index % 2 === 0);\r\n        }\r\n        return { item: item, result: result };\r\n    };\r\n    ARowRenderer.prototype.selectProxy = function () {\r\n        var proxy;\r\n        if (this.loadingPool.length > 0) {\r\n            proxy = this.loadingPool.pop();\r\n        }\r\n        else {\r\n            proxy = this.body.ownerDocument.createElement('div');\r\n            proxy.classList.add(CSS_CLASS_LOADING, CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\r\n        }\r\n        return proxy;\r\n    };\r\n    ARowRenderer.prototype.recycle = function (item) {\r\n        ARowRenderer.cleanUp(item);\r\n        // check if the original dom element is still being manipulated\r\n        if (this.loading.has(item)) {\r\n            var abort = this.loading.get(item);\r\n            abort.abort();\r\n        }\r\n        else {\r\n            this.pool.push(item);\r\n        }\r\n    };\r\n    ARowRenderer.prototype.proxy = function (item, result) {\r\n        var _this = this;\r\n        if (!isAbortAble(result)) {\r\n            return item;\r\n        }\r\n        var abort = result;\r\n        //lazy loading\r\n        var real = item;\r\n        var proxy = this.selectProxy();\r\n        // copy attributes\r\n        proxy.dataset.index = real.dataset.index;\r\n        proxy.style.height = real.style.height;\r\n        this.loading.set(proxy, abort);\r\n        abort.then(function (result) {\r\n            if (result === ABORTED) {\r\n                //aborted can recycle the real one\r\n                ARowRenderer.cleanUp(real);\r\n                _this.pool.push(real);\r\n            }\r\n            else {\r\n                //fully loaded\r\n                _this.body.replaceChild(real, proxy);\r\n            }\r\n            _this.loading.delete(proxy);\r\n            ARowRenderer.cleanUp(proxy);\r\n            _this.loadingPool.push(proxy);\r\n        });\r\n        return proxy;\r\n    };\r\n    ARowRenderer.prototype.create = function (index) {\r\n        var _a = this.select(index), item = _a.item, result = _a.result;\r\n        var _b = this.context, ex = _b.exceptionsLookup, padding = _b.padding;\r\n        if (ex.has(index)) {\r\n            item.style.height = ex.get(index) - padding(index) + \"px\";\r\n        }\r\n        return this.proxy(item, result);\r\n    };\r\n    ARowRenderer.prototype.removeAll = function (perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        var b = this.body;\r\n        if (!perform) {\r\n            return Array.from(b.children);\r\n        }\r\n        var torecycle = [];\r\n        while (b.lastElementChild) {\r\n            var i = b.lastElementChild;\r\n            b.removeChild(i);\r\n            this.recycle(i);\r\n            torecycle.push(i);\r\n        }\r\n        return torecycle;\r\n    };\r\n    /**\r\n     * triggers and visual update of all visible rows\r\n     */\r\n    ARowRenderer.prototype.update = function () {\r\n        var _this = this;\r\n        var first = this.visible.first;\r\n        var fragment = this.fragment;\r\n        var items = Array.from(this.body.children);\r\n        clear(this.body);\r\n        items.forEach(function (item, i) {\r\n            if (_this.loading.has(item)) {\r\n                // still loading\r\n                fragment.appendChild(item);\r\n                return;\r\n            }\r\n            var abort = _this.updateRow(item, i + first);\r\n            fragment.appendChild(_this.proxy(item, abort));\r\n        });\r\n        this.body.appendChild(fragment);\r\n    };\r\n    /**\r\n     * utility to execute a function for each visible row\r\n     * @param {(row: HTMLElement, rowIndex: number) => void} callback callback to execute\r\n     * @param {boolean} inplace whether the DOM changes should be performed inplace instead of in a fragment\r\n     */\r\n    ARowRenderer.prototype.forEachRow = function (callback, inplace) {\r\n        var _this = this;\r\n        if (inplace === void 0) { inplace = false; }\r\n        var rows = Array.from(this.body.children);\r\n        var fragment = this.fragment;\r\n        if (!inplace) {\r\n            clear(this.body);\r\n        }\r\n        rows.forEach(function (row, index) {\r\n            if (!isLoadingCell(row) && row.dataset.animation !== 'update_remove' && row.dataset.animation !== 'hide') {\r\n                //skip loading ones and temporary ones\r\n                callback(row, index + _this.visible.first);\r\n            }\r\n            if (!inplace) {\r\n                fragment.appendChild(row);\r\n            }\r\n        });\r\n        if (!inplace) {\r\n            this.body.appendChild(fragment);\r\n        }\r\n    };\r\n    ARowRenderer.prototype.removeFromBeginning = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        return this.remove(from, to, true, perform);\r\n    };\r\n    ARowRenderer.prototype.removeFromBottom = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        return this.remove(from, to, false, perform);\r\n    };\r\n    ARowRenderer.prototype.remove = function (from, to, fromBeginning, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        var b = this.body;\r\n        var torecycle = [];\r\n        // console.log('remove', fromBeginning, (to - from) + 1, this.body.childElementCount - ((to - from) + 1));\r\n        var act = (fromBeginning ? b.firstChild : b.lastChild);\r\n        for (var i = from; i <= to; ++i) {\r\n            var item = act;\r\n            act = (fromBeginning ? act.nextSibling : act.previousSibling);\r\n            if (perform) {\r\n                b.removeChild(item);\r\n                this.recycle(item);\r\n            }\r\n            torecycle.push(item);\r\n        }\r\n        return torecycle;\r\n    };\r\n    ARowRenderer.prototype.addAtBeginning = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        // console.log('add', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\r\n        var fragment = this.fragment;\r\n        if (from === to && perform) {\r\n            this.body.insertBefore(this.create(from), this.body.firstChild);\r\n            return;\r\n        }\r\n        for (var i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        if (perform) {\r\n            this.body.insertBefore(fragment, this.body.firstChild);\r\n        }\r\n        return fragment;\r\n    };\r\n    ARowRenderer.prototype.addAtBottom = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        // console.log('add_b', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\r\n        if (from === to && perform) {\r\n            this.body.appendChild(this.create(from));\r\n            return;\r\n        }\r\n        var fragment = this.fragment;\r\n        for (var i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        if (perform) {\r\n            this.body.appendChild(fragment);\r\n        }\r\n        return fragment;\r\n    };\r\n    ARowRenderer.prototype.updateOffset = function (firstRowPos) {\r\n        this.visibleFirstRowPos = firstRowPos;\r\n        this.updateSizer(firstRowPos);\r\n    };\r\n    ARowRenderer.prototype.updateSizer = function (firstRowPos) {\r\n        var totalHeight = this.context.totalHeight;\r\n        setTransform(this.body, 0, firstRowPos.toFixed(0));\r\n        setTransform(this.bodySizer, 0, Math.max(0, totalHeight - 1).toFixed(0));\r\n    };\r\n    /**\r\n     * removes all rows and recreates the table\r\n     * @param {IAnimationContext} ctx optional animation context to create a transition between the previous and the current tables\r\n     * @returns {void} nothing\r\n     */\r\n    ARowRenderer.prototype.recreate = function (ctx) {\r\n        this.abortAnimation();\r\n        if (ctx) {\r\n            return this.recreateAnimated(ctx);\r\n        }\r\n        return this.recreatePure();\r\n    };\r\n    ARowRenderer.prototype.recreatePure = function () {\r\n        var context = this.context;\r\n        var scroller = this.bodyScroller;\r\n        //update first to avoid resetting scrollTop\r\n        this.updateOffset(0);\r\n        this.removeAll();\r\n        this.clearPool();\r\n        var _a = range(scroller.scrollTop, scroller.clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        this.visible.first = this.visible.forcedFirst = first;\r\n        this.visible.last = this.visible.forcedLast = last;\r\n        if (first < 0) {\r\n            // empty\r\n            this.updateOffset(0);\r\n            return;\r\n        }\r\n        this.addAtBottom(first, last);\r\n        this.updateOffset(firstRowPos);\r\n    };\r\n    ARowRenderer.prototype.recreateAnimated = function (ctx) {\r\n        var _this = this;\r\n        var lookup = new Map();\r\n        var prev = new KeyFinder(ctx.previous, ctx.previousKey);\r\n        var cur = new KeyFinder(this.context, ctx.currentKey);\r\n        var next = range(this.bodyScroller.scrollTop, this.bodyScroller.clientHeight, cur.context.defaultRowHeight, cur.context.exceptions, cur.context.numberOfRows);\r\n        {\r\n            var rows_1 = Array.from(this.body.children);\r\n            var old = Object.assign({}, this.visible);\r\n            //store the current rows in a lookup and clear\r\n            clear(this.body);\r\n            prev.positions(old.first, Math.min(old.last, old.first + rows_1.length), this.visibleFirstRowPos, function (i, key, pos) {\r\n                var n = rows_1[i];\r\n                if (n) { // shouldn't happen that it is not there\r\n                    lookup.set(key, { n: n, pos: pos, i: i });\r\n                }\r\n                // else {\r\n                //  console.error(i, key, pos, rows);\r\n                //}\r\n            });\r\n        }\r\n        this.visible.first = this.visible.forcedFirst = next.first;\r\n        this.visible.last = this.visible.forcedLast = next.last;\r\n        var fragment = this.fragment;\r\n        var animation = [];\r\n        var nodeY = next.firstRowPos;\r\n        cur.positions(next.first, next.last, next.firstRowPos, function (i, key, pos) {\r\n            var node;\r\n            var mode = EAnimationMode.UPDATE;\r\n            var previous;\r\n            if (lookup.has(key)) {\r\n                // still visible\r\n                var item = lookup.get(key);\r\n                lookup.delete(key);\r\n                // update height\r\n                item.n.dataset.index = String(i);\r\n                node = _this.proxy(item.n, _this.updateRow(item.n, i));\r\n                previous = {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prev.exceptionHeightOf(item.i, true)\r\n                };\r\n            }\r\n            else {\r\n                // need a new row\r\n                var old = prev.posByKey(key);\r\n                // maybe not visible  before so keep in place\r\n                node = _this.create(i);\r\n                mode = old.index < 0 ? EAnimationMode.SHOW : EAnimationMode.UPDATE_CREATE;\r\n                previous = {\r\n                    index: old.index,\r\n                    y: old.pos >= 0 ? old.pos : pos,\r\n                    height: old.index < 0 ? cur.exceptionHeightOf(i, true) : prev.exceptionHeightOf(old.index, true)\r\n                };\r\n            }\r\n            animation.push({\r\n                node: node,\r\n                key: key,\r\n                mode: mode,\r\n                previous: previous,\r\n                nodeY: nodeY,\r\n                nodeYCurrentHeight: pos,\r\n                current: {\r\n                    index: i,\r\n                    y: pos,\r\n                    height: cur.exceptionHeightOf(i)\r\n                }\r\n            });\r\n            node.style.transform = \"translate(0, \" + (nodeY - pos) + \"px)\";\r\n            nodeY += previous.height + (previous.index < 0 ? cur.padding(i) : prev.padding(previous.index));\r\n            fragment.appendChild(node);\r\n        });\r\n        var nodeYCurrentHeight = next.endPos;\r\n        // items that are going to be removed\r\n        lookup.forEach(function (item, key) {\r\n            // calculate their next position\r\n            var r = cur.posByKey(key);\r\n            // maybe not visible anymore, keep in place\r\n            var nextPos = r.pos >= 0 ? r.pos : item.pos;\r\n            var node = item.n;\r\n            // located at addedPos\r\n            // should end up at nextPos\r\n            // was previously at item.pos\r\n            node.style.transform = \"translate(0, \" + (item.pos - nodeY) + \"px)\";\r\n            fragment.appendChild(node);\r\n            var prevHeight = prev.exceptionHeightOf(item.i, true);\r\n            animation.push({\r\n                node: item.n,\r\n                key: key,\r\n                mode: r.index < 0 ? EAnimationMode.HIDE : EAnimationMode.UPDATE_REMOVE,\r\n                previous: {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prevHeight\r\n                },\r\n                nodeY: nodeY,\r\n                nodeYCurrentHeight: nodeYCurrentHeight,\r\n                current: {\r\n                    index: r.index,\r\n                    y: nextPos,\r\n                    height: r.index < 0 ? null : cur.exceptionHeightOf(r.index)\r\n                }\r\n            });\r\n            nodeYCurrentHeight += r.index < 0 ? cur.context.defaultRowHeight : (cur.exceptionHeightOf(r.index, true) + cur.padding(r.index));\r\n            nodeY += prevHeight + prev.padding(item.i);\r\n        });\r\n        this.updateOffset(next.firstRowPos);\r\n        this.animate(animation, ctx.phases || defaultPhases, prev, cur, fragment);\r\n    };\r\n    ARowRenderer.prototype.animate = function (animation, phases, previousFinder, currentFinder, fragment) {\r\n        var _this = this;\r\n        if (animation.length <= 0) {\r\n            this.body.appendChild(fragment);\r\n            return;\r\n        }\r\n        var currentTimer = -1;\r\n        var actPhase = 0;\r\n        var executePhase = function (phase, items) {\r\n            if (items === void 0) { items = animation; }\r\n            items.forEach(function (anim) { return phase.apply(anim, previousFinder, currentFinder); });\r\n        };\r\n        var run = function () {\r\n            //dummy log for forcing dom update\r\n            console.assert(animation[0].node.offsetTop >= 0, 'dummy log for forcing dom update');\r\n            executePhase(phases[actPhase++]);\r\n            // shifted by one since already added through ++\r\n            if (actPhase < phases.length) {\r\n                // schedule the next one\r\n                var next = phases[actPhase];\r\n                currentTimer = self.setTimeout(run, next.delay);\r\n                return;\r\n            }\r\n            // last one\r\n            var body = _this.body.classList;\r\n            Array.from(body).forEach(function (v) {\r\n                if (v.startsWith(cssClass()) && v.endsWith('-animation')) {\r\n                    body.remove(v);\r\n                }\r\n            });\r\n            // clean up\r\n            animation.forEach(function (_a) {\r\n                var node = _a.node, mode = _a.mode;\r\n                if (mode !== EAnimationMode.UPDATE_REMOVE && mode !== EAnimationMode.HIDE) {\r\n                    return;\r\n                }\r\n                node.remove();\r\n                node.style.transform = null;\r\n                _this.recycle(node);\r\n            });\r\n            _this.abortAnimation = function () { return undefined; };\r\n            currentTimer = -1;\r\n        };\r\n        // execute all phases having a delay of zero\r\n        while (phases[actPhase].delay === 0) {\r\n            executePhase(phases[actPhase++]);\r\n        }\r\n        // after the initial one\r\n        var body = this.body;\r\n        this.body.appendChild(fragment);\r\n        var dummyAnimation = [];\r\n        animation = animation.filter(function (d) {\r\n            if (noAnimationChange(d, previousFinder.context.defaultRowHeight, currentFinder.context.defaultRowHeight)) {\r\n                dummyAnimation.push(d);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        if (dummyAnimation.length > 0) {\r\n            // execute all phases for them\r\n            phases.slice(actPhase).forEach(function (phase) { return executePhase(phase, dummyAnimation); });\r\n        }\r\n        if (animation.length === 0) {\r\n            return;\r\n        }\r\n        body.classList.add(CSS_CLASS_ROW_ANIMATION);\r\n        (new Set(animation.map(function (d) { return d.mode; }))).forEach(function (mode) {\r\n            // add class but map to UPDATE only\r\n            body.classList.add(cssClass(EAnimationMode[mode].toLowerCase().split('_')[0] + \"-animation\"));\r\n        });\r\n        this.abortAnimation = function () {\r\n            if (currentTimer <= 0) {\r\n                return;\r\n            }\r\n            // abort by removing\r\n            clearTimeout(currentTimer);\r\n            currentTimer = -1;\r\n            // run the last phase\r\n            actPhase = phases.length - 1;\r\n            run();\r\n        };\r\n        // next tick such that DOM will be updated\r\n        currentTimer = self.setTimeout(run, phases[actPhase].delay);\r\n    };\r\n    /**\r\n     * clears the row pool used for faster creation\r\n     */\r\n    ARowRenderer.prototype.clearPool = function () {\r\n        // clear pool\r\n        this.pool.splice(0, this.pool.length);\r\n    };\r\n    /**\r\n     * triggers a revalidation of the current scrolling offest\r\n     */\r\n    ARowRenderer.prototype.revalidate = function () {\r\n        var scroller = this.bodyScroller;\r\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, true);\r\n        this.updateOffset(this.visibleFirstRowPos);\r\n    };\r\n    /**\r\n     * scrolling vertically\r\n     * @param {number} scrollTop top scrolling\r\n     * @param {number} clientHeight visible height\r\n     * @param {boolean} isGoingDown hint whether the scrollTop increases\r\n     * @return {EScrollResult} full in case of a full rebuild or partial update\r\n     */\r\n    ARowRenderer.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\r\n        var shift = this.options.viewportOversize;\r\n        var shiftTop = Math.max(0, scrollTop - shift);\r\n        var scrollResult = this.onScrolledImpl(shiftTop, clientHeight + shift + (scrollTop - shiftTop));\r\n        for (var _i = 0, _a = this.mixins; _i < _a.length; _i++) {\r\n            var mixin = _a[_i];\r\n            mixin.onScrolled(isGoingDown, scrollResult);\r\n        }\r\n        return scrollResult;\r\n    };\r\n    ARowRenderer.prototype.shiftLast = function (current, currentDelta) {\r\n        var b = this.options.batchSize;\r\n        if (currentDelta >= b) {\r\n            return current;\r\n        }\r\n        var total = this.context.numberOfRows;\r\n        return Math.min(total - 1, current + (this.options.batchSize - currentDelta));\r\n    };\r\n    ARowRenderer.prototype.shiftFirst = function (current, currentFirstRow, currentDelta) {\r\n        var b = this.options.batchSize;\r\n        if (currentDelta >= b || current <= 0) {\r\n            return { first: current, firstRowPos: currentFirstRow };\r\n        }\r\n        var first = Math.max(0, current - (this.options.batchSize - currentDelta));\r\n        var _a = this.context, exceptionsLookup = _a.exceptionsLookup, defaultRowHeight = _a.defaultRowHeight;\r\n        var firstRowPos = currentFirstRow;\r\n        for (var i = first; i < current; ++i) {\r\n            if (exceptionsLookup.has(i)) {\r\n                firstRowPos -= exceptionsLookup.get(i);\r\n            }\r\n            else {\r\n                firstRowPos -= defaultRowHeight;\r\n            }\r\n        }\r\n        return { first: first, firstRowPos: firstRowPos };\r\n    };\r\n    ARowRenderer.prototype.onScrolledImpl = function (scrollTop, clientHeight) {\r\n        var context = this.context;\r\n        var _a = range(scrollTop, clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        var visible = this.visible;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            //nothing to do\r\n            return EScrollResult.NONE;\r\n        }\r\n        var r = EScrollResult.SOME;\r\n        var torecycle;\r\n        var toadd;\r\n        var toaddBottom = false;\r\n        if (first > visible.last || last < visible.first) {\r\n            //no overlap, clean and draw everything\r\n            //console.log(`ff added: ${last - first + 1} removed: ${visibleLast - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //removeRows(visibleFirst, visibleLast);\r\n            torecycle = this.removeAll(false);\r\n            toadd = this.addAtBottom(first, last, false);\r\n            toaddBottom = true;\r\n            r = EScrollResult.ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            //some first rows missing and some last rows to much\r\n            //console.log(`up added: ${visibleFirst - first + 1} removed: ${visibleLast - last + 1} ${first}:${last} ${offset}`);\r\n            var toRemove = visible.last - (last + 1);\r\n            if (toRemove >= this.options.batchSize) {\r\n                torecycle = this.removeFromBottom(last + 1, visible.last, false);\r\n            }\r\n            else {\r\n                last = visible.last;\r\n            }\r\n            var shift = this.shiftFirst(first, firstRowPos, visible.first - 1 - first);\r\n            first = shift.first;\r\n            firstRowPos = shift.firstRowPos;\r\n            toadd = this.addAtBeginning(first, visible.first - 1, false);\r\n            toaddBottom = false;\r\n            r = EScrollResult.SOME_TOP;\r\n        }\r\n        else {\r\n            //console.log(`do added: ${last - visibleLast + 1} removed: ${first - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //some last rows missing and some first rows to much\r\n            var toRemove = first - 1 - visible.first;\r\n            if (toRemove >= this.options.batchSize) {\r\n                torecycle = this.removeFromBeginning(visible.first, first - 1, false);\r\n            }\r\n            else {\r\n                first = visible.first;\r\n                firstRowPos = this.visibleFirstRowPos;\r\n            }\r\n            last = this.shiftLast(last, last - visible.last + 1);\r\n            toadd = this.addAtBottom(visible.last + 1, last, false);\r\n            toaddBottom = true;\r\n            r = EScrollResult.SOME_BOTTOM;\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateOffset(firstRowPos);\r\n        this.manipulate(torecycle, toadd, toaddBottom);\r\n        return r;\r\n    };\r\n    ARowRenderer.prototype.manipulate = function (toRecycle, toAdd, bottom) {\r\n        if (toRecycle) {\r\n            for (var _i = 0, toRecycle_1 = toRecycle; _i < toRecycle_1.length; _i++) {\r\n                var item = toRecycle_1[_i];\r\n                item.remove();\r\n                this.recycle(item);\r\n            }\r\n        }\r\n        if (!toAdd) {\r\n            return;\r\n        }\r\n        if (bottom) {\r\n            this.body.appendChild(toAdd);\r\n        }\r\n        else {\r\n            this.body.insertBefore(toAdd, this.body.firstChild);\r\n        }\r\n    };\r\n    return ARowRenderer;\r\n}());\r\nexport { ARowRenderer };\r\nexport default ARowRenderer;\r\nexport function setTransform(elem, x, y) {\r\n    var text = \"translate(\" + x + \"px, \" + y + \"px)\";\r\n    var anyelem = elem;\r\n    if (anyelem.__transform__ === text) {\r\n        return;\r\n    }\r\n    anyelem.__transform__ = elem.style.transform = text;\r\n}\r\n//# sourceMappingURL=ARowRenderer.js.map","// import manually import './style.scss';\r\nfunction assignStyles(target, source) {\r\n    for (var _i = 0, _a = Object.keys(source); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        var v = source[key];\r\n        if (!v.endsWith(' !important')) {\r\n            if (target[key] !== v) {\r\n                target[key] = v;\r\n            }\r\n            continue;\r\n        }\r\n        // handle special important case\r\n        var plain = v.slice(0, -' !important'.length);\r\n        if (target[key] === plain) {\r\n            continue;\r\n        }\r\n        target[key] = plain;\r\n        // see https://gist.github.com/youssman/745578062609e8acac9f\r\n        var hyphen = key.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase();\r\n        target.setProperty(hyphen, plain, 'important');\r\n    }\r\n}\r\nvar StyleManager = /** @class */ (function () {\r\n    /**\r\n     * the parent element to append this managed style\r\n     * @param {HTMLElement} root\r\n     */\r\n    function StyleManager(root) {\r\n        this.rules = [];\r\n        this.testVerifyTimeout = -1;\r\n        this.node = root.ownerDocument.createElement('style');\r\n        this.node.appendChild(root.ownerDocument.createTextNode('')); // for webkit?\r\n        root.appendChild(this.node);\r\n    }\r\n    StyleManager.prototype.destroy = function () {\r\n        this.node.remove();\r\n    };\r\n    StyleManager.prototype.verifySheet = function () {\r\n        var _this = this;\r\n        var sheet = this.sheet;\r\n        if (!sheet) {\r\n            if (this.testVerifyTimeout >= 0) {\r\n                return;\r\n            }\r\n            // test till attached\r\n            this.testVerifyTimeout = self.setTimeout(function () {\r\n                _this.testVerifyTimeout = -1;\r\n                _this.verifySheet();\r\n            }, 20);\r\n            return;\r\n        }\r\n        var rules = sheet.cssRules;\r\n        if (rules.length === this.rules.length && this.rules.every(function (d, i) { return rules[i].selectorText === d.selector; })) {\r\n            // same\r\n            return;\r\n        }\r\n        console.warn('invalid sheet rules detected');\r\n        var l = rules.length;\r\n        for (var i = 0; i < l; ++i) {\r\n            sheet.deleteRule(i);\r\n        }\r\n        // create all\r\n        for (var _i = 0, _a = this.rules; _i < _a.length; _i++) {\r\n            var rule = _a[_i];\r\n            var index = sheet.insertRule(rule.selector + \" {}\", sheet.cssRules.length);\r\n            var cssRule = sheet.cssRules[index];\r\n            rule.selector = cssRule.selectorText;\r\n            assignStyles(cssRule.style, rule.style);\r\n        }\r\n    };\r\n    Object.defineProperty(StyleManager.prototype, \"sheet\", {\r\n        get: function () {\r\n            return this.node.sheet;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StyleManager.prototype.getSheetRule = function (index) {\r\n        var sheet = this.sheet;\r\n        return sheet ? sheet.cssRules[index] : null;\r\n    };\r\n    /**\r\n     * add a custom css rule\r\n     * @param {string} id unique id of the rule for later identification\r\n     * @param {string} selector the css selector\r\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\r\n     * @returns {string} the id again\r\n     */\r\n    StyleManager.prototype.addRule = function (id, selector, style) {\r\n        this.verifySheet();\r\n        var sheet = this.sheet;\r\n        if (!sheet) {\r\n            // upon next update\r\n            this.rules.push({ id: id, selector: selector, style: style });\r\n            return;\r\n        }\r\n        var index = sheet.insertRule(selector + \" {}\", sheet.cssRules.length);\r\n        var rule = sheet.cssRules[index];\r\n        this.rules.push({ id: id, selector: rule.selectorText, style: style });\r\n        assignStyles(rule.style, style);\r\n        return id;\r\n    };\r\n    /**\r\n     * updates or add a rule, see @addRule\r\n     * @param {string} id unique id of the rule for later identification\r\n     * @param {string} selector the css selector\r\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\r\n     * @returns {string} the id again\r\n     */\r\n    StyleManager.prototype.updateRule = function (id, selector, style) {\r\n        this.verifySheet();\r\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\r\n        if (index < 0) {\r\n            return this.addRule(id, selector, style);\r\n        }\r\n        var stored = this.rules[index];\r\n        stored.selector = selector;\r\n        stored.style = style;\r\n        var rule = this.getSheetRule(index);\r\n        if (rule) {\r\n            if (rule.selectorText.replace(/\\s/gm, '') !== selector.replace(/\\s/gm, '')) { //ignoring white space\r\n                rule.selectorText = selector;\r\n                stored.selector = rule.selectorText;\r\n            }\r\n            assignStyles(rule.style, style);\r\n        }\r\n        return id;\r\n    };\r\n    /**\r\n     * deletes the given rule by id\r\n     * @param {string} id the rule to delete\r\n     */\r\n    StyleManager.prototype.deleteRule = function (id) {\r\n        this.verifySheet();\r\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.rules.splice(index, 1);\r\n        var sheet = this.sheet;\r\n        if (sheet) {\r\n            sheet.deleteRule(index);\r\n        }\r\n    };\r\n    Object.defineProperty(StyleManager.prototype, \"ruleNames\", {\r\n        /**\r\n         * get a list of all registered rule ids\r\n         * @returns {string[]}\r\n         */\r\n        get: function () {\r\n            return this.rules.map(function (d) { return d.id; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return StyleManager;\r\n}());\r\nexport default StyleManager;\r\n//# sourceMappingURL=StyleManager.js.map","import * as tslib_1 from \"tslib\";\r\nimport { addScroll } from '../internal';\r\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_SCROLLBAR_TESTER, CSS_CLASS_SHIFTED, CSS_CLASS_TBODY, CSS_CLASS_THEAD } from '../styles';\r\nimport StyleManager from './StyleManager';\r\nexport function setTemplate(root, id) {\r\n    id = id.startsWith('#') ? id.slice(1) : id;\r\n    root.innerHTML = \"\\n  <header id=\\\"header-\" + id + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + id) + \"\\\">\\n    <article class=\\\"\" + CSS_CLASS_THEAD + \" \" + cssClass(\"thead-\" + id) + \"\\\"></article>\\n  </header>\\n  <main id=\\\"body-\" + id + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + id) + \"\\\">\\n    <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    <article class=\\\"\" + CSS_CLASS_TBODY + \" \" + cssClass(\"tbody-\" + id) + \"\\\"></article>\\n  </main>\";\r\n    return root;\r\n}\r\n/**\r\n * generates the HTML Ids used for the header and body article of a table\r\n * @param {string} tableId base table id\r\n * @param {boolean} asSelector flag whether to prepend with # for CSS selector\r\n * @return {ISelectors} the table ids used for header and body\r\n */\r\nexport function tableIds(tableId) {\r\n    return {\r\n        thead: \"thead-\" + tableId,\r\n        tbody: \"tbody-\" + tableId,\r\n        tr: \"tr-\" + tableId,\r\n        th: \"th-\" + tableId,\r\n        td: \"td-\" + tableId\r\n    };\r\n}\r\nexport function tableCSSClasses(tableId) {\r\n    var ids = tableIds(tableId);\r\n    return {\r\n        thead: cssClass(ids.thead),\r\n        tbody: cssClass(ids.tbody),\r\n        tr: cssClass(ids.tr),\r\n        th: cssClass(ids.th),\r\n        td: cssClass(ids.td)\r\n    };\r\n}\r\n/**\r\n * utility for custom generated CSS rules with a focus on dynamically generated grid layouts\r\n */\r\nvar GridStyleManager = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GridStyleManager, _super);\r\n    function GridStyleManager(root, id) {\r\n        var _this = _super.call(this, root) || this;\r\n        _this.id = id.startsWith('#') ? id.slice(1) : id;\r\n        _this.ids = tableIds(_this.id);\r\n        _this.cssClasses = tableCSSClasses(_this.id);\r\n        var headerScroller = root.getElementsByTagName('header')[0];\r\n        var bodyScroller = root.getElementsByTagName('main')[0];\r\n        // async since style needs to be added to dom first\r\n        self.setTimeout(function () {\r\n            var width = measureScrollbar(root).width;\r\n            _this.updateRule('__scollBarFix2', \"#header-\" + _this.id + \" > article:last-of-type\", {\r\n                borderRight: width + \"px solid transparent\"\r\n            });\r\n        }, 20);\r\n        var old = headerScroller.scrollLeft;\r\n        // update frozen and sync header with body\r\n        addScroll(bodyScroller, 'animation', function (act) {\r\n            var newValue = act.left;\r\n            if (old !== newValue) {\r\n                old = headerScroller.scrollLeft = newValue;\r\n            }\r\n            root.classList.toggle(CSS_CLASS_SHIFTED, act.left > 0);\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * updates the column widths and default row height for a table\r\n     * @param {number} defaultRowHeight\r\n     * @param {IColumn[]} columns\r\n     * @param {number} frozenShift shift frozen colums\r\n     * @param {string} tableId optional tableId in case of multiple tables within the same engine\r\n     * @param {string} unit\r\n     */\r\n    GridStyleManager.prototype.update = function (defaultRowHeight, columns, padding, frozenShift, tableId, unit) {\r\n        if (unit === void 0) { unit = 'px'; }\r\n        var ids = tableIds(tableId);\r\n        var selectors = tableCSSClasses(tableId);\r\n        var total = \"\" + columns.reduce(function (a, b, i) { return a + b.width + padding(i); }, 0) + unit;\r\n        this.updateRule(\"__heightsRule\" + selectors.tr, \".\" + selectors.tr, {\r\n            height: defaultRowHeight + \"px\",\r\n            width: total\r\n        });\r\n        this.updateRule(\"__heightsRule\" + selectors.tbody, \"#\" + ids.tbody, {\r\n            width: total\r\n        });\r\n        this.updateColumns(columns, padding, selectors, frozenShift, unit);\r\n    };\r\n    /**\r\n     * removes a given tableId if not needed anymore\r\n     * @param {string} tableId tableId to remove\r\n     */\r\n    GridStyleManager.prototype.remove = function (tableId) {\r\n        var selectors = tableCSSClasses(tableId);\r\n        this.deleteRule(\"__heightsRule\" + selectors.tr);\r\n        this.deleteRule(\"__heightsRule\" + selectors.tbody);\r\n        var prefix = \"__col\" + selectors.td + \"_\";\r\n        var rules = this.ruleNames.reduce(function (a, b) { return a + (b.startsWith(prefix) ? 1 : 0); }, 0);\r\n        // reset\r\n        for (var i = 0; i < rules; ++i) {\r\n            this.deleteRule(\"\" + prefix + i);\r\n        }\r\n    };\r\n    GridStyleManager.prototype.updateColumns = function (columns, padding, cssSelectors, frozenShift, unit) {\r\n        var _this = this;\r\n        if (unit === void 0) { unit = 'px'; }\r\n        var prefix = \"__col\" + cssSelectors.td + \"_\";\r\n        var rules = new Set(this.ruleNames.filter(function (d) { return d.startsWith(prefix); }));\r\n        var acc = 0;\r\n        columns.forEach(function (c, i) {\r\n            var th = \".\" + cssSelectors.th + \"[data-id=\\\"\" + c.id + \"\\\"]\";\r\n            var thStyles = {\r\n                width: \"\" + c.width + unit\r\n            };\r\n            var td = \".\" + cssSelectors.td + \"[data-id=\\\"\" + c.id + \"\\\"]\";\r\n            var tdStyles = {\r\n                transform: \"translateX(\" + acc + unit + \")\",\r\n                width: \"\" + c.width + unit\r\n            };\r\n            if (c.frozen) {\r\n                thStyles.left = acc + \"px\";\r\n                _this.updateRule(\"\" + prefix + td + \"F\", \".\" + cssSelectors.td + \".\" + CSS_CLASS_SHIFTED + \"[data-id=\\\"\" + c.id + \"\\\"]\", {\r\n                    transform: \"translateX(0)\",\r\n                    left: \"\" + (acc + frozenShift) + unit\r\n                });\r\n                rules.delete(\"\" + prefix + td + \"F\");\r\n            }\r\n            _this.updateRule(\"\" + prefix + th, th, thStyles);\r\n            rules.delete(\"\" + prefix + th);\r\n            _this.updateRule(\"\" + prefix + td, td, tdStyles);\r\n            rules.delete(\"\" + prefix + td);\r\n            acc += c.width + padding(i);\r\n        });\r\n        rules.forEach(function (d) { return _this.deleteRule(d); });\r\n    };\r\n    return GridStyleManager;\r\n}(StyleManager));\r\nexport default GridStyleManager;\r\n/**\r\n * measure the width and height of the scrollbars\r\n * based on Slick grid implementation\r\n * @param root\r\n */\r\nfunction measureScrollbar(root) {\r\n    var body = root.ownerDocument.body;\r\n    body.insertAdjacentHTML('beforeend', \"\\n    <div class=\\\"\" + CSS_CLASS_SCROLLBAR_TESTER + \"\\\"><div></div></div>\\n  \");\r\n    var elem = body.lastElementChild;\r\n    var width = elem.offsetWidth - elem.clientWidth;\r\n    var height = elem.offsetHeight - elem.clientHeight;\r\n    elem.remove();\r\n    return { width: width, height: height };\r\n}\r\n//# sourceMappingURL=GridStyleManager.js.map","import { setTransform } from '../ARowRenderer';\r\nimport { addScroll, defaultMode } from '../internal';\r\nimport { GridStyleManager, tableCSSClasses, tableIds } from '../style';\r\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_MULTI, CSS_CLASS_TBODY, CSS_CLASS_THEAD } from '../styles';\r\n/**\r\n * manager of multiple columns separated by separators each an own row renderer\r\n */\r\nvar MultiTableRowRenderer = /** @class */ (function () {\r\n    function MultiTableRowRenderer(node, htmlId, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this.node = node;\r\n        this.tableId = 0;\r\n        this.sections = [];\r\n        this.options = {\r\n            columnPadding: 0,\r\n            async: defaultMode,\r\n            minScrollDelta: 30\r\n        };\r\n        Object.assign(this.options, options);\r\n        htmlId = htmlId.startsWith('#') ? htmlId.slice(1) : htmlId;\r\n        node.id = htmlId;\r\n        node.innerHTML = \"<header id=\\\"header-\" + htmlId + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + htmlId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \" \" + cssClass(\"footer-\" + htmlId) + \"\\\">&nbsp;</footer>\\n    </header>\\n    <main id=\\\"body-\" + htmlId + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + htmlId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    </main>\";\r\n        node.classList.add(cssClass(), CSS_CLASS_MULTI, 'lineup-engine');\r\n        this.style = new GridStyleManager(this.node, htmlId);\r\n        var old = addScroll(this.main, this.options.async, function (act) {\r\n            if (Math.abs(old.left - act.left) < _this.options.minScrollDelta && Math.abs(old.width - act.width) < _this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            var isGoingRight = act.left > old.left;\r\n            old = act;\r\n            _this.onScrolledHorizontally(act.left, act.width, isGoingRight);\r\n        });\r\n    }\r\n    MultiTableRowRenderer.prototype.update = function () {\r\n        var _this = this;\r\n        this.onScrolledHorizontally(this.main.scrollLeft, this.main.clientWidth, false);\r\n        var offset = 0;\r\n        this.sections.forEach(function (s) {\r\n            s.body.style.left = s.header.style.left = offset + \"px\";\r\n            offset += s.width + _this.options.columnPadding;\r\n        });\r\n    };\r\n    MultiTableRowRenderer.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var _this = this;\r\n        var offset = 0;\r\n        var scrollEnd = scrollLeft + clientWidth;\r\n        this.sections.forEach(function (s) {\r\n            var end = offset + s.width;\r\n            if (end < scrollLeft || offset > scrollEnd) {\r\n                s.hide();\r\n            }\r\n            else {\r\n                s.show(Math.max(0, scrollLeft - offset), Math.min(scrollEnd - offset, s.width), isGoingRight);\r\n            }\r\n            offset = end + _this.options.columnPadding;\r\n        });\r\n        this.updateOffset();\r\n    };\r\n    MultiTableRowRenderer.prototype.updateOffset = function () {\r\n        var _this = this;\r\n        var headerFooter = this.header.getElementsByTagName('footer')[0];\r\n        var bodyFooter = this.main.getElementsByTagName('footer')[0];\r\n        var maxHeight = Math.max.apply(Math, [0].concat(this.sections.map(function (d) { return d.height; })));\r\n        var total = this.sections.reduce(function (a, c) { return a + c.width + _this.options.columnPadding; }, 0);\r\n        setTransform(headerFooter, total, 0);\r\n        setTransform(bodyFooter, total, maxHeight);\r\n    };\r\n    MultiTableRowRenderer.prototype.destroy = function () {\r\n        this.sections.forEach(function (d) { return d.destroy(); });\r\n        this.node.remove();\r\n    };\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"doc\", {\r\n        get: function () {\r\n            return this.node.ownerDocument;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"header\", {\r\n        get: function () {\r\n            return this.node.getElementsByTagName('header')[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"main\", {\r\n        get: function () {\r\n            return this.node.getElementsByTagName('main')[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * push another table to this instance\r\n     * @param {ITableFactory<T extends ITableSection>} factory factory for the table\r\n     * @param extras additional arguments to provide for the factory\r\n     * @returns {T} the table instance\r\n     */\r\n    MultiTableRowRenderer.prototype.pushTable = function (factory) {\r\n        var extras = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            extras[_i - 1] = arguments[_i];\r\n        }\r\n        var header = this.doc.createElement('article');\r\n        var body = this.doc.createElement('article');\r\n        var tableId = this.node.id + \"T\" + this.tableId++;\r\n        var ids = tableIds(tableId);\r\n        var cssClasses = tableCSSClasses(tableId);\r\n        header.id = ids.thead;\r\n        header.classList.add(CSS_CLASS_THEAD, cssClasses.thead);\r\n        body.id = ids.tbody;\r\n        body.classList.add(CSS_CLASS_TBODY, cssClasses.tbody);\r\n        this.header.insertBefore(header, this.header.lastElementChild); //before the footer\r\n        this.main.appendChild(body);\r\n        var table = factory.apply(void 0, [header, body, tableId, this.style].concat(extras));\r\n        table.init();\r\n        this.sections.push(table);\r\n        this.update();\r\n        return table;\r\n    };\r\n    /**\r\n     * push another separator to the manager\r\n     * @param {ISeparatorFactory<T extends ITableSection>} factory the factory to create the separator\r\n     * @param extras optional additional arguments\r\n     * @returns {T} the new created separator\r\n     */\r\n    MultiTableRowRenderer.prototype.pushSeparator = function (factory) {\r\n        var extras = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            extras[_i - 1] = arguments[_i];\r\n        }\r\n        var header = this.doc.createElement('section');\r\n        var body = this.doc.createElement('section');\r\n        header.classList.add(cssClass('header-separator'));\r\n        body.classList.add(cssClass('separator'));\r\n        this.header.insertBefore(header, this.header.lastElementChild); //before the footer\r\n        this.main.appendChild(body);\r\n        var separator = factory.apply(void 0, [header, body, this.style].concat(extras));\r\n        separator.init();\r\n        this.sections.push(separator);\r\n        this.update();\r\n        return separator;\r\n    };\r\n    /**\r\n     * removes a given table section\r\n     * @param {ITableSection} section section to remove\r\n     * @returns {boolean} successful flag\r\n     */\r\n    MultiTableRowRenderer.prototype.remove = function (section) {\r\n        var index = this.sections.indexOf(section);\r\n        if (index < 0) {\r\n            return false;\r\n        }\r\n        this.sections.splice(index, 1);\r\n        section.destroy();\r\n        this.update();\r\n        return true;\r\n    };\r\n    MultiTableRowRenderer.prototype.clear = function () {\r\n        this.sections.splice(0, this.sections.length).forEach(function (s) { return s.destroy(); });\r\n        this.update();\r\n    };\r\n    /**\r\n     * triggers and update because of a change in width of one or more table sections\r\n     */\r\n    MultiTableRowRenderer.prototype.widthChanged = function () {\r\n        this.update();\r\n    };\r\n    return MultiTableRowRenderer;\r\n}());\r\nexport default MultiTableRowRenderer;\r\n//# sourceMappingURL=MultiTableRowRenderer.js.map","import { range } from '../logic';\r\nimport { EScrollResult } from './IMixin';\r\n/**\r\n * mixin that prefetches rows depending on the scrolling direction for faster rendering\r\n */\r\nvar PrefetchMixin = /** @class */ (function () {\r\n    function PrefetchMixin(adapter, options) {\r\n        this.adapter = adapter;\r\n        this.prefetchTimeout = -1;\r\n        this.cleanupTimeout = -1;\r\n        this.options = {\r\n            prefetchRows: 20,\r\n            cleanUpRows: 10,\r\n            delay: 200\r\n        };\r\n        Object.assign(this.options, options);\r\n        return this;\r\n    }\r\n    PrefetchMixin.prototype.prefetchDown = function () {\r\n        this.prefetchTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        var context = this.adapter.context;\r\n        var nextLast = Math.min(this.adapter.visible.forcedLast + this.options.prefetchRows, context.numberOfRows - 1);\r\n        // add some rows in advance\r\n        if (this.adapter.visible.last === nextLast && this.adapter.visible.last >= (this.adapter.visible.forcedLast + this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        this.adapter.addAtBottom(this.adapter.visible.last + 1, nextLast);\r\n        //console.log('prefetch', visibleFirst, visibleLast + 1, '=>', nextLast, ranking.children.length);\r\n        this.adapter.visible.last = nextLast;\r\n    };\r\n    PrefetchMixin.prototype.prefetchUp = function () {\r\n        this.prefetchTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting() || this.adapter.visible.first <= (this.adapter.visible.forcedFirst - this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        var context = this.adapter.context;\r\n        var fakeOffset = Math.max(this.adapter.scrollOffset - this.options.prefetchRows * context.defaultRowHeight, 0);\r\n        var height = this.adapter.scrollTotal;\r\n        var _a = range(fakeOffset, height, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, firstRowPos = _a.firstRowPos;\r\n        if (first === this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(first) : 0;\r\n        this.adapter.addAtBeginning(first, this.adapter.visible.first - 1, frozenShift);\r\n        //console.log('prefetch up ', visibleFirst, '=>', first, visibleLast, ranking.children.length);\r\n        this.adapter.visible.first = first;\r\n        this.adapter.updateOffset(firstRowPos);\r\n    };\r\n    PrefetchMixin.prototype.triggerPrefetch = function (isGoingDown) {\r\n        if (this.prefetchTimeout >= 0) {\r\n            clearTimeout(this.prefetchTimeout);\r\n        }\r\n        var prefetchDownPossible = this.adapter.visible.last < (this.adapter.visible.forcedLast + this.options.prefetchRows);\r\n        var prefetchUpPossible = this.adapter.visible.first > (this.adapter.visible.forcedFirst - this.options.prefetchRows);\r\n        var isLast = this.adapter.visible.last === this.adapter.context.numberOfRows;\r\n        var isFirst = this.adapter.visible.first === 0;\r\n        if ((isGoingDown && !prefetchDownPossible && !isLast) || (!isGoingDown && !prefetchUpPossible && !isFirst)) {\r\n            return;\r\n        }\r\n        // go down if we are already at the top, too\r\n        var op = (isGoingDown || isFirst) ? this.prefetchDown.bind(this) : this.prefetchUp.bind(this);\r\n        this.prefetchTimeout = self.setTimeout(op, this.options.delay);\r\n    };\r\n    PrefetchMixin.prototype.cleanUpTop = function (first) {\r\n        this.cleanupTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        var newFirst = Math.max(0, first - this.options.cleanUpRows);\r\n        if (newFirst <= this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        //console.log('cleanup top');\r\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(newFirst) : 0;\r\n        this.adapter.removeFromBeginning(this.adapter.visible.first, newFirst - 1, frozenShift);\r\n        var context = this.adapter.context;\r\n        //console.log('cleanup up ', visibleFirst, '=>', newFirst, visibleLast, ranking.children.length);\r\n        var shift = (newFirst - this.adapter.visible.first) * context.defaultRowHeight;\r\n        if (context.exceptions.length > 0) {\r\n            for (var i = this.adapter.visible.first; i < newFirst; ++i) {\r\n                if (context.exceptionsLookup.has(i)) {\r\n                    shift += context.exceptionsLookup.get(i) - context.defaultRowHeight;\r\n                }\r\n            }\r\n        }\r\n        this.adapter.visible.first = newFirst;\r\n        this.adapter.updateOffset(this.adapter.visibleFirstRowPos + shift);\r\n        this.prefetchDown();\r\n    };\r\n    PrefetchMixin.prototype.cleanUpBottom = function (last) {\r\n        this.cleanupTimeout = -1;\r\n        var newLast = last + this.options.cleanUpRows;\r\n        if (this.adapter.visible.last <= newLast) {\r\n            return;\r\n        }\r\n        //console.log('cleanup bottom');\r\n        this.adapter.removeFromBottom(newLast + 1, this.adapter.visible.last);\r\n        this.adapter.visible.last = newLast;\r\n        this.prefetchUp();\r\n    };\r\n    PrefetchMixin.prototype.triggerCleanUp = function (first, last, isGoingDown) {\r\n        if (this.cleanupTimeout >= 0) {\r\n            clearTimeout(this.cleanupTimeout);\r\n        }\r\n        if ((isGoingDown && (first - this.options.cleanUpRows) <= this.adapter.visible.first) || (!isGoingDown && this.adapter.visible.last <= (last + this.options.cleanUpRows))) {\r\n            return;\r\n        }\r\n        this.cleanupTimeout = self.setTimeout(isGoingDown ? this.cleanUpTop.bind(this) : this.cleanUpBottom.bind(this), this.options.delay, isGoingDown ? first : last);\r\n    };\r\n    PrefetchMixin.prototype.onScrolled = function (isGoingDown, scrollResult) {\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        if (scrollResult !== EScrollResult.ALL && this.options.cleanUpRows > 0) {\r\n            this.triggerCleanUp(this.adapter.visible.forcedFirst, this.adapter.visible.forcedLast, isGoingDown);\r\n        }\r\n        if (scrollResult !== EScrollResult.NONE && this.options.prefetchRows > 0) {\r\n            this.triggerPrefetch(isGoingDown);\r\n        }\r\n    };\r\n    return PrefetchMixin;\r\n}());\r\nexport default PrefetchMixin;\r\n//# sourceMappingURL=PrefetchMixin.js.map","import { ABORTED, isAbortAble, isAsyncUpdate } from '../../abortAble';\r\nimport { isLoadingCell } from '../../ARowRenderer';\r\nimport { clear } from '../../internal';\r\nimport { isScrollEventWaiting } from '../../internal/scroll';\r\nimport { range, updateFrozen } from '../../logic';\r\nimport { EScrollResult } from '../../mixin';\r\nimport { cssClass, CSS_CLASS_FROZEN, CSS_CLASS_LOADING, CSS_CLASS_SHIFTED, CSS_CLASS_TD, CSS_CLASS_TH } from '../../styles';\r\nvar debug = false;\r\n/**\r\n * @internal\r\n */\r\nvar ACellAdapter = /** @class */ (function () {\r\n    function ACellAdapter(header, style, tableId) {\r\n        var _this = this;\r\n        var mixinClasses = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            mixinClasses[_i - 3] = arguments[_i];\r\n        }\r\n        this.header = header;\r\n        this.style = style;\r\n        this.tableId = tableId;\r\n        /**\r\n         * pool of cells per column\r\n         * @type {Array}\r\n         */\r\n        this.cellPool = [];\r\n        this.loading = new WeakMap();\r\n        this.visibleColumns = {\r\n            frozen: [],\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        this.visibleFirstColumnPos = 0;\r\n        this.horizontallyShifted = false;\r\n        this.columnAdapter = this.createColumnAdapter();\r\n        this.columnMixins = mixinClasses.map(function (mixinClass) { return new mixinClass(_this.columnAdapter); });\r\n        this.columnFragment = header.ownerDocument.createDocumentFragment();\r\n    }\r\n    ACellAdapter.prototype.leftShift = function () {\r\n        var ctx = this.context;\r\n        var frozen = this.visibleColumns.frozen.reduce(function (a, d) { return a + ctx.columns[d].width + ctx.column.padding(d); }, 0);\r\n        return this.visibleFirstColumnPos - frozen;\r\n    };\r\n    Object.defineProperty(ACellAdapter.prototype, \"headerScroller\", {\r\n        get: function () {\r\n            return this.header.parentElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ACellAdapter.prototype.addColumnMixin = function (mixinClass, options) {\r\n        this.columnMixins.push(new mixinClass(this.columnAdapter, options));\r\n    };\r\n    ACellAdapter.prototype.createColumnAdapter = function () {\r\n        var _this = this;\r\n        var r = {\r\n            visible: this.visibleColumns,\r\n            addAtBeginning: this.addColumnAtStart.bind(this),\r\n            addAtBottom: this.addColumnAtEnd.bind(this),\r\n            removeFromBeginning: this.removeColumnFromStart.bind(this),\r\n            removeFromBottom: this.removeColumnFromEnd.bind(this),\r\n            updateOffset: this.updateColumnOffset.bind(this),\r\n            scroller: this.headerScroller,\r\n            syncFrozen: this.syncFrozen.bind(this),\r\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.headerScroller, 'animation'); }\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: function () { return _this.visibleFirstColumnPos; },\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: function () { return _this.context.column; },\r\n                enumerable: true\r\n            },\r\n            scrollOffset: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.left : 0; },\r\n                enumerable: true\r\n            },\r\n            scrollTotal: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.width : _this.headerScroller.clientWidth; },\r\n                enumerable: true\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n    ACellAdapter.prototype.init = function () {\r\n        var _this = this;\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\r\n        context.columns.forEach(function () {\r\n            //init pool\r\n            _this.cellPool.push([]);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var scrollResult = this.onScrolledHorizontallyImpl(scrollLeft, clientWidth);\r\n        for (var _i = 0, _a = this.columnMixins; _i < _a.length; _i++) {\r\n            var mixin = _a[_i];\r\n            mixin.onScrolled(isGoingRight, scrollResult);\r\n        }\r\n        return scrollResult;\r\n    };\r\n    ACellAdapter.prototype.removeColumnFromStart = function (from, to, frozenShift) {\r\n        var _this = this;\r\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\r\n        this.forEachRow(function (row) {\r\n            _this.removeCellFromStart(row, from, to, frozenShift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeCellFromStart = function (row, from, to, frozenShift) {\r\n        for (var i = from; i <= to; ++i) {\r\n            var node = (frozenShift === 0 ? row.firstElementChild : row.children[frozenShift]);\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeColumnFromEnd = function (from, to) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeCellFromEnd(row, from, to);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeCellFromEnd = function (row, from, to) {\r\n        for (var i = to; i >= from; --i) {\r\n            var node = row.lastElementChild;\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeFrozenCells = function (row, columnIndices, shift) {\r\n        for (var _i = 0, columnIndices_1 = columnIndices; _i < columnIndices_1.length; _i++) {\r\n            var columnIndex = columnIndices_1[_i];\r\n            var node = row.children[shift];\r\n            node.remove();\r\n            this.recycleCell(node, columnIndex);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeFrozenColumns = function (columnIndices, shift) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeFrozenCells(row, columnIndices, shift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeAllColumns = function (includingFrozen) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeAllCells(row, includingFrozen);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeAllCells = function (row, includingFrozen, shift) {\r\n        var _this = this;\r\n        if (shift === void 0) { shift = this.visibleColumns.first; }\r\n        var arr = Array.from(row.children);\r\n        var frozen = this.visibleColumns.frozen;\r\n        clear(row);\r\n        if (includingFrozen || frozen.length === 0) {\r\n            for (var _i = 0, frozen_1 = frozen; _i < frozen_1.length; _i++) {\r\n                var i = frozen_1[_i];\r\n                this.recycleCell(arr.shift(), i);\r\n            }\r\n        }\r\n        else {\r\n            // have frozen and keep them, so readd them\r\n            for (var _a = 0, frozen_2 = frozen; _a < frozen_2.length; _a++) {\r\n                var _1 = frozen_2[_a];\r\n                row.appendChild(arr.shift());\r\n            }\r\n        }\r\n        arr.forEach(function (item, i) {\r\n            _this.recycleCell(item, i + shift);\r\n        });\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.selectProxyCell = function (row, column, columns) {\r\n        var pool = this.cellPool[column];\r\n        var columnObj = columns[column];\r\n        var item;\r\n        var ready;\r\n        var pooled = pool.pop();\r\n        var r = pooled ? this.updateCell(pooled, row, columnObj) || pooled : this.createCell(this.header.ownerDocument, row, columnObj);\r\n        if (isAsyncUpdate(r)) {\r\n            item = r.item;\r\n            ready = r.ready;\r\n        }\r\n        else {\r\n            item = r;\r\n        }\r\n        if (item !== pooled) {\r\n            item.dataset.id = columnObj.id;\r\n            item.classList.add(CSS_CLASS_TD, this.style.cssClasses.td, cssClass(\"td-\" + this.tableId));\r\n        }\r\n        this.updateShiftedState(item, columnObj);\r\n        return { item: item, ready: ready };\r\n    };\r\n    ACellAdapter.prototype.handleCellReady = function (item, ready, column) {\r\n        var _this = this;\r\n        if (column === void 0) { column = -1; }\r\n        item.classList.add(CSS_CLASS_LOADING);\r\n        var abort = ready;\r\n        //lazy loading\r\n        this.loading.set(item, abort);\r\n        abort.then(function (result) {\r\n            _this.loading.delete(item);\r\n            item.classList.remove(CSS_CLASS_LOADING);\r\n            if (result === ABORTED && column >= 0) {\r\n                //aborted can recycle the real one\r\n                _this.cellPool[column].push(item);\r\n            }\r\n        });\r\n        return item;\r\n    };\r\n    ACellAdapter.prototype.selectCell = function (row, column, columns) {\r\n        var _a = this.selectProxyCell(row, column, columns), item = _a.item, ready = _a.ready;\r\n        if (!isAbortAble(ready)) {\r\n            return item;\r\n        }\r\n        return this.handleCellReady(item, ready, column);\r\n    };\r\n    ACellAdapter.prototype.updateShiftedState = function (node, col) {\r\n        node.classList.toggle(CSS_CLASS_SHIFTED, col.frozen && this.horizontallyShifted);\r\n    };\r\n    ACellAdapter.prototype.recycleCell = function (item, column) {\r\n        if (column === void 0) { column = -1; }\r\n        // check if the dom element is still being manipulated\r\n        if (this.loading.has(item)) {\r\n            var abort = this.loading.get(item);\r\n            abort.abort();\r\n        }\r\n        else if (!isLoadingCell(item) && column >= 0) {\r\n            this.cellPool[column].push(item);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.addColumnAtStart = function (from, to, frozenShift) {\r\n        var _this = this;\r\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.addCellAtStart(row, rowIndex, from, to, frozenShift, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.addCellAtStart = function (row, rowIndex, from, to, frozenShift, columns) {\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n        for (var i = to; i >= from; --i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            row.insertBefore(cell, frozenShift > 0 ? row.children[frozenShift] : row.firstChild);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.insertFrozenCells = function (row, rowIndex, columnIndices, shift, columns) {\r\n        var before = row.children[shift];\r\n        for (var _i = 0, columnIndices_2 = columnIndices; _i < columnIndices_2.length; _i++) {\r\n            var i = columnIndices_2[_i];\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            if (before) {\r\n                row.insertBefore(cell, before);\r\n            }\r\n            else {\r\n                row.appendChild(cell);\r\n            }\r\n        }\r\n    };\r\n    ACellAdapter.prototype.insertFrozenColumns = function (columnIndices, shift) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.insertFrozenCells(row, rowIndex, columnIndices, shift, columns);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.addColumnAtEnd = function (from, to) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.addCellAtEnd(row, rowIndex, from, to, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.verifyRows = function () {\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) { return verifyRow(row, rowIndex, columns); });\r\n    };\r\n    ACellAdapter.prototype.addCellAtEnd = function (row, rowIndex, from, to, columns) {\r\n        for (var i = from; i <= to; ++i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            row.appendChild(cell);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.updateHeaders = function () {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        Array.from(this.header.children).forEach(function (node, i) {\r\n            var base = node;\r\n            var col = columns[i];\r\n            var r = _this.updateHeader(base, col);\r\n            var n;\r\n            if (isAsyncUpdate(r)) {\r\n                n = _this.handleCellReady(r.item, r.ready, -1);\r\n            }\r\n            else {\r\n                n = r || base;\r\n            }\r\n            if (n === base) {\r\n                return;\r\n            }\r\n            n.dataset.id = col.id;\r\n            n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\r\n            _this.header.replaceChild(base, n);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.recreate = function (left, width) {\r\n        var _this = this;\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.leftShift(), this.tableId);\r\n        this.clearPool();\r\n        // init pool\r\n        for (var i = this.cellPool.length; i < context.columns.length; ++i) {\r\n            this.cellPool.push([]);\r\n        }\r\n        //create all header columns\r\n        {\r\n            var fragment_1 = this.columnFragment;\r\n            var document_1 = fragment_1.ownerDocument;\r\n            // create lookup cache to reuse headers\r\n            var ids_1 = new Map();\r\n            while (this.header.lastChild) {\r\n                var c = this.header.lastChild;\r\n                this.header.removeChild(c);\r\n                ids_1.set(c.dataset.id, c);\r\n            }\r\n            context.columns.forEach(function (col) {\r\n                var existing = ids_1.get(col.id);\r\n                var r = existing ? _this.updateHeader(existing, col) || existing : _this.createHeader(document_1, col);\r\n                var n;\r\n                if (isAsyncUpdate(r)) {\r\n                    n = _this.handleCellReady(r.item, r.ready, -1);\r\n                }\r\n                else {\r\n                    n = r;\r\n                }\r\n                if (n !== existing) {\r\n                    n.dataset.id = col.id;\r\n                    n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\r\n                }\r\n                fragment_1.appendChild(n);\r\n            });\r\n            this.header.appendChild(fragment_1);\r\n        }\r\n        var _a = range(left, width, context.column.defaultRowHeight, context.column.exceptions, context.column.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        this.visibleColumns.first = this.visibleColumns.forcedFirst = first;\r\n        this.visibleColumns.last = this.visibleColumns.forcedLast = last;\r\n        if (context.columns.some(function (c) { return c.frozen; })) {\r\n            var target = updateFrozen([], context.columns, first).target;\r\n            this.visibleColumns.frozen = target;\r\n        }\r\n        else {\r\n            this.visibleColumns.frozen = [];\r\n        }\r\n        this.updateColumnOffset(firstRowPos);\r\n    };\r\n    ACellAdapter.prototype.clearPool = function () {\r\n        this.cellPool.forEach(function (p) { return p.splice(0, p.length); });\r\n    };\r\n    ACellAdapter.prototype.updateColumnOffset = function (firstColumnPos) {\r\n        var changed = firstColumnPos !== this.visibleFirstColumnPos;\r\n        this.visibleFirstColumnPos = firstColumnPos;\r\n        if (changed) {\r\n            var context = this.context;\r\n            this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.leftShift(), this.tableId);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.createRow = function (node, rowIndex) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        if (visible.frozen.length > 0) {\r\n            for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\r\n                var i = _a[_i];\r\n                var cell = this.selectCell(rowIndex, i, columns);\r\n                node.appendChild(cell);\r\n            }\r\n        }\r\n        for (var i = visible.first; i <= visible.last; ++i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            node.appendChild(cell);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.updateRow = function (node, rowIndex) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        //columns may not match anymore if it is a pooled item a long time ago\r\n        switch (node.childElementCount) {\r\n            case 0:\r\n                if (visible.frozen.length > 0) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            case 1:\r\n                var old = node.firstElementChild;\r\n                var id_1 = old.dataset.id;\r\n                var columnIndex = columns.findIndex(function (c) { return c.id === id_1; });\r\n                node.removeChild(old);\r\n                if (columnIndex >= 0) {\r\n                    this.recycleCell(old, columnIndex);\r\n                }\r\n                if (visible.frozen.length > 0) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            default:\r\n                this.mergeColumns(node, rowIndex);\r\n                break;\r\n        }\r\n    };\r\n    ACellAdapter.prototype.mergeColumns = function (node, rowIndex) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        var ids = new Map();\r\n        while (node.lastChild) {\r\n            var c = node.lastChild;\r\n            node.removeChild(c);\r\n            ids.set(c.dataset.id, c);\r\n        }\r\n        var updateImpl = function (i) {\r\n            var col = columns[i];\r\n            var existing = ids.get(col.id);\r\n            if (!existing) {\r\n                var cell_1 = _this.selectCell(rowIndex, i, columns);\r\n                node.appendChild(cell_1);\r\n                return;\r\n            }\r\n            ids.delete(col.id);\r\n            var r = _this.updateCell(existing, rowIndex, col) || existing;\r\n            var cell;\r\n            if (isAsyncUpdate(r)) {\r\n                cell = _this.handleCellReady(r.item, r.ready, i);\r\n            }\r\n            else {\r\n                cell = r;\r\n            }\r\n            if (cell && cell !== existing) {\r\n                cell.dataset.id = col.id;\r\n                cell.classList.add(CSS_CLASS_TD, _this.style.cssClasses.td, cssClass(\"td-\" + _this.tableId));\r\n            }\r\n            _this.updateShiftedState(cell, col);\r\n            node.appendChild(cell);\r\n        };\r\n        for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\r\n            var frozen = _a[_i];\r\n            updateImpl(frozen);\r\n        }\r\n        for (var i = visible.first; i <= visible.last; ++i) {\r\n            updateImpl(i);\r\n        }\r\n        if (ids.size === 0) {\r\n            return;\r\n        }\r\n        // recycle\r\n        var byId = new Map(columns.map(function (d, i) { return [d.id, i]; }));\r\n        ids.forEach(function (node, key) {\r\n            var index = byId.get(key);\r\n            if (index != null && index >= 0) {\r\n                _this.recycleCell(node, index);\r\n            }\r\n        });\r\n    };\r\n    ACellAdapter.prototype.updateShiftedStates = function () {\r\n        if (!this.context.columns.some(function (d) { return d.frozen; })) {\r\n            return;\r\n        }\r\n        var shifted = this.horizontallyShifted;\r\n        var clazz = CSS_CLASS_SHIFTED;\r\n        if (shifted) {\r\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\r\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\r\n            for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {\r\n                var item = headers_1[_i];\r\n                item.classList.add(clazz);\r\n            }\r\n            for (var _a = 0, bodies_1 = bodies; _a < bodies_1.length; _a++) {\r\n                var item = bodies_1[_a];\r\n                item.classList.add(clazz);\r\n            }\r\n        }\r\n        else {\r\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\r\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\r\n            for (var _b = 0, headers_2 = headers; _b < headers_2.length; _b++) {\r\n                var item = headers_2[_b];\r\n                item.classList.remove(clazz);\r\n            }\r\n            for (var _c = 0, bodies_2 = bodies; _c < bodies_2.length; _c++) {\r\n                var item = bodies_2[_c];\r\n                item.classList.remove(clazz);\r\n            }\r\n        }\r\n    };\r\n    ACellAdapter.prototype.syncFrozen = function (first) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        if (!columns.some(function (d) { return d.frozen; })) {\r\n            return 0;\r\n        }\r\n        if (first === 0) {\r\n            if (visible.frozen.length > 0) {\r\n                this.removeFrozenColumns(visible.frozen, 0);\r\n                visible.frozen = [];\r\n            }\r\n            return 0;\r\n        }\r\n        var old = visible.frozen.length;\r\n        var _a = updateFrozen(visible.frozen, columns, first), target = _a.target, added = _a.added, removed = _a.removed;\r\n        if (removed.length > 0) {\r\n            this.removeFrozenColumns(removed, old - removed.length);\r\n        }\r\n        if (added.length > 0) {\r\n            this.insertFrozenColumns(added, old - removed.length);\r\n        }\r\n        visible.frozen = target;\r\n        return target.length;\r\n    };\r\n    ACellAdapter.prototype.onScrolledHorizontallyImpl = function (scrollLeft, clientWidth) {\r\n        var shiftingChanged = this.horizontallyShifted !== scrollLeft > 0;\r\n        this.horizontallyShifted = scrollLeft > 0;\r\n        var column = this.context.column;\r\n        var _a = range(scrollLeft, clientWidth, column.defaultRowHeight, column.exceptions, column.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        var visible = this.visibleColumns;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            //nothing to do\r\n            if (shiftingChanged) {\r\n                this.updateShiftedStates();\r\n            }\r\n            return EScrollResult.NONE;\r\n        }\r\n        var r = EScrollResult.SOME;\r\n        var frozenShift = this.syncFrozen(first);\r\n        if (first > visible.last || last < visible.first) {\r\n            //no overlap, clean and draw everything\r\n            //console.log(`ff added: ${last - first + 1} removed: ${visibleLast - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //removeRows(visibleFirst, visibleLast);\r\n            this.removeAllColumns(false);\r\n            this.addColumnAtEnd(first, last);\r\n            r = EScrollResult.ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            //some first rows missing and some last rows to much\r\n            //console.log(`up added: ${visibleFirst - first + 1} removed: ${visibleLast - last + 1} ${first}:${last} ${offset}`);\r\n            this.removeColumnFromEnd(last + 1, visible.last);\r\n            this.updateShiftedStates();\r\n            this.addColumnAtStart(first, visible.first - 1, frozenShift);\r\n            r = EScrollResult.SOME_TOP;\r\n        }\r\n        else {\r\n            //console.log(`do added: ${last - visibleLast + 1} removed: ${first - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //some last rows missing and some first rows to much\r\n            this.removeColumnFromStart(visible.first, first - 1, frozenShift);\r\n            this.updateShiftedStates();\r\n            this.addColumnAtEnd(visible.last + 1, last);\r\n            r = EScrollResult.SOME_BOTTOM;\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateColumnOffset(firstRowPos);\r\n        return r;\r\n    };\r\n    return ACellAdapter;\r\n}());\r\nexport { ACellAdapter };\r\n/**\r\n * @internal\r\n */\r\nexport default ACellAdapter;\r\nfunction verifyRow(row, index, columns) {\r\n    var cols = Array.from(row.children);\r\n    //sort incrementally\r\n    if (cols.length <= 1) {\r\n        return;\r\n    }\r\n    var colObjs = cols.map(function (c) { return columns.find(function (d) { return d.id === c.dataset.id; }); });\r\n    console.assert(colObjs.every(function (d) { return Boolean(d); }), 'all columns must exist', index);\r\n    console.assert(colObjs.every(function (d, i) { return i === 0 || d.index >= colObjs[i - 1].index; }), 'all columns in ascending order', index);\r\n    console.assert((new Set(colObjs)).size === colObjs.length, 'unique columns', colObjs);\r\n}\r\n//# sourceMappingURL=ACellAdapter.js.map","import * as tslib_1 from \"tslib\";\r\nimport ARowRenderer, { setTransform } from '../ARowRenderer';\r\nimport { EScrollResult } from '../mixin';\r\nimport { CSS_CLASS_HIDDEN, CSS_CLASS_LOADING } from '../styles';\r\nimport ACellAdapter from './internal/ACellAdapter';\r\n/**\r\n * base class for a cell renderer as table section\r\n */\r\nvar ACellTableSection = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ACellTableSection, _super);\r\n    function ACellTableSection(header, body, tableId, style, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, body, options) || this;\r\n        _this.header = header;\r\n        _this.body = body;\r\n        _this.tableId = tableId;\r\n        _this.style = style;\r\n        var that = _this;\r\n        var LocalCell = /** @class */ (function (_super) {\r\n            tslib_1.__extends(LocalCell, _super);\r\n            function LocalCell() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Object.defineProperty(LocalCell.prototype, \"context\", {\r\n                get: function () {\r\n                    return that.context;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Object.defineProperty(LocalCell.prototype, \"body\", {\r\n                get: function () {\r\n                    return that.body;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Object.defineProperty(LocalCell.prototype, \"lastScrollInfo\", {\r\n                get: function () {\r\n                    return that.lastScrollInfo;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            LocalCell.prototype.createHeader = function (document, column) {\r\n                return that.createHeader(document, column);\r\n            };\r\n            LocalCell.prototype.updateHeader = function (node, column) {\r\n                return that.updateHeader(node, column);\r\n            };\r\n            LocalCell.prototype.createCell = function (document, index, column) {\r\n                return that.createCell(document, index, column);\r\n            };\r\n            LocalCell.prototype.updateColumnOffset = function (firstColumnPos) {\r\n                _super.prototype.updateColumnOffset.call(this, firstColumnPos);\r\n                that.updateOffset(that.visibleFirstRowPos);\r\n            };\r\n            LocalCell.prototype.updateCell = function (node, index, column) {\r\n                return that.updateCell(node, index, column);\r\n            };\r\n            LocalCell.prototype.forEachRow = function (callback) {\r\n                return that.forEachRow(callback);\r\n            };\r\n            return LocalCell;\r\n        }(ACellAdapter));\r\n        _this.cell = new (LocalCell.bind.apply(LocalCell, [void 0, _this.header, _this.style, tableId].concat((options.mixins || []))))();\r\n        return _this;\r\n    }\r\n    ACellTableSection.prototype.addColumnMixin = function (mixinClass, options) {\r\n        this.cell.addColumnMixin(mixinClass, options);\r\n    };\r\n    Object.defineProperty(ACellTableSection.prototype, \"idPrefix\", {\r\n        get: function () {\r\n            return this.tableId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"width\", {\r\n        get: function () {\r\n            return this.context.column.totalHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"visibleColumns\", {\r\n        get: function () {\r\n            return this.cell.visibleColumns;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"visibleFirstColumnPos\", {\r\n        get: function () {\r\n            return this.cell.visibleFirstColumnPos;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"height\", {\r\n        get: function () {\r\n            return this.context.totalHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"hidden\", {\r\n        get: function () {\r\n            return this.header.classList.contains(CSS_CLASS_LOADING);\r\n        },\r\n        set: function (value) {\r\n            var old = this.hidden;\r\n            if (old === value) {\r\n                return;\r\n            }\r\n            this.header.classList.toggle(CSS_CLASS_LOADING, value);\r\n            this.body.classList.toggle(CSS_CLASS_LOADING, value);\r\n            this.header.classList.toggle(CSS_CLASS_HIDDEN, value);\r\n            this.body.classList.toggle(CSS_CLASS_HIDDEN, value);\r\n            this.onVisibilityChanged(!value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ACellTableSection.prototype.updateSizer = function (firstRowPos) {\r\n        this.updateShifts(firstRowPos, this.cell.leftShift());\r\n        // no sizer update since centrally managed\r\n    };\r\n    ACellTableSection.prototype.updateShifts = function (top, _left) {\r\n        setTransform(this.body, 0 /*left.toFixed(0)*/, top.toFixed(0));\r\n    };\r\n    /**\r\n     * hook when the visibility changes\r\n     * @param {boolean} _visible current visibility\r\n     */\r\n    ACellTableSection.prototype.onVisibilityChanged = function (_visible) {\r\n        // hook\r\n    };\r\n    ACellTableSection.prototype.hide = function () {\r\n        this.hidden = true;\r\n    };\r\n    ACellTableSection.prototype.show = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var wasHidden = this.hidden;\r\n        this.hidden = false;\r\n        if (wasHidden) { // full update\r\n            this.revalidate();\r\n        }\r\n        else {\r\n            this.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n        }\r\n    };\r\n    ACellTableSection.prototype.init = function () {\r\n        this.hide(); // hide by default\r\n        this.cell.init();\r\n        _super.prototype.init.call(this);\r\n    };\r\n    ACellTableSection.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        this.header.remove();\r\n        this.style.remove(this.tableId);\r\n    };\r\n    ACellTableSection.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\r\n        if (this.hidden) {\r\n            return EScrollResult.NONE;\r\n        }\r\n        return _super.prototype.onScrolledVertically.call(this, scrollTop, clientHeight, isGoingDown);\r\n    };\r\n    ACellTableSection.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var r = this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n        this.updateSizer(this.visibleFirstRowPos);\r\n        return r;\r\n    };\r\n    /**\r\n     * triggers updating the header\r\n     */\r\n    ACellTableSection.prototype.updateHeaders = function () {\r\n        this.cell.updateHeaders();\r\n    };\r\n    ACellTableSection.prototype.handleCellReady = function (item, ready, column) {\r\n        if (column === void 0) { column = -1; }\r\n        return this.cell.handleCellReady(item, ready, column);\r\n    };\r\n    ACellTableSection.prototype.recycleCell = function (item, column) {\r\n        if (column === void 0) { column = -1; }\r\n        this.cell.recycleCell(item, column);\r\n    };\r\n    /**\r\n     * trigger an update all all column widths\r\n     */\r\n    ACellTableSection.prototype.updateColumnWidths = function () {\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.cell.leftShift(), this.tableId);\r\n    };\r\n    ACellTableSection.prototype.recreate = function (ctx) {\r\n        var scroller = this.bodyScroller;\r\n        var oldLeft = scroller.scrollLeft;\r\n        this.cell.recreate(oldLeft, scroller.clientWidth);\r\n        _super.prototype.recreate.call(this, ctx);\r\n        // restore left\r\n        scroller.scrollLeft = oldLeft;\r\n    };\r\n    ACellTableSection.prototype.clearPool = function () {\r\n        _super.prototype.clearPool.call(this);\r\n        this.cell.clearPool();\r\n    };\r\n    ACellTableSection.prototype.createRow = function (node, rowIndex) {\r\n        this.cell.createRow(node, rowIndex);\r\n        node.classList.add(this.style.cssClasses.tr);\r\n    };\r\n    ACellTableSection.prototype.updateRow = function (node, rowIndex) {\r\n        this.cell.updateRow(node, rowIndex);\r\n    };\r\n    return ACellTableSection;\r\n}(ARowRenderer));\r\nexport { ACellTableSection };\r\nexport default ACellTableSection;\r\n//# sourceMappingURL=ACellTableSection.js.map","import {defaultPhases, EAnimationMode, IAnimationContext, IAnimationItem, IExceptionContext, IPhase, KeyFinder} from 'lineupengine';\nimport {IGroupData, IGroupItem, isGroup} from '../model';\n\n/** @internal */\nexport interface IGroupLookUp {\n  item2groupIndex: Map<number, number>;\n  group2firstItemIndex: Map<string, number>;\n}\n\nfunction toGroupLookup(items: (IGroupItem | IGroupData)[]): IGroupLookUp {\n  const item2groupIndex = new Map<number, number>();\n  const group2firstItemIndex = new Map<string, number>();\n  items.forEach((item, i) => {\n    if (isGroup(item)) {\n      for (let o = 0; o < item.order.length; ++o) {\n        item2groupIndex.set(o, i);\n      }\n    } else if (item.group && item.relativeIndex === 0) {\n      group2firstItemIndex.set(item.group.name, i);\n    }\n  });\n  return {item2groupIndex, group2firstItemIndex};\n}\n\nfunction toKey(item: IGroupItem | IGroupData) {\n  if (isGroup(item)) {\n    return item.name;\n  }\n  return (<IGroupItem>item).dataIndex.toString();\n}\n\n/** @internal */\nexport function lineupAnimation(previous: IExceptionContext, previousData: (IGroupItem | IGroupData)[], currentData: (IGroupItem | IGroupData)[]): IAnimationContext {\n\n  const previousKey = (index: number) => toKey(previousData[index]);\n  const currentKey = (index: number) => toKey(currentData[index]);\n\n\n  const previousGroupCount = previousData.reduce((acc, i) => acc + (isGroup(i) ? 1 : 0), 0);\n  const currentGroupCount = currentData.reduce((acc, i) => acc + (isGroup(i) ? 1 : 0), 0);\n\n  if (previousGroupCount === currentGroupCount) {\n    // reorder or filter only\n    return {currentKey, previous, previousKey};\n  }\n\n  // try to appear where the group was uncollapsed and vice versa\n  let prevHelper: IGroupLookUp;\n  const appearPosition = (currentRowIndex: number, previousFinder: KeyFinder, defaultValue: number) => {\n    if (!prevHelper) {\n      prevHelper = toGroupLookup(previousData);\n    }\n    const item = currentData[currentRowIndex];\n    const referenceIndex = isGroup(item) ? prevHelper.group2firstItemIndex.get(item.name) : prevHelper.item2groupIndex.get(item.dataIndex);\n    if (referenceIndex === undefined) {\n      return defaultValue;\n    }\n    const pos = previousFinder.posByKey(previousKey(referenceIndex));\n    return pos.pos >= 0 ? pos.pos : defaultValue;\n  };\n\n\n  let currHelper: IGroupLookUp;\n  const removePosition = (previousRowIndex: number, currentFinder: KeyFinder, defaultValue: number) => {\n    if (!currHelper) {\n      currHelper = toGroupLookup(currentData);\n    }\n    const item = previousData[previousRowIndex];\n    const referenceIndex = isGroup(item) ? currHelper.group2firstItemIndex.get(item.name) : currHelper.item2groupIndex.get(item.dataIndex);\n    if (referenceIndex === undefined) {\n      return defaultValue;\n    }\n    const pos = currentFinder.posByKey(currentKey(referenceIndex));\n    return pos.pos >= 0 ? pos.pos : defaultValue;\n  };\n\n  const phases: IPhase[] = [\n    Object.assign({}, defaultPhases[0], {\n      apply(item: Readonly<IAnimationItem>, previousFinder: KeyFinder) {\n        defaultPhases[0].apply(item);\n        if (item.mode === EAnimationMode.SHOW) {\n          item.node.style.transform = `translate(0, ${appearPosition(item.current.index, previousFinder, item.previous.y) - item.nodeY}px)`;\n        }\n      }\n    }),\n    Object.assign({}, defaultPhases[1], {\n      apply(item: Readonly<IAnimationItem>, _previousFinder: KeyFinder, currentFinder: KeyFinder) {\n        defaultPhases[1].apply(item);\n        if (item.mode === EAnimationMode.HIDE) {\n          item.node.style.transform = `translate(0, ${removePosition(item.previous.index, currentFinder, item.current.y) - item.nodeY}px)`;\n        }\n      }\n    }),\n    defaultPhases[defaultPhases.length - 1]\n  ];\n\n  return {previous, previousKey, currentKey, phases};\n}\n","import {IColumn, IAbortAblePromise, IAsyncUpdate, isAbortAble} from 'lineupengine';\nimport {Column} from '../model';\nimport {ICellRenderer, IGroupCellRenderer} from '../renderer';\nimport {ISummaryRenderer, IRenderCallback} from '../renderer';\nimport {createHeader, updateHeader} from './header';\nimport {IRankingContext} from './interfaces';\nimport {ILineUpFlags} from '../config';\nimport {cssClass, engineCssClass} from '../styles';\nimport {isPromiseLike} from '../internal';\n\nexport interface IRenderers {\n  singleId: string;\n  single: ICellRenderer;\n  groupId: string;\n  group: IGroupCellRenderer;\n  summaryId: string;\n  summary: ISummaryRenderer | null;\n  singleTemplate: HTMLElement | null;\n  groupTemplate: HTMLElement | null;\n  summaryTemplate: HTMLElement | null;\n}\n\nexport default class RenderColumn implements IColumn {\n  renderers: IRenderers | null = null;\n\n  constructor(public readonly c: Column, public index: number, protected ctx: IRankingContext, protected readonly flags: ILineUpFlags) {\n\n  }\n\n  get width() {\n    return this.c.getWidth();\n  }\n\n  get id() {\n    return this.c.id;\n  }\n\n  get frozen() {\n    return this.flags.disableFrozenColumns ? false : this.c.frozen;\n  }\n\n  private singleRenderer() {\n    if (!this.renderers || !this.renderers.single) {\n      return null;\n    }\n    if (this.renderers.singleTemplate) {\n      return <HTMLElement>this.renderers.singleTemplate.cloneNode(true);\n    }\n    const elem = this.ctx.asElement(this.renderers.single.template);\n    elem.classList.add(cssClass(`renderer-${this.renderers.singleId}`), cssClass('detail'));\n    elem.dataset.renderer = this.renderers.singleId;\n    elem.dataset.group = 'd';\n\n    this.renderers.singleTemplate = <HTMLElement>elem.cloneNode(true);\n    return elem;\n  }\n\n  private groupRenderer() {\n    if (!this.renderers || !this.renderers.group) {\n      return null;\n    }\n    if (this.renderers.groupTemplate) {\n      return <HTMLElement>this.renderers.groupTemplate.cloneNode(true);\n    }\n    const elem = this.ctx.asElement(this.renderers.group.template);\n    elem.classList.add(cssClass(`renderer-${this.renderers.groupId}`), cssClass('group'));\n    elem.dataset.renderer = this.renderers.groupId;\n    elem.dataset.group = 'g';\n\n    this.renderers.groupTemplate = <HTMLElement>elem.cloneNode(true);\n    return elem;\n  }\n\n  private summaryRenderer() {\n    if (!this.renderers || !this.renderers.summary) {\n      return null;\n    }\n    if (this.renderers.summaryTemplate) {\n      return <HTMLElement>this.renderers.summaryTemplate.cloneNode(true);\n    }\n    const elem = this.ctx.asElement(this.renderers.summary.template);\n    elem.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(`renderer-${this.renderers.summaryId}`));\n    elem.dataset.renderer = this.renderers.summaryId;\n\n    this.renderers.summaryTemplate = <HTMLElement>elem.cloneNode(true);\n    return elem;\n  }\n\n  createHeader(): HTMLElement | IAsyncUpdate<HTMLElement> {\n    const node = createHeader(this.c, this.ctx, {\n      extraPrefix: 'th',\n      dragAble: this.flags.advancedUIFeatures,\n      mergeDropAble: this.flags.advancedModelFeatures,\n      rearrangeAble: this.flags.advancedUIFeatures,\n      resizeable: this.flags.advancedUIFeatures\n    });\n    node.classList.add(cssClass('header'));\n    if (!this.flags.disableFrozenColumns) {\n      node.classList.toggle(engineCssClass('frozen'), this.frozen);\n    }\n\n    if (this.renderers && this.renderers.summary) {\n      const summary = this.summaryRenderer()!;\n      node.appendChild(summary);\n    }\n    return this.updateHeader(node);\n  }\n\n  hasSummaryLine() {\n    return Boolean(this.c.getMetaData().summary);\n  }\n\n  updateHeader(node: HTMLElement): HTMLElement | IAsyncUpdate<HTMLElement> {\n    updateHeader(node, this.c);\n    if (!this.renderers || !this.renderers.summary) {\n      return node;\n    }\n    let summary = <HTMLElement>node.getElementsByClassName(cssClass('summary'))[0]!;\n    const oldRenderer = summary.dataset.renderer;\n    const currentRenderer = this.renderers.summaryId;\n    if (oldRenderer !== currentRenderer) {\n      summary.remove();\n      summary = this.summaryRenderer()!;\n      node.appendChild(summary);\n    }\n    const ready = this.renderers.summary.update(summary);\n    if (ready) {\n      return {item: node, ready};\n    }\n    return node;\n  }\n\n  createCell(index: number): HTMLElement | IAsyncUpdate<HTMLElement> {\n    const isGroup = this.ctx.isGroup(index);\n    const node = isGroup ? this.groupRenderer()! : this.singleRenderer()!;\n    return this.updateCell(node, index);\n  }\n\n  updateCell(node: HTMLElement, index: number): HTMLElement | IAsyncUpdate<HTMLElement> {\n    if (!this.flags.disableFrozenColumns) {\n      node.classList.toggle(engineCssClass('frozen'), this.frozen);\n    }\n    const isGroup = this.ctx.isGroup(index);\n    // assert that we have the template of the right mode\n    const oldRenderer = node.dataset.renderer;\n    const currentRenderer = isGroup ? this.renderers!.groupId : this.renderers!.singleId;\n    const oldGroup = node.dataset.group;\n    const currentGroup = (isGroup ? 'g' : 'd');\n    if (oldRenderer !== currentRenderer || oldGroup !== currentGroup) {\n      node = isGroup ? this.groupRenderer()! : this.singleRenderer()!;\n    }\n    let ready: IAbortAblePromise<void> | void | null;\n    if (isGroup) {\n      const g = this.ctx.getGroup(index);\n      ready = this.renderers!.group.update(node, g);\n    } else {\n      const r = this.ctx.getRow(index);\n      const row = this.ctx.provider.getRow(r.dataIndex);\n      if (!isPromiseLike(row)) {\n        ready = this.renderers!.single.update(node, row, r.relativeIndex, r.group);\n      } else {\n        ready = chainAbortAble(row, (row) => this.renderers!.single.update(node, row, r.relativeIndex, r.group));\n      }\n    }\n    if (ready) {\n      return {item: node, ready};\n    }\n    return node;\n  }\n\n  renderCell(ctx: CanvasRenderingContext2D, index: number): boolean | IAbortAblePromise<IRenderCallback> {\n    const r = this.ctx.getRow(index);\n    const s = this.renderers!.single;\n    if (!s.render) {\n      return false;\n    }\n    const row = this.ctx.provider.getRow(r.dataIndex);\n    if (!isPromiseLike(row)) {\n      return s.render(ctx, row, r.relativeIndex, r.group) || false;\n    }\n    return chainAbortAble(row, (row) => s.render!(ctx, row, r.relativeIndex, r.group) || false);\n  }\n\n}\n\n\nfunction chainAbortAble<T, U, V>(toWait: Promise<T>, mapper: (value: T) => IAbortAblePromise<U> | V): IAbortAblePromise<U> | V {\n  let aborted = false;\n  const p: any = new Promise<IAbortAblePromise<U> | null | void>((resolve) => {\n    if (aborted) {\n      return;\n    }\n    toWait.then((r) => {\n      if (aborted) {\n        return;\n      }\n      const mapped = mapper(r);\n      if (isAbortAble(<any>mapped)) {\n        p.abort = (<IAbortAblePromise<U>>mapped).abort.bind(mapped);\n        return p.then(resolve);\n      }\n      return resolve(<any>mapped);\n    });\n  });\n\n  p.abort = () => {\n    aborted = true;\n  };\n  return p;\n}\n","import {abortAbleAll, IAbortAblePromise, IAsyncUpdate, isAsyncUpdate, StyleManager} from 'lineupengine';\nimport {ILineUpFlags} from '../config';\nimport {round} from '../internal';\nimport {Column, IMultiLevelColumn} from '../model';\nimport {ISummaryRenderer} from '../renderer';\nimport {multiLevelGridCSSClass} from '../renderer/utils';\nimport {COLUMN_PADDING, cssClass} from '../styles';\nimport {createHeader, updateHeader} from './header';\nimport {IRankingContext} from './interfaces';\nimport RenderColumn from './RenderColumn';\n\n/** @internal */\nexport default class MultiLevelRenderColumn extends RenderColumn {\n  private summaries: ISummaryRenderer[] = [];\n\n  constructor(c: IMultiLevelColumn & Column, index: number, ctx: IRankingContext, flags: ILineUpFlags) {\n    super(c, index, ctx, flags);\n  }\n\n  private get mc() {\n    return <IMultiLevelColumn & Column>this.c;\n  }\n\n  get width() {\n    return this.c.getWidth() + COLUMN_PADDING * this.mc.length;\n  }\n\n  createHeader() {\n    const r = super.createHeader();\n    const wrapper = this.ctx.document.createElement('div');\n    wrapper.classList.add(cssClass('nested'));\n    wrapper.classList.add(multiLevelGridCSSClass(this.ctx.idPrefix, this.c));\n\n    if (isAsyncUpdate(r)) {\n      r.item.appendChild(wrapper);\n    } else {\n      r.appendChild(wrapper);\n    }\n\n    return this.updateNested(wrapper, r);\n  }\n\n  private matchChildren(wrapper: HTMLElement, children: Column[]) {\n    function matches(col: Column, i: number) {\n      //do both match?\n      const n = <HTMLElement>wrapper.children[i];\n      return n != null && n.dataset.colId === col.id;\n    }\n\n    if (children.every(matches) && children.length === wrapper.childElementCount) {\n      // 1:1 match\n      return;\n    }\n\n    const lookup = new Map((<HTMLElement[]>Array.from(wrapper.children)).map((n: HTMLElement, i) =>\n      (<[string, {node: HTMLElement, summary: ISummaryRenderer}]>[n.dataset.colId!, {node: n, summary: this.summaries[i]}]))\n    );\n\n    // reset summaries array\n    this.summaries = [];\n\n    children.forEach((cc, i) => {\n      const existing = lookup.get(cc.id);\n      if (existing) { // reuse existing\n        lookup.delete(cc.id);\n        const n = existing.node;\n        (<any>n.style).gridColumnStart = (i + 1).toString();\n        wrapper.appendChild(n);\n        this.summaries[i] = existing.summary;\n        return;\n      }\n\n      const n = createHeader(cc, this.ctx, {\n        extraPrefix: 'th',\n        mergeDropAble: false,\n        dragAble: this.flags.advancedModelFeatures,\n        rearrangeAble: this.flags.advancedModelFeatures,\n        resizeable: this.flags.advancedModelFeatures\n      });\n      n.classList.add(cssClass('header'), cssClass('nested-th'));\n      (<any>n.style).gridColumnStart = (i + 1).toString();\n      wrapper.appendChild(n);\n\n      if (!this.renderers || !this.renderers.summary) {\n        return;\n      }\n      const summary = this.ctx.summaryRenderer(cc, false);\n      const summaryNode = this.ctx.asElement(summary.template);\n      summaryNode.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(`renderer-${cc.getSummaryRenderer()}`));\n      summaryNode.dataset.renderer = cc.getSummaryRenderer();\n      n.appendChild(summaryNode);\n      this.summaries[i] = summary;\n      summary.update(summaryNode);\n    });\n\n    // delete not used ones anymore\n    lookup.forEach((v) => v.node.remove());\n  }\n\n  updateHeader(node: HTMLElement) {\n    const r = super.updateHeader(node);\n    node = isAsyncUpdate(r) ? r.item : r;\n    const wrapper = <HTMLElement>node.getElementsByClassName(cssClass('nested'))[0];\n    if (!wrapper) {\n      return r; // too early\n    }\n    node.appendChild(wrapper); // ensure the last one\n    return this.updateNested(wrapper, r);\n  }\n\n  hasSummaryLine() {\n    return super.hasSummaryLine() || this.mc.children.some((c) => Boolean(c.getMetaData().summary));\n  }\n\n  updateWidthRule(style: StyleManager) {\n    const mc = this.mc;\n    // need this for chrome to work properly\n    const widths = mc.children.map((c) => `minmax(0, ${round(c.getWidth())}fr)`);\n    const clazz = multiLevelGridCSSClass(this.ctx.idPrefix, this.c);\n    style.updateRule(`stacked-${this.c.id}`, `.${clazz}`, <any>{\n      display: 'grid',\n      gridTemplateColumns: widths.join(' ')\n    });\n    return clazz;\n  }\n\n  private updateNested(wrapper: HTMLElement, r: HTMLElement | IAsyncUpdate<HTMLElement>) {\n    const sub = this.mc.children;\n    this.matchChildren(wrapper, sub);\n\n    const children = <HTMLElement[]>Array.from(wrapper.children);\n\n    const toWait: IAbortAblePromise<void>[] = [];\n    let header: HTMLElement;\n    if (isAsyncUpdate(r)) {\n      toWait.push(r.ready);\n      header = r.item;\n    } else {\n      header = r;\n    }\n\n    sub.forEach((c, i) => {\n      const node = children[i];\n      updateHeader(node, c);\n\n      if (!this.renderers || !this.renderers.summary) {\n        return;\n      }\n      let summary = <HTMLElement>node.getElementsByClassName(cssClass('summary'))[0];\n      const oldRenderer = summary.dataset.renderer;\n      const currentRenderer = c.getSummaryRenderer();\n      if (oldRenderer !== currentRenderer) {\n        const renderer = this.ctx.summaryRenderer(c, false);\n        summary.remove();\n        summary = this.ctx.asElement(renderer.template);\n        summary.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(`renderer-${currentRenderer}`));\n        summary.dataset.renderer = currentRenderer;\n        this.summaries[i] = renderer;\n        node.appendChild(summary);\n      }\n      const ready = this.summaries[i].update(summary);\n      if (ready) {\n        toWait.push(ready);\n      }\n    });\n\n    if (toWait.length === 0) {\n      return header;\n    }\n    return {\n      item: header,\n      ready: <IAbortAblePromise<void>>abortAbleAll(toWait)\n    };\n  }\n}\n","import {ILineUpFlags} from '../config';\nimport {Column, IGroupData, IGroupItem} from '../model';\nimport {IDataProvider} from '../provider';\nimport {IImposer, IRenderContext, ISummaryRenderer} from '../renderer';\nimport DialogManager from './dialogs/DialogManager';\nimport {IDialogContext} from './dialogs';\n\nexport interface IUIOptions {\n  /**\n   * whether to show this action as a shortcut action\n   * @default 'menu'\n   */\n  mode: 'menu' | 'menu+shortcut' | 'shortcut' | ((col: Column, mode: 'sidePanel' | 'header') => 'menu' | 'menu+shortcut' | 'shortcut');\n\n  /**\n   * order hint for sorting actions\n   * @default 50\n   */\n  order: number;\n\n  featureLevel: 'basic' | 'advanced';\n  featureCategory: 'ranking' | 'model' | 'ui';\n}\n\nexport interface IOnClickHandler {\n  (col: Column, evt: MouseEvent, ctx: IRankingHeaderContext, level: number, viaShortcut: boolean): any;\n}\n\nexport interface IToolbarAction {\n  title: string;\n\n  enabled?(col: Column): boolean;\n\n  onClick: IOnClickHandler;\n\n  options: Partial<IUIOptions>;\n}\n\nexport interface IToolbarDialogAddonHandler {\n  elems: string | (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[];\n  reset(): void;\n  submit(): boolean | undefined;\n  cancel(): void;\n}\n\nexport interface IToolbarDialogAddon {\n  title: string;\n\n  order: number;\n\n  append(col: Column, node: HTMLElement, dialog: IDialogContext, ctx: IRankingHeaderContext): IToolbarDialogAddonHandler;\n}\n\n\nexport interface IRenderInfo {\n  type: string;\n  label: string;\n}\n\nexport interface IRankingHeaderContextContainer {\n  readonly idPrefix: string;\n  readonly document: Document;\n  readonly provider: IDataProvider;\n\n  readonly dialogManager: DialogManager;\n\n  asElement(html: string): HTMLElement;\n\n  resolveToolbarActions(col: Column, keys: string[]): IToolbarAction[];\n  resolveToolbarDialogAddons(col: Column, keys: string[]): IToolbarDialogAddon[];\n\n  readonly flags: ILineUpFlags;\n\n  getPossibleRenderer(col: Column): {item: IRenderInfo[], group: IRenderInfo[], summary: IRenderInfo[]};\n\n  summaryRenderer(co: Column, interactive: boolean, imposer?: IImposer): ISummaryRenderer;\n\n  readonly caches: {\n    toolbar: Map<string, IToolbarAction[]>,\n    toolbarAddons: Map<string, IToolbarDialogAddon[]>\n  };\n}\n\nexport interface IRankingBodyContext extends IRankingHeaderContextContainer, IRenderContext {\n  isGroup(index: number): boolean;\n\n  getGroup(index: number): IGroupData;\n\n  getRow(index: number): IGroupItem;\n}\n\nexport declare type IRankingHeaderContext = Readonly<IRankingHeaderContextContainer>;\n\nexport declare type IRankingContext = Readonly<IRankingBodyContext>;\n\nexport enum EMode {\n  ITEM = 'item',\n  BAND = 'band'\n}\n","import {OrderedSet, AEventDispatcher, IEventListener} from '../internal';\nimport {IGroupData, IGroupItem, isGroup} from '../model';\nimport {IDataProvider} from '../provider';\nimport {cssClass, engineCssClass} from '../styles';\nimport {forEachIndices} from '../model/internal';\nimport {rangeSelection} from '../provider/utils';\n\ninterface IPoint {\n  x: number;\n  y: number;\n}\n\ninterface IShift {\n  xShift: number;\n  yShift: number;\n  node: HTMLElement;\n}\n\n/**\n * @asMemberOf SelectionManager\n * @internal\n * @event\n */\nexport declare function selectRange(from: number, to: number, additional: boolean): void;\n\n/** @internal */\nexport default class SelectionManager extends AEventDispatcher {\n  static readonly EVENT_SELECT_RANGE = 'selectRange';\n  private static readonly MIN_DISTANCE = 10;\n\n  private readonly hr: HTMLHRElement;\n\n  private start: (IPoint & IShift) | null = null;\n\n  constructor(private readonly ctx: {provider: IDataProvider}, private readonly body: HTMLElement) {\n    super();\n    const root = body.parentElement!.parentElement!;\n    let hr = <HTMLHRElement>root.querySelector('hr');\n    if (!hr) {\n      hr = root.ownerDocument!.createElement('hr');\n      root.appendChild(hr);\n    }\n    this.hr = hr;\n    this.hr.classList.add(cssClass('hr'));\n\n    const mouseMove = (evt: MouseEvent) => {\n      this.showHint(evt);\n    };\n    const mouseUp = (evt: MouseEvent) => {\n      this.body.removeEventListener('mousemove', mouseMove);\n      this.body.removeEventListener('mouseup', mouseUp);\n      this.body.removeEventListener('mouseleave', mouseUp);\n\n      if (!this.start) {\n        return;\n      }\n      const row = engineCssClass('tr');\n      const startNode = this.start.node.classList.contains(row) ? this.start.node : <HTMLElement>this.start.node.closest(`.${row}`);\n      // somehow on firefox the mouseUp will be triggered on the original node\n      // thus search the node explicitly\n      const end = <HTMLElement>this.body.ownerDocument!.elementFromPoint(evt.clientX, evt.clientY);\n      const endNode = end.classList.contains(row) ? end : <HTMLElement>(end.closest(`.${row}`));\n      this.start = null;\n\n      this.body.classList.remove(cssClass('selection-active'));\n      this.hr.classList.remove(cssClass('selection-active'));\n\n      this.select(evt.ctrlKey, startNode, endNode);\n    };\n\n    body.addEventListener('mousedown', (evt) => {\n      const r = root.getBoundingClientRect();\n      this.start = {x: evt.clientX, y: evt.clientY, xShift: r.left, yShift: r.top, node: <HTMLElement>evt.target};\n\n      this.body.classList.add(cssClass('selection-active'));\n      body.addEventListener('mousemove', mouseMove, {\n        passive: true\n      });\n      body.addEventListener('mouseup', mouseUp, {\n        passive: true\n      });\n      body.addEventListener('mouseleave', mouseUp, {\n        passive: true\n      });\n    }, {\n        passive: true\n      });\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([SelectionManager.EVENT_SELECT_RANGE]);\n  }\n\n  on(type: typeof SelectionManager.EVENT_SELECT_RANGE, listener: typeof selectRange | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n  private select(additional: boolean, startNode?: HTMLElement, endNode?: HTMLElement) {\n    if (!startNode || !endNode || startNode === endNode) {\n      return; // no single\n    }\n\n    const startIndex = parseInt(startNode.dataset.index!, 10);\n    const endIndex = parseInt(endNode.dataset.index!, 10);\n\n    const from = Math.min(startIndex, endIndex);\n    const end = Math.max(startIndex, endIndex);\n    if (from === end) {\n      return; // no single\n    }\n    // bounce event end\n    requestAnimationFrame(() => this.fire(SelectionManager.EVENT_SELECT_RANGE, from, end, additional));\n  }\n\n  private showHint(end: MouseEvent) {\n    const start = this.start!;\n    const sy = start.y;\n    const ey = end.clientY;\n\n    const visible = Math.abs(sy - ey) > SelectionManager.MIN_DISTANCE;\n    this.hr.classList.toggle(cssClass('selection-active'), visible);\n    this.hr.style.transform = `translate(${start.x - start.xShift}px,${sy - start.yShift}px)scale(1,${Math.abs(ey - sy)})rotate(${ey > sy ? 90 : -90}deg)`;\n  }\n\n  remove(node: HTMLElement) {\n    node.onclick = <any>undefined;\n  }\n\n  add(node: HTMLElement) {\n    node.onclick = (evt) => {\n      const dataIndex = parseInt(node.dataset.i!, 10);\n      if (evt.shiftKey) {\n        const relIndex = parseInt(node.dataset.index!, 10);\n        const ranking = node.parentElement!.dataset.ranking!;\n        if (rangeSelection(this.ctx.provider, ranking, dataIndex, relIndex, evt.ctrlKey)) {\n          return;\n        }\n      }\n      this.ctx.provider.toggleSelection(dataIndex, evt.ctrlKey);\n    };\n  }\n\n  selectRange(rows: {forEach: (c: (item: (IGroupItem | IGroupData)) => void) => void}, additional: boolean = false) {\n    const current = new OrderedSet<number>(additional ? this.ctx.provider.getSelection() : []);\n    const toggle = (dataIndex: number) => {\n      if (current.has(dataIndex)) {\n        current.delete(dataIndex);\n      } else {\n        current.add(dataIndex);\n      }\n    };\n    rows.forEach((d) => {\n      if (isGroup(d)) {\n        forEachIndices(d.order, toggle);\n      } else {\n        toggle(d.dataIndex);\n      }\n    });\n    this.ctx.provider.setSelection(Array.from(current));\n  }\n\n  updateState(node: HTMLElement, dataIndex: number) {\n    if (this.ctx.provider.isSelected(dataIndex)) {\n      node.classList.add(cssClass('selected'));\n    } else {\n      node.classList.remove(cssClass('selected'));\n    }\n  }\n\n  update(node: HTMLElement, selectedDataIndices: {has(dataIndex: number): boolean}) {\n    const dataIndex = parseInt(node.dataset.i!, 10);\n    if (selectedDataIndices.has(dataIndex)) {\n      node.classList.add(cssClass('selected'));\n    } else {\n      node.classList.remove(cssClass('selected'));\n    }\n  }\n}\n","import {ACellTableSection, GridStyleManager, IAbortAblePromise, ICellRenderContext, IExceptionContext, isAbortAble, isAsyncUpdate, isLoadingCell, ITableSection, nonUniformContext, PrefetchMixin, tableIds, uniformContext, IAsyncUpdate} from 'lineupengine';\nimport {ILineUpFlags} from '../config';\nimport {HOVER_DELAY_SHOW_DETAIL} from '../constants';\nimport {AEventDispatcher, clear, debounce, IEventContext, IEventHandler, IEventListener, suffix} from '../internal';\nimport {Column, IGroupData, IGroupItem, IOrderedGroup, isGroup, isMultiLevelColumn, Ranking, StackColumn, IGroupParent, defaultGroup, IGroup} from '../model';\nimport {IImposer, IRenderCallback, IRenderContext} from '../renderer';\nimport {CANVAS_HEIGHT, COLUMN_PADDING, cssClass, engineCssClass} from '../styles';\nimport {lineupAnimation} from './animation';\nimport {IRankingBodyContext, IRankingHeaderContextContainer} from './interfaces';\nimport MultiLevelRenderColumn from './MultiLevelRenderColumn';\nimport RenderColumn, {IRenderers} from './RenderColumn';\nimport SelectionManager from './SelectionManager';\nimport {groupRoots} from '../model/internal';\nimport {isAlwaysShowingGroupStrategy, toRowMeta} from '../provider/internal';\n\nexport interface IEngineRankingContext extends IRankingHeaderContextContainer, IRenderContext {\n  createRenderer(c: Column, imposer?: IImposer): IRenderers;\n}\n\n\nexport interface IEngineRankingOptions {\n  animation: boolean;\n  levelOfDetail: (rowIndex: number) => 'high' | 'low';\n  customRowUpdate: (row: HTMLElement, rowIndex: number) => void;\n  flags: ILineUpFlags;\n}\n\n/**\n * emitted when the width of the ranking changed\n * @asMemberOf EngineRanking\n * @event\n */\nexport declare function widthChanged(): void;\n/**\n * emitted when the data of the ranking needs to be updated\n * @asMemberOf EngineRanking\n * @event\n */\nexport declare function updateData(): void;\n/**\n * emitted when the table has be recreated\n * @asMemberOf EngineRanking\n * @event\n */\nexport declare function recreate(): void;\n/**\n * emitted when the highlight changes\n * @asMemberOf EngineRanking\n * @param dataIndex the highlghted data index or -1 for none\n * @event\n */\nexport declare function highlightChanged(dataIndex: number): void;\n\n\n/** @internal */\nclass RankingEvents extends AEventDispatcher {\n  static readonly EVENT_WIDTH_CHANGED = 'widthChanged';\n  static readonly EVENT_UPDATE_DATA = 'updateData';\n  static readonly EVENT_RECREATE = 'recreate';\n  static readonly EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\n\n  fire(type: string | string[], ...args: any[]) {\n    super.fire(type, ...args);\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([RankingEvents.EVENT_WIDTH_CHANGED, RankingEvents.EVENT_UPDATE_DATA, RankingEvents.EVENT_RECREATE, RankingEvents.EVENT_HIGHLIGHT_CHANGED]);\n  }\n}\n\nconst PASSIVE: AddEventListenerOptions = {\n  passive: false\n};\n\nexport default class EngineRanking extends ACellTableSection<RenderColumn> implements ITableSection, IEventHandler {\n  static readonly EVENT_WIDTH_CHANGED = RankingEvents.EVENT_WIDTH_CHANGED;\n  static readonly EVENT_UPDATE_DATA = RankingEvents.EVENT_UPDATE_DATA;\n  static readonly EVENT_RECREATE = RankingEvents.EVENT_RECREATE;\n  static readonly EVENT_HIGHLIGHT_CHANGED = RankingEvents.EVENT_HIGHLIGHT_CHANGED;\n\n  private _context: ICellRenderContext<RenderColumn>;\n\n  private readonly loadingCanvas = new WeakMap<HTMLCanvasElement, {col: number, render: IAbortAblePromise<IRenderCallback>}[]>();\n\n  private readonly renderCtx: IRankingBodyContext;\n  private data: (IGroupItem | IGroupData)[] = [];\n  private readonly selection: SelectionManager;\n  private highlight: number = -1;\n  private readonly canvasPool: HTMLCanvasElement[] = [];\n\n  private currentCanvasShift: number = 0;\n  private currentCanvasWidth: number = 0;\n\n  private readonly events = new RankingEvents();\n\n  private roptions: Readonly<IEngineRankingOptions> = {\n    animation: true,\n    levelOfDetail: () => 'high',\n    customRowUpdate: () => undefined,\n    flags: {\n      disableFrozenColumns: false,\n      advancedModelFeatures: true,\n      advancedRankingFeatures: true,\n      advancedUIFeatures: true\n    }\n  };\n\n  private readonly delayedUpdate: (this: {type: string}) => void;\n  private readonly delayedUpdateAll: () => void;\n  private readonly delayedUpdateColumnWidths: () => void;\n  private readonly columns: RenderColumn[];\n\n  private readonly canvasMouseHandler = {\n    timer: new Set<number>(),\n    hoveredRows: new Set<HTMLElement>(),\n    cleanUp: () => {\n      const c = this.canvasMouseHandler;\n      c.timer.forEach((timer) => {\n        self.clearTimeout(timer);\n      });\n      c.timer.clear();\n      for (const row of Array.from(c.hoveredRows)) {\n        c.unhover(row);\n      }\n    },\n    enter: (evt: MouseEvent) => {\n      const c = this.canvasMouseHandler;\n      c.cleanUp();\n      const row = <HTMLElement>evt.currentTarget;\n      row.addEventListener('mouseleave', c.leave, PASSIVE);\n      c.timer.add(self.setTimeout(() => {\n        c.hoveredRows.add(row);\n        this.updateHoveredRow(row, true);\n      }, HOVER_DELAY_SHOW_DETAIL));\n    },\n    leave: (evt: MouseEvent | HTMLElement) => {\n      // on row to survive canvas removal\n      const c = this.canvasMouseHandler;\n      const row = <HTMLElement>((typeof (<MouseEvent>evt).currentTarget !== 'undefined') ? (<MouseEvent>evt).currentTarget : evt);\n      c.unhover(row);\n\n      c.cleanUp();\n    },\n    unhover: (row: HTMLElement) => {\n      // remove self\n      const c = this.canvasMouseHandler;\n      c.hoveredRows.delete(row);\n      row.removeEventListener('mouseleave', c.leave);\n      if (!EngineRanking.isCanvasRenderedRow(row) && row.parentElement) { // and part of dom\n        self.setTimeout(() => this.updateHoveredRow(row, false));\n      }\n    }\n  };\n\n  private readonly highlightHandler = {\n    enabled: false,\n    enter: (evt: MouseEvent) => {\n      if (this.highlight >= 0) {\n        const old = this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\n        if (old) {\n          old.classList.remove(engineCssClass('highlighted'));\n        }\n        this.highlight = -1;\n      }\n      const row = <HTMLElement>evt.currentTarget;\n      const dataIndex = parseInt(row.dataset.i || '-1', 10);\n      this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, dataIndex);\n    },\n    leave: () => {\n      if (this.highlight >= 0) {\n        const old = this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\n        if (old) {\n          old.classList.remove(engineCssClass('highlighted'));\n        }\n        this.highlight = -1;\n      }\n      this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, -1);\n    }\n  };\n\n  constructor(public readonly ranking: Ranking, header: HTMLElement, body: HTMLElement, tableId: string, style: GridStyleManager, private readonly ctx: IEngineRankingContext, roptions: Partial<IEngineRankingOptions> = {}) {\n    super(header, body, tableId, style, {mixins: [PrefetchMixin], batchSize: 20});\n    Object.assign(this.roptions, roptions);\n    body.dataset.ranking = ranking.id;\n\n    const that = this;\n    this.delayedUpdate = debounce((function (this: {type: string, primaryType: string}) {\n      if (this.type !== Ranking.EVENT_DIRTY_VALUES) {\n        that.events.fire(EngineRanking.EVENT_UPDATE_DATA);\n        return;\n      }\n      if (this.primaryType !== Column.EVENT_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_GROUP_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_LABEL_CHANGED) { // just the single column will be updated\n        that.updateBody();\n      }\n    }), 50, (current, next) => {\n      const currentEvent = current.self.type;\n      // order changed is more important\n      return currentEvent === Ranking.EVENT_ORDER_CHANGED ? current : next;\n    });\n\n    this.delayedUpdateAll = debounce(() => this.updateAll(), 50);\n    this.delayedUpdateColumnWidths = debounce(() => this.updateColumnWidths(), 50);\n    ranking.on(`${Ranking.EVENT_ADD_COLUMN}.hist`, (col: Column, index: number) => {\n      this.columns.splice(index, 0, this.createCol(col, index));\n      this.reindex();\n      this.delayedUpdateAll();\n    });\n    ranking.on(`${Ranking.EVENT_REMOVE_COLUMN}.body`, (col: Column, index: number) => {\n      EngineRanking.disableListener(col);\n      this.columns.splice(index, 1);\n      this.reindex();\n      this.delayedUpdateAll();\n    });\n    ranking.on(`${Ranking.EVENT_MOVE_COLUMN}.body`, (col: Column, index: number, old: number) => {\n      //delete first\n      const c = this.columns.splice(old, 1)[0];\n      console.assert(c.c === col);\n      // adapt target index based on previous index, i.e shift by one\n      this.columns.splice(old < index ? index - 1 : index, 0, c);\n      this.reindex();\n      this.delayedUpdateAll();\n    });\n    ranking.on(`${Ranking.EVENT_COLUMN_VISIBILITY_CHANGED}.body`, (col: Column, _oldValue: boolean, newValue: boolean) => {\n      if (newValue) {\n        // become visible\n        const index = ranking.children.indexOf(col);\n        this.columns.splice(index, 0, this.createCol(col, index));\n      } else {\n        // hide\n        const index = this.columns.findIndex((d) => d.c === col);\n        EngineRanking.disableListener(col);\n        this.columns.splice(index, 1);\n      }\n      this.reindex();\n      this.delayedUpdateAll();\n    });\n    ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.body`, this.delayedUpdate);\n\n    this.selection = new SelectionManager(this.ctx, body);\n    this.selection.on(SelectionManager.EVENT_SELECT_RANGE, (from: number, to: number, additional: boolean) => {\n      this.selection.selectRange(this.data.slice(from, to + 1), additional);\n    });\n\n    this.renderCtx = Object.assign({\n      isGroup: (index: number) => isGroup(this.data[index]),\n      getRow: (index: number) => <IGroupItem>this.data[index],\n      getGroup: (index: number) => <IGroupData>this.data[index]\n    }, ctx);\n\n    // default context\n    this.columns = ranking.children.filter((c) => c.isVisible()).map((c, i) => this.createCol(c, i));\n    this._context = Object.assign({\n      columns: this.columns,\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\n    }, uniformContext(0, 20));\n\n    this.columns.forEach((column) => {\n      if (column instanceof MultiLevelRenderColumn) {\n        column.updateWidthRule(this.style);\n      }\n      column.renderers = this.ctx.createRenderer(column.c);\n    });\n\n    this.style.updateRule(`hoverOnly${this.tableId}`, `\n      #${tableIds(this.tableId).tbody}:hover > .${engineCssClass('tr')}:hover .${cssClass('hover-only')},\n      #${tableIds(this.tableId).tbody} > .${engineCssClass('tr')}.${cssClass('selected')} .${cssClass('hover-only')},\n      #${tableIds(this.tableId).tbody} > .${engineCssClass('tr')}.${engineCssClass('highlighted')} .${cssClass('hover-only')}`, {\n        visibility: 'visible'\n      });\n\n    this.updateCanvasRule();\n  }\n\n  on(type: typeof EngineRanking.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\n  on(type: typeof EngineRanking.EVENT_UPDATE_DATA, listener: typeof updateData | null): this;\n  on(type: typeof EngineRanking.EVENT_RECREATE, listener: typeof recreate | null): this;\n  on(type: typeof EngineRanking.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    this.events.on(type, listener);\n    return this;\n  }\n\n  get id() {\n    return this.ranking.id;\n  }\n\n  protected onVisibilityChanged(visible: boolean) {\n    super.onVisibilityChanged(visible);\n    if (visible) {\n      this.delayedUpdate.call({type: Ranking.EVENT_ORDER_CHANGED});\n    }\n  }\n\n  updateHeaders() {\n    this.updateColumnSummaryFlag();\n    return super.updateHeaders();\n  }\n\n  get currentData() {\n    return this.data;\n  }\n\n  get context(): ICellRenderContext<RenderColumn> {\n    return this._context;\n  }\n\n  protected createHeader(_document: Document, column: RenderColumn): HTMLElement | IAsyncUpdate<HTMLElement> {\n    return column.createHeader();\n  }\n\n  private updateColumnSummaryFlag() {\n    // updates the header flag depending on whether there are any sublabels\n    this.header.classList.toggle(cssClass('show-sublabel'), this.columns.some((c) => c.hasSummaryLine()));\n  }\n\n  protected updateHeader(node: HTMLElement, column: RenderColumn) {\n    if (column instanceof MultiLevelRenderColumn) {\n      column.updateWidthRule(this.style);\n    }\n    return column.updateHeader(node);\n  }\n\n  protected createCell(_document: Document, index: number, column: RenderColumn) {\n    return column.createCell(index);\n  }\n\n  private createCellHandled(col: RenderColumn, index: number) {\n    const r = col.createCell(index);\n    let item: HTMLElement;\n    if (isAsyncUpdate(r)) {\n      item = this.handleCellReady(r.item, r.ready, col.index);\n    } else {\n      item = r;\n    }\n    this.initCellClasses(item, col.id);\n    return item;\n  }\n\n  protected updateCell(node: HTMLElement, index: number, column: RenderColumn) {\n    return column.updateCell(node, index);\n  }\n\n  private selectCanvas() {\n    if (this.canvasPool.length > 0) {\n      return this.canvasPool.pop()!;\n    }\n    const c = this.body.ownerDocument!.createElement('canvas');\n    c.classList.add(cssClass(`low-c${this.tableId}`));\n    return c;\n  }\n\n  private rowFlags(row: HTMLElement) {\n    const rowany: any = row;\n    const v = rowany.__lu__;\n    if (v == null) {\n      return rowany.__lu__ = {};\n    }\n    return v;\n  }\n\n  private visibleRenderedWidth() {\n    let width = 0;\n    for (const col of this.visibleColumns.frozen) {\n      width += this.columns[col].width + COLUMN_PADDING;\n    }\n    for (let col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\n      width += this.columns[col].width + COLUMN_PADDING;\n    }\n    if (width > 0) {\n      width -= COLUMN_PADDING; // for the last one\n    }\n    return width;\n  }\n\n  private pushLazyRedraw(canvas: HTMLCanvasElement, x: number, column: RenderColumn, render: IAbortAblePromise<IRenderCallback>) {\n    render.then((r) => {\n      const l = (this.loadingCanvas.get(canvas) || []);\n      const pos = l.findIndex((d) => d.render === render && d.col === column.index);\n      if (pos < 0) { // not part anymore ignore\n        return;\n      }\n      l.splice(pos, 1);\n      if (typeof r === 'function') { // i.e not aborted\n        const ctx = canvas.getContext('2d')!;\n        ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\n        ctx.save();\n        ctx.translate(x, 0);\n        r(ctx);\n        ctx.restore();\n      }\n\n      if (l.length > 0) {\n        return;\n      }\n      this.loadingCanvas.delete(canvas);\n      canvas.classList.remove(cssClass('loading-c'));\n    });\n\n    if (!this.loadingCanvas.has(canvas)) {\n      canvas.classList.add(cssClass('loading-c'));\n      this.loadingCanvas.set(canvas, [{col: column.index, render}]);\n    } else {\n      this.loadingCanvas.get(canvas)!.push({col: column.index, render});\n    }\n  }\n\n  private renderRow(canvas: HTMLCanvasElement, node: HTMLElement, index: number) {\n    if (this.loadingCanvas.has(canvas)) {\n      for (const a of this.loadingCanvas.get(canvas)!) {\n        a.render.abort();\n      }\n      this.loadingCanvas.delete(canvas);\n    }\n    canvas.classList.remove(cssClass('loading-c'));\n\n    canvas.width = this.currentCanvasWidth;\n    canvas.height = CANVAS_HEIGHT;\n    const ctx = canvas.getContext('2d')!;\n    ctx.imageSmoothingEnabled = false;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    const domColumns = <RenderColumn[]>[];\n\n    let x = 0;\n    const renderCellImpl = (col: number) => {\n      const c = this.columns[col];\n      const r = c.renderCell(ctx, index);\n      if (r === true) {\n        domColumns.push(c);\n      } else if (r !== false && isAbortAble(r)) {\n        this.pushLazyRedraw(canvas, x, c, r);\n      }\n      const shift = c.width + COLUMN_PADDING;\n      x += shift;\n      ctx.translate(shift, 0);\n    };\n\n    for (const col of this.visibleColumns.frozen) {\n      renderCellImpl(col);\n    }\n    for (let col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\n      renderCellImpl(col);\n    }\n    ctx.restore();\n\n    const visibleElements = node.childElementCount - 1; // for canvas\n\n    if (domColumns.length === 0) {\n      while (node.lastElementChild !== node.firstElementChild) {\n        const n = <HTMLElement>node.lastElementChild!;\n        node.removeChild(n);\n        this.recycleCell(n);\n      }\n      return;\n    }\n    if (domColumns.length === 1) {\n      const first = domColumns[0];\n      if (visibleElements === 0) {\n        const item = this.createCellHandled(first, index);\n        item.classList.add(cssClass('low'));\n        node.appendChild(item);\n        return;\n      }\n      const firstDOM = <HTMLElement>node.lastElementChild!;\n      if (visibleElements === 1 && firstDOM.dataset.colId === first.id) {\n        const isLoading = isLoadingCell(firstDOM);\n        if (isLoading) {\n          const item = this.createCellHandled(first, index);\n          node.replaceChild(item, firstDOM);\n          this.recycleCell(firstDOM, first.index);\n          return;\n        }\n        this.updateCellImpl(first, <HTMLElement>node.lastElementChild, index);\n        return;\n      }\n    }\n\n    const existing = new Map((<HTMLElement[]>Array.from(node.children)).slice(1).map((d) => <[string, HTMLElement]>[d.dataset.col, d]));\n    for (const col of domColumns) {\n      const elem = existing.get(col.id);\n      if (elem && !isLoadingCell(elem)) {\n        existing.delete(col.id);\n        this.updateCellImpl(col, elem, index);\n      } else {\n        const c = this.createCellHandled(col, index);\n        c.classList.add(cssClass('low'));\n        node.appendChild(c);\n      }\n    }\n    existing.forEach((v) => {\n      v.remove();\n      this.recycleCell(v);\n    });\n  }\n\n\n  protected updateCanvasCell(canvas: HTMLCanvasElement, node: HTMLElement, index: number, column: RenderColumn, x: number) {\n    // delete lazy that would render the same thing\n    if (this.loadingCanvas.has(canvas)) {\n      const l = this.loadingCanvas.get(canvas)!;\n      const me = l.filter((d) => d.col === column.index);\n      if (me.length > 0) {\n        this.loadingCanvas.set(canvas, l.filter((d) => d.col !== column.index));\n        for (const a of me) {\n          a.render.abort();\n        }\n      }\n    }\n\n    const ctx = canvas.getContext('2d')!;\n    ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\n    ctx.save();\n    ctx.translate(x, 0);\n    const needDOM = column.renderCell(ctx, index);\n    ctx.restore();\n\n    if (typeof needDOM !== 'boolean' && isAbortAble(needDOM)) {\n      this.pushLazyRedraw(canvas, x, column, needDOM);\n    }\n\n    if (needDOM !== true && node.childElementCount === 1) { // just canvas\n      return;\n    }\n    const elem = <HTMLElement>node.querySelector(`[data-col-id=\"${column.id}\"]`);\n    if (elem && !needDOM) {\n      elem.remove();\n      this.recycleCell(elem, column.index);\n      return;\n    }\n    if (elem) {\n      return this.updateCellImpl(column, elem, index);\n    }\n\n    const c = this.createCellHandled(column, index);\n    c.classList.add(cssClass('low'));\n    node.appendChild(c);\n  }\n\n  private reindex() {\n    this.columns.forEach((c, i) => {\n      c.index = i;\n    });\n  }\n\n  updateAll() {\n    this.columns.forEach((c, i) => {\n      c.index = i;\n      c.renderers = this.ctx.createRenderer(c.c);\n    });\n\n    this._context = Object.assign({}, this._context, {\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\n    });\n\n    this.updateColumnSummaryFlag();\n\n    this.events.fire(EngineRanking.EVENT_RECREATE);\n    super.recreate();\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n  }\n\n  updateBody() {\n    if (this.hidden) {\n      return;\n    }\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n    super.forEachRow((row, rowIndex) => this.updateRow(row, rowIndex));\n  }\n\n  updateHeaderOf(col: Column) {\n    const i = this._context.columns.findIndex((d) => d.c === col);\n    if (i < 0) {\n      return false;\n    }\n    const node = <HTMLElement>this.header.children[i]!;\n    const column = this._context.columns[i];\n    if (node && column) {\n      this.updateHeader(node, column);\n    }\n    this.updateColumnSummaryFlag();\n    return node && column;\n  }\n\n  protected createRow(node: HTMLElement, rowIndex: number): void {\n    node.classList.add(this.style.cssClasses.tr);\n    this.roptions.customRowUpdate(node, rowIndex);\n    if (this.highlightHandler.enabled) {\n      node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\n      this.rowFlags(node).highlight = true;\n    }\n\n    const isGroup = this.renderCtx.isGroup(rowIndex);\n\n    const meta = this.toRowMeta(rowIndex);\n    if (!meta) {\n      delete node.dataset.meta;\n    } else {\n      node.dataset.meta = meta;\n    }\n\n    if (isGroup) {\n      node.dataset.agg = 'group';\n      super.createRow(node, rowIndex);\n      return;\n    }\n\n    const {dataIndex} = this.renderCtx.getRow(rowIndex);\n    node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\n    node.dataset.i = dataIndex.toString();\n    node.dataset.agg = 'detail'; //or 'group'\n\n    this.selection.updateState(node, dataIndex);\n    this.selection.add(node);\n\n    const low = this.roptions.levelOfDetail(rowIndex) === 'low';\n    node.classList.toggle(cssClass('low'), low);\n\n    if (!low || this.ctx.provider.isSelected(dataIndex)) {\n      super.createRow(node, rowIndex);\n      return;\n    }\n\n    const canvas = this.selectCanvas();\n    node.appendChild(canvas);\n    node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\n    this.renderRow(canvas, node, rowIndex);\n  }\n\n  protected updateRow(node: HTMLElement, rowIndex: number, hoverLod?: 'high' | 'low'): void {\n    this.roptions.customRowUpdate(node, rowIndex);\n\n    const computedLod = this.roptions.levelOfDetail(rowIndex);\n    const low = (hoverLod ? hoverLod : computedLod) === 'low';\n    const wasLow = node.classList.contains(cssClass('low'));\n    const isGroup = this.renderCtx.isGroup(rowIndex);\n    const wasGroup = node.dataset.agg === 'group';\n\n    node.classList.toggle(cssClass('low'), computedLod === 'low');\n\n    if (this.highlightHandler.enabled && !this.rowFlags(node).highlight) {\n      node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\n      this.rowFlags(node).highlight = true;\n    }\n\n    if (isGroup !== wasGroup) {\n      // change of mode clear the children to reinitialize them\n      clear(node);\n\n      // adapt body\n      node.dataset.agg = isGroup ? 'group' : 'detail';\n      if (isGroup) {\n        node.dataset.i = '';\n        this.selection.remove(node);\n      } else {\n        this.selection.add(node);\n      }\n    }\n\n    if (wasLow && (!computedLod || isGroup)) {\n      node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\n    }\n\n    const meta = this.toRowMeta(rowIndex);\n    if (!meta) {\n      delete node.dataset.meta;\n    } else {\n      node.dataset.meta = meta;\n    }\n\n    if (isGroup) {\n      node.classList.remove(engineCssClass('highlighted'));\n      super.updateRow(node, rowIndex);\n      return;\n    }\n\n    const {dataIndex} = this.renderCtx.getRow(rowIndex);\n    node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\n    node.dataset.i = dataIndex.toString();\n    this.selection.updateState(node, dataIndex);\n\n    const canvas = (wasLow && node.firstElementChild!.nodeName.toLowerCase() === 'canvas') ? <HTMLCanvasElement>node.firstElementChild! : null;\n    if (!low || this.ctx.provider.isSelected(dataIndex)) {\n      if (canvas) {\n        this.recycleCanvas(canvas);\n        clear(node);\n        node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\n      }\n      super.updateRow(node, rowIndex);\n      return;\n    }\n\n    // use canvas\n    if (wasLow && canvas) {\n      this.renderRow(canvas, node, rowIndex);\n      return;\n    }\n    // clear old\n    clear(node);\n    node.dataset.agg = 'detail';\n    const canvas2 = this.selectCanvas();\n    node.appendChild(canvas2);\n    node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\n    this.renderRow(canvas2, node, rowIndex);\n  }\n\n  private updateCanvasBody() {\n    this.updateCanvasRule();\n    super.forEachRow((row, index) => {\n      if (EngineRanking.isCanvasRenderedRow(row)) {\n        this.renderRow(<HTMLCanvasElement>row.firstElementChild!, row, index);\n      }\n    });\n  }\n\n  private toRowMeta(rowIndex: number) {\n    const provider = this.renderCtx.provider;\n    const topNGetter = (group: IGroup) => provider.getTopNAggregated(this.ranking, group);\n    return toRowMeta(this.renderCtx.getRow(rowIndex), provider.getAggregationStrategy(), topNGetter);\n  }\n\n  private updateCanvasRule() {\n    this.style.updateRule(`renderCanvas${this.tableId}`, `.${cssClass(`low-c${this.tableId}`)}`, {\n        transform: `translateX(${this.currentCanvasShift}px)`,\n        width: `${this.currentCanvasWidth}px`\n      });\n  }\n\n  protected updateShifts(top: number, left: number) {\n    super.updateShifts(top, left);\n\n    const width = this.visibleRenderedWidth();\n    if (left === this.currentCanvasShift && width === this.currentCanvasWidth) {\n      return;\n    }\n\n    this.currentCanvasShift = left;\n    this.currentCanvasWidth = width;\n    this.updateCanvasBody();\n  }\n\n  private recycleCanvas(canvas: HTMLCanvasElement) {\n    if (this.loadingCanvas.has(canvas)) {\n      for (const a of this.loadingCanvas.get(canvas)!) {\n        a.render.abort();\n      }\n      this.loadingCanvas.delete(canvas);\n    } else if (!canvas.classList.contains(cssClass('loading-c'))) {\n      this.canvasPool.push(canvas);\n    }\n  }\n\n  enableHighlightListening(enable: boolean) {\n    if (this.highlightHandler.enabled === enable) {\n      return;\n    }\n\n    this.highlightHandler.enabled = enable;\n\n    if (enable) {\n      this.body.addEventListener('mouseleave', this.highlightHandler.leave, PASSIVE);\n      super.forEachRow((row) => {\n        row.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\n        this.rowFlags(row).highlight = true;\n      });\n      return;\n    }\n\n    this.body.removeEventListener('mouseleave', this.highlightHandler.leave);\n\n    super.forEachRow((row) => {\n      row.removeEventListener('mouseenter', this.highlightHandler.enter);\n      this.rowFlags(row).highlight = false;\n    });\n  }\n\n  private updateHoveredRow(row: HTMLElement, hover: boolean) {\n    const isCanvas = EngineRanking.isCanvasRenderedRow(row);\n    if (isCanvas !== hover) {\n      return; // good nothing to do\n    }\n    const index = parseInt(row.dataset.index!, 10);\n    this.updateRow(row, index, hover ? 'high' : 'low');\n  }\n\n  protected forEachRow(callback: (row: HTMLElement, rowIndex: number) => void, inplace: boolean = false) {\n    const adapter = (row: HTMLElement, rowIndex: number) => {\n      if (EngineRanking.isCanvasRenderedRow(row)) {\n        // skip canvas\n        return;\n      }\n      callback(row, rowIndex);\n    };\n    return super.forEachRow(adapter, inplace);\n  }\n\n  updateSelection(selectedDataIndices: {has(i: number): boolean}) {\n    super.forEachRow((node: HTMLElement, rowIndex: number) => {\n      if (this.renderCtx.isGroup(rowIndex)) {\n        this.updateRow(node, rowIndex);\n      } else {\n        // fast pass for item\n        this.selection.update(node, selectedDataIndices);\n      }\n    }, true);\n  }\n\n  updateColumnWidths() {\n    // update the column context in place\n    (<any>this._context).column = nonUniformContext(this._context.columns.map((w) => w.width), 100, COLUMN_PADDING);\n    super.updateColumnWidths();\n    const {columns} = this.context;\n    //no data update needed since just width changed\n    columns.forEach((column) => {\n      if (column instanceof MultiLevelRenderColumn) {\n        column.updateWidthRule(this.style);\n      }\n      column.renderers = this.ctx.createRenderer(column.c);\n    });\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n  }\n\n  private updateColumn(index: number) {\n    const columns = this.context.columns;\n    const column = columns[index];\n    if (!column) {\n      return false;\n    }\n    let x = 0;\n    for (let i = this.visibleColumns.first; i < index; ++i) {\n      x += columns[i].width + COLUMN_PADDING;\n    }\n    super.forEachRow((row, rowIndex) => {\n      if (EngineRanking.isCanvasRenderedRow(row)) {\n        this.updateCanvasCell(<HTMLCanvasElement>row.firstElementChild!, row, rowIndex, column, x);\n        return;\n      }\n      this.updateCellImpl(column, <HTMLElement>row.children[index], rowIndex);\n    });\n    return true;\n  }\n\n  private updateCellImpl(column: RenderColumn, before: HTMLElement, rowIndex: number) {\n    if (!before) {\n      return; // race condition\n    }\n    const r = this.updateCell(before, rowIndex, column);\n    let after: HTMLElement;\n    if (isAsyncUpdate(r)) {\n      after = this.handleCellReady(r.item, r.ready, column.index);\n    } else {\n      after = r;\n    }\n    if (before === after || !after) {\n      return;\n    }\n    this.initCellClasses(after, column.id);\n    before.parentElement!.replaceChild(after, before);\n  }\n\n  private initCellClasses(node: HTMLElement, id: string) {\n    node.dataset.id = id;\n    node.classList.add(engineCssClass('td'), this.style.cssClasses.td, engineCssClass(`td-${this.tableId}`));\n  }\n\n  destroy() {\n    super.destroy();\n    this.style.deleteRule(`hoverOnly${this.tableId}`);\n    this.style.deleteRule(`renderCanvas${this.tableId}`);\n    this.ranking.flatColumns.forEach((c) => EngineRanking.disableListener(c));\n  }\n\n  groupData(): (IGroupItem | IGroupData)[] {\n    const groups = this.ranking.getGroups();\n    const provider = this.ctx.provider;\n    const strategy = provider.getAggregationStrategy();\n    const alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\n\n    const r = <(IGroupItem | IGroupData)[]>[];\n\n    if (groups.length === 0) {\n      return r;\n    }\n\n    const pushItem = (group: IOrderedGroup, dataIndex: number, i: number) => {\n      r.push({\n        group,\n        dataIndex,\n        relativeIndex: i\n      });\n    };\n\n    if (groups.length === 1 && groups[0].name === defaultGroup.name) {\n      const group = groups[0];\n      const l = group.order.length;\n      for (let i = 0; i < l; ++i) {\n        pushItem(group, group.order[i], i);\n      }\n      return r;\n    }\n\n    const roots = groupRoots(groups);\n\n    const pushGroup = (group: IOrderedGroup | Readonly<IGroupParent>) => {\n      const n = provider.getTopNAggregated(this.ranking, group);\n\n      // all are IOrderedGroup since propagated\n      const ordered = <IOrderedGroup>group;\n      const gparent = <IGroupParent>group;\n\n      if (n === 0 || alwaysShowGroup) {\n        r.push(ordered);\n      }\n\n      if (n !== 0 && Array.isArray(gparent.subGroups) && gparent.subGroups.length > 0) {\n        for (const g of gparent.subGroups) {\n          pushGroup(<IOrderedGroup | Readonly<IGroupParent>>g);\n        }\n        return;\n      }\n\n      const l = n < 0 ? ordered.order.length : Math.min(n, ordered.order.length);\n      for (let i = 0; i < l; ++i) {\n        pushItem(ordered, ordered.order[i], i);\n      }\n    };\n\n    for (const root of roots) {\n      pushGroup(root);\n    }\n\n    return r;\n  }\n\n  render(data: (IGroupItem | IGroupData)[], rowContext: IExceptionContext) {\n    const previous = this._context;\n    const previousData = this.data;\n    this.data = data;\n\n    this.columns.forEach((c, i) => {\n      c.index = i;\n      c.renderers = this.ctx.createRenderer(c.c);\n    });\n    this._context = Object.assign({\n      columns: this.columns,\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\n    }, rowContext);\n\n    if (!this.bodyScroller) { // somehow not part of dom\n      return;\n    }\n    this.events.fire(EngineRanking.EVENT_RECREATE);\n    return super.recreate(this.roptions.animation ? lineupAnimation(previous, previousData, this.data) : undefined);\n  }\n\n  setHighlight(dataIndex: number) {\n    this.highlight = dataIndex;\n    const old = this.body.querySelector(`[data-i].${engineCssClass('highlighted')}`);\n    if (old) {\n      old.classList.remove(engineCssClass('highlighted'));\n    }\n    if (dataIndex < 0) {\n      return;\n    }\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\n    if (item) {\n      item.classList.add(engineCssClass('highlighted'));\n    }\n    return item != null;\n  }\n\n  findNearest(dataIndices: number[]) {\n    // find the nearest visible data index\n    // first check if already visible\n    const index = dataIndices.find((d) => Boolean(this.body.querySelectorAll(`[data-i=\"${d}\"]`)));\n    if (index != null) {\n      return index; // visible one\n    }\n    const visible = this.visible;\n    const lookFor = new Set(dataIndices);\n    let firstBeforePos = -1;\n    let firstAfterPos = -1;\n    for (let i = visible.first; i >= 0; --i) {\n      const d = this.data[i];\n      if (!isGroup(d) && lookFor.has(d.dataIndex)) {\n        firstBeforePos = i;\n        break;\n      }\n    }\n    for (let i = visible.last; i < this.data.length; ++i) {\n      const d = this.data[i];\n      if (!isGroup(d) && lookFor.has(d.dataIndex)) {\n        firstAfterPos = i;\n        break;\n      }\n    }\n\n    if (firstBeforePos < 0 && firstBeforePos < 0) {\n      return -1; // not found at all\n    }\n    const nearestPos = (firstBeforePos >= 0 && (visible.first - firstBeforePos) < (firstAfterPos - visible.last)) ? firstBeforePos : firstAfterPos;\n    return (<IGroupItem>this.data[nearestPos]).dataIndex;\n  }\n\n  scrollIntoView(dataIndex: number) {\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\n    if (item) {\n      item.scrollIntoView(true);\n      return true;\n    }\n    const index = this.data.findIndex((d) => !isGroup(d) && d.dataIndex === dataIndex);\n    if (index < 0) {\n      return false; // part of a group?\n    }\n\n    const posOf = () => {\n      const c = this._context;\n      if (c.exceptions.length === 0 || index < c.exceptions[0].index) {\n        // fast pass\n        return index * c.defaultRowHeight;\n      }\n      const before = c.exceptions.reverse().find((d) => d.index <= index);\n      if (!before) {\n        return -1;\n      }\n      if (before.index === index) {\n        return before.y;\n      }\n      const regular = index - before.index - 1;\n      return before.y2 + regular * c.defaultRowHeight;\n    };\n    const pos = posOf();\n    if (pos < 0) {\n      return false;\n    }\n    const scroller = this.bodyScroller;\n    if (!scroller) {\n      return false;\n    }\n    const top = scroller.scrollTop;\n    scroller.scrollTop = Math.min(pos, scroller.scrollHeight - scroller.clientHeight);\n    this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, top < scroller.scrollTop);\n\n    const found = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\n    if (found) {\n      found.scrollIntoView(true);\n      return true;\n    }\n    return false;\n  }\n\n  getHighlight() {\n    const item = <HTMLElement>this.body.querySelector(`[data-i]:hover, [data-i].${engineCssClass('highlighted')}`);\n    if (item) {\n      return parseInt(item.dataset.i!, 10);\n    }\n    return this.highlight;\n  }\n\n  private createCol(c: Column, index: number) {\n    const col = (isMultiLevelColumn(c) && !c.getCollapsed()) ? new MultiLevelRenderColumn(c, index, this.renderCtx, this.roptions.flags) : new RenderColumn(c, index, this.renderCtx, this.roptions.flags);\n\n    c.on(`${Column.EVENT_WIDTH_CHANGED}.body`, () => {\n      // replace myself upon width change since we renderers are allowed to\n      col.renderers = this.ctx.createRenderer(c);\n      this.delayedUpdateColumnWidths();\n    });\n    const debounceUpdate = debounce(() => {\n      const valid = this.updateColumn(col.index);\n      if (!valid) {\n        EngineRanking.disableListener(c); // destroy myself\n      }\n    }, 25);\n    c.on([`${Column.EVENT_RENDERER_TYPE_CHANGED}.body`, `${Column.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`], () => {\n      // replace myself upon renderer type change\n      col.renderers = this.ctx.createRenderer(c);\n      debounceUpdate();\n    });\n    const that = this;\n    c.on(`${Column.EVENT_DIRTY_HEADER}.body`, function (this: IEventContext) {\n      const valid = that.updateHeaderOf(col.c);\n      if (!valid) {\n        EngineRanking.disableListener(c); // destroy myself\n      }\n    });\n    c.on(suffix('.body', Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), () => {\n      // replace myself upon renderer type change\n      col.renderers = this.ctx.createRenderer(c);\n      const valid = this.updateHeaderOf(col.c);\n      if (!valid) {\n        EngineRanking.disableListener(c); // destroy myself\n      }\n    });\n    c.on(`${Column.EVENT_DIRTY_VALUES}.body`, debounceUpdate);\n\n    if (isMultiLevelColumn(c)) {\n      c.on(`${StackColumn.EVENT_COLLAPSE_CHANGED}.body`, () => {\n        // rebuild myself from scratch\n        EngineRanking.disableListener(c); // destroy myself\n        const index = col.index;\n        const replacement = this.createCol(c, index);\n        replacement.index = index;\n        this.columns.splice(index, 1, replacement);\n        this.delayedUpdateAll();\n      });\n      if (!c.getCollapsed()) {\n        (<MultiLevelRenderColumn>col).updateWidthRule(this.style);\n        c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.body`, () => {\n          (<MultiLevelRenderColumn>col).updateWidthRule(this.style);\n        });\n        c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`, debounceUpdate);\n      }\n    }\n\n    return col;\n  }\n\n  private static isCanvasRenderedRow(row: HTMLElement) {\n    return row.classList.contains(cssClass('low')) && row.childElementCount >= 1 && row.firstElementChild!.nodeName.toLowerCase() === 'canvas';\n  }\n\n  private static disableListener(c: Column) {\n    c.on(`${Column.EVENT_WIDTH_CHANGED}.body`, null);\n    c.on(suffix('.body', Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES, Column.EVENT_LABEL_CHANGED), null);\n    c.on(`${Ranking.EVENT_DIRTY_HEADER}.body`, null);\n    c.on(`${Ranking.EVENT_DIRTY_VALUES}.body`, null);\n\n    if (!(isMultiLevelColumn(c))) {\n      return;\n    }\n    c.on(`${StackColumn.EVENT_COLLAPSE_CHANGED}.body`, null);\n    c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.body`, null);\n    c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`, null);\n  }\n}\n","import {IExceptionContext, ITableSection, range} from 'lineupengine';\nimport {IGroupData, IGroupItem, IOrderedGroup, isGroup, Ranking} from '../model';\nimport {aria, cssClass, engineCssClass, SLOPEGRAPH_WIDTH} from '../styles';\nimport {IRankingHeaderContextContainer, EMode} from './interfaces';\nimport {forEachIndices, filterIndices} from '../model/internal';\n\ninterface ISlope {\n  isSelected(selection: {has(dataIndex: number): boolean}): boolean;\n\n  update(path: SVGPathElement, width: number): void;\n\n  readonly dataIndices: number[];\n}\n\nclass ItemSlope implements ISlope {\n  constructor(private readonly left: number, private readonly right: number, public readonly dataIndices: number[]) {\n\n  }\n\n  isSelected(selection: {has(dataIndex: number): boolean}) {\n    return this.dataIndices.length === 1 ? selection.has(this.dataIndices[0]) : this.dataIndices.some((s) => selection.has(s));\n  }\n\n  update(path: SVGPathElement, width: number) {\n    path.setAttribute('data-i', String(this.dataIndices[0]));\n    path.setAttribute('class', cssClass('slope'));\n    path.setAttribute('d', `M0,${this.left}L${width},${this.right}`);\n  }\n}\n\nclass GroupSlope implements ISlope {\n  constructor(private readonly left: [number, number], private readonly right: [number, number], public readonly dataIndices: number[]) {\n\n  }\n\n  isSelected(selection: {has(dataIndex: number): boolean}) {\n    return this.dataIndices.some((s) => selection.has(s));\n  }\n\n  update(path: SVGPathElement, width: number) {\n    path.setAttribute('class', cssClass('group-slope'));\n    path.setAttribute('d', `M0,${this.left[0]}L${width},${this.right[0]}L${width},${this.right[1]}L0,${this.left[1]}Z`);\n  }\n}\n\ninterface IPos {\n  start: number;\n  heightPerRow: number;\n  rows: number[]; // data indices\n  offset: number;\n  ref: number[];\n  group: IOrderedGroup;\n}\n\nexport interface ISlopeGraphOptions {\n  mode: EMode;\n}\n\nexport default class SlopeGraph implements ITableSection {\n  readonly node: SVGSVGElement;\n\n  private leftSlopes: ISlope[][] = [];\n  // rendered row to one ore multiple slopes\n  private rightSlopes: ISlope[][] = [];\n  private readonly pool: SVGPathElement[] = [];\n\n  private scrollListener: ((act: {top: number, height: number}) => void) | null = null;\n\n  readonly width = SLOPEGRAPH_WIDTH;\n  readonly height = 0;\n\n  private current: {\n    leftRanking: Ranking;\n    left: (IGroupItem | IGroupData)[];\n    leftContext: IExceptionContext;\n    rightRanking: Ranking;\n    right: (IGroupItem | IGroupData)[];\n    rightContext: IExceptionContext;\n  } | null = null;\n\n  private chosen = new Set<ISlope>();\n  private chosenSelectionOnly = new Set<ISlope>();\n\n  private _mode: EMode = EMode.ITEM;\n\n  constructor(public readonly header: HTMLElement, public readonly body: HTMLElement, public readonly id: string, private readonly ctx: IRankingHeaderContextContainer, options: Partial<ISlopeGraphOptions> = {}) {\n    this.node = header.ownerDocument!.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    this.node.innerHTML = `<g transform=\"translate(0,0)\"></g>`;\n    header.classList.add(cssClass('slopegraph-header'));\n    this._mode = options.mode === EMode.BAND ? EMode.BAND : EMode.ITEM;\n    this.initHeader(header);\n    body.classList.add(cssClass('slopegraph'));\n    this.body.style.height = `1px`;\n    body.appendChild(this.node);\n  }\n\n  init() {\n    this.hide(); // hide by default\n\n    const scroller = <any>this.body.parentElement!;\n\n    //sync scrolling of header and body\n    // use internals from lineup engine\n    const scroll = (<any>scroller).__le_scroller__;\n    let old: {top: number, height: number} = scroll.asInfo();\n    scroll.push('animation', this.scrollListener = (act: {top: number, height: number}) => {\n      if (Math.abs(old.top - act.top) < 5) {\n        return;\n      }\n      old = act;\n      this.onScrolledVertically(act.top, act.height);\n    });\n  }\n\n  private initHeader(header: HTMLElement) {\n    const active = cssClass('active');\n    header.innerHTML = `<i title=\"Item\" class=\"${this._mode === EMode.ITEM ? active : ''}\">${aria('Item')}</i>\n        <i title=\"Band\" class=\"${this._mode === EMode.BAND ? active : ''}\">${aria('Band')}</i>`;\n\n    const icons = <HTMLElement[]>Array.from(header.children);\n    icons.forEach((n: HTMLElement, i) => {\n      n.onclick = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        if (n.classList.contains(active)) {\n          return;\n        }\n        this.mode = i === 0 ? EMode.ITEM : EMode.BAND;\n        icons.forEach((d, j) => d.classList.toggle(active, j === i));\n      };\n    });\n  }\n\n  get mode() {\n    return this._mode;\n  }\n\n  set mode(value: EMode) {\n    if (value === this._mode) {\n      return;\n    }\n    this._mode = value;\n    if (this.current) {\n      this.rebuild(this.current.leftRanking, this.current.left, this.current.leftContext, this.current.rightRanking, this.current.right, this.current.rightContext);\n    }\n  }\n\n  get hidden() {\n    return this.header.classList.contains(engineCssClass('loading'));\n  }\n\n  set hidden(value: boolean) {\n    this.header.classList.toggle(engineCssClass('loading'), value);\n    this.body.classList.toggle(engineCssClass('loading'), value);\n  }\n\n  hide() {\n    this.hidden = true;\n  }\n\n  show() {\n    const was = this.hidden;\n    this.hidden = false;\n    if (was) {\n      this.revalidate();\n    }\n  }\n\n  destroy() {\n    this.header.remove();\n    if (this.scrollListener) {\n      //sync scrolling of header and body\n      // use internals from lineup engine\n      const scroll = (<any>this.body.parentElement!).__le_scroller__;\n      scroll.remove(this.scrollListener);\n    }\n    this.body.remove();\n  }\n\n  rebuild(leftRanking: Ranking, left: (IGroupItem | IGroupData)[], leftContext: IExceptionContext, rightRanking: Ranking, right: (IGroupItem | IGroupData)[], rightContext: IExceptionContext) {\n    this.current = {leftRanking, left, leftContext, right, rightRanking, rightContext};\n\n    const lookup: Map<number, IPos> = this.prepareRightSlopes(right, rightContext);\n    this.computeSlopes(left, leftContext, lookup);\n\n    this.revalidate();\n  }\n\n  private computeSlopes(left: (IGroupItem | IGroupData)[], leftContext: IExceptionContext, lookup: Map<number, IPos>) {\n    const mode = this.mode;\n    const fakeGroups = new Map<IOrderedGroup, ISlope[]>();\n\n    const createFakeGroup = (first: number, group: IOrderedGroup) => {\n      let count = 0;\n      let height = 0;\n      // find all items in this group, assuming that they are in order\n      for (let i = first; i < left.length; ++i) {\n        const item = left[i];\n        if (isGroup(item) || (<IGroupItem>item).group !== group) {\n          break;\n        }\n        count++;\n        height += (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\n      }\n\n      const padded = height - leftContext.padding(first + count - 1);\n\n      const gr = group;\n\n      return {gr, padded, height};\n    };\n\n    let acc = 0;\n    this.leftSlopes = left.map((r, i) => {\n\n      let height = (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\n      let padded = height - 0; //leftContext.padding(i);\n      const slopes = <ISlope[]>[];\n      const start = acc;\n\n      // shift by item height\n      acc += height;\n\n      let offset = 0;\n\n      const push = (s: ISlope, right: IPos, common = 1, heightPerRow = 0) => {\n        // store slope in both\n        slopes.push(s);\n        forEachIndices(right.ref, (r) => this.rightSlopes[r].push(s));\n\n        // update the offset of myself and of the right side\n        right.offset += common * right.heightPerRow;\n        offset += common * heightPerRow;\n      };\n\n      let gr: IGroupData;\n\n      if (isGroup(r)) {\n        gr = r;\n      } else {\n        const item = (<IGroupItem>r);\n        const dataIndex = item.dataIndex;\n        const right = lookup.get(dataIndex);\n\n        if (!right) { // no match\n          return slopes;\n        }\n        if (mode === EMode.ITEM) {\n          const s = new ItemSlope(start + padded / 2, right.start + right.offset + right.heightPerRow / 2, [dataIndex]);\n          push(s, right);\n          return slopes;\n        }\n\n        if (fakeGroups.has(item.group)) {\n          // already handled by the first one, take the fake slopes\n          return fakeGroups.get(item.group)!;\n        }\n\n        const fakeGroup = createFakeGroup(i, item.group);\n        gr = fakeGroup.gr;\n        height = fakeGroup.height;\n        padded = fakeGroup.padded;\n        fakeGroups.set(item.group, slopes);\n      }\n\n      // free group items to share\n      const free = new Set(gr.order);\n\n      const heightPerRow = padded / gr.order.length;\n\n      forEachIndices(gr.order, (d: number) => {\n        if (!free.has(d)) {\n          return; // already handled\n        }\n        free.delete(d);\n        const right = lookup.get(d);\n        if (!right) {\n          return; // no matching\n        }\n        // find all of this group\n        const intersection = filterIndices(right.rows, (r) => free.delete(r));\n        intersection.push(d); //self\n\n        const common = intersection.length;\n        let s: ISlope;\n        if (common === 1) {\n          s = new ItemSlope(start + offset + heightPerRow / 2, right.start + right.offset + right.heightPerRow / 2, [d]);\n        } else if (mode === EMode.ITEM) {\n          // fake item\n          s = new ItemSlope(start + offset + heightPerRow * common / 2, right.start + right.offset + right.heightPerRow * common / 2, intersection);\n        } else {\n          s = new GroupSlope([start + offset, start + offset + heightPerRow * common], [right.start + right.offset, right.start + right.offset + right.heightPerRow * common], intersection);\n        }\n        push(s, right, common, heightPerRow);\n      });\n      return slopes;\n    });\n  }\n\n  private prepareRightSlopes(right: (IGroupItem | IGroupData)[], rightContext: IExceptionContext) {\n    const lookup = new Map<number, IPos>();\n    const mode = this.mode;\n\n    const fakeGroups = new Map<IOrderedGroup, IPos>();\n    let acc = 0;\n\n    this.rightSlopes = right.map((r, i) => {\n      const height = (rightContext.exceptionsLookup.get(i) || rightContext.defaultRowHeight);\n      const padded = height - 0; //rightContext.padding(i);\n      const start = acc;\n      acc += height;\n      const slopes = <ISlope[]>[];\n\n      const base = {\n        start,\n        offset: 0,\n        ref: [i]\n      };\n      if (isGroup(r)) {\n        const p = Object.assign(base, {\n          rows: Array.from(r.order),\n          heightPerRow: padded / r.order.length,\n          group: r\n        });\n\n        forEachIndices(r.order, (ri) => lookup.set(ri, p));\n        return slopes;\n      }\n      // item\n      const item = (<IGroupItem>r);\n      const dataIndex = r.dataIndex;\n\n      let p = Object.assign(base, {\n        rows: [dataIndex],\n        heightPerRow: padded,\n        group: item.group\n      });\n\n      if (mode === EMode.ITEM) {\n        lookup.set(dataIndex, p);\n        return slopes;\n      }\n      // forced band mode\n      // merge with the 'ueber' band\n      if (!fakeGroups.has(item.group)) {\n        p.heightPerRow = height; // include padding\n        // TODO just support uniform item height\n        fakeGroups.set(item.group, p);\n      } else { // reuse old\n        p = fakeGroups.get(item.group)!;\n        p.rows.push(dataIndex);\n        p.ref.push(i);\n      }\n      lookup.set(dataIndex, p);\n      return slopes;\n    });\n\n    return lookup;\n  }\n\n  private revalidate() {\n    if (!this.current || this.hidden) {\n      return;\n    }\n    const p = this.body.parentElement!;\n    this.onScrolledVertically(p.scrollTop, p.clientHeight);\n  }\n\n\n  highlight(dataIndex: number) {\n    const highlight = engineCssClass('highlighted');\n    const old = this.body.querySelector(`[data-i].${highlight}`);\n    if (old) {\n      old.classList.remove(highlight);\n    }\n    if (dataIndex < 0) {\n      return;\n    }\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\n    if (item) {\n      item.classList.add(highlight);\n    }\n    return item != null;\n  }\n\n  private onScrolledVertically(scrollTop: number, clientHeight: number) {\n    if (!this.current) {\n      return;\n    }\n\n    // which lines are currently shown\n    const {leftContext, rightContext} = this.current;\n    const left = range(scrollTop, clientHeight, leftContext.defaultRowHeight, leftContext.exceptions, leftContext.numberOfRows);\n    const right = range(scrollTop, clientHeight, rightContext.defaultRowHeight, rightContext.exceptions, rightContext.numberOfRows);\n\n    const start = Math.min(left.firstRowPos, right.firstRowPos);\n    const end = Math.max(left.endPos, right.endPos);\n\n    // move to right position\n    this.body.style.transform = `translate(0, ${start.toFixed(0)}px)`;\n    this.body.style.height = `${(end - start).toFixed(0)}px`;\n    (this.node.firstElementChild!).setAttribute('transform', `translate(0,-${start.toFixed(0)})`);\n\n    this.chosen = this.choose(left.first, left.last, right.first, right.last);\n    this.render(this.chosen, this.chooseSelection(left.first, left.last, this.chosen));\n  }\n\n  private choose(leftVisibleFirst: number, leftVisibleLast: number, rightVisibleFirst: number, rightVisibleLast: number) {\n    // assume no separate scrolling\n\n    const slopes = new Set<ISlope>();\n    for (let i = leftVisibleFirst; i <= leftVisibleLast; ++i) {\n      for (const s of this.leftSlopes[i]) {\n        slopes.add(s);\n      }\n    }\n    for (let i = rightVisibleFirst; i <= rightVisibleLast; ++i) {\n      for (const s of this.rightSlopes[i]) {\n        slopes.add(s);\n      }\n    }\n    return slopes;\n  }\n\n  private chooseSelection(leftVisibleFirst: number, leftVisibleLast: number, alreadyVisible: Set<ISlope>) {\n    const slopes = new Set<ISlope>();\n    // ensure selected slopes are always part of\n    const p = this.ctx.provider;\n\n    if (p.getSelection().length === 0) {\n      return slopes;\n    }\n\n    const selectionLookup = {has: (dataIndex: number) => p.isSelected(dataIndex)};\n\n    // try all not visible ones\n    for (let i = 0; i < leftVisibleFirst; ++i) {\n      for (const s of this.leftSlopes[i]) {\n        if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\n          slopes.add(s);\n        }\n      }\n    }\n    for (let i = leftVisibleLast + 1; i < this.leftSlopes.length; ++i) {\n      for (const s of this.leftSlopes[i]) {\n        if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\n          slopes.add(s);\n        }\n      }\n    }\n    return slopes;\n  }\n\n  private updatePath(p: SVGPathElement, g: SVGGElement, s: ISlope, width: number, selection: {has(dataIndex: number): boolean}) {\n    s.update(p, width);\n    (<any>p).__data__ = s; // data binding\n    const selected = s.isSelected(selection);\n    p.classList.toggle(cssClass('selected'), selected);\n    if (selected) {\n      g.appendChild(p); // to put it on top\n    }\n  }\n\n  private render(visible: Set<ISlope>, selectionSlopes: Set<ISlope>) {\n    const g = <SVGGElement>this.node.firstElementChild!;\n    const width = g.ownerSVGElement!.getBoundingClientRect()!.width;\n    const paths = this.matchLength(visible.size + selectionSlopes.size, g);\n\n    const p = this.ctx.provider;\n    const selectionLookup = {has: (dataIndex: number) => p.isSelected(dataIndex)};\n\n    // update paths\n    let i = 0;\n    const updatePath = (s: ISlope) => {\n      this.updatePath(paths[i++], g, s, width, selectionLookup);\n    };\n\n    visible.forEach(updatePath);\n    selectionSlopes.forEach(updatePath);\n  }\n\n  private addPath(g: SVGGElement) {\n    const elem = this.pool.pop();\n    if (elem) {\n      g.appendChild(elem);\n      return elem;\n    }\n\n    const path = g.ownerDocument!.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.onclick = (evt) => {\n      // d3 style\n      const s: ISlope = (<any>path).__data__;\n      const p = this.ctx.provider;\n      const ids = s.dataIndices;\n      if (evt.ctrlKey) {\n        ids.forEach((id) => p.toggleSelection(id, true));\n      } else {\n        // either unset or set depending on the first state\n        const isSelected = p.isSelected(ids[0]!);\n        p.setSelection(isSelected ? [] : ids);\n      }\n    };\n    g.appendChild(path);\n    return path;\n  }\n\n  private matchLength(slopes: number, g: SVGGElement) {\n    const paths = <SVGPathElement[]>Array.from(g.children);\n    for (let i = slopes; i < paths.length; ++i) {\n      const elem = paths[i];\n      this.pool.push(elem);\n      elem.remove();\n    }\n\n    for (let i = paths.length; i < slopes; ++i) {\n      paths.push(this.addPath(g));\n    }\n    return paths;\n  }\n\n  updateSelection(selectedDataIndices: Set<number>) {\n    const g = <SVGGElement>this.node.firstElementChild!;\n    const paths = <SVGPathElement[]>Array.from(g.children);\n\n    const openDataIndices = new Set(selectedDataIndices);\n\n    if (selectedDataIndices.size === 0) {\n      // clear\n      for (const p of paths) {\n        const s: ISlope = (<any>p).__data__;\n        p.classList.toggle(cssClass('selected'), false);\n        if (this.chosenSelectionOnly.has(s)) {\n          p.remove();\n        }\n      }\n      this.chosenSelectionOnly.clear();\n      return;\n    }\n\n    for (const p of paths) {\n      const s: ISlope = (<any>p).__data__;\n      const selected = s.isSelected(selectedDataIndices);\n      p.classList.toggle(cssClass('selected'), selected);\n      if (!selected) {\n        if (this.chosenSelectionOnly.delete(s)) {\n          // was only needed because of the selection\n          p.remove();\n        }\n        continue;\n      }\n\n      g.appendChild(p); // to put it on top\n      // remove already handled\n      s.dataIndices.forEach((d) => openDataIndices.delete(d));\n    }\n\n    if (openDataIndices.size === 0) {\n      return;\n    }\n\n    // find and add missing slopes\n    const width = g.ownerSVGElement!.getBoundingClientRect()!.width;\n    for (const ss of this.leftSlopes) {\n      for (const s of ss) {\n        if (this.chosen.has(s) || this.chosenSelectionOnly.has(s) || !s.isSelected(openDataIndices)) {\n          // not visible or not selected -> skip\n          continue;\n        }\n        // create new path for it\n        this.chosenSelectionOnly.add(s);\n        const p = this.addPath(g);\n        this.updatePath(p, g, s, width, openDataIndices);\n      }\n    }\n  }\n}\n","import {GridStyleManager, MultiTableRowRenderer, nonUniformContext} from 'lineupengine';\nimport {ILineUpFlags, ILineUpOptions} from '../config';\nimport {AEventDispatcher, IEventListener, round, suffix} from '../internal';\nimport {Column, IGroupData, IGroupItem, isGroup, Ranking, IGroup} from '../model';\nimport {DataProvider} from '../provider';\nimport {isSummaryGroup, groupEndLevel} from '../provider/internal';\nimport {IImposer, IRenderContext} from '../renderer';\nimport {chooseGroupRenderer, chooseRenderer, chooseSummaryRenderer, getPossibleRenderer} from '../renderer/renderers';\nimport {cssClass, engineCssClass} from '../styles';\nimport DialogManager from './dialogs/DialogManager';\nimport domElementCache from './domElementCache';\nimport EngineRanking, {IEngineRankingContext} from './EngineRanking';\nimport {EMode, IRankingHeaderContext, IRankingHeaderContextContainer} from './interfaces';\nimport SlopeGraph from './SlopeGraph';\nimport {ADialog} from './dialogs';\n\n/**\n * emitted when the highlight changes\n * @asMemberOf EngineRenderer\n * @param dataIndex the highlghted data index or -1 for none\n * @event\n */\nexport declare function highlightChanged(dataIndex: number): void;\n\n/**\n * emitted a dialog is opened\n * @asMemberOf EngineRenderer\n * @param dialog the opened dialog\n * @event\n */\nexport declare function dialogOpenedER(dialog: ADialog): void;\n/**\n * emitted a dialog is closed\n * @asMemberOf EngineRenderer\n * @param dialog the closed dialog\n * @param action the action how the dialog was closed\n * @event\n */\nexport declare function dialogClosedER(dialog: ADialog, action: 'cancel' | 'confirm'): void;\n\nexport default class EngineRenderer extends AEventDispatcher {\n  static readonly EVENT_HIGHLIGHT_CHANGED = EngineRanking.EVENT_HIGHLIGHT_CHANGED;\n  static readonly EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\n  static readonly EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\n\n  protected readonly options: Readonly<ILineUpOptions>;\n\n  readonly node: HTMLElement;\n  private readonly table: MultiTableRowRenderer;\n  private readonly rankings: EngineRanking[] = [];\n  private readonly slopeGraphs: SlopeGraph[] = [];\n\n  readonly ctx: IRankingHeaderContextContainer & IRenderContext & IEngineRankingContext;\n\n  private readonly updateAbles: ((ctx: IRankingHeaderContext) => void)[] = [];\n  private zoomFactor = 1;\n  readonly idPrefix = `lu${Math.random().toString(36).slice(-8).substr(0, 3)}`; //generate a random string with length3;\n\n  private enabledHighlightListening: boolean = false;\n\n  constructor(protected data: DataProvider, parent: HTMLElement, options: Readonly<ILineUpOptions>) {\n    super();\n    this.options = options;\n    this.node = parent.ownerDocument!.createElement('main');\n    this.node.id = this.idPrefix;\n    // FIXME inline\n    this.node.classList.toggle(cssClass('whole-hover'), options.expandLineOnHover);\n    parent.appendChild(this.node);\n\n    const dialogManager = new DialogManager({\n      doc: parent.ownerDocument!,\n      livePreviews: options.livePreviews,\n      onDialogBackgroundClick: options.onDialogBackgroundClick,\n    });\n    this.forward(dialogManager, ...suffix('.main', EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED));\n\n    parent.appendChild(dialogManager.node);\n    this.ctx = {\n      idPrefix: this.idPrefix,\n      document: parent.ownerDocument!,\n      provider: data,\n      tasks: data.getTaskExecutor(),\n      dialogManager,\n      resolveToolbarActions: (col, keys) => this.options.resolveToolbarActions(col, keys, this.options.toolbarActions),\n      resolveToolbarDialogAddons: (col, keys) => this.options.resolveToolbarDialogAddons(col, keys, this.options.toolbarDialogAddons),\n      flags: <ILineUpFlags>this.options.flags,\n      asElement: domElementCache(parent.ownerDocument!),\n      renderer: (col: Column, imposer?: IImposer) => {\n        const r = chooseRenderer(col, this.options.renderers);\n        return r.create!(col, this.ctx, imposer);\n      },\n      groupRenderer: (col: Column, imposer?: IImposer) => {\n        const r = chooseGroupRenderer(col, this.options.renderers);\n        return r.createGroup!(col, this.ctx, imposer);\n      },\n      summaryRenderer: (col: Column, interactive: boolean, imposer?: IImposer) => {\n        const r = chooseSummaryRenderer(col, this.options.renderers);\n        return r.createSummary!(col, this.ctx, interactive, imposer);\n      },\n      createRenderer(col: Column, imposer?: IImposer) {\n        const single = this.renderer(col, imposer);\n        const group = this.groupRenderer(col, imposer);\n        const summary = options.summaryHeader ? this.summaryRenderer(col, false, imposer) : null;\n        return {\n          single,\n          group,\n          summary,\n          singleId: col.getRenderer(),\n          groupId: col.getGroupRenderer(),\n          summaryId: col.getSummaryRenderer(),\n          singleTemplate: null,\n          groupTemplate: null,\n          summaryTemplate: null\n        };\n      },\n      getPossibleRenderer: (col: Column) => getPossibleRenderer(col, this.options.renderers, this.options.canRender),\n      colWidth: (col: Column) => !col.isVisible() ? 0 : col.getWidth(),\n      caches: {\n        toolbar: new Map(),\n        toolbarAddons: new Map()\n      }\n    };\n\n    this.table = new MultiTableRowRenderer(this.node, this.idPrefix);\n\n    {\n      // helper object for better resizing experience\n      const footer = this.table.node.querySelector(`.${engineCssClass('body')} .${engineCssClass('footer')}`)!;\n      const copy = <HTMLElement>footer.cloneNode(true);\n      copy.classList.add(cssClass('resize-helper'));\n      footer!.insertAdjacentElement('afterend', copy);\n    }\n\n    //apply rules\n    {\n\n      this.style.addRule('lineup_rowPadding0', `\n        .${this.style.cssClasses.tr}`, {\n          marginTop: `${options.rowPadding}px`\n        });\n\n      for (let level = 0; level < 4; ++level) {\n        this.style.addRule(`lineup_groupPadding${level}`, `\n        .${this.style.cssClasses.tr}[data-meta~=last${level === 0 ? '' : level}]`, {\n            marginBottom: `${options.groupPadding * (level + 1)}px`\n          });\n      }\n\n\n      this.style.addRule('lineup_rowPaddingAgg0', `\n        .${cssClass('agg-level')}::after`, {\n          top: `-${options.rowPadding}px`\n        });\n      for (let level = 1; level <= 4; ++level) {\n        this.style.addRule(`lineup_rowPaddingAgg${level}`, `\n        .${cssClass('agg-level')}[data-level='${level}']::after`, {\n            top: `-${options.rowPadding + options.groupPadding}px`\n          });\n      }\n\n      // FIXME flat\n      this.style.addRule('lineup_rotation', `\n       #${this.idPrefix}.${cssClass('rotated-label')} .${cssClass('label')}.${cssClass('rotated')}`, {\n          transform: `rotate(${-this.options.labelRotation}deg)`\n        });\n\n      const toDisable: string[] = [];\n      if (!this.options.flags.advancedRankingFeatures) {\n        toDisable.push('ranking');\n      }\n      if (!this.options.flags.advancedModelFeatures) {\n        toDisable.push('model');\n      }\n      if (!this.options.flags.advancedUIFeatures) {\n        toDisable.push('ui');\n      }\n      if (toDisable.length > 0) {\n        this.style.addRule('lineup_feature_disable', `\n        ${toDisable.map((d) => `.${cssClass('feature')}-${d}.${cssClass('feature-advanced')}`).join(', ')}`, {\n            display: 'none !important'\n          });\n      }\n    }\n\n    this.initProvider(data);\n  }\n\n  get style(): GridStyleManager {\n    return this.table.style;\n  }\n\n  zoomOut() {\n    this.zoomFactor = Math.max(this.zoomFactor - 0.1, 0.5);\n    this.updateZoomFactor();\n    this.update();\n  }\n\n  zoomIn() {\n    this.zoomFactor = Math.min(this.zoomFactor + 0.1, 2.0);\n    this.updateZoomFactor();\n    this.update();\n  }\n\n  private updateZoomFactor() {\n    const body = <HTMLElement>this.node.querySelector('main')!;\n    body.style.fontSize = `${this.zoomFactor * 100}%`;\n  }\n\n  pushUpdateAble(updateAble: (ctx: IRankingHeaderContext) => void) {\n    this.updateAbles.push(updateAble);\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED]);\n  }\n\n  on(type: typeof EngineRenderer.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\n  on(type: typeof EngineRenderer.EVENT_DIALOG_OPENED, listener: typeof dialogOpenedER | null): this;\n  on(type: typeof EngineRenderer.EVENT_DIALOG_CLOSED, listener: typeof dialogClosedER | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n\n  setDataProvider(data: DataProvider) {\n    this.takeDownProvider();\n\n    this.data = data;\n    (<any>this.ctx).provider = data;\n    (<any>this.ctx).tasks = data.getTaskExecutor();\n\n    this.initProvider(data);\n  }\n\n  private takeDownProvider() {\n    this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.body`, null);\n    this.data.on(`${DataProvider.EVENT_ADD_RANKING}.body`, null);\n    this.data.on(`${DataProvider.EVENT_REMOVE_RANKING}.body`, null);\n    this.data.on(`${DataProvider.EVENT_GROUP_AGGREGATION_CHANGED}.body`, null);\n    this.data.on(`${DataProvider.EVENT_SHOWTOPN_CHANGED}.body`, null);\n    this.data.on(`${DataProvider.EVENT_JUMP_TO_NEAREST}.body`, null);\n    this.data.on(`${DataProvider.EVENT_BUSY}.body`, null);\n\n    this.rankings.forEach((r) => this.table.remove(r));\n    this.rankings.splice(0, this.rankings.length);\n    this.slopeGraphs.forEach((s) => this.table.remove(s));\n    this.slopeGraphs.splice(0, this.slopeGraphs.length);\n  }\n\n  private initProvider(data: DataProvider) {\n    data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.body`, () => this.updateSelection(data.getSelection()));\n    data.on(`${DataProvider.EVENT_ADD_RANKING}.body`, (ranking: Ranking) => {\n      this.addRanking(ranking);\n    });\n    data.on(`${DataProvider.EVENT_REMOVE_RANKING}.body`, (ranking: Ranking) => {\n      this.removeRanking(ranking);\n    });\n    data.on(`${DataProvider.EVENT_GROUP_AGGREGATION_CHANGED}.body`, (ranking: Ranking) => {\n      this.update(this.rankings.filter((r) => r.ranking === ranking));\n    });\n    data.on(`${DataProvider.EVENT_SHOWTOPN_CHANGED}.body`, () => {\n      this.update(this.rankings);\n    });\n    data.on(`${DataProvider.EVENT_JUMP_TO_NEAREST}.body`, (indices: number[]) => {\n      this.setHighlightToNearest(indices, true);\n    });\n\n    (<any>this.ctx).provider = data;\n\n    this.data.getRankings().forEach((r) => this.addRanking(r));\n  }\n\n  private updateSelection(dataIndices: number[]) {\n    const s = new Set(dataIndices);\n    this.rankings.forEach((r) => r.updateSelection(s));\n\n    this.slopeGraphs.forEach((r) => r.updateSelection(s));\n  }\n\n  private updateHist(ranking?: EngineRanking, col?: Column) {\n    if (!this.options.summaryHeader) {\n      return;\n    }\n    const rankings = ranking ? [ranking] : this.rankings;\n\n    for (const r of rankings) {\n      if (col) {\n        // single update\n        r.updateHeaderOf(col);\n      } else {\n        r.updateHeaders();\n      }\n    }\n    this.updateUpdateAbles();\n  }\n\n  private addRanking(ranking: Ranking) {\n    if (this.rankings.length > 0) {\n      // add slope graph first\n      const s = this.table.pushSeparator((header, body) => new SlopeGraph(header, body, `${ranking.id}S`, this.ctx, {\n        mode: this.options.defaultSlopeGraphMode === 'band' ? EMode.BAND : EMode.ITEM\n      }));\n      this.slopeGraphs.push(s);\n    }\n\n    const r = this.table.pushTable((header, body, tableId, style) => new EngineRanking(ranking, header, body, tableId, style, this.ctx, {\n      animation: this.options.animated,\n      customRowUpdate: this.options.customRowUpdate || (() => undefined),\n      levelOfDetail: this.options.levelOfDetail || (() => 'high'),\n      flags: <ILineUpFlags>this.options.flags\n    }));\n    r.on(EngineRanking.EVENT_WIDTH_CHANGED, () => {\n      this.updateRotatedHeaderState();\n      this.table.widthChanged();\n    });\n    r.on(EngineRanking.EVENT_UPDATE_DATA, () => this.update([r]));\n    r.on(EngineRanking.EVENT_RECREATE, () => this.updateUpdateAbles());\n    this.forward(r, EngineRanking.EVENT_HIGHLIGHT_CHANGED);\n    if (this.enabledHighlightListening) {\n      r.enableHighlightListening(true);\n    }\n\n    ranking.on(suffix('.renderer', Ranking.EVENT_ORDER_CHANGED), () => this.updateHist(r));\n\n    this.rankings.push(r);\n    this.update([r]);\n  }\n\n  private updateRotatedHeaderState() {\n    if (this.options.labelRotation === 0) {\n      return;\n    }\n    const l = this.node.querySelector(`.${cssClass('label')}.${cssClass('rotated')}`);\n    this.node.classList.toggle(cssClass('rotated-label'), Boolean(l));\n  }\n\n  private removeRanking(ranking: Ranking | null) {\n    if (!ranking) {\n      // remove all\n      this.rankings.splice(0, this.rankings.length);\n      this.slopeGraphs.splice(0, this.slopeGraphs.length);\n      this.table.clear();\n      return;\n    }\n    const index = this.rankings.findIndex((r) => r.ranking === ranking);\n    if (index < 0) {\n      return; // error\n    }\n    const section = this.rankings.splice(index, 1)[0]!;\n    const slope = this.slopeGraphs.splice(index === 0 ? index : index - 1, 1)[0];\n    this.table.remove(section);\n    if (slope) {\n      this.table.remove(slope);\n    }\n  }\n\n  update(rankings: EngineRanking[] = this.rankings) {\n    // visible and has parent = part of dom\n    rankings = rankings.filter((d) => !d.hidden && d.body.parentElement!);\n    if (rankings.length === 0) {\n      return;\n    }\n\n    const round2 = (v: number) => round(v, 2);\n    const rowPadding = round2(this.zoomFactor * this.options.rowPadding!);\n    const groupPadding = round2(this.zoomFactor * this.options.groupPadding!);\n\n    const heightsFor = (ranking: Ranking, data: (IGroupItem | IGroupData)[]) => {\n      if (this.options.dynamicHeight) {\n        const impl = this.options.dynamicHeight(data, ranking);\n        const f = (v: number | any, d: any) => typeof v === 'number' ? v : v(d);\n        if (impl) {\n          return {\n            defaultHeight: round2(this.zoomFactor * impl.defaultHeight),\n            height: (d: IGroupItem | IGroupData) => round2(this.zoomFactor * f(impl.height, d)),\n            padding: (d: IGroupItem | IGroupData) => round2(this.zoomFactor * f(impl.padding, d)),\n          };\n        }\n      }\n      const item = round2(this.zoomFactor * this.options.rowHeight!);\n      const group = round2(this.zoomFactor * this.options.groupHeight!);\n      return {\n        defaultHeight: item,\n        height: (d: IGroupItem | IGroupData) => isGroup(d) ? group : item,\n        padding: rowPadding\n      };\n    };\n\n    for (const r of rankings) {\n      const grouped = r.groupData();\n\n      // inline with creating the groupData\n      const {height, defaultHeight, padding} = heightsFor(r.ranking, grouped);\n\n      const strategy = this.data.getAggregationStrategy();\n      const topNGetter = (group: IGroup) => this.data.getTopNAggregated(r.ranking, group);\n\n      // inline and create manually for better performance\n      const rowContext = nonUniformContext(grouped.map(height), defaultHeight, (index) => {\n        const pad = (typeof padding === 'number' ? padding : padding(grouped[index] || null));\n        const v = grouped[index];\n\n        if (index < 0 || !v || (isGroup(v) && isSummaryGroup(v, strategy, topNGetter))) {\n          return pad;\n        }\n        return pad + groupPadding * groupEndLevel(v, topNGetter);\n      });\n      r.render(grouped, rowContext);\n    }\n\n    this.updateSlopeGraphs(rankings);\n\n    this.updateUpdateAbles();\n    this.updateRotatedHeaderState();\n    this.table.widthChanged();\n  }\n\n  private updateUpdateAbles() {\n    for (const u of this.updateAbles) {\n      u(this.ctx);\n    }\n  }\n\n  private updateSlopeGraphs(rankings: EngineRanking[] = this.rankings) {\n    const indices = new Set(rankings.map((d) => this.rankings.indexOf(d)));\n\n    for (let i = 0; i < this.slopeGraphs.length; ++i) {\n      const s = this.slopeGraphs[i];\n      if (s.hidden) {\n        return;\n      }\n      const left = i;\n      const right = i + 1;\n      if (!indices.has(left) && !indices.has(right)) {\n        return;\n      }\n      const leftRanking = this.rankings[left];\n      const rightRanking = this.rankings[right];\n      s.rebuild(leftRanking.ranking, leftRanking.currentData, leftRanking.context, rightRanking.ranking, rightRanking.currentData, rightRanking.context);\n    }\n  }\n\n  setHighlight(dataIndex: number, scrollIntoView: boolean) {\n    const found = this.rankings.map((r) => r.setHighlight(dataIndex));\n    this.fire(EngineRenderer.EVENT_HIGHLIGHT_CHANGED, dataIndex);\n    if (this.rankings.length === 0 || dataIndex < 0) {\n      return false;\n    }\n    if (!scrollIntoView) {\n      return found[0]!;\n    }\n    return this.rankings[0].scrollIntoView(dataIndex);\n  }\n\n  setHighlightToNearest(dataIndices: number[], scrollIntoView: boolean) {\n    if (this.rankings.length === 0) {\n      return false;\n    }\n    const nearest = this.rankings[0].findNearest(dataIndices);\n    if (nearest >= 0) {\n      return this.setHighlight(nearest, scrollIntoView);\n    }\n    return false;\n  }\n\n  getHighlight() {\n    for (const ranking of this.rankings) {\n      const h = ranking.getHighlight();\n      if (h >= 0) {\n        return h;\n      }\n    }\n    return -1;\n  }\n\n  enableHighlightListening(enable: boolean) {\n    for (const ranking of this.rankings) {\n      ranking.enableHighlightListening(enable);\n    }\n    this.enabledHighlightListening = enable;\n  }\n\n  destroy() {\n    this.takeDownProvider();\n    this.table.destroy();\n    this.node.remove();\n  }\n}\n\n","\n\n/**\n * caches parsing of html strings in a dom element cache\n * @param doc the doc to create the elements under\n * @internal\n */\nexport default function domElementCache(doc: Document): (html: string) => HTMLElement {\n  const cache = new Map<string, HTMLElement>();\n\n  const helper = doc.createElement('div');\n\n  return (html: string) => {\n    if (cache.has(html)) {\n      return <HTMLElement>cache.get(html)!.cloneNode(true);\n    }\n\n    helper.innerHTML = html;\n    const node = <HTMLElement>helper.firstElementChild!;\n    // keep a copy\n    cache.set(html, <HTMLElement>node.cloneNode(true));\n\n    return node;\n  };\n}\n","import {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\nimport APopup from './APopup';\n\n/** @internal */\nexport default class ChooseRankingDialog extends APopup {\n\n  constructor(private readonly items: HTMLElement[], dialog: IDialogContext) {\n    super(dialog);\n  }\n\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('more-options'), cssClass('choose-options'));\n    for (const item of this.items) {\n      node.appendChild(item);\n    }\n  }\n}\n","import {clear, AEventDispatcher, IEventListener} from '../../internal';\nimport {cssClass} from '../../styles';\n\nexport interface IItem {\n  id: string;\n  text: string;\n}\n\nexport interface IGroupSearchItem<T extends IItem> {\n  text: string;\n  children: (T | IGroupSearchItem<T>)[];\n}\n\nfunction isItem<T extends IItem>(v: T | IGroupSearchItem<T>): v is T {\n  return (<T>v).id !== undefined;\n}\n\nexport interface ISearchBoxOptions<T extends IItem> {\n  doc: Document;\n\n  formatItem(item: T | IGroupSearchItem<T>, node: HTMLElement): string;\n\n  placeholder: string;\n}\n\n/**\n * @asMemberOf SearchBox\n * @event\n */\nexport declare function select(item: any): void;\n\n\nexport default class SearchBox<T extends IItem> extends AEventDispatcher {\n  static readonly EVENT_SELECT = 'select';\n\n  private readonly options: Readonly<ISearchBoxOptions<T>> = {\n    formatItem: (item) => item.text,\n    doc: document,\n    placeholder: 'Select...',\n  };\n\n  readonly node: HTMLElement;\n  private search: HTMLInputElement;\n  private body: HTMLElement;\n\n  private readonly itemTemplate: HTMLElement;\n  private readonly groupTemplate: HTMLElement;\n\n  private values: (T | IGroupSearchItem<T>)[] = [];\n\n  constructor(options: Partial<ISearchBoxOptions<T>> = {}) {\n    super();\n    Object.assign(this.options, options);\n\n    this.node = this.options.doc.createElement('div');\n    this.node.classList.add(cssClass('search'));\n    this.node.innerHTML = `<input class=\"${cssClass('search-input')}\" type=\"search\" placeholder=\"${this.options.placeholder}\">\n    <ul class=\"${cssClass('search-list')}\"></ul>`;\n\n    this.search = <HTMLInputElement>this.node.firstElementChild!;\n    this.body = <HTMLElement>this.node.lastElementChild!;\n\n    this.search.onfocus = () => this.focus();\n    this.search.onblur = () => this.blur();\n    this.search.oninput = () => this.filter();\n    this.search.onkeydown = (evt) => this.handleKey(evt);\n\n\n    this.itemTemplate = this.options.doc.createElement('li');\n    this.itemTemplate.classList.add(cssClass('search-item'));\n    this.itemTemplate.innerHTML = `<span></span>`;\n    this.groupTemplate = this.options.doc.createElement('li');\n    this.groupTemplate.classList.add(cssClass('search-group'));\n    this.groupTemplate.innerHTML = `<span></span><ul></ul>`;\n  }\n\n  get data() {\n    return this.values;\n  }\n\n  set data(data: (T | IGroupSearchItem<T>)[]) {\n    this.values = data;\n    clear(this.body);\n    this.buildDialog(this.body, this.values);\n  }\n\n  private buildDialog(node: HTMLElement, values: (T | IGroupSearchItem<T>)[]) {\n    for (const v of values) {\n      let li: HTMLElement;\n      if (isItem(v)) {\n        li = <HTMLElement>this.itemTemplate.cloneNode(true);\n        li.onmousedown = (evt) => {\n          // see https://stackoverflow.com/questions/10652852/jquery-fire-click-before-blur-event#10653160\n          evt.preventDefault();\n        };\n        li.onclick = () => this.select(v);\n        li.onmouseenter = () => this.highlighted = li;\n        li.onmouseleave = () => this.highlighted = null;\n        node.appendChild(li);\n      } else {\n        li = <HTMLElement>this.groupTemplate.cloneNode(true);\n        this.buildDialog(<HTMLElement>li.lastElementChild!, v.children);\n        node.appendChild(li);\n      }\n      const item = <HTMLElement>li.firstElementChild!;\n      item.innerHTML = this.options.formatItem(v, item);\n    }\n  }\n\n  private handleKey(evt: KeyboardEvent) {\n    const KEYS = {\n      ESC: 27,\n      ENTER: 13,\n      UP: 38,\n      DOWN: 40\n    };\n    switch (evt.which) {\n      case KEYS.ESC:\n        this.search.blur();\n        break;\n      case KEYS.ENTER:\n        const h = this.highlighted;\n        if (h) {\n          h.click();\n        }\n        break;\n      case KEYS.UP:\n        this.highlightPrevious();\n        break;\n      case KEYS.DOWN:\n        this.highlightNext();\n        break;\n    }\n  }\n\n  private select(item: T) {\n    this.search.value = ''; // reset\n    this.search.blur();\n    this.fire(SearchBox.EVENT_SELECT, item);\n  }\n\n  focus() {\n    this.body.style.width = `${this.search.offsetWidth}px`;\n    this.highlighted = <HTMLElement>this.body.firstElementChild || null;\n    this.node.classList.add(cssClass('search-open'));\n  }\n\n  private get highlighted() {\n    return <HTMLElement>this.body.getElementsByClassName(cssClass('search-highlighted'))[0] || null;\n  }\n\n  private set highlighted(value: HTMLElement | null) {\n    const old = this.highlighted;\n    if (old === value) {\n      return;\n    }\n    if (old) {\n      old.classList.remove(cssClass('search-highlighted'));\n    }\n    if (value) {\n      value.classList.add(cssClass('search-highlighted'));\n    }\n  }\n\n  private highlightNext() {\n    const h = this.highlighted;\n    if (!h || h.classList.contains(cssClass('hidden'))) {\n      this.highlighted = <HTMLElement>this.body.querySelector(`.${cssClass('search-item')}:not(.${cssClass('hidden')})`) || null;\n      return;\n    }\n\n    const items = <HTMLElement[]>Array.from(this.body.querySelectorAll(`.${cssClass('search-item')}:not(.${cssClass('hidden')})`));\n    const index = items.indexOf(h);\n    this.highlighted = items[index + 1] || null;\n  }\n\n  private highlightPrevious() {\n    const h = this.highlighted;\n    const items = <HTMLElement[]>Array.from(this.body.querySelectorAll(`.${cssClass('search-item')}:not(.${cssClass('hidden')})`));\n\n    if (!h || h.classList.contains(cssClass('hidden'))) {\n      this.highlighted = items[items.length - 1] || null;\n      return;\n    }\n    const index = items.indexOf(h);\n    this.highlighted = items[index - 1] || null;\n  }\n\n  private blur() {\n    this.search.value = '';\n    // clear filter\n    this.filterResults(this.body, '');\n    this.node.classList.remove(cssClass('search-open'));\n  }\n\n  private filter() {\n    const empty = this.filterResults(this.body, this.search.value.toLowerCase());\n    this.body.classList.toggle(cssClass('search-empty'), empty);\n  }\n\n  private filterResults(node: HTMLElement, text: string) {\n    if (text === '') {\n      // show all\n      (<HTMLElement[]>Array.from(node.getElementsByClassName(cssClass('hidden')))).forEach((d: HTMLElement) => d.classList.remove(cssClass('hidden')));\n      return false;\n    }\n    const children = Array.from(node.children);\n    children.forEach((d) => {\n      const content = d.firstElementChild!.innerHTML.toLowerCase();\n      let hidden = !content.includes(text);\n      if (d.classList.contains(cssClass('search-group'))) {\n        const ul = <HTMLElement>d.lastElementChild!;\n        const allChildrenHidden = this.filterResults(ul, text);\n        hidden = hidden && allChildrenHidden;\n      }\n      d.classList.toggle(cssClass('hidden'), hidden);\n    });\n\n    return children.every((d) => d.classList.contains(cssClass('hidden')));\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([SearchBox.EVENT_SELECT]);\n  }\n\n  on(type: typeof SearchBox.EVENT_SELECT, listener: typeof select | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n}\n","import {Ranking} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {cssClass} from '../../styles';\n\n/** @internal */\nexport default class RenameRankingDialog extends ADialog {\n\n  private readonly before: string;\n\n  constructor(private readonly ranking: Ranking, dialog: IDialogContext) {\n    super(dialog, {\n      livePreview: 'rename'\n    });\n    this.before = ranking.getLabel();\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('dialog-rename'));\n    node.insertAdjacentHTML('beforeend', `\n      <input type=\"text\" value=\"${this.ranking.getLabel()}\" required autofocus placeholder=\"name\">`);\n  }\n\n  protected reset() {\n    this.findInput('input[type=\"text\"]').value = this.before;\n  }\n\n  protected cancel() {\n    this.ranking.setLabel(this.before);\n  }\n\n  protected submit() {\n    const newValue = this.findInput('input[type=\"text\"]').value;\n    this.ranking.setLabel(newValue);\n    return true;\n  }\n}\n","import {Ranking} from '../../model';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {dialogContext, IDialogContext} from './ADialog';\nimport RenameRankingDialog from './RenameRankingDialog';\nimport {cssClass} from '../../styles';\nimport {actionCSSClass} from '../header';\nimport APopup from './APopup';\n\n/** @internal */\nexport default class MoreRankingOptionsDialog extends APopup {\n\n  constructor(private readonly ranking: Ranking, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\n    super(dialog, {\n      autoClose: true\n    });\n  }\n\n  private addIcon(node: HTMLElement, title: string, onClick: (evt: MouseEvent) => void) {\n    node.insertAdjacentHTML('beforeend', `<i title=\"${title}\" class=\"${actionCSSClass(title)}\"><span>${title}</span> </i>`);\n    const i = <HTMLElement>node.lastElementChild;\n    i.onclick = (evt) => {\n      evt.stopPropagation();\n      onClick(evt);\n    };\n  }\n\n  protected build(node: HTMLElement) {\n    node.classList.add(cssClass('more-options'));\n    this.addIcon(node, 'Rename', (evt) => {\n      evt.stopPropagation();\n      evt.preventDefault();\n      const dialog = new RenameRankingDialog(this.ranking, dialogContext(this.ctx, this.level + 1, <any>evt));\n      dialog.open();\n    });\n    this.addIcon(node, 'Remove', (evt) => {\n      evt.stopPropagation();\n      evt.preventDefault();\n      this.destroy('confirm');\n      this.ctx.provider.removeRanking(this.ranking);\n    });\n  }\n}\n","import {Column} from '../../model';\nimport ADialog, {IDialogContext} from './ADialog';\nimport {IToolbarDialogAddon, IRankingHeaderContext, IToolbarDialogAddonHandler} from '../interfaces';\n\n/** @internal */\nexport default class AddonDialog extends ADialog {\n  private readonly handlers: IToolbarDialogAddonHandler[] = [];\n\n  constructor(private readonly column: Column, private readonly addons: IToolbarDialogAddon[], dialog: IDialogContext, private readonly ctx: IRankingHeaderContext, private readonly onClick?: () => void) {\n    super(dialog);\n  }\n\n  protected build(node: HTMLElement) {\n    for(const addon of this.addons) {\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\n      this.handlers.push(addon.append(this.column, node, this.dialog, this.ctx));\n    }\n  }\n\n  protected submit(): boolean {\n    for (const handler of this.handlers) {\n      if (handler.submit() === false) {\n        return false;\n      }\n    }\n    if (this.onClick) {\n      this.onClick();\n    }\n    return true;\n  }\n\n  protected cancel() {\n    for (const handler of this.handlers) {\n      handler.cancel();\n    }\n  }\n\n  protected reset() {\n    for (const handler of this.handlers) {\n      handler.reset();\n    }\n  }\n}\n","import {clear} from '../../internal';\nimport {Column, Ranking, categoryOf, isSortingAscByDefault, ISortCriteria, isSupportType} from '../../model';\nimport {aria, cssClass} from '../../styles';\nimport AddonDialog from '../dialogs/AddonDialog';\nimport {actionCSSClass, updateHeader} from '../header';\nimport {IRankingHeaderContext, IToolbarDialogAddon} from '../interfaces';\nimport {getToolbarDialogAddons, isGroupAble, isGroupSortAble, isSortAble} from '../toolbar';\nimport SearchBox, {ISearchBoxOptions} from './SearchBox';\nimport {dialogContext} from '../dialogs';\n\ninterface IColumnItem {\n  col: Column;\n  id: string;\n  text: string;\n}\n/**\n * @internal\n */\nexport default class Hierarchy {\n  readonly node: HTMLElement;\n  readonly groupAdder: SearchBox<IColumnItem>;\n  readonly sortAdder: SearchBox<IColumnItem>;\n  readonly groupSortAdder: SearchBox<IColumnItem>;\n\n  constructor(private readonly ctx: IRankingHeaderContext, document: Document) {\n    this.node = document.createElement('aside');\n    this.node.classList.add(cssClass('hierarchy'), cssClass('feature-advanced'), cssClass('feature-ranking'));\n    this.node.innerHTML = `\n      <section class=\"${cssClass('group-hierarchy')}\">\n      </section>\n      <section class=\"${cssClass('sort-hierarchy')}\">\n      </section>\n      <section class=\"${cssClass('sort-groups-hierarchy')}\">\n      </section>\n    `;\n    const options = <Partial<ISearchBoxOptions<IColumnItem>>>{\n      doc: document,\n      placeholder: 'Add Sort Criteria...',\n      formatItem: (item: IColumnItem, node: HTMLElement) => {\n        node.classList.add(cssClass('typed-icon'));\n        node.dataset.typeCat = categoryOf(item.col).name;\n        node.dataset.type = item.col.desc.type;\n        return item.text;\n      },\n\n    };\n    this.groupAdder = new SearchBox(Object.assign({}, options, {\n      placeholder: 'Add Grouping Criteria...'\n    }));\n    this.groupSortAdder = new SearchBox(Object.assign({}, options, {\n      placeholder: 'Add Grouping Sort Criteria...'\n    }));\n    this.sortAdder = new SearchBox(options);\n  }\n\n  update(ranking: Ranking | null) {\n    if (!ranking) {\n      this.node.style.display = 'none';\n      return;\n    }\n    this.node.style.display = null;\n    this.renderGroups(ranking, <HTMLElement>this.node.firstElementChild!);\n    this.renderSorting(ranking, <HTMLElement>this.node.children[1]!);\n    this.renderGroupSorting(ranking, <HTMLElement>this.node.lastElementChild!);\n  }\n\n  private render<T>(node: HTMLElement, items: T[], toColumn: (item: T) => Column, extras: (item: T, node: HTMLElement) => void, addonKey: string, onChange: (item: T, delta: number) => void) {\n    const cache = new Map((<HTMLElement[]>Array.from(node.children)).map((d) => <[string, HTMLElement]>[d.dataset.id, d]));\n    clear(node);\n\n    items.forEach((d) => {\n      const col = toColumn(d);\n      const item = cache.get(col.id);\n      if (item) {\n        node.appendChild(item);\n        updateHeader(item, col, 0);\n        return;\n      }\n      const addons = getToolbarDialogAddons(col, addonKey, this.ctx);\n\n      node.insertAdjacentHTML('beforeend', `<div data-id=\"${col.id}\" class=\"${cssClass('toolbar')} ${cssClass('hierarchy-entry')}\">\n      <div class=\"${cssClass('label')} ${cssClass('typed-icon')}\">${col.label}</div>\n      ${addons.length > 0 ? `<i title=\"Customize\" class=\"${actionCSSClass('customize')}\">${aria('Customize')}</i>` : ''}\n      <i title=\"Move Up\" class=\"${actionCSSClass('Move Up')}\">${aria('Move Up')}</i>\n      <i title=\"Move Down\" class=\"${actionCSSClass('Move Down')}\">${aria('Move Down')}</i>\n      <i title=\"Remove from hierarchy\" class=\"${actionCSSClass('Remove')}\">${aria('Remove from hierarchy')}</i>\n      </div>`);\n      const last = <HTMLElement>node.lastElementChild!;\n\n      function prevent(evt: Event) {\n        evt.preventDefault();\n        evt.stopPropagation();\n      }\n\n      (<HTMLElement>last.querySelector('i[title=\"Move Down\"]')!).onclick = (evt) => {\n        prevent(evt);\n        onChange(d, + 1);\n      };\n      (<HTMLElement>last.querySelector('i[title=\"Move Up\"]')!).onclick = (evt) => {\n        prevent(evt);\n        onChange(d, -1);\n      };\n      (<HTMLElement>last.querySelector('i[title^=Remove]')!).onclick = (evt) => {\n        prevent(evt);\n        onChange(d, 0);\n      };\n\n      if (addons.length > 0) {\n        (<HTMLElement>last.querySelector('i[title=Customize]')!).onclick = (evt) => {\n          prevent(evt);\n          this.customize(col, addons, <any>evt);\n        };\n      }\n\n      extras(d, last);\n\n      updateHeader(last, col, 0);\n    });\n  }\n\n  private renderGroups(ranking: Ranking, node: HTMLElement) {\n    const groups = ranking.getGroupCriteria();\n\n    if (groups.length === 0) {\n      clear(node);\n      return;\n    }\n\n    const click = (col: Column, delta: number) => {\n      if (delta === 0) {\n        col.groupByMe();\n        return;\n      }\n      const current = col.isGroupedBy();\n      col.findMyRanker()!.groupBy(col, current + delta);\n    };\n\n    const addButton = (_: Column, last: HTMLElement) => {\n      last.insertAdjacentHTML('afterbegin', `<i title=\"Group\" class=\"${actionCSSClass('group')}\" data-group=\"true\">${aria('Group')}</i>`);\n    };\n\n    this.render(node, groups, (d) => d, addButton, 'group', click);\n    this.addGroupAdder(ranking, groups, node);\n  }\n\n  private renderSorting(ranking: Ranking, node: HTMLElement) {\n    const sortCriterias = ranking.getSortCriteria();\n\n    if (sortCriterias.length === 0) {\n      clear(node);\n      return;\n    }\n\n    const click = ({col}: ISortCriteria, delta: number) => {\n      const current = col.isSortedByMe();\n      if (!isFinite(delta)) {\n        col.sortByMe(current.asc === 'desc', current.priority);\n        return;\n      }\n      if (delta === 0) {\n        col.sortByMe(current.asc === 'asc', -1);\n        return;\n      }\n      col.sortByMe(current.asc === 'asc', current.priority! + delta);\n    };\n\n    const addButton = (s: ISortCriteria, last: HTMLElement) => {\n      last.insertAdjacentHTML('afterbegin', `\n      <i title=\"Sort\" class=\"${actionCSSClass('sort')}\" data-sort=\"${s.asc ? 'asc' : 'desc'}\">${aria('Toggle Sorting')}</i>`);\n      (<HTMLElement>last.querySelector('i[title=Sort]')!).onclick = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        click(s, Infinity);\n      };\n    };\n\n    this.render(node, sortCriterias, (d) => d.col, addButton, 'sort', click);\n\n    this.addSortAdder(ranking, sortCriterias, node);\n  }\n\n  private renderGroupSorting(ranking: Ranking, node: HTMLElement) {\n    const sortCriterias = ranking.getGroupSortCriteria();\n\n    if (sortCriterias.length === 0) {\n      clear(node);\n      return;\n    }\n\n    const click = ({col}: ISortCriteria, delta: number) => {\n      const current = col.isGroupSortedByMe();\n      if (!isFinite(delta)) {\n        col.groupSortByMe(current.asc === 'desc', current.priority);\n        return;\n      }\n      if (delta === 0) {\n        col.groupSortByMe(current.asc === 'asc', -1);\n        return;\n      }\n      col.groupSortByMe(current.asc === 'asc', current.priority! + delta);\n    };\n\n    const addButton = (s: ISortCriteria, last: HTMLElement) => {\n      last.insertAdjacentHTML('afterbegin', `\n      <i title=\"Sort Group\" class=\"${actionCSSClass('sort-groups')}\" data-sort=\"${s.asc ? 'asc' : 'desc'}\">${aria('Toggle Sorting')}</i>`);\n      (<HTMLElement>last.querySelector('i[title=\"Sort Group\"]')!).onclick = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        click(s, Infinity);\n      };\n    };\n\n    this.render(node, sortCriterias, (d) => d.col, addButton, 'sortGroup', click);\n\n    this.addGroupSortAdder(ranking, sortCriterias, node);\n  }\n\n  private addAdder(adder: SearchBox<IColumnItem>, ranking: Ranking, addonKey: string, current: Column[], node: HTMLElement, check: (col: Column) => boolean, onSelect: (col: Column) => void) {\n    const used = new Set(current);\n\n    adder.data = ranking.children.filter((col) => !isSupportType(col) && !used.has(col) && check(col)).map((col) => ({col, id: col.id, text: col.label}));\n\n    adder.on(SearchBox.EVENT_SELECT, (item: IColumnItem) => {\n      const addons = getToolbarDialogAddons(item.col, addonKey, this.ctx);\n      if (addons.length > 0) {\n        this.customize(item.col, addons, adder.node, () => onSelect(item.col));\n      } else {\n        onSelect(item.col);\n      }\n    });\n\n    if (adder.data.length <= 0) {\n      return;\n    }\n\n    const wrapper = node.ownerDocument!.createElement('footer');\n    wrapper.appendChild(adder.node);\n    wrapper.classList.add(cssClass('hierarchy-adder'));\n    node.appendChild(wrapper);\n  }\n\n  private addSortAdder(ranking: Ranking, sortCriterias: ISortCriteria[], node: HTMLElement) {\n    this.addAdder(this.sortAdder, ranking, 'sort', sortCriterias.map((d) => d.col), node, (d) => isSortAble(d, this.ctx), (col) => {\n      ranking.sortBy(col, isSortingAscByDefault(col), sortCriterias.length);\n    });\n  }\n\n  private addGroupAdder(ranking: Ranking, groups: Column[], node: HTMLElement) {\n    this.addAdder(this.groupAdder, ranking, 'group', groups, node, (d) => isGroupAble(d, this.ctx), (col) => {\n      ranking.groupBy(col, groups.length);\n    });\n  }\n\n  private addGroupSortAdder(ranking: Ranking, sortCriterias: ISortCriteria[], node: HTMLElement) {\n    this.addAdder(this.groupSortAdder, ranking, 'sortGroup', sortCriterias.map((d) => d.col), node, (d) => isGroupSortAble(d, this.ctx), (col) => {\n      ranking.groupSortBy(col, isSortingAscByDefault(col), sortCriterias.length);\n    });\n  }\n\n  private customize(col: Column, addons: IToolbarDialogAddon[], attachment: HTMLElement, onClick?: () => void) {\n    const dialog = new AddonDialog(col, addons, dialogContext(this.ctx, 0, attachment), this.ctx, onClick);\n    dialog.open();\n  }\n}\n\n","import {Column, isMapAbleColumn, NumberColumn} from '../../model';\nimport {IAbortAblePromise} from '../../provider';\nimport {ISummaryRenderer} from '../../renderer';\nimport {cssClass, engineCssClass} from '../../styles';\nimport {createShortcutMenuItems, dragAbleColumn, updateHeader} from '../header';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {suffix} from '../../internal';\n\n/** @internal */\nexport default class SidePanelEntryVis {\n  readonly node: HTMLElement;\n  private summary: ISummaryRenderer;\n  private summaryUpdater: IAbortAblePromise<void> | null = null;\n\n  constructor(public readonly column: Column, private ctx: IRankingHeaderContext, document: Document) {\n    this.node = document.createElement('article');\n    this.node.classList.add(cssClass('side-panel-entry'));\n    this.node.dataset.colId = column.id;\n    this.node.dataset.type = column.desc.type;\n\n    this.summary = ctx.summaryRenderer(column, true);\n\n    this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER), () => {\n      this.update();\n    });\n    this.column.on(suffix('.panel',Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), () => {\n      this.recreateSummary();\n    });\n    this.init();\n    this.update();\n  }\n\n\n  private init() {\n    this.node.innerHTML = `\n      <header class=\"${cssClass('side-panel-entry-header')}\">\n        <div class=\"${cssClass('side-panel-labels')}\">\n          <span class=\"${cssClass('label')} ${cssClass('typed-icon')} ${cssClass('side-panel-label')}\"></span>\n          <span class=\"${cssClass('sublabel')} ${cssClass('side-panel-sublabel')}\"></span>\n        </div>\n        <div class=\"${cssClass('toolbar')} ${cssClass('side-panel-toolbar')}\"></div>\n      </header>`;\n    createShortcutMenuItems(<HTMLElement>this.node.querySelector(`.${cssClass('toolbar')}`), 0, this.column, this.ctx, 'sidePanel', false);\n    dragAbleColumn(<HTMLElement>this.node.querySelector('header'), this.column, this.ctx);\n    this.appendSummary();\n  }\n\n  update(ctx: IRankingHeaderContext = this.ctx) {\n    this.ctx = ctx;\n    updateHeader(this.node, this.column);\n    this.updateSummary();\n  }\n\n  private updateSummary() {\n    const summaryNode = <HTMLElement>this.node.querySelector(`.${cssClass('summary')}`)!;\n    if (this.summaryUpdater) {\n      this.summaryUpdater.abort();\n      summaryNode.classList.remove(engineCssClass('loading'));\n      this.summaryUpdater = null;\n    }\n    const r = this.summary.update(summaryNode);\n    if (!r) {\n      return;\n    }\n\n    this.summaryUpdater = r;\n    summaryNode.classList.add(engineCssClass('loading'));\n    r.then((a) => {\n      if (typeof a === 'symbol') {\n        return;\n      }\n      summaryNode.classList.remove(engineCssClass('loading'));\n    });\n  }\n\n  private appendSummary() {\n    const summary = this.ctx.asElement(this.summary.template);\n    summary.classList.add(cssClass('summary'), cssClass('side-panel-summary'), cssClass('renderer'), cssClass(`renderer-${this.column.getSummaryRenderer()}`));\n    summary.dataset.renderer = this.column.getSummaryRenderer();\n    summary.dataset.interactive = isMapAbleColumn(this.column).toString();\n    this.node.appendChild(summary);\n  }\n\n  private recreateSummary() {\n    // remove old summary\n    this.node.removeChild(this.node.querySelector(`.${cssClass('summary')}`)!!);\n\n    this.summary = this.ctx.summaryRenderer(this.column, true);\n    this.appendSummary();\n    this.updateSummary();\n  }\n\n  destroy() {\n    this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), null);\n    this.node.remove();\n  }\n}\n","import {clear, suffix} from '../../internal';\nimport {Ranking, isSupportType} from '../../model';\nimport {aria, cssClass} from '../../styles';\nimport MoreRankingOptionsDialog from '../dialogs/MoreRankingOptionsDialog';\nimport {actionCSSClass} from '../header';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {dialogContext} from '../dialogs';\nimport Hierarchy from './Hierarchy';\nimport {ISidePanelOptions} from './SidePanel';\nimport SidePanelEntryVis from './SidePanelEntryVis';\n\n/** @internal */\nexport default class SidePanelRanking {\n\n  readonly header: HTMLElement;\n  readonly dropdown: HTMLElement;\n  readonly node: HTMLElement;\n\n  private readonly hierarchy: Hierarchy | null;\n  private readonly entries = new Map<string, SidePanelEntryVis>();\n\n  constructor(public readonly ranking: Ranking, private ctx: IRankingHeaderContext, document: Document, private readonly options: Readonly<ISidePanelOptions>) {\n    this.node = document.createElement('section');\n    this.header = document.createElement('div');\n    this.dropdown = document.createElement('div');\n\n    this.node.classList.add(cssClass('side-panel-ranking'));\n    this.header.classList.add(cssClass('side-panel-ranking-header'), cssClass('side-panel-ranking-label'));\n    this.dropdown.classList.add(cssClass('side-panel-ranking-label'));\n\n    this.dropdown.innerHTML = this.header.innerHTML = `<span>${ranking.getLabel()}</span><i class=\"${actionCSSClass('more')}\" title=\"More &hellip;\">${aria('More &hellip;')}</i>`;\n    (<HTMLElement>this.header.lastElementChild!).onclick = (<HTMLElement>this.dropdown.lastElementChild!).onclick = (evt) => {\n      evt.stopPropagation();\n      evt.preventDefault();\n      const dialog = new MoreRankingOptionsDialog(ranking, dialogContext(ctx, 1, <any>evt), ctx);\n      dialog.open();\n    };\n\n    this.hierarchy = this.options.hierarchy ? new Hierarchy(ctx, document) : null;\n\n    this.init();\n  }\n\n  private init() {\n    this.node.innerHTML = `<main class=\"${cssClass('side-panel-ranking-main')}\"></main>`;\n    if (this.hierarchy) {\n      this.node.insertBefore(this.hierarchy.node, this.node.firstChild);\n    }\n\n    if (this.hierarchy) {\n      this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED), () => {\n        this.updateHierarchy();\n      });\n    }\n    this.ranking.on(suffix('.panel', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_MOVE_COLUMN), () => {\n      this.updateList();\n      this.updateHierarchy();\n    });\n    this.ranking.on(suffix('.panel', Ranking.EVENT_LABEL_CHANGED), () => {\n      this.dropdown.firstElementChild!.textContent = this.header.firstElementChild!.textContent = this.ranking.getLabel();\n    });\n  }\n\n  get active() {\n    return this.node.classList.contains(cssClass('active'));\n  }\n\n  set active(value: boolean) {\n    this.node.classList.toggle(cssClass('active'), value);\n    this.header.classList.toggle(cssClass('active'), value);\n    this.dropdown.classList.toggle(cssClass('active'), value);\n    if (value) {\n      return;\n    }\n    this.updateList();\n    this.updateHierarchy();\n  }\n\n  update(ctx: IRankingHeaderContext) {\n    this.ctx = ctx;\n    this.updateList();\n    this.updateHierarchy();\n  }\n\n  private updateHierarchy() {\n    if (!this.hierarchy || !this.active) {\n      return;\n    }\n    this.hierarchy.update(this.ranking);\n  }\n\n  private updateList() {\n    if (!this.active) {\n      return;\n    }\n    const node = this.node.querySelector('main')!;\n    const columns = this.ranking.flatColumns.filter((d) => !isSupportType(d));\n\n    if (columns.length === 0) {\n      clear(node);\n      this.entries.forEach((d) => d.destroy());\n      this.entries.clear();\n      return;\n    }\n\n    clear(node);\n\n    const copy = new Map(this.entries);\n    this.entries.clear();\n\n    columns.forEach((col) => {\n      const existing = copy.get(col.id);\n      if (existing) {\n        existing.update(this.ctx);\n        node.appendChild(existing.node);\n        this.entries.set(col.id, existing);\n        copy.delete(col.id);\n        return;\n      }\n\n      const entry = new SidePanelEntryVis(col, this.ctx, node.ownerDocument!);\n      node.appendChild(entry.node);\n      this.entries.set(col.id, entry);\n    });\n\n    copy.forEach((d) => d.destroy());\n  }\n\n  destroy() {\n    this.header.remove();\n    this.node.remove();\n    this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_LABEL_CHANGED), null);\n\n    this.entries.forEach((d) => d.destroy());\n    this.entries.clear();\n  }\n}\n","import {suffix} from '../../internal';\nimport {categoryOfDesc, IColumnCategory, createAggregateDesc, createGroupDesc, createImpositionDesc, createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc, IColumnDesc, Ranking} from '../../model';\nimport {DataProvider, IDataProvider} from '../../provider';\nimport {aria, cssClass} from '../../styles';\nimport ChooseRankingDialog from '../dialogs/ChooseRankingDialog';\nimport {IRankingHeaderContext} from '../interfaces';\nimport {dialogContext} from '../dialogs';\nimport SearchBox, {IGroupSearchItem, ISearchBoxOptions} from './SearchBox';\nimport SidePanelRanking from './SidePanelRanking';\nimport {format} from 'd3-format';\n\n\nexport interface IColumnWrapper {\n  desc: IColumnDesc;\n  category: IColumnCategory;\n  id: string;\n  text: string;\n}\n\nfunction isWrapper(item: IColumnWrapper | IGroupSearchItem<IColumnWrapper>): item is IColumnWrapper {\n  return (<IColumnWrapper>item).desc != null;\n}\n\nexport interface ISidePanelOptions extends Partial<ISearchBoxOptions<IColumnWrapper>> {\n  additionalDescs: IColumnDesc[];\n  chooser: boolean;\n  hierarchy: boolean;\n  collapseable: boolean | 'collapsed';\n}\n\nexport default class SidePanel {\n\n  private readonly options: ISidePanelOptions = {\n    additionalDescs: [\n      createStackDesc('Weighted Sum'),\n      createScriptDesc('Scripted Formula'),\n      createNestedDesc('Nested'),\n      createReduceDesc(),\n      createImpositionDesc(),\n      createRankDesc(),\n      createSelectionDesc(),\n      createGroupDesc(),\n      createAggregateDesc(),\n    ],\n    chooser: true,\n    hierarchy: true,\n    placeholder: 'Add Column...',\n    formatItem: (item: IColumnWrapper | IGroupSearchItem<IColumnWrapper>, node: HTMLElement) => {\n      const w: IColumnWrapper = isWrapper(item) ? item : (<IColumnWrapper>item.children[0]);\n      node.dataset.typeCat = w.category.name;\n      node.classList.add(cssClass('typed-icon'));\n      if (isWrapper(item)) {\n        node.dataset.type = w.desc.type;\n      }\n      if (node.parentElement) {\n        node.parentElement.classList.add(cssClass('feature-model'));\n        node.parentElement.classList.toggle(cssClass('feature-advanced'), w.category.featureLevel === 'advanced');\n        node.parentElement.classList.toggle(cssClass('feature-basic'), w.category.featureLevel === 'basic');\n      }\n      return item.text;\n    },\n    collapseable: true\n  };\n\n  readonly node: HTMLElement;\n  private readonly search: SearchBox<IColumnWrapper> | null;\n  private chooser: HTMLElement | null = null;\n  private readonly descs: IColumnWrapper[] = [];\n  private data: IDataProvider;\n  private readonly rankings: SidePanelRanking[] = [];\n\n  constructor(private ctx: IRankingHeaderContext, document: Document, options: Partial<ISidePanelOptions> = {}) {\n    Object.assign(this.options, options);\n\n    this.node = document.createElement('aside');\n    this.node.classList.add(cssClass('side-panel'));\n\n    this.search = this.options.chooser ? new SearchBox<IColumnWrapper>(this.options) : null;\n\n    this.data = ctx.provider;\n    this.init();\n    this.update(ctx);\n  }\n\n  private init() {\n    this.node.innerHTML = `\n      <aside class=\"${cssClass('stats')}\"></aside>\n      <header class=\"${cssClass('side-panel-rankings')}\">\n        <i class=\"${cssClass('action')}\" title=\"Choose &hellip;\">${aria('Choose &hellip;')}</i>\n      </header>\n      <main class=\"${cssClass('side-panel-main')}\"></main>\n    `;\n\n    {\n      const choose = <HTMLElement>this.node.querySelector('header > i');\n      choose.onclick = (evt) => {\n        evt.stopPropagation();\n        const dialog = new ChooseRankingDialog(this.rankings.map((d) => d.dropdown), dialogContext(this.ctx, 1, <any>evt));\n        dialog.open();\n      };\n    }\n\n    if (this.options.collapseable) {\n      this.node.insertAdjacentHTML('beforeend', `<div class=\"${cssClass('collapser')}\" title=\"Collapse Panel\">${aria('Collapse Panel')}</div>`);\n      const last = <HTMLElement>this.node.lastElementChild;\n      last.onclick = () => this.collapsed = !this.collapsed;\n      this.collapsed = this.options.collapseable === 'collapsed';\n    }\n    this.initChooser();\n    this.changeDataStorage(null, this.data);\n  }\n\n  private initChooser() {\n    if (!this.search) {\n      return;\n    }\n    this.chooser = this.node.ownerDocument!.createElement('header');\n    this.chooser.appendChild(this.chooser.ownerDocument!.createElement('form'));\n    this.chooser.classList.add(cssClass('side-panel-chooser'));\n    this.chooser.firstElementChild!.appendChild(this.search.node);\n    this.search.on(SearchBox.EVENT_SELECT, (panel: IColumnWrapper) => {\n      const col = this.data.create(panel.desc);\n      if (!col) {\n        return;\n      }\n      const a = this.active;\n      if (a) {\n        a.ranking.push(col);\n      }\n    });\n  }\n\n  private get active() {\n    return this.rankings.find((d) => d.active);\n  }\n\n  private changeDataStorage(old: IDataProvider | null, data: IDataProvider) {\n    if (old) {\n      old.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING,\n        DataProvider.EVENT_ADD_DESC, DataProvider.EVENT_CLEAR_DESC, DataProvider.EVENT_ORDER_CHANGED, DataProvider.EVENT_SELECTION_CHANGED), null);\n    }\n    this.data = data;\n\n    const wrapDesc = (desc: IColumnDesc) => ({\n      desc,\n      category: categoryOfDesc(desc, data.columnTypes),\n      id: `${desc.type}@${desc.label}`,\n      text: desc.label\n    });\n    this.descs.splice(0, this.descs.length, ...data.getColumns().concat(this.options.additionalDescs).map(wrapDesc));\n\n    data.on(`${DataProvider.EVENT_ADD_DESC}.panel`, (desc) => {\n      this.descs.push(wrapDesc(desc));\n      this.updateChooser();\n    });\n\n    data.on(`${DataProvider.EVENT_CLEAR_DESC}.panel`, () => {\n      this.descs.splice(0, this.descs.length);\n      this.updateChooser();\n    });\n\n    data.on(suffix('.panel', DataProvider.EVENT_SELECTION_CHANGED, DataProvider.EVENT_ORDER_CHANGED), () => {\n      this.updateStats();\n    });\n\n    data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING), (ranking: Ranking, index: number) => {\n      this.createEntry(ranking, index);\n      this.makeActive(index);\n    });\n\n    data.on(suffix('.panel', DataProvider.EVENT_REMOVE_RANKING), (_: Ranking, index: number) => {\n      if (index < 0) {\n        // remove all\n        this.rankings.splice(0, this.rankings.length).forEach((d) => d.destroy());\n        this.node.querySelector('header')!.dataset.count = '0';\n        this.makeActive(-1);\n        return;\n      }\n      const r = this.rankings.splice(index, 1)[0];\n      this.node.querySelector('header')!.dataset.count = String(this.rankings.length);\n      r.destroy();\n      if (r.active) {\n        this.makeActive(this.rankings.length === 0 ? -1 : Math.max(index - 1, 0));\n      }\n    });\n\n    this.rankings.splice(0, this.rankings.length).forEach((d) => d.destroy());\n    data.getRankings().forEach((d, i) => {\n      this.createEntry(d, i);\n    });\n    if (this.rankings.length > 0) {\n      this.makeActive(0);\n    }\n\n    this.updateStats();\n  }\n\n  private createEntry(ranking: Ranking, index: number) {\n    const entry = new SidePanelRanking(ranking, this.ctx, this.node.ownerDocument!, this.options);\n\n    const header = this.node.querySelector('header')!;\n    const main = this.node.querySelector('main')!;\n\n    header.insertBefore(entry.header, header.children[index + 1]); // for the action\n    header.dataset.count = String(this.rankings.length + 1);\n\n    entry.header.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this.makeActive(this.rankings.indexOf(entry));\n    };\n    entry.dropdown.onclick = entry.header.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this.ctx.dialogManager.removeAboveLevel(0);\n      this.makeActive(this.rankings.indexOf(entry));\n    };\n\n    main.insertBefore(entry.node, main.children[index]);\n\n    this.rankings.splice(index, 0, entry);\n  }\n\n  get collapsed() {\n    return this.node.classList.contains(cssClass('collapsed'));\n  }\n\n  set collapsed(value: boolean) {\n    this.node.classList.toggle(cssClass('collapsed'), value);\n    if (value) {\n      return;\n    }\n    this.updateChooser();\n    this.updateStats();\n    this.updateRanking();\n  }\n\n  private makeActive(index: number) {\n    this.rankings.forEach((d, i) => d.active = index === i);\n\n    const active = this.active;\n    if (active && this.chooser) {\n      active.node.insertAdjacentElement('afterbegin', this.chooser);\n      // scroll to body\n      const parent = <HTMLElement>this.node.closest(`.${cssClass()}`)!;\n      const body = parent ? parent.querySelector(`article[data-ranking=\"${active.ranking.id}\"]`) : null;\n      if (body) {\n        body.scrollIntoView();\n      }\n    }\n    this.updateRanking();\n  }\n\n  private updateRanking() {\n    const active = this.active;\n    if (active && !this.collapsed) {\n      active.update(this.ctx);\n    }\n  }\n\n  update(ctx: IRankingHeaderContext) {\n    const bak = this.data;\n    this.ctx = ctx;\n    if (ctx.provider !== bak) {\n      this.changeDataStorage(bak, ctx.provider);\n    }\n    this.updateChooser();\n    this.updateStats();\n\n    const active = this.active;\n    if (active) {\n      active.update(ctx);\n    }\n  }\n\n  private updateStats() {\n    if (this.collapsed) {\n      return;\n    }\n    const stats = <HTMLElement>this.node.querySelector(`.${cssClass('stats')}`);\n    const s = this.data.getSelection();\n    const r = this.data.getFirstRanking();\n    const f = format(',d');\n    const visible = r ? r.getGroups().reduce((a, b) => a + b.order.length, 0) : 0;\n    const total = this.data.getTotalNumberOfRows();\n    stats.innerHTML = `Showing <strong>${f(visible)}</strong> of ${f(total)} items${s.length > 0 ? `; <span>${f(s.length)} selected</span>` : ''}${visible < total ? ` <i class=\"${cssClass('action')} ${cssClass('action-filter')} ${cssClass('stats-reset')}\" title=\"Reset filters\"><span>Reset</span></i>` : ''}`;\n\n    const resetButton = stats.querySelector<HTMLElement>(`.${cssClass('stats-reset')}`);\n    if (!resetButton) {\n      return;\n    }\n    resetButton.onclick = (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this.data.clearFilters();\n    };\n  }\n\n  destroy() {\n    this.node.remove();\n    if (!this.data) {\n      return;\n    }\n    this.rankings.forEach((d) => d.destroy());\n    this.rankings.length = 0;\n    this.data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING,\n      DataProvider.EVENT_ADD_DESC), null);\n  }\n\n  private static groupByType(entries: IColumnWrapper[]): {text: string, children: IColumnWrapper[]}[] {\n    const map = new Map<IColumnCategory, IColumnWrapper[]>();\n    entries.forEach((entry) => {\n      if (!map.has(entry.category)) {\n        map.set(entry.category, [entry]);\n      } else {\n        map.get(entry.category)!.push(entry);\n      }\n    });\n    return Array.from(map).map(([key, value]) => {\n      return {\n        text: key.label,\n        order: key.order,\n        children: value.sort((a, b) => a.text.localeCompare(b.text))\n      };\n    }).sort((a, b) => a.order - b.order);\n  }\n\n  private updateChooser() {\n    if (!this.search || this.collapsed) {\n      return;\n    }\n    this.search.data = SidePanel.groupByType(this.descs);\n  }\n}\n","import {ILineUpOptions, defaultOptions} from '../config';\nimport {merge, suffix} from '../internal';\nimport {DataProvider} from '../provider';\nimport {cssClass} from '../styles';\nimport {ALineUp} from './ALineUp';\nimport EngineRenderer from './EngineRenderer';\nimport SidePanel from './panel/SidePanel';\n\nexport default class LineUp extends ALineUp {\n  static readonly EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\n  static readonly EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\n  static readonly EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\n  static readonly EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\n\n  private readonly renderer: EngineRenderer | null;\n  private readonly panel: SidePanel | null;\n\n  private readonly options = defaultOptions();\n\n  constructor(node: HTMLElement, data: DataProvider, options: Partial<ILineUpOptions> = {}) {\n    super(node, data, options && options.ignoreUnsupportedBrowser === true);\n\n    merge(this.options, options);\n\n    if (!this.isBrowserSupported) {\n      this.renderer = null;\n      this.panel = null;\n      return;\n    }\n\n    this.node.classList.add(cssClass());\n\n\n    this.renderer = new EngineRenderer(data, this.node, this.options);\n    if (this.options.sidePanel) {\n      this.panel = new SidePanel(this.renderer.ctx, this.node.ownerDocument!, {\n        collapseable: this.options.sidePanelCollapsed ? 'collapsed' : true,\n        hierarchy: this.options.hierarchyIndicator && this.options.flags.advancedRankingFeatures\n      });\n      this.renderer.pushUpdateAble((ctx) => this.panel!.update(ctx));\n      this.node.insertBefore(this.panel.node, this.node.firstChild);\n    } else {\n      this.panel = null;\n    }\n    this.forward(this.renderer, ...suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED));\n  }\n\n  destroy() {\n    this.node.classList.remove(cssClass());\n    if (this.renderer) {\n      this.renderer.destroy();\n    }\n    if (this.panel) {\n      this.panel.destroy();\n    }\n    super.destroy();\n  }\n\n  update() {\n    if (this.renderer) {\n      this.renderer.update();\n    }\n  }\n\n  setDataProvider(data: DataProvider, dump?: any) {\n    super.setDataProvider(data, dump);\n    if (!this.renderer) {\n      return;\n    }\n    this.renderer.setDataProvider(data);\n    this.update();\n    if (this.panel) {\n      this.panel.update(this.renderer.ctx);\n    }\n  }\n\n  setHighlight(dataIndex: number, scrollIntoView: boolean = true) {\n    return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\n  }\n\n  getHighlight() {\n    return this.renderer ? this.renderer.getHighlight() : -1;\n  }\n\n  protected enableHighlightListening(enable: boolean) {\n    if (this.renderer) {\n      this.renderer.enableHighlightListening(enable);\n    }\n  }\n}\n","import {IGroupData, IGroupItem, isGroup} from '../../model';\nimport {groupEndLevel, ITopNGetter} from '../../provider/internal';\n\nexport interface IRule {\n  apply(data: (IGroupData | IGroupItem)[], availableHeight: number, selection: Set<number>, topNGetter: ITopNGetter): IRuleInstance;\n\n  levelOfDetail(item: IGroupData | IGroupItem, height: number): 'high' | 'low';\n}\n\nexport interface IRuleInstance {\n  item: number | ((item: IGroupItem) => number);\n  group: number | ((group: IGroupData) => number);\n  violation?: string;\n}\n\n\nexport function spaceFillingRule(config: {groupHeight: number, rowHeight: number, groupPadding: number}) {\n  function levelOfDetail(item: IGroupData | IGroupItem, height: number): 'high' | 'low' {\n    const group = isGroup(item);\n    const maxHeight = group ? config.groupHeight : config.rowHeight;\n    if (height >= maxHeight * 0.9) {\n      return 'high';\n    }\n    return 'low';\n  }\n\n  function itemHeight(data: (IGroupData | IGroupItem)[], availableHeight: number, selection: Set<number>, topNGetter: ITopNGetter) {\n    const visibleHeight = availableHeight - config.rowHeight - 5; // some padding for hover\n    const items = <IGroupItem[]>data.filter((d) => !isGroup(d));\n    const groups = data.length - items.length;\n    const selected = items.reduce((a, d) => a + (selection.has(d.dataIndex) ? 1 : 0), 0);\n    const unselected = items.length - selected;\n    const groupSeparators = items.reduce((a, d) => a + groupEndLevel(d, topNGetter), 0);\n\n    if (unselected <= 0) {\n      // doesn't matter since all are selected anyhow\n      return {height: config.rowHeight, violation: ''};\n    }\n    const available = visibleHeight - groups * config.groupHeight - groupSeparators * config.groupPadding - selected * config.rowHeight;\n\n    const height = Math.floor(available / unselected); // round to avoid sub pixel issues\n    if (height < 1) {\n      return {\n        height: 1,\n        violation: `Not possible to fit all rows on the screen. Set filters or aggregate groups to make it fit again.`\n      };\n    }\n    // clamp to max height\n    if (height > config.rowHeight) {\n      return {\n        height: config.rowHeight,\n        violation: ``\n      };\n    }\n    return {height, violation: ''};\n  }\n\n  return <IRule>{\n    apply: (data: (IGroupData | IGroupItem)[], availableHeight: number, selection: Set<number>, topNGetter: ITopNGetter) => {\n\n      const {violation, height} = itemHeight(data, availableHeight, selection, topNGetter);\n\n      const item = (item: IGroupItem) => {\n        if (selection.has(item.dataIndex)) {\n          return config.rowHeight;\n        }\n        return height;\n      };\n      return {item, group: config.groupHeight, violation};\n    },\n    levelOfDetail\n  };\n}\n","import {GridStyleManager} from 'lineupengine';\nimport {ILineUpOptions} from '../../config';\nimport {debounce, AEventDispatcher, IEventListener, suffix} from '../../internal';\nimport {IGroupData, IGroupItem, isGroup, Ranking, IGroup} from '../../model';\nimport {DataProvider} from '../../provider';\nimport {IRenderContext} from '../../renderer';\nimport {IEngineRankingContext} from '../EngineRanking';\nimport EngineRenderer from '../EngineRenderer';\nimport {IRankingHeaderContext, IRankingHeaderContextContainer} from '../interfaces';\nimport {IRule} from './rules';\nimport {ADialog} from '../dialogs';\n\n/**\n * emitted when the highlight changes\n * @asMemberOf TaggleRenderer\n * @param dataIndex the highlghted data index or -1 for none\n * @event\n */\nexport declare function highlightChanged(dataIndex: number): void;\n/**\n * emitted a dialog is opened\n * @asMemberOf TaggleRenderer\n * @param dialog the opened dialog\n * @event\n */\nexport declare function dialogOpened(dialog: ADialog): void;\n/**\n * emitted a dialog is closed\n * @asMemberOf TaggleRenderer\n * @param dialog the closed dialog\n * @param action the action how the dialog was closed\n * @event\n */\nexport declare function dialogClosed(dialog: ADialog, action: 'cancel' | 'confirm'): void;\n\nexport interface ITaggleOptions {\n  violationChanged(rule: IRule, violation: string): void;\n\n  rowPadding: number;\n}\n\nexport default class TaggleRenderer extends AEventDispatcher {\n  static readonly EVENT_HIGHLIGHT_CHANGED = EngineRenderer.EVENT_HIGHLIGHT_CHANGED;\n  static readonly EVENT_DIALOG_OPENED = EngineRenderer.EVENT_DIALOG_OPENED;\n  static readonly EVENT_DIALOG_CLOSED = EngineRenderer.EVENT_DIALOG_CLOSED;\n\n  private isDynamicLeafHeight: boolean = false;\n\n  private rule: IRule | null = null;\n  private levelOfDetail: ((rowIndex: number) => 'high' | 'low') | null = null;\n  private readonly resizeListener = () => debounce(() => this.update(), 100);\n  private readonly renderer: EngineRenderer;\n\n  private readonly options: Readonly<ITaggleOptions> = {\n    violationChanged: () => undefined,\n    rowPadding: 2\n  };\n\n  constructor(public data: DataProvider, parent: HTMLElement, options: (Partial<ITaggleOptions> & Readonly<ILineUpOptions>)) {\n    super();\n    Object.assign(this.options, options);\n\n    this.renderer = new EngineRenderer(data, parent, Object.assign({}, options, {\n      dynamicHeight: (data: (IGroupData | IGroupItem)[], ranking: Ranking) => {\n        const r = this.dynamicHeight(data, ranking);\n        if (r) {\n          return r;\n        }\n        return options.dynamicHeight ? options.dynamicHeight(data, ranking) : null;\n      },\n      levelOfDetail: (rowIndex: number) => this.levelOfDetail ? this.levelOfDetail(rowIndex) : 'high'\n    }));\n\n    this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, () => {\n      if (this.isDynamicLeafHeight) {\n        this.update();\n      }\n    });\n    this.forward(this.renderer, ...suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED));\n\n    window.addEventListener('resize', this.resizeListener, {\n      passive: true\n    });\n  }\n\n  get style(): GridStyleManager {\n    return this.renderer.style;\n  }\n\n  get ctx(): IRankingHeaderContextContainer & IRenderContext & IEngineRankingContext {\n    return this.renderer.ctx;\n  }\n\n  pushUpdateAble(updateAble: (ctx: IRankingHeaderContext) => void) {\n    this.renderer.pushUpdateAble(updateAble);\n  }\n\n  private dynamicHeight(data: (IGroupData | IGroupItem)[], ranking: Ranking) {\n    if (!this.rule) {\n      this.levelOfDetail = null;\n      return null;\n    }\n\n    const availableHeight = this.renderer ? this.renderer.node.querySelector('main')!.clientHeight : 100;\n    const topNGetter = (group: IGroup) => this.data.getTopNAggregated(ranking, group);\n    const instance = this.rule.apply(data, availableHeight, new Set(this.data.getSelection()), topNGetter);\n\n    this.isDynamicLeafHeight = typeof instance.item === 'function';\n\n    this.options.violationChanged(this.rule, instance.violation || '');\n\n    const height = (item: IGroupItem | IGroupData) => {\n      if (isGroup(item)) {\n        return typeof instance.group === 'number' ? instance.group : instance.group(item);\n      }\n      return typeof instance.item === 'number' ? instance.item : instance.item(item);\n    };\n\n    this.levelOfDetail = (rowIndex: number) => {\n      const item = data[rowIndex];\n      return this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\n    };\n\n    // padding is always 0 since included in height\n    // const padding = (item: IGroupData | IGroupItem | null) => {\n    //   if (!item) {\n    //     item = data[0];\n    //   }\n    //   const lod = this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\n    //   return lod === 'high' ? 0 : 0; // always 0 since\n    // };\n\n    return {\n      defaultHeight: typeof instance.item === 'number' ? instance.item : NaN,\n      height,\n      padding: 0\n    };\n  }\n\n  protected createEventList() {\n    return super.createEventList().concat([TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, TaggleRenderer.EVENT_DIALOG_OPENED, TaggleRenderer.EVENT_DIALOG_CLOSED]);\n  }\n\n  on(type: typeof TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\n  on(type: typeof TaggleRenderer.EVENT_DIALOG_OPENED, listener: typeof dialogOpened | null): this;\n  on(type: typeof TaggleRenderer.EVENT_DIALOG_CLOSED, listener: typeof dialogClosed | null): this;\n  on(type: string | string[], listener: IEventListener | null): this; // required for correct typings in *.d.ts\n  on(type: string | string[], listener: IEventListener | null): this {\n    return super.on(type, listener);\n  }\n\n\n  zoomOut() {\n    this.renderer.zoomOut();\n  }\n\n  zoomIn() {\n    this.renderer.zoomIn();\n  }\n\n  switchRule(rule: IRule | null) {\n    if (this.rule === rule) {\n      return;\n    }\n    this.rule = rule;\n    this.update();\n  }\n\n  destroy() {\n    this.renderer.destroy();\n    window.removeEventListener('resize', this.resizeListener);\n  }\n\n  update() {\n    this.renderer.update();\n  }\n\n  setDataProvider(data: DataProvider) {\n    if (this.data) {\n      this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, null);\n    }\n    this.data = data;\n    this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, () => {\n      if (this.isDynamicLeafHeight) {\n        this.update();\n      }\n    });\n    this.renderer.setDataProvider(data);\n    this.update();\n  }\n\n  setHighlight(dataIndex: number, scrollIntoView: boolean) {\n    return this.renderer.setHighlight(dataIndex, scrollIntoView);\n  }\n\n  getHighlight() {\n    return this.renderer.getHighlight();\n  }\n\n  enableHighlightListening(enable: boolean) {\n    this.renderer.enableHighlightListening(enable);\n  }\n}\n","import {GridStyleManager} from 'lineupengine';\nimport {defaultOptions} from '../../config';\nimport {ITaggleOptions} from '../../config';\nimport {merge, suffix} from '../../internal';\nimport {DataProvider} from '../../provider';\nimport {cssClass, engineCssClass} from '../../styles';\nimport {ALineUp} from '../ALineUp';\nimport SidePanel from '../panel/SidePanel';\nimport {spaceFillingRule} from './rules';\nimport TaggleRenderer from './TaggleRenderer';\n\nexport default class Taggle extends ALineUp {\n  static readonly EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\n  static readonly EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\n  static readonly EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\n  static readonly EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\n\n  private readonly spaceFilling: HTMLElement | null;\n  private readonly renderer: TaggleRenderer | null;\n  private readonly panel: SidePanel | null;\n\n  private readonly options = defaultOptions();\n\n\n  constructor(node: HTMLElement, data: DataProvider, options: Partial<ITaggleOptions> = {}) {\n    super(node, data, options && options.ignoreUnsupportedBrowser === true);\n    merge(this.options, options);\n    merge(this.options, {\n      violationChanged: (_rule: any, violation?: string) => this.setViolation(violation)\n    });\n\n    if (!this.isBrowserSupported) {\n      this.spaceFilling = null;\n      this.renderer = null;\n      this.panel = null;\n      return;\n    }\n\n    this.node.classList.add(cssClass(), cssClass('taggle'));\n\n    this.renderer = new TaggleRenderer(data, this.node, this.options);\n    this.panel = new SidePanel(this.renderer.ctx, this.node.ownerDocument!, {\n      collapseable: this.options.sidePanelCollapsed ? 'collapsed' : true,\n      hierarchy: this.options.hierarchyIndicator && this.options.flags.advancedRankingFeatures\n    });\n    this.renderer.pushUpdateAble((ctx) => this.panel!.update(ctx));\n    this.node.insertBefore(this.panel.node, this.node.firstChild);\n    {\n      this.panel.node.insertAdjacentHTML('afterbegin', `<div class=\"${cssClass('rule-button-chooser')} ${cssClass('feature-advanced')} ${cssClass('feature-ui')}\"><label>\n            <input type=\"checkbox\">\n            <span>Overview</span>\n            <div class=\"${cssClass('rule-violation')}\"></div>\n          </label></div>`);\n      const spaceFilling = spaceFillingRule(this.options);\n      this.spaceFilling = <HTMLElement>this.panel.node.querySelector(`.${cssClass('rule-button-chooser')}`)!;\n      const input = <HTMLInputElement>this.spaceFilling.querySelector('input');\n      input.onchange = () => {\n        const selected = this.spaceFilling!.classList.toggle(cssClass('chosen'));\n        self.setTimeout(() => {\n          this.updateLodRules(selected);\n          this.renderer!.switchRule(selected ? spaceFilling : null);\n        });\n      };\n      if (this.options.overviewMode) {\n        input.checked = true;\n        this.spaceFilling.classList.toggle(cssClass('chosen'));\n        this.updateLodRules(true);\n        this.renderer.switchRule(spaceFilling);\n      }\n    }\n    this.forward(this.renderer, ...suffix('.main', TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, TaggleRenderer.EVENT_DIALOG_OPENED, TaggleRenderer.EVENT_DIALOG_CLOSED));\n  }\n\n  private updateLodRules(overviewMode: boolean) {\n    if (!this.renderer) {\n      return;\n    }\n    updateLodRules(this.renderer.style, overviewMode, this.options);\n  }\n\n  private setViolation(violation?: string) {\n    violation = violation || '';\n    if (this.spaceFilling) {\n      this.spaceFilling.classList.toggle(cssClass('violated'), Boolean(violation));\n      this.spaceFilling.querySelector(`.${cssClass('rule-violation')}`)!.innerHTML = violation.replace(/\\n/g, '<br>');\n    }\n  }\n\n  destroy() {\n    this.node.classList.remove(cssClass(), cssClass('taggle'));\n    if (this.renderer) {\n      this.renderer.destroy();\n    }\n    if (this.panel) {\n      this.panel.destroy();\n    }\n    super.destroy();\n  }\n\n  update() {\n    if (this.renderer) {\n      this.renderer.update();\n    }\n  }\n\n  setHighlight(dataIndex: number, scrollIntoView: boolean = true) {\n    return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\n  }\n\n  getHighlight() {\n    return this.renderer ? this.renderer.getHighlight() : -1;\n  }\n\n  protected enableHighlightListening(enable: boolean) {\n    if (this.renderer) {\n      this.renderer.enableHighlightListening(enable);\n    }\n  }\n\n  setDataProvider(data: DataProvider, dump?: any) {\n    super.setDataProvider(data, dump);\n    if (!this.renderer) {\n      return;\n    }\n    this.renderer.setDataProvider(data);\n    this.update();\n    this.panel!.update(this.renderer.ctx);\n  }\n}\n\nexport function updateLodRules(style: GridStyleManager, overviewMode: boolean, options: Readonly<ITaggleOptions>) {\n  if (!overviewMode) {\n    style.deleteRule('taggle_lod_rule');\n    style.deleteRule('lineup_rowPadding1');\n    style.deleteRule('lineup_rowPadding2');\n    return;\n  }\n\n  style.updateRule('taggle_lod_rule', `\n  .${engineCssClass('tr')}.${cssClass('low')}[data-agg=detail]:hover`, {\n    /* show regular height for hovered rows in low + medium LOD */\n    height: `${options.rowHeight}px !important`\n  });\n\n  style.updateRule('lineup_rowPadding1', `\n  .${engineCssClass('tr')}.${cssClass('low')}`, {\n      marginTop: '0'\n    });\n\n  // no margin for hovered low level row otherwise everything will be shifted down and the hover is gone again\n  // .${engineCssClass('tr')}.${cssClass('low')}:hover,\n\n  // padding in general and for hovered low detail rows + their afterwards\n  style.updateRule('lineup_rowPadding2', `\n  .${engineCssClass('tr')}.${cssClass('low')}.${engineCssClass('highlighted')},\n  .${engineCssClass('tr')}.${cssClass('selected')},\n  .${engineCssClass('tr')}.${cssClass('low')}:hover + .${engineCssClass('tr')}.${cssClass('low')},\n  .${engineCssClass('tr')}.${cssClass('low')}.${engineCssClass('highlighted')} + .${engineCssClass('tr')}.${cssClass('low')},\n  .${engineCssClass('tr')}.${cssClass('selected')} + .${engineCssClass('tr')}.${cssClass('low')}`, {\n      marginTop: `${options.rowPadding}px !important`\n    });\n}\n","import {IArrayDesc, IColumnDesc} from '../../model';\n\nexport default class ColumnBuilder<T extends IColumnDesc = IColumnDesc> {\n  protected readonly desc: T;\n\n  constructor(type: string, column: string) {\n    this.desc = <any>{column, type, label: column ? column[0].toUpperCase() + column.slice(1): type};\n  }\n\n  /**\n   * column label\n   */\n  label(label: string) {\n    this.desc.label = label;\n    return this;\n  }\n\n  /**\n   * column summary text (subtitle)\n   */\n  summary(summary: string) {\n    this.desc.summary = summary;\n    return this;\n  }\n\n  /**\n   * column description\n   */\n  description(description: string) {\n    this.desc.description = description;\n    return this;\n  }\n\n  /**\n   * sets the frozen state of this column, i.e is sticky to the left side when scrolling horizontally\n   */\n  frozen() {\n    this.desc.frozen = true;\n    return this;\n  }\n\n  /**\n   * specify the renderer to used for this column\n   * @param {string} renderer within a cell\n   * @param {string} groupRenderer within an aggregated cell\n   * @param {string} summaryRenderer within the summary in the header and side panel\n   */\n  renderer(renderer?: string, groupRenderer?: string, summaryRenderer?: string) {\n    if (renderer) {\n      this.desc.renderer = renderer;\n    }\n    if (groupRenderer) {\n      this.desc.groupRenderer = groupRenderer;\n    }\n    if (summaryRenderer) {\n      this.desc.summaryRenderer = summaryRenderer;\n    }\n    return this;\n  }\n\n  /**\n   * specify a custom additional attribute for the description\n   * @param {string} key the property key\n   * @param value its value\n   */\n  custom(key: string, value: any) {\n    (<any>this.desc)[key] = value;\n    return this;\n  }\n\n  /**\n   * sets the default width of the column\n   */\n  width(width: number) {\n    this.desc.width = width;\n    return this;\n  }\n\n  /**\n   * sets the column color in case of numerical columns\n   * @deprecated use colorMapping in the number case instead\n   */\n  color(_color: string) {\n    return this;\n  }\n\n  /**\n   * converts the column type to be an array type, supports only base types: boolean, categorical, date, number, and string\n   * @param {string[] | number} labels labels to use for each array item or the expected length of an value\n   */\n  asArray(labels?: string[] | number) {\n    console.assert(['boolean', 'categorical', 'date', 'number', 'string', 'link'].includes(this.desc.type!));\n    this.desc.type += 's';\n    const a = <IArrayDesc>this.desc;\n    if (Array.isArray(labels)) {\n      a.labels = labels;\n      a.dataLength = labels.length;\n    } else if (typeof labels === 'number') {\n      a.dataLength = labels;\n    }\n    return this;\n  }\n\n  /**\n   * converts the column type to be a map type, supports only base types: categorical, date, number, and string\n   */\n  asMap() {\n    console.assert(['categorical', 'date', 'number', 'string', 'link'].includes(this.desc.type!));\n    this.desc.type += 'Map';\n    return this;\n  }\n\n  /**\n   * build the column description\n   */\n  build(_data: any[]): T {\n    return <any>this.desc;\n  }\n}\n\n/**\n * build a column of a given type\n * @param {string} type column type\n * @param {string} column column which contains the associated data\n * @returns {ColumnBuilder<IColumnDesc>}\n */\nexport function buildColumn(type: string, column: string) {\n  return new ColumnBuilder(type, column);\n}\n","import {IDynamicHeight, ITaggleOptions, ILivePreviewOptions} from '../config';\nimport Column, {IGroupData, IGroupItem, Ranking} from '../model';\nimport {ICellRendererFactory, ERenderMode} from '../renderer';\nimport {IToolbarAction, IToolbarDialogAddon} from '../ui';\n\n/**\n * builder for LineUp/Taggle instance\n */\nexport default class LineUpBuilder {\n  protected readonly options: Partial<ITaggleOptions> = {\n    renderers: {},\n    toolbarActions: {},\n    toolbarDialogAddons: {},\n    flags: {}\n  };\n\n  /**\n   * option to enable/disable animated transitions\n   * @default true\n   */\n  animated(enable: boolean) {\n    this.options.animated = enable;\n    return this;\n  }\n\n  livePreviews(options: Partial<ILivePreviewOptions>) {\n    this.options.livePreviews = options;\n    return this;\n  }\n\n  /**\n   * option to rotate labels on demand in narrow columns\n   * @param rotation rotation in degrees\n   * @default 0 - disabled\n   */\n  labelRotation(rotation: number) {\n    this.options.labelRotation = rotation;\n    return this;\n  }\n\n  /**\n   * option to enable/disable the side panel\n   * @param {boolean} enable enable flag\n   * @param {boolean} collapsed whether collapsed by default\n   */\n  sidePanel(enable: boolean, collapsed: boolean = false) {\n    this.options.sidePanel = enable;\n    this.options.sidePanelCollapsed = collapsed;\n    return this;\n  }\n\n  /**\n   * show the sorting and grouping hierarchy indicator in the side panel\n   * @param {boolean} enable enable flag\n   */\n  hierarchyIndicator(enable: boolean) {\n    this.options.hierarchyIndicator = enable;\n    return this;\n  }\n\n  /**\n   * option to specify the default slope graph mode\n   * @default 'item'\n   */\n  defaultSlopeGraphMode(mode: 'item' | 'band') {\n    this.options.defaultSlopeGraphMode = mode;\n    return this;\n  }\n\n  /**\n   * option to enable/disable showing a summary (histogram, ...) in the header\n   * @default true\n   */\n  summaryHeader(enable: boolean) {\n    this.options.summaryHeader = enable;\n    return this;\n  }\n\n  /**\n   * option to enforce that the whole row is shown upon hover without overflow hidden\n   * @default false\n   */\n  expandLineOnHover(enable: boolean) {\n    this.options.expandLineOnHover = enable;\n    return this;\n  }\n\n  /**\n   * option to enable overview mode by default, just valid when building a Taggle instance\n   * @returns {this}\n   */\n  overviewMode() {\n    this.options.overviewMode = true;\n    return this;\n  }\n\n  /**\n   * option to ignore unsupported browser check - at own risk\n   * @returns {this}\n   */\n  ignoreUnsupportedBrowser() {\n    this.options.ignoreUnsupportedBrowser = true;\n    return this;\n  }\n\n  /**\n   * register a new renderer factory function\n   * @param id the rederer id\n   * @param factory factory class implementing the renderer\n   */\n  registerRenderer(id: string, factory: ICellRendererFactory) {\n    this.options.renderers![id] = factory;\n    return this;\n  }\n\n  /**\n   * custom function whether the given renderer should be allowed to render the give colum in the given mode\n   */\n  canRender(canRender: (type: string, renderer: ICellRendererFactory, col: Column, mode: ERenderMode) => boolean) {\n    this.options.canRender = canRender;\n    return this;\n  }\n\n  /**\n   * register another toolbar action which can be used within a model class\n   * @param id toolbar id\n   * @param action\n   */\n  registerToolbarAction(id: string, action: IToolbarAction) {\n    this.options.toolbarActions![id] = action;\n    return this;\n  }\n\n  /**\n   * register another toolbar action which can be sued within a model class\n   * @param id  dialog id\n   * @param addon addon description\n   */\n  registerToolbarDialogAddon(id: string, addon: IToolbarDialogAddon) {\n    this.options.toolbarDialogAddons![id] = addon;\n    return this;\n  }\n\n  /**\n   * height and padding of a row\n   * @default 18 and 2\n   */\n  rowHeight(rowHeight: number, rowPadding: number = 2) {\n    this.options.rowHeight = rowHeight;\n    this.options.rowPadding = rowPadding;\n    return this;\n  }\n\n  /**\n   * height and padding of an aggregated group in pixel\n   * @default 40 and 5\n   */\n  groupRowHeight(groupHeight: number, groupPadding: number = 5) {\n    this.options.groupHeight = groupHeight;\n    this.options.groupPadding = groupPadding;\n    return this;\n  }\n\n  /**\n   * custom function to compute the height of a row (group or item)\n   * @param {(data: (IGroupItem | IGroupData)[], ranking: Ranking) => (IDynamicHeight | null)} callback\n   */\n  dynamicHeight(callback: (data: (IGroupItem | IGroupData)[], ranking: Ranking) => (IDynamicHeight | null)) {\n    this.options.dynamicHeight = callback;\n    return this;\n  }\n\n  /**\n   * disables advanced ranking features (sort by, group by, sorting hierarchy, ...)\n   */\n  disableAdvancedRankingFeatures() {\n    this.options.flags!.advancedRankingFeatures = false;\n    return this;\n  }\n\n  /**\n   * disables advanced model features (add combine column, data mapping, edit pattern, ...)\n   */\n  disableAdvancedModelFeatures() {\n    this.options.flags!.advancedModelFeatures = false;\n    return this;\n  }\n\n  /**\n   * disables advanced ui features (change visualization, color mapping)\n   */\n  disableAdvancedUIFeatures() {\n    this.options.flags!.advancedUIFeatures = false;\n    return this;\n  }\n}\n","import {\n  Column, CompositeColumn, Ranking, ReduceColumn, StackColumn,\n  createAggregateDesc, createGroupDesc, createImpositionBoxPlotDesc, createImpositionDesc, createImpositionsDesc,\n  createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc,\n  EAdvancedSortMethod, IColumnDesc, ISortCriteria\n} from '../model';\nimport {DataProvider} from '../provider';\n\nexport interface IImposeColumnBuilder {\n  type: 'impose';\n  column: string;\n  label?: string;\n  colorColumn: string;\n}\n\nexport interface INestedBuilder {\n  type: 'nested';\n  label?: string;\n  columns: string[];\n}\n\nexport interface IWeightedSumBuilder {\n  type: 'weightedSum';\n  columns: string[];\n  label?: string;\n  weights: number[];\n}\n\nexport interface IReduceBuilder {\n  type: 'min' | 'max' | 'mean' | 'median';\n  columns: string[];\n  label?: string;\n}\n\nexport interface IScriptedBuilder {\n  type: 'script';\n  code: string;\n  columns: string[];\n  label?: string;\n}\n\n/**\n * builder for a ranking\n */\nexport class RankingBuilder {\n  private static readonly ALL_MAGIC_FLAG = '*';\n\n  private readonly columns: (string | {desc: IColumnDesc | ((data: DataProvider) => IColumnDesc), columns: string[], post?: (col: Column) => void })[] = [];\n  private readonly sort: {column: string, asc: boolean}[] = [];\n  private readonly groupSort: {column: string, asc: boolean}[] = [];\n  private readonly groups: string[] = [];\n\n  /**\n   * specify another sorting criteria\n   * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\n   * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\n   */\n  sortBy(column: string, asc: boolean | 'asc' | 'desc' = true) {\n    if (column.includes(':')) {\n      // encoded sorting order\n      const index = column.indexOf(':');\n      asc = <'asc' | 'desc'>column.slice(index + 1);\n      column = column.slice(0, index);\n    }\n    this.sort.push({column, asc: asc === true || String(asc)[0] === 'a'});\n    return this;\n  }\n\n  /**\n   * specify grouping criteria\n   * @returns {this}\n   */\n  groupBy(...columns: (string | string[])[]) {\n    for (const col of columns) {\n      if (Array.isArray(col)) {\n        this.groups.push(...col);\n      } else {\n        this.groups.push(col);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * specify another grouping sorting criteria\n   * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\n   * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\n   */\n  groupSortBy(column: string, asc: boolean | 'asc' | 'desc' = true) {\n    if (column.includes(':')) {\n      // encoded sorting order\n      const index = column.indexOf(':');\n      asc = <'asc' | 'desc'>column.slice(index + 1);\n      column = column.slice(0, index);\n    }\n    this.groupSort.push({column, asc: asc === true || String(asc)[0] === 'a'});\n    return this;\n  }\n\n  /**\n   * add another column to this ranking, identified by column name or label. magic names are used for special columns:\n   * <ul>\n   *     <li>'*' = all columns</li>\n   *     <li>'_*' = all support columns</li>\n   *     <li>'_aggregate' = aggregate column</li>\n   *     <li>'_selection' = selection column</li>\n   *     <li>'_group' = group column</li>\n   *     <li>'_rank' = rank column</li>\n   * </ul>\n   * In addition build objects for combined columns are supported.\n   * @param {string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder} column\n   */\n  column(column: string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder) {\n    if (typeof column === 'string') {\n      switch (column) {\n        case '_aggregate':\n          return this.aggregate();\n        case '_selection':\n          return this.selection();\n        case '_group':\n          return this.group();\n        case '_rank':\n          return this.rank();\n        case '_*':\n          return this.supportTypes();\n        case '*':\n          return this.allColumns();\n      }\n      this.columns.push(column);\n      return this;\n    }\n    const label = column.label || null;\n    // builder ish\n    switch (column.type) {\n      case 'impose':\n        return this.impose(label, column.column, column.colorColumn);\n      case 'min':\n      case 'max':\n      case 'median':\n      case 'mean':\n        console.assert(column.columns.length >= 2);\n        return this.reduce(label, <any>column.type, column.columns[0], column.columns[1], ...column.columns.slice(2));\n      case 'nested':\n        console.assert(column.columns.length >= 1);\n        return this.nested(label, column.columns[0], ... column.columns.slice(1));\n      case 'script':\n        return this.scripted(label, column.code, ...column.columns);\n      case 'weightedSum':\n        console.assert(column.columns.length >= 2);\n        console.assert(column.columns.length === column.weights.length);\n        const mixed: (string | number)[] = [];\n        column.columns.slice(2).forEach((c, i) => {\n          mixed.push(c);\n          mixed.push(column.weights[i + 2]);\n        });\n        return this.weightedSum(label, column.columns[0], column.weights[0], column.columns[1], column.weights[1], ...mixed);\n    }\n    console.error('invalid column type: ', column);\n    return this;\n  }\n\n  /**\n   * add an imposed column (numerical column colored by categorical column) to this ranking\n   * @param {string | null} label optional label\n   * @param {string} numberColumn numerical column reference\n   * @param {string} colorColumn categorical column reference\n   */\n  impose(label: string | null, numberColumn: string, colorColumn: string) {\n    this.columns.push({\n      desc: (data) => {\n        const base = data.getColumns().find((d) => d.label === numberColumn || (<any>d).column === numberColumn);\n        switch (base ? base.type : '') {\n          case 'boxplot':\n            return createImpositionBoxPlotDesc(label ? label : undefined);\n          case 'numbers':\n            return createImpositionsDesc(label ? label : undefined);\n          default:\n            return createImpositionDesc(label ? label : undefined);\n        }\n      },\n      columns: [numberColumn, colorColumn]\n    });\n    return this;\n  }\n\n  /**\n   * add a nested / group composite column\n   * @param {string | null} label optional label\n   * @param {string} column first element of the group enforcing not empty ones\n   * @param {string} columns additional columns\n   */\n  nested(label: string | null, column: string, ...columns: string[]) {\n    this.columns.push({\n      desc: createNestedDesc(label ? label : undefined),\n      columns: [column].concat(columns)\n    });\n    return this;\n  }\n\n  /**\n   * @param {IColumnDesc} desc the composite column description\n   * @param {string} columns additional columns to add as children\n   */\n  composite(desc: IColumnDesc, ...columns: string[]) {\n    this.columns.push({\n      desc,\n      columns\n    });\n    return this;\n  }\n\n  /**\n   * add a weighted sum / stack column\n   * @param {string | null} label optional label\n   * @param {string} numberColumn1 the first numerical column\n   * @param {number} weight1 its weight (0..1)\n   * @param {string} numberColumn2 the second numerical column\n   * @param {number} weight2 its weight (0..1)\n   * @param {string | number} numberColumnAndWeights alternating column weight references\n   */\n  weightedSum(label: string | null, numberColumn1: string, weight1: number, numberColumn2: string, weight2: number, ...numberColumnAndWeights: (string | number)[]) {\n    const weights = [weight1, weight2].concat(<number[]>numberColumnAndWeights.filter((_, i) => i % 2 === 1));\n    this.columns.push({\n      desc: createStackDesc(label ? label : undefined),\n      columns: [numberColumn1, numberColumn2].concat(<string[]>numberColumnAndWeights.filter((_, i) => i % 2 === 0)),\n      post: (col) => {\n        (<StackColumn>col).setWeights(weights);\n      }\n    });\n    return this;\n  }\n\n  /**\n   * add reducing column (min, max, median, mean, ...)\n   * @param {string | null} label optional label\n   * @param {EAdvancedSortMethod} operation operation to apply (min, max, median, mean, ...)\n   * @param {string} numberColumn1 first numerical column\n   * @param {string} numberColumn2 second numerical column\n   * @param {string} numberColumns additional numerical columns\n   */\n  reduce(label: string | null, operation: EAdvancedSortMethod, numberColumn1: string, numberColumn2: string, ...numberColumns: string[]) {\n    this.columns.push({\n      desc: createReduceDesc(label ? label : undefined),\n      columns: [numberColumn1, numberColumn2].concat(numberColumns),\n      post: (col) => {\n        (<ReduceColumn>col).setReduce(operation);\n      }\n    });\n    return this;\n  }\n\n  /**\n   * add a scripted / formula column\n   * @param {string | null} label optional label\n   * @param {string} code the JS code see ScriptColumn for details\n   * @param {string} numberColumns additional script columns\n   */\n  scripted(label: string | null, code: string, ...numberColumns: string[]) {\n    this.columns.push({\n      desc: Object.assign(createScriptDesc(label ? label : undefined), {script: code}),\n      columns: numberColumns\n    });\n    return this;\n  }\n\n  /**\n   * add a selection column for easier multi selections\n   */\n  selection() {\n    this.columns.push({\n      desc: createSelectionDesc(),\n      columns: []\n    });\n    return this;\n  }\n\n  /**\n   * add a group column to show the current group name\n   */\n  group() {\n    this.columns.push({\n      desc: createGroupDesc(),\n      columns: []\n    });\n    return this;\n  }\n\n  /**\n   * add an aggregate column to this ranking to collapse/expand groups\n   */\n  aggregate() {\n    this.columns.push({\n      desc: createAggregateDesc(),\n      columns: []\n    });\n    return this;\n  }\n\n  /**\n   * add a ranking column\n   */\n  rank() {\n    this.columns.push({\n      desc: createRankDesc(),\n      columns: []\n    });\n    return this;\n  }\n\n  /**\n   * add suporttypes (aggregate, rank, selection) to the ranking\n   */\n  supportTypes() {\n    return this.aggregate().rank().selection();\n  }\n\n  /**\n   * add all columns to this ranking\n   */\n  allColumns() {\n    this.columns.push(RankingBuilder.ALL_MAGIC_FLAG);\n    return this;\n  }\n\n  build(data: DataProvider): Ranking {\n    const r = data.pushRanking();\n    const cols = data.getColumns();\n\n    const findDesc = (c: string) => cols.find((d) => d.label === c || (<any>d).column === c);\n\n    const addColumn = (c: string) => {\n      const desc = findDesc(c);\n      if (desc) {\n        return data.push(r, desc) != null;\n      }\n      console.warn('invalid column: ', c);\n      return false;\n    };\n\n    this.columns.forEach((c) => {\n      if (c === RankingBuilder.ALL_MAGIC_FLAG) {\n        cols.forEach((col) => data.push(r, col));\n        return;\n      }\n      if (typeof c === 'string') {\n        addColumn(c);\n        return;\n      }\n      const col = data.create(typeof c.desc === 'function' ? c.desc(data) : c.desc)!;\n      r.push(col);\n      c.columns.forEach((ci) => {\n        const d = findDesc(ci);\n        const child = d ? data.create(d) : null;\n        if (!child) {\n          console.warn('invalid column: ', ci);\n          return;\n        }\n        (<CompositeColumn>col).push(child);\n      });\n      if (c.post) {\n        c.post(col);\n      }\n    });\n\n    const children = r.children;\n    {\n      const groups: Column[] = [];\n      this.groups.forEach((column) => {\n        const col = children.find((d) => d.desc.label === column || (<any>d).desc.column === column);\n        if (col) {\n          groups.push(col);\n          return;\n        }\n        const desc = findDesc(column);\n        if (!desc) {\n          console.warn('invalid group criteria column: ', column);\n          return;\n        }\n        const col2 = data.push(r, desc);\n        if (col2) {\n          groups.push(col2);\n          return;\n        }\n        console.warn('invalid group criteria column: ', column);\n      });\n      if (groups.length > 0) {\n        r.setGroupCriteria(groups);\n      }\n    }\n    {\n      const sorts: ISortCriteria[] = [];\n      this.sort.forEach(({column, asc}) => {\n        const col = children.find((d) => d.desc.label === column || (<any>d).desc.column === column);\n        if (col) {\n          sorts.push({col, asc});\n          return;\n        }\n        const desc = findDesc(column);\n        if (!desc) {\n          console.warn('invalid sort criteria column: ', column);\n          return;\n        }\n        const col2 = data.push(r, desc);\n        if (col2) {\n          sorts.push({col: col2, asc});\n          return;\n        }\n        console.warn('invalid sort criteria column: ', column);\n      });\n      if (sorts.length > 0) {\n        r.setSortCriteria(sorts);\n      }\n    }\n    {\n      const sorts: ISortCriteria[] = [];\n      this.groupSort.forEach(({column, asc}) => {\n        const col = children.find((d) => d.desc.label === column || (<any>d).desc.column === column);\n        if (col) {\n          sorts.push({col, asc});\n          return;\n        }\n        const desc = findDesc(column);\n        if (!desc) {\n          console.warn('invalid group sort criteria column: ', column);\n          return;\n        }\n        const col2 = data.push(r, desc);\n        if (col2) {\n          sorts.push({col: col2, asc});\n          return;\n        }\n        console.warn('invalid group sort criteria column: ', column);\n      });\n      if (sorts.length > 0) {\n        r.setGroupSortCriteria(sorts);\n      }\n    }\n    return r;\n  }\n}\n\n/**\n * creates a new instance of a ranking builder\n * @returns {RankingBuilder}\n */\nexport function buildRanking() {\n  return new RankingBuilder();\n}\n","import {ICategoricalColumnDesc, ICategory} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\nimport {cleanCategories} from '../../provider/utils';\nimport {resolveValue} from '../../internal';\n\nexport default class CategoricalColumnBuilder extends ColumnBuilder<ICategoricalColumnDesc> {\n\n  constructor(column: string) {\n    super('categorical', column);\n  }\n\n  /**\n   * converts this type to an ordinal column type, such that categories are mapped to numbers\n   */\n  asOrdinal() {\n    this.desc.type = 'ordinal';\n    return this;\n  }\n\n  /**\n   * specify the categories of this categorical column\n   * @param {(string | Partial<ICategory>)[]} categories\n   */\n  categories(categories: (string | Partial<ICategory>)[]) {\n    this.desc.categories = categories;\n    return this;\n  }\n\n  /**\n   * converts this type to a set column, i.e. multiple unique category in a value\n   * @param {string} separator optional separator separating a string value\n   */\n  asSet(separator?: string) {\n    if (separator) {\n      (<any>this.desc).separator = separator;\n    }\n    this.desc.type = 'set';\n    return this;\n  }\n\n  private derive(data: any[]) {\n    // derive categories\n    const categories = new Set<string>();\n    const isSet = this.desc.type === 'set';\n    const separator = (<any>this.desc).separator || ';';\n    const val = (vi: any) => {\n      if (typeof vi === 'string' && vi !== '') {\n        return vi;\n      }\n      if (vi != null && typeof vi.value === 'string' && vi.value !== '') {\n        return vi.value;\n      }\n      return null;\n    };\n    const col = (<any>this.desc).column;\n    data.forEach((d) => {\n      const v = resolveValue(d, col);\n      if (Array.isArray(v)) {\n        v.forEach((vi) => categories.add(val(vi)));\n      } else if (v != null && v !== '') {\n        const vs: string[] = isSet ? [v.toString()] : v.toString().split(separator);\n        vs.forEach((vi) => categories.add(val(vi)));\n      }\n    });\n    this.categories(cleanCategories(categories));\n  }\n\n  build(data: any[]): ICategoricalColumnDesc {\n    if (!this.desc.categories) {\n      this.derive(data);\n    }\n    return super.build(data);\n  }\n}\n\n/**\n * build a categorical column type\n * @param {string} column column which contains the associated data\n * @param {(string | Partial<ICategory>)[]} categories optional category definition\n * @returns {CategoricalColumnBuilder}\n */\nexport function buildCategoricalColumn(column: string, categories?: (string | Partial<ICategory>)[]) {\n  const r = new CategoricalColumnBuilder(column);\n  if (categories) {\n    r.categories(categories);\n  }\n  return r;\n}\n","import {min, max, resolveValue} from '../../internal';\nimport {EAdvancedSortMethod, ESortMethod, INumberColumnDesc, ITypedDump} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\nimport {IScriptMappingFunctionType} from '../../model/MappingFunction';\n\nexport default class NumberColumnBuilder extends ColumnBuilder<INumberColumnDesc> {\n\n  constructor(column: string) {\n    super('number', column);\n  }\n\n  /**\n   * defines the mapping for this number column to normalize the data\n   * @param {\"linear\" | \"sqrt\" | \"pow1.1\" | \"pow2\" | \"pow3\"} type mapping type\n   * @param {[number , number]} domain input data domain [min, max]\n   * @param {[number , number]} range optional output domain [0, 1]\n   */\n  mapping(type: 'linear' | 'sqrt' | 'pow1.1' | 'pow2' | 'pow3', domain: [number, number], range?: [number, number]) {\n    if (type === 'linear') {\n      this.desc.domain = domain;\n      if (range) {\n        this.desc.range = range;\n      }\n      return this;\n    }\n    this.desc.map = {\n      type, domain, range: range || [0, 1]\n    };\n    return this;\n  }\n\n  /**\n   * sets the column color in case of numerical columns\n   * @deprecated use colorMapping instead\n   */\n  color(color: string) {\n    return this.colorMapping(color);\n  }\n\n  colorMapping(type: string | ((v: number)=>string) | ITypedDump) {\n    this.desc.colorMapping = type;\n    return this;\n  }\n\n  /**\n   * d3-format to use for formatting\n   * @param format d3-format\n   */\n  numberFormat(format: string) {\n    this.desc.numberFormat = format;\n    return this;\n  }\n\n  /**\n   * defines a script to normalize the data, see ScriptedMappingFunction for details\n   * @param {string} code the code to execute\n   * @param {[number , number]} domain the input data domain [min, max]\n   */\n  scripted(code: string | IScriptMappingFunctionType, domain: [number, number]) {\n    this.desc.map = {domain, code, type: 'script'};\n    return this;\n  }\n\n\n  /**\n   * @inheritDoc\n   * @param {string[] | number} labels labels to use for each array item or the expected length of an value\n   * @param {EAdvancedSortMethod} sort sorting criteria when sorting by this column\n   */\n  asArray(labels?: string[] | number, sort?: EAdvancedSortMethod) {\n    if (sort) {\n      (<any>this.desc).sort = sort;\n    }\n    return super.asArray(labels);\n  }\n\n  /**\n   * @inheritDoc\n   * @param {EAdvancedSortMethod} sort sorting criteria when sorting by this column\n   */\n  asMap(sort?: EAdvancedSortMethod) {\n    if (sort) {\n      (<any>this.desc).sort = sort;\n    }\n    return super.asMap();\n  }\n\n  /**\n   * converts type to a boxplot column type\n   * @param {ESortMethod} sort sorting criteria when sorting by this column\n   */\n  asBoxPlot(sort?: ESortMethod) {\n    if (sort) {\n      (<any>this.desc).sort = sort;\n    }\n    this.desc.type = 'boxplot';\n    return this;\n  }\n\n  private derive(data: any[]) {\n    const col = (<any>this.desc).column;\n\n    const asArray = (v: any, extra: string) => {\n      const vs: number[] = [];\n      (Array.isArray(v) ? v : [v]).forEach((vi) => {\n        if (typeof vi === 'number' && !isNaN(vi)) {\n          vs.push(vi);\n        }\n        if (vi != null && typeof vi.value === 'number' && !isNaN(vi.value)) {\n          vs.push(vi.value);\n        }\n        if (vi != null && typeof vi[extra] === 'number' && !isNaN(vi[extra])) {\n          vs.push(vi[extra]);\n        }\n      });\n      return vs;\n    };\n\n    const minv = min(data, (d) => {\n      const v = resolveValue(d, col);\n      const vs: number[] = asArray(v, 'min');\n      return vs.length === 0 ? Infinity : min(vs);\n    });\n    const maxv = max(data, (d) => {\n      const v = resolveValue(d, col);\n      const vs: number[] = asArray(v, 'max');\n      return vs.length === 0 ? -Infinity : max(vs);\n    });\n    return <[number, number]>[minv, maxv];\n  }\n\n\n  build(data: any[]): INumberColumnDesc {\n    if (!this.desc.map && !this.desc.domain) {\n      // derive domain\n      this.mapping('linear', this.derive(data));\n    } else {\n      const d = this.desc.domain || this.desc.map!.domain;\n      if (isNaN(d[0]) || isNaN(d[1])) {\n        const ext = this.derive(data);\n        if (isNaN(d[0])) {\n          d[0] = ext[0];\n        }\n        if (isNaN(d[1])) {\n          d[1] = ext[1];\n        }\n      }\n    }\n    return super.build(data);\n  }\n}\n\n/**\n * builds numerical column builder\n * @param {string} column column which contains the associated data\n * @param {[number , number]} domain domain (min, max) of this column\n * @returns {NumberColumnBuilder}\n */\nexport function buildNumberColumn(column: string, domain?: [number, number]) {\n  const r = new NumberColumnBuilder(column);\n  if (domain) {\n    r.mapping('linear', domain);\n  }\n  return r;\n}\n","import {EAlignment, ILinkColumnDesc} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\n\nexport default class StringColumnBuilder extends ColumnBuilder<ILinkColumnDesc> {\n\n  constructor(column: string) {\n    super('string', column);\n  }\n\n  /**\n   * makes the text editable within a cell and switches to the annotate type\n   */\n  editable() {\n    this.desc.type = 'annotate';\n    return this;\n  }\n\n  /**\n   * changes the alignment of the column\n   */\n  alignment(align: EAlignment) {\n    this.desc.alignment = align;\n    return this;\n  }\n\n  /**\n   * allow html text as values\n   */\n  html() {\n    this.desc.escape = false;\n    return this;\n  }\n\n  /**\n   * provide a pattern with which the value will be wrapped, use <code>${value}</code> for the current and and <code>${item}</code> for the whole item\n   * @param {string} pattern pattern to apply\n   * @param {string[]} templates optional templates for patterns to provide in the edit pattern dialog\n   */\n  pattern(pattern: string, templates?: string[]) {\n    this.desc.type = 'link';\n    this.desc.pattern = pattern;\n    if (templates) {\n      this.desc.patternTemplates = templates;\n    }\n    return this;\n  }\n}\n\n/**\n * builds a string column builder\n * @param {string} column column which contains the associated data\n * @returns {StringColumnBuilder}\n */\nexport function buildStringColumn(column: string) {\n  return new StringColumnBuilder(column);\n}\n","import {IDateColumnDesc} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\n\nexport default class DateColumnBuilder extends ColumnBuilder<IDateColumnDesc> {\n\n  constructor(column: string) {\n    super('date', column);\n  }\n\n  /**\n   * specify the format and parsing d3-time pattern to convert Date to strings and vise versa\n   * @param {string} format d3-time-format pattern\n   * @param {string} parse optional different parsing pattern\n   */\n  format(format: string, parse?: string) {\n    this.desc.dateFormat = format;\n    if (parse) {\n      this.desc.dateParse = parse;\n    }\n    return this;\n  }\n\n}\n\n/**\n * builds a date column builder\n * @param {string} column column which contains the associated data\n * @returns {DateColumnBuilder}\n */\nexport function buildDateColumn(column: string) {\n  return new DateColumnBuilder(column);\n}\n","import {IHierarchyColumnDesc, IPartialCategoryNode} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\n\nexport default class HierarchyColumnBuilder extends ColumnBuilder<IHierarchyColumnDesc> {\n\n  constructor(column: string) {\n    super('hierarchy', column);\n  }\n\n  /**\n   * specify the underlying hierarchy of this column\n   * @param {IPartialCategoryNode} hierarchy\n   * @param {string} hierarchySeparator specify the character to separate levels (default dot)\n   */\n  hierarchy(hierarchy: IPartialCategoryNode, hierarchySeparator?: string) {\n    this.desc.hierarchy = hierarchy;\n    if (hierarchySeparator) {\n      this.desc.hierarchySeparator = hierarchySeparator;\n    }\n    return this;\n  }\n\n  build(data: any[]): IHierarchyColumnDesc {\n    console.assert(Boolean(this.desc.hierarchy));\n    return super.build(data);\n  }\n}\n\n/**\n * build a hierarchical column builder\n * @param {string} column column which contains the associated data\n * @param {IPartialCategoryNode} hierarchy\n * @returns {HierarchyColumnBuilder}\n */\nexport function buildHierarchicalColumn(column: string, hierarchy?: IPartialCategoryNode) {\n  const r = new HierarchyColumnBuilder(column);\n  if (hierarchy) {\n    r.hierarchy(hierarchy);\n  }\n  return r;\n}\n","import {IActionColumnDesc, IAction, IGroupAction} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\n\nexport default class ActionsColumnBuilder extends ColumnBuilder<IActionColumnDesc> {\n\n  constructor() {\n    super('actions', '');\n  }\n\n  /**\n   * adds another action\n   * @param action the action\n   */\n  action(action: IAction) {\n    return this.actions([action]);\n  }\n\n  /**\n   * adds multiple actions\n   * @param actions list of actions\n   */\n  actions(actions: IAction[]) {\n    if (!this.desc.actions) {\n      this.desc.actions = [];\n    }\n    this.desc.actions!.push(...actions);\n    return this;\n  }\n\n  /**\n   * adds another action that is shown in group rows\n   * @param action the action\n   */\n  groupAction(action: IGroupAction) {\n    return this.groupActions([action]);\n  }\n\n  /**\n   * add multiple group actions that are shown in group rows\n   * @param actions list of actions\n   */\n  groupActions(actions: IGroupAction[]) {\n    if (!this.desc.groupActions) {\n      this.desc.groupActions = [];\n    }\n    this.desc.groupActions!.push(...actions);\n    return this;\n  }\n}\n\n/**\n * builds a actions column builder\n * @returns {ActionsColumnBuilder}\n */\nexport function buildActionsColumn() {\n  return new ActionsColumnBuilder();\n}\n","import {IBooleanColumnDesc} from '../../model';\nimport ColumnBuilder from './ColumnBuilder';\n\nexport default class BooleanColumnBuilder extends ColumnBuilder<IBooleanColumnDesc> {\n\n  constructor(column: string) {\n    super('boolean', column);\n  }\n\n  trueMarker(marker: string) {\n    this.desc.trueMarker = marker;\n    return this;\n  }\n\n  falseMarker(marker: string) {\n    this.desc.falseMarker = marker;\n    return this;\n  }\n}\n\n/**\n * builds a boolean column builder\n * @param {string} column column which contains the associated data\n * @returns {BooleanColumnBuilder}\n */\nexport function buildBooleanColumn(column: string) {\n  return new BooleanColumnBuilder(column);\n}\n","import {IColumnDesc, IColumnConstructor} from '../model';\nimport {DataProvider, LocalDataProvider, deriveColors, deriveColumnDescriptions, IDataProviderOptions, ILocalDataProviderOptions, IAggregationStrategy} from '../provider';\nimport {LineUp, Taggle} from '../ui';\nimport ColumnBuilder from './column/ColumnBuilder';\nimport LineUpBuilder from './LineUpBuilder';\nimport {RankingBuilder} from './RankingBuilder';\n\nexport * from './column';\nexport * from './RankingBuilder';\n\n/**\n * builder for a LocalDataProvider along with LineUp configuration options\n */\nexport class DataBuilder extends LineUpBuilder {\n  private readonly columns: (IColumnDesc | ((data: any[]) => IColumnDesc))[] = [];\n  private readonly providerOptions: Partial<ILocalDataProviderOptions & IDataProviderOptions> = {\n    columnTypes: {}\n  };\n\n  private readonly rankBuilders: ((data: DataProvider) => void)[] = [];\n  private _deriveColors: boolean = false;\n\n  constructor(private readonly data: object[]) {\n    super();\n  }\n\n  /**\n   * use the schedulded task executor to asynchronously compute aggregations\n   */\n  scheduledTaskExecutor() {\n    this.providerOptions.taskExecutor = 'scheduled';\n    return this;\n  }\n\n  /**\n   * when using a top-n strategy how many items should be shown\n   */\n  showTopN(n: number) {\n    this.providerOptions.showTopN = n;\n    return this;\n  }\n\n  /**\n   * change the aggregation strategy that should be used when grouping by a column\n   */\n  aggregationStrategy(strategy: IAggregationStrategy) {\n    this.providerOptions.aggregationStrategy = strategy;\n    return this;\n  }\n\n  /**\n   * allow just a single selection\n   */\n  singleSelection() {\n    this.providerOptions.singleSelection = true;\n    return this;\n  }\n\n  /**\n   * filter all rankings by all filters in LineUp\n   */\n  filterGlobally() {\n    this.providerOptions.filterGlobally = true;\n    return this;\n  }\n\n  /**\n   * triggers to derive the column descriptions for the given data\n   * @param {string} columns optional enforced order of columns\n   */\n  deriveColumns(...columns: (string | string[])[]) {\n    const cols = (<string[]>[]).concat(...columns);\n    for (const c of deriveColumnDescriptions(this.data, {columns: cols})) {\n      this.columns.push(c);\n    }\n    return this;\n  }\n\n  /**\n   * tirggers to assign colors for the given descriptions\n   */\n  deriveColors() {\n    this._deriveColors = true;\n    return this;\n  }\n\n  /**\n   * register another column type to this data provider\n   * @param {string} type unique type id\n   * @param {IColumnConstructor} clazz column class\n   */\n  registerColumnType(type: string, clazz: IColumnConstructor) {\n    this.providerOptions.columnTypes![type] = clazz;\n    return this;\n  }\n\n  /**\n   * push another column description to this data provider\n   * @param {IColumnDesc | ColumnBuilder} column column description or builder instance\n   */\n  column(column: IColumnDesc | ColumnBuilder | ((data: any[]) => IColumnDesc)) {\n    this.columns.push(column instanceof ColumnBuilder ? column.build.bind(column) : column);\n    return this;\n  }\n\n  /**\n   * restores a given ranking dump\n   * @param dump dump as created using '.dump()'\n   */\n  restore(dump: any) {\n    this.rankBuilders.push((data) => data.restore(dump));\n    return this;\n  }\n\n  /**\n   * add the default ranking (all columns) to this data provider\n   * @param {boolean} addSupportTypes add support types, too, default: true\n   */\n  defaultRanking(addSupportTypes: boolean = true) {\n    this.rankBuilders.push((data) => data.deriveDefault(addSupportTypes));\n    return this;\n  }\n\n  /**\n   * add another ranking to this data provider\n   * @param {((data: DataProvider) => void) | RankingBuilder} builder ranking builder\n   */\n  ranking(builder: ((data: DataProvider) => void) | RankingBuilder) {\n    this.rankBuilders.push(builder instanceof RankingBuilder ? builder.build.bind(builder) : builder);\n    return this;\n  }\n\n  /**\n   * builds the data provider itself\n   * @returns {LocalDataProvider}\n   */\n  buildData() {\n    // last come survived separted by label to be able to override columns\n    const columns: IColumnDesc[] = [];\n    const contained = new Set<string>();\n    for (const col of this.columns) {\n      const c = typeof col === 'function' ? col(this.data) : col;\n      const key = `${c.type}@${c.label}`;\n      if (!contained.has(key)) {\n        columns.push(c);\n        contained.add(key);\n        continue;\n      }\n      const oldPos = columns.findIndex((d) => key === `${d.type}@${d.label}`);\n      columns.splice(oldPos, 1, c); // replace with new one\n    }\n    if (this._deriveColors) {\n      deriveColors(columns);\n    }\n    const r = new LocalDataProvider(this.data, columns, this.providerOptions);\n    if (this.rankBuilders.length === 0) {\n      this.defaultRanking();\n    }\n    this.rankBuilders.forEach((builder) => builder(r));\n    return r;\n  }\n\n  /**\n   * builds LineUp at the given parent DOM node\n   * @param {HTMLElement} node parent DOM node to attach\n   * @returns {LineUp}\n   */\n  build(node: HTMLElement) {\n    return new LineUp(node, this.buildData(), this.options);\n  }\n\n  /**\n   * builds Taggle at the given parent DOM node\n   * @param {HTMLElement} node parent DOM node to attach\n   * @returns {Taggle}\n   */\n  buildTaggle(node: HTMLElement) {\n    return new Taggle(node, this.buildData(), this.options);\n  }\n}\n\n\n/**\n * creates a new builder instance for the given data\n * @param {object[]} arr data to visualize\n * @returns {DataBuilder}\n */\nexport function builder(arr: object[]) {\n  return new DataBuilder(arr);\n}\n\n\n/**\n * build a new Taggle instance in the given node for the given data\n * @param {HTMLElement} node DOM node to attach to\n * @param {any[]} data data to visualize\n * @param {string[]} columns optional enforced column order\n * @returns {Taggle}\n */\nexport function asTaggle(node: HTMLElement, data: any[], ...columns: string[]): Taggle {\n  return builder(data)\n    .deriveColumns(columns)\n    .deriveColors()\n    .defaultRanking()\n    .buildTaggle(node);\n}\n\n/**\n * build a new LineUp instance in the given node for the given data\n * @param {HTMLElement} node DOM node to attach to\n * @param {any[]} data data to visualize\n * @param {string[]} columns optional enforced column order\n * @returns {LineUp}\n */\nexport function asLineUp(node: HTMLElement, data: any[], ...columns: string[]): LineUp {\n  return builder(data)\n    .deriveColumns(columns)\n    .deriveColors()\n    .defaultRanking()\n    .build(node);\n}\n","import {extent, resolveValue} from '../../internal';\nimport {IActionColumnDesc, IArrayDesc, IBooleanColumnDesc, ICategoricalColumnDesc, IColumnDesc, IDateColumnDesc, IHierarchyColumnDesc, ILinkColumnDesc, INumberColumnDesc} from '../../model';\nimport {IBuilderAdapterActionsColumnDescProps, IBuilderAdapterBooleanColumnDescProps, IBuilderAdapterCategoricalColumnDescProps, IBuilderAdapterColumnDescProps, IBuilderAdapterDateColumnDescProps, IBuilderAdapterHierarchyColumnDescProps, IBuilderAdapterNumberColumnDescProps, IBuilderAdapterStringColumnDescProps} from '.';\n\nexport function build<T extends IBuilderAdapterColumnDescProps>(props: T, _data?: any[]): IColumnDesc {\n  const {column} = props;\n  const desc = <any>{column, type: props.type, label: column ? column[0].toUpperCase() + column.slice(1) : props.type};\n\n  (<(keyof IBuilderAdapterColumnDescProps)[]>['label', 'description', 'frozen', 'width', 'renderer', 'groupRenderer', 'summaryRenderer', 'visible', 'fixed']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n\n  if (props.custom) { // merge custom attributes\n    Object.assign(desc, props.custom);\n  }\n\n  if (props.asMap) {\n    console.assert(['categorical', 'date', 'number', 'string', 'link'].includes(desc.type!));\n    desc.type += 'Map';\n  }\n\n  if (props.asArray != null) {\n    console.assert(['boolean', 'categorical', 'date', 'number', 'string', 'link'].includes(desc.type!));\n    desc.type += 's';\n    const a = <IArrayDesc>desc;\n    const labels = props.asArray;\n    if (Array.isArray(labels)) {\n      a.labels = labels;\n      a.dataLength = labels.length;\n    } else if (typeof labels === 'number') {\n      a.dataLength = labels;\n    }\n  }\n\n  return <any>desc;\n}\n\n\nexport function buildCategorical(props: IBuilderAdapterCategoricalColumnDescProps, data: any[]): ICategoricalColumnDesc {\n  const desc: any = build({...props, type: 'categorical'});\n\n  if (props.asOrdinal) {\n    desc.type = 'ordinal';\n  }\n  if (props.missingCategory) {\n    desc.missingCategory = props.missingCategory;\n  }\n  if (props.asSet) {\n    if (typeof props.asSet === 'string') {\n      (<any>desc).separator = props.asSet;\n    }\n    desc.type = 'set';\n  }\n\n\n  if (!props.categories) {\n    // derive categories\n    const categories = new Set(data.map((d) => <string>resolveValue(d, (<any>desc).column)));\n    desc.categories = Array.from(categories).sort();\n  } else {\n    desc.categories = props.categories;\n  }\n  return desc;\n}\n\nexport function buildDate(props: IBuilderAdapterDateColumnDescProps): IDateColumnDesc {\n  const desc: any = build({...props, type: 'date'});\n\n  (<(keyof IBuilderAdapterDateColumnDescProps)[]>['dateFormat', 'dateParse']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  return desc;\n}\n\nexport function buildHierarchy(props: Partial<IBuilderAdapterHierarchyColumnDescProps>): IHierarchyColumnDesc {\n  const desc: any = build({...(<any>props), type: 'hierarchy'});\n\n  (<(keyof IBuilderAdapterHierarchyColumnDescProps)[]>['hierarchy', 'hierarchySeparator']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  return desc;\n}\n\nexport function buildNumber(props: IBuilderAdapterNumberColumnDescProps, data: any[]): INumberColumnDesc {\n  const desc: any = build({...props, type: 'number'});\n\n  const domain = props.domain ? props.domain : <[number, number]>extent(data, (d) => <number>resolveValue(d, (<any>desc).column));\n\n  if (props.hasOwnProperty('color')) {\n    desc.colorMapping = props.color;\n  }\n  (<(keyof IBuilderAdapterNumberColumnDescProps)[]>['sort', 'colorMapping']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  if (props.scripted) {\n    desc.map = {domain, code: props.scripted, type: 'script'};\n  } else if (!props.mapping || props.mapping === 'linear') {\n    desc.domain = domain;\n    if (props.range) {\n      desc.range = props.range;\n    }\n  } else {\n    desc.map = {\n      type: props.mapping,\n      domain,\n      range: props.range || [0, 1]\n    };\n  }\n  return desc;\n}\n\nexport function buildString(props: IBuilderAdapterStringColumnDescProps): ILinkColumnDesc {\n  const desc: any = build({...props, type: 'string'});\n\n  (<(keyof IBuilderAdapterStringColumnDescProps)[]>['pattern', 'patternTemplate', 'alignment']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  if (props.editable) {\n    desc.type = 'annotate';\n  }\n  if (props.pattern) {\n    desc.type = 'link';\n  }\n  if (props.html) {\n    desc.escape = false;\n  }\n  return desc;\n}\n\n\nexport function buildBoolean(props: IBuilderAdapterBooleanColumnDescProps): IBooleanColumnDesc {\n  const desc: any = build({...props, type: 'boolean'});\n\n  (<(keyof IBuilderAdapterBooleanColumnDescProps)[]>['trueMarker', 'falseMarker']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  return desc;\n}\n\nexport function buildActions(props: IBuilderAdapterActionsColumnDescProps): IActionColumnDesc {\n  const desc: any = build({...props, type: 'actions'});\n\n  (<(keyof IBuilderAdapterActionsColumnDescProps)[]>['actions', 'groupActions']).forEach((key) => {\n    if (props.hasOwnProperty(key)) {\n      desc[key] = props[key];\n    }\n  });\n  return desc;\n}\n\n","import {buildRanking as buildRankingImpl, INestedBuilder, IReduceBuilder, IScriptedBuilder, IWeightedSumBuilder} from '..';\nimport {Ranking} from '../../model';\nimport {LocalDataProvider} from '../../provider';\nimport {IBuilderAdapterImposeColumnProps, IBuilderAdapterNestedColumnProps, IBuilderAdapterRankingProps, IBuilderAdapterReduceColumnProps, IBuilderAdapterScriptColumnProps, IBuilderAdapterSupportColumnProps, IBuilderAdapterWeightedSumColumnProps} from '.';\n\n\n/*\n * build the column description\n */\nexport function buildRanking(props: IBuilderAdapterRankingProps, data: LocalDataProvider): Ranking {\n  const r = buildRankingImpl();\n\n  if (props.sortBy) {\n    const s = Array.isArray(props.sortBy) ? props.sortBy : [props.sortBy];\n    s.forEach((si) => {\n      if (typeof si === 'string') {\n        r.sortBy(si);\n      } else {\n        r.sortBy(si.column, si.asc);\n      }\n    });\n  }\n  if (props.groupBy) {\n    const s = Array.isArray(props.groupBy) ? props.groupBy : [props.groupBy];\n    r.groupBy(...s);\n  }\n  if (props.columns) {\n    props.columns.forEach((c) => r.column(c));\n  }\n  return r.build(data);\n}\n\nexport function buildGeneric(props: { column: '*' | string }) {\n  return props.column;\n}\n\nexport function buildImposeRanking(props: IBuilderAdapterImposeColumnProps) {\n  return <any>Object.assign({\n    type: 'impose'\n  }, props);\n}\n\n\nexport function buildNestedRanking(props: IBuilderAdapterNestedColumnProps, children: string[]) {\n  const r: INestedBuilder = {\n    type: 'nested',\n    columns: children\n  };\n  if (props.label) {\n    r.label = props.label;\n  }\n  return r;\n}\n\n\nexport function buildWeightedSumRanking(props: IBuilderAdapterWeightedSumColumnProps, children: { column: string, weight: number }[]) {\n  const r: IWeightedSumBuilder = {\n    type: 'weightedSum',\n    columns: children.map((d) => d.column),\n    weights: children.map((d) => d.weight)\n  };\n  if (props.label) {\n    r.label = props.label;\n  }\n  return r;\n}\n\nexport function buildReduceRanking(props: IBuilderAdapterReduceColumnProps, children: string[]) {\n  const r: IReduceBuilder = {\n    type: props.type,\n    columns: children\n  };\n  if (props.label) {\n    r.label = props.label;\n  }\n  return r;\n}\n\nexport function buildScriptRanking(props: IBuilderAdapterScriptColumnProps, children: string[]) {\n  const r: IScriptedBuilder = {\n    type: 'script',\n    code: props.code,\n    columns: children\n  };\n  if (props.label) {\n    r.label = props.label;\n  }\n  return r;\n}\n\nexport function buildSupportRanking(props: IBuilderAdapterSupportColumnProps) {\n  return `_${props.type}`;\n}\n\nexport function buildAllColumnsRanking() {\n  return '*';\n}\n","export {equal} from '../../internal';\n\nexport function isTypeInstance(clazz: any, superClass: any) {\n  let c = clazz;\n  while (c && c !== superClass) {\n    c = c.__proto__;\n  }\n  return c === superClass;\n}\n\nexport function pick<T extends object>(obj: T, keys: (keyof T)[]): Pick<T, keyof T> {\n  const r: Pick<T, keyof T> = <any>{};\n  keys.forEach((k) => {\n    if (obj.hasOwnProperty(k)) {\n      r[k] = obj[k];\n    }\n  });\n  return r;\n}\n\nexport function isSame<T extends object>(current: T, changed: (prop: keyof T) => boolean, props: (keyof T)[]) {\n  if (props.every((p) => !changed(p))) {\n    return null;\n  }\n  return pick(current, props);\n}\n","import {IBuilderAdapter, IBuilderAdapterProps, IBuilderAdapterRankingProps, IChangeDetecter} from '.';\nimport {IColumnDesc} from '../../model';\nimport {deriveColors, deriveColumnDescriptions, IDataProviderOptions, ILocalDataProviderOptions, LocalDataProvider} from '../../provider';\nimport {LineUp, Taggle} from '../../ui';\nimport {buildRanking} from './ranking';\nimport {equal, isSame, pick} from './utils';\n\n\nconst providerOptions: (keyof IDataProviderOptions | keyof ILocalDataProviderOptions)[] = ['singleSelection', 'filterGlobally', 'columnTypes', 'taskExecutor', 'jumpToSearchResult'];\nconst lineupOptions: (keyof IBuilderAdapterProps)[] = ['animated', 'sidePanel', 'sidePanelCollapsed', 'hierarchyIndicator', 'defaultSlopeGraphMode', 'summaryHeader', 'expandLineOnHover', 'overviewMode', 'renderers', 'canRender', 'toolbarActions', 'toolbarDialogAddons', 'rowHeight', 'rowPadding', 'groupHeight', 'groupPadding', 'dynamicHeight', 'labelRotation', 'ignoreUnsupportedBrowser', 'livePreviews'];\n\ninterface IRankingContext {\n  builders: IBuilderAdapterRankingProps[];\n  restore: any;\n  derive: boolean;\n  supportTypes: boolean;\n}\n\ninterface IColumnContext {\n  columns: IColumnDesc[];\n  deriveColumns: boolean;\n  deriveColumnNames: string[];\n  deriveColors: boolean;\n}\n\nexport class Adapter {\n  private data: LocalDataProvider | null = null;\n  private instance: LineUp | Taggle | null = null;\n\n  private prevRankings: IRankingContext | null = null;\n  private prevColumns: IColumnContext | null = null;\n  private prevHighlight: number | null = null;\n\n  private readonly onSelectionChanged = (indices: number[]) => {\n    if (this.props.onSelectionChanged && !equal(this.props.selection, indices)) {\n      this.props.onSelectionChanged(indices);\n    }\n  }\n\n  private readonly onHighlightChanged = (highlight: number) => {\n    const prev = this.prevHighlight != null ? this.prevHighlight : -1;\n    if (prev === highlight) {\n      return;\n    }\n    this.prevHighlight = highlight;\n    if (this.props.onHighlightChanged) {\n      this.props.onHighlightChanged(highlight);\n    }\n  }\n\n  constructor(private readonly adapter: IBuilderAdapter) {\n\n  }\n\n  private get props() {\n    return this.adapter.props();\n  }\n\n  componentDidMount() {\n    this.data = this.buildProvider();\n    this.instance = this.adapter.createInstance(this.data, pick(this.props, lineupOptions));\n    this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n  }\n\n  private resolveColumnDescs(data: any[]): IColumnContext {\n    const columns = this.adapter.columnDescs(data);\n    const deriveColumns = columns.length === 0 || Boolean(this.props.deriveColumns);\n    const deriveColumnNames = Array.isArray(this.props.deriveColumns) ? this.props.deriveColumns : [];\n    const deriveColors = Boolean(this.props.deriveColors);\n    return {\n      columns,\n      deriveColors,\n      deriveColumns,\n      deriveColumnNames\n    };\n  }\n\n  private resolveRankings(): IRankingContext {\n    const builders = this.adapter.rankingBuilders();\n\n    return {\n      builders,\n      restore: this.props.restore,\n      derive: (builders.length === 0 && !this.props.restore) || Boolean(this.props.defaultRanking),\n      supportTypes: this.props.defaultRanking !== 'noSupportTypes'\n    };\n  }\n\n  private buildColumns(data: any[], ctx: IColumnContext) {\n    this.prevColumns = ctx;\n    const columns = ctx.columns.map((d) => Object.assign({}, d)); // work on copy\n    if (ctx.deriveColumns) {\n      const labels = new Set(columns.map((d) => `${d.type}@${d.label}`));\n      const derived = deriveColumnDescriptions(data, {columns: ctx.deriveColumnNames});\n      for (const derive of derived) {\n        if (labels.has(`${derive.type}@${derive.label}`)) { // skip same name\n          continue;\n        }\n        columns.push(derive);\n      }\n    }\n    if (ctx.deriveColors) {\n      deriveColors(columns);\n    }\n    return columns;\n  }\n\n  private buildRankings(data: LocalDataProvider, rankings: IRankingContext) {\n    data.clearRankings();\n    this.prevRankings = rankings;\n    if (rankings.derive) {\n      data.deriveDefault(rankings.supportTypes);\n    }\n    if (rankings.restore) {\n      data.restore(rankings.restore);\n    }\n    rankings.builders.forEach((b) => buildRanking(b, data!));\n  }\n\n  private buildProvider() {\n    const columns = this.buildColumns(this.props.data, this.resolveColumnDescs(this.props.data));\n    const data = new LocalDataProvider(this.props.data, columns, pick(this.props, providerOptions));\n\n    this.buildRankings(data, this.resolveRankings());\n\n    data.setSelection(this.props.selection || []);\n    data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\n\n    return data;\n  }\n\n  private updateLineUp(changeDetector: IChangeDetecter, providerChanged: boolean) {\n    // check lineup instance properties\n    const changedLineUpOptions = isSame(this.props, changeDetector, lineupOptions);\n    if (!changedLineUpOptions) {\n      if (providerChanged) {\n        this.instance!.setDataProvider(this.data!);\n      }\n\n      if (providerChanged || (this.props.highlight != null && this.prevHighlight !== this.props.highlight)) {\n        this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\n        this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, null);\n        this.instance!.setHighlight(this.prevHighlight);\n        this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n        return true;\n      }\n      return false;\n    }\n    // recreate lineup\n    if (this.instance) {\n      this.instance.destroy();\n    }\n    this.instance = this.adapter.createInstance(this.data!, changedLineUpOptions);\n\n    this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\n    this.instance!.setHighlight(this.prevHighlight);\n    this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n    return true;\n  }\n\n  private updateProvider(changeDetector: IChangeDetecter) {\n    const changedProviderOptions = isSame(this.props, changeDetector, providerOptions);\n    if (changedProviderOptions || !this.data || changeDetector('data')) {\n      // big change start from scratch\n      this.data = this.buildProvider();\n      return true;\n    }\n\n    const rankings = this.resolveRankings();\n    const columns = this.resolveColumnDescs(this.props.data);\n    const columnsChanged = !equal(this.prevColumns, columns);\n    if (columnsChanged) {\n      const descs = this.buildColumns(this.props.data, columns);\n      this.data.clearColumns();\n      descs.forEach((d) => this.data!.pushDesc(d));\n    }\n\n    if (columnsChanged || !equal(rankings, this.prevRankings)) {\n      this.buildRankings(this.data, rankings);\n    }\n\n    this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, null);\n    this.data.setSelection(this.props.selection || []);\n    this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\n    return false;\n  }\n\n  componentDidUpdate(changeDetector: IChangeDetecter) {\n    const providerChanged = this.updateProvider(changeDetector);\n    this.updateLineUp(changeDetector, providerChanged);\n    // this.instance!.update();\n  }\n\n  componentWillUnmount() {\n    if (this.instance) {\n      this.instance.destroy();\n      this.instance = null;\n    }\n    this.data = null;\n  }\n}\n","\nimport {build, buildCategorical, buildDate, buildHierarchy, buildNumber, buildString, buildActions} from './column';\nimport {Adapter} from './lineup';\nimport {\n  buildAllColumnsRanking,\n  buildGeneric,\n  buildImposeRanking,\n  buildNestedRanking,\n  buildRanking,\n  buildReduceRanking,\n  buildScriptRanking,\n  buildSupportRanking,\n  buildWeightedSumRanking\n} from './ranking';\nimport {equal, isSame, isTypeInstance} from './utils';\n\nexport const builderAdapter = {\n  buildString,\n  buildNumber,\n  buildHierarchy,\n  buildDate,\n  buildCategorical,\n  buildActions,\n  build,\n  buildGeneric,\n  buildWeightedSumRanking,\n  buildSupportRanking,\n  buildScriptRanking,\n  buildReduceRanking,\n  buildRanking,\n  buildNestedRanking,\n  buildImposeRanking,\n  buildAllColumnsRanking,\n  equal,\n  isSame,\n  isTypeInstance,\n  Adapter\n};\n","import Column from './Column';\nimport ValueColumn from './ValueColumn';\nimport {IValueColumnDesc} from './interfaces';\n\nexport * from './annotations';\nexport {isMissingValue, isUnknown, FIRST_IS_NAN, FIRST_IS_MISSING, missingGroup} from './missing';\nexport * from './interfaces';\nexport * from './ICategoricalColumn';\nexport * from './INumberColumn';\nexport * from './IDateColumn';\nexport * from './IArrayColumn';\n\nexport {toCategories} from './internalCategorical';\n\nexport {ScaleMappingFunction, ScriptMappingFunction, mappingFunctions} from './MappingFunction';\nexport {DEFAULT_CATEGORICAL_COLOR_FUNCTION, ReplacmentColorMappingFunction} from './CategoricalColorMappingFunction';\nexport {CustomColorMappingFunction, DEFAULT_COLOR_FUNCTION, SequentialColorFunction, DivergentColorFunction, UnknownColorFunction, QuantizedColorFunction, SolidColorFunction} from './ColorMappingFunction';\n\nexport {default as ActionColumn} from './ActionColumn';\nexport * from './ActionColumn';\nexport {default as AggregateGroupColumn} from './AggregateGroupColumn';\nexport * from './AggregateGroupColumn';\nexport {default as AnnotateColumn} from './AnnotateColumn';\nexport * from './AnnotateColumn';\nexport {default as ArrayColumn} from './ArrayColumn';\nexport * from './ArrayColumn';\nexport {default as BooleanColumn} from './BooleanColumn';\nexport * from './BooleanColumn';\nexport {default as BooleansColumn} from './BooleansColumn';\nexport * from './BooleansColumn';\nexport {default as BoxPlotColumn} from './BoxPlotColumn';\nexport * from './BoxPlotColumn';\nexport {default as CategoricalColumn} from './CategoricalColumn';\nexport *from './CategoricalColumn';\nexport {default as CategoricalMapColumn} from './CategoricalMapColumn';\nexport * from './CategoricalMapColumn';\nexport {default as CategoricalsColumn} from './CategoricalsColumn';\nexport * from './CategoricalsColumn';\nexport {default, default as Column} from './Column';\n// no * export\nexport {default as CompositeColumn} from './CompositeColumn';\n// no * export\nexport {default as CompositeNumberColumn} from './CompositeNumberColumn';\nexport * from './CompositeNumberColumn';\nexport {default as DateColumn} from './DateColumn';\nexport * from './DateColumn';\nexport {default as DatesColumn} from './DatesColumn';\nexport * from './DatesColumn';\nexport {default as DatesMapColumn} from './DatesMapColumn';\nexport * from './DatesMapColumn';\nexport {default as GroupColumn} from './GroupColumn';\nexport *from './GroupColumn';\nexport {default as HierarchyColumn} from './HierarchyColumn';\nexport * from './HierarchyColumn';\nexport {default as ImpositionBoxPlotColumn} from './ImpositionBoxPlotColumn';\nexport * from './ImpositionBoxPlotColumn';\nexport {default as ImpositionCompositeColumn} from './ImpositionCompositeColumn';\nexport * from './ImpositionCompositeColumn';\nexport {default as ImpositionCompositesColumn} from './ImpositionCompositesColumn';\nexport * from './ImpositionCompositesColumn';\nexport {default as LinkColumn} from './LinkColumn';\nexport * from './LinkColumn';\nexport {default as LinkMapColumn} from './LinkMapColumn';\nexport * from './LinkMapColumn';\nexport {default as LinksColumn} from './LinksColumn';\nexport * from './LinksColumn';\nexport {default as MapColumn} from './MapColumn';\nexport * from './MapColumn';\nexport {default as MultiLevelCompositeColumn} from './MultiLevelCompositeColumn';\nexport * from './MultiLevelCompositeColumn';\nexport {default as NestedColumn} from './NestedColumn';\nexport * from './NestedColumn';\nexport {default as NumberColumn} from './NumberColumn';\nexport * from './NumberColumn';\nexport {default as NumberMapColumn} from './NumberMapColumn';\nexport * from './NumberMapColumn';\nexport {default as NumbersColumn} from './NumbersColumn';\nexport * from './NumbersColumn';\nexport {default as OrdinalColumn} from './OrdinalColumn';\nexport * from './OrdinalColumn';\nexport {default as RankColumn} from './RankColumn';\nexport * from './RankColumn';\nexport {default as Ranking, EDirtyReason} from './Ranking';\n// no * export\nexport {default as ReduceColumn} from './ReduceColumn';\nexport * from './ReduceColumn';\nexport {default as ScriptColumn} from './ScriptColumn';\nexport * from './ScriptColumn';\nexport {default as SelectionColumn} from './SelectionColumn';\nexport * from './SelectionColumn';\nexport {default as SetColumn} from './SetColumn';\nexport * from './SetColumn';\nexport {default as StackColumn} from './StackColumn';\nexport * from './StackColumn';\nexport {default as StringColumn} from './StringColumn';\nexport * from './StringColumn';\nexport {default as StringsColumn} from './StringsColumn';\nexport * from './StringsColumn';\nexport {default as StringMapColumn} from './StringMapColumn';\nexport * from './StringMapColumn';\nexport {default as ValueColumn} from './ValueColumn';\n// no * export\n\n\n/**\n * defines a new column type\n * @param name\n * @param functions\n * @returns {CustomColumn}\n */\nexport function defineColumn<T>(name: string, functions: any = {}): typeof Column {\n  class CustomColumn extends ValueColumn<T> {\n    constructor(id: string, desc: IValueColumnDesc<T>, ...args: any[]) {\n      super(id, desc);\n      if (typeof (this.init) === 'function') {\n        this.init(id, desc, ...args);\n      }\n    }\n\n    init(..._args: any[]) {\n      // dummy\n    }\n  }\n\n  CustomColumn.prototype.toString = () => name;\n  CustomColumn.prototype = Object.assign(CustomColumn.prototype, functions);\n\n  return CustomColumn;\n}\n","import Column, {IColumnDesc, IDataRow, Ranking, defaultGroup, IndicesArray, IOrderedGroup} from '../model';\nimport ACommonDataProvider from './ACommonDataProvider';\nimport {IDataProviderOptions} from './interfaces';\nimport {DirectRenderTasks} from './DirectRenderTasks';\nimport {IRenderTasks} from '../renderer';\n\n/**\n * interface what the server side has to provide\n */\nexport interface IServerData {\n  /**\n   * sort the dataset by the given description\n   * @param ranking\n   */\n  sort(ranking: Ranking): Promise<IndicesArray>;\n\n  /**\n   * returns a slice of the data array identified by a list of indices\n   * @param indices\n   */\n  view(indices: number[]): Promise<any[]>;\n\n  /**\n   * returns a sample of the values for a given column\n   * @param column\n   */\n  mappingSample(column: any): Promise<number[]>;\n\n  /**\n   * return the matching indices matching the given arguments\n   * @param search\n   * @param column\n   */\n  search(search: string | RegExp, column: any): Promise<number[]>;\n}\n\n\nexport interface IRemoteDataProviderOptions {\n  /**\n   * maximal cache size (unused at the moment)\n   */\n  maxCacheSize: number;\n}\n\nfunction createIndex2Pos(order: IndicesArray) {\n  const index2pos = <number[]>[];\n  for (let i = 0; i < order.length; ++i) {\n    index2pos[order[i]] = i + 1;\n  }\n  return index2pos;\n}\n\n/**\n * a remote implementation of the data provider\n */\nexport default class RemoteDataProvider extends ACommonDataProvider {\n  private readonly ooptions: IRemoteDataProviderOptions = {\n    maxCacheSize: 1000\n  };\n\n  private readonly cache = new Map<number, Promise<IDataRow>>();\n\n\n  constructor(private server: IServerData, columns: IColumnDesc[] = [], options: Partial<IRemoteDataProviderOptions & IDataProviderOptions> = {}) {\n    super(columns, options);\n    Object.assign(this.ooptions, options);\n  }\n\n  getTotalNumberOfRows() {\n    // TODO not correct\n    return this.cache.size;\n  }\n\n  getTaskExecutor(): IRenderTasks {\n    // FIXME\n    return new DirectRenderTasks([]);\n  }\n\n  sort(ranking: Ranking) : Promise<{groups: IOrderedGroup[], index2pos: IndicesArray}> | {groups: IOrderedGroup[], index2pos: IndicesArray} {\n    //use the server side to sort\n    return this.server.sort(ranking).then((order) => ({groups: [Object.assign({order}, defaultGroup)], index2pos: createIndex2Pos(order)}));\n  }\n\n  private loadFromServer(indices: number[]) {\n    return this.server.view(indices).then((view) => {\n      //enhance with the data index\n      return view.map((v, i) => {\n        const dataIndex = indices[i];\n        return {v, dataIndex};\n      });\n    });\n  }\n\n  view(indices: number[]): Promise<any[]> {\n    if (indices.length === 0) {\n      return Promise.resolve([]);\n    }\n    const base = this.fetch([indices])[0];\n    return Promise.all(base).then((rows) => rows.map((d) => d.v));\n  }\n\n\n  private computeMissing(orders: number[][]): number[] {\n    const union = new Set<number>();\n    const unionAdd = union.add.bind(union);\n    orders.forEach((order) => order.forEach(unionAdd));\n\n    // removed cached\n    this.cache.forEach((_v, k) => union.delete(k));\n\n    if ((this.cache.size + union.size) > this.ooptions.maxCacheSize) {\n      // clean up cache\n    }\n    // const maxLength = Math.max(...orders.map((o) => o.length));\n    return Array.from(union);\n  }\n\n  private loadInCache(missing: number[]) {\n    if (missing.length === 0) {\n      return;\n    }\n    // load data and map to rows;\n    const v = this.loadFromServer(missing);\n    missing.forEach((_m, i) => {\n      const dataIndex = missing[i];\n      this.cache.set(dataIndex, v.then((loaded) => ({v: loaded[i], i: dataIndex})));\n    });\n  }\n\n  fetch(orders: number[][]): Promise<IDataRow>[][] {\n    const toLoad = this.computeMissing(orders);\n    this.loadInCache(toLoad);\n\n    return orders.map((order) =>\n      order.map((i) => this.cache.get(i)!));\n  }\n\n  getRow(index: number) {\n    if (this.cache.has(index)) {\n      return this.cache.get(index)!;\n    }\n    this.loadInCache([index]);\n    return this.cache.get(index)!;\n  }\n\n\n  mappingSample(col: Column): Promise<number[]> {\n    return this.server.mappingSample((<any>col.desc).column);\n  }\n\n  searchAndJump(search: string | RegExp, col: Column) {\n    this.server.search(search, (<any>col.desc).column).then((indices) => {\n      this.jumpToNearest(indices);\n    });\n  }\n}\n","export {colorOf} from './impose';\nexport * from './interfaces';\nexport {renderMissingCanvas, renderMissingDOM} from './missing';\n\nimport {AAggregatedGroupRenderer} from './AAggregatedGroupRenderer';\nimport {ANumbersCellRenderer} from './ANumbersCellRenderer';\nimport ActionRenderer from './ActionRenderer';\nimport AggregateGroupRenderer from './AggregateGroupRenderer';\nimport AnnotationRenderer from './AnnotationRenderer';\nimport BarCellRenderer from './BarCellRenderer';\nimport BooleanCellRenderer from './BooleanCellRenderer';\nimport BoxplotCellRenderer from './BoxplotCellRenderer';\nimport BrightnessCellRenderer, {toHeatMapColor} from './BrightnessCellRenderer';\nimport CategoricalCellRenderer from './CategoricalCellRenderer';\nimport CategoricalHeatmapCellRenderer from './CategoricalHeatmapCellRenderer';\nimport CategoricalStackedDistributionlCellRenderer from './CategoricalStackedDistributionlCellRenderer';\nimport CircleCellRenderer from './CircleCellRenderer';\nimport DateCellRenderer from './DateCellRenderer';\nimport DateHistogramCellRenderer from './DateHistogramCellRenderer';\nimport {DefaultCellRenderer} from './DefaultCellRenderer';\nimport DotCellRenderer from './DotCellRenderer';\nimport GroupCellRenderer from './GroupCellRenderer';\nimport HeatmapCellRenderer from './HeatmapCellRenderer';\nimport HistogramCellRenderer from './HistogramCellRenderer';\nimport ImageCellRenderer from './ImageCellRenderer';\nimport InterleavingCellRenderer from './InterleavingCellRenderer';\nimport LinkCellRenderer from './LinkCellRenderer';\nimport LinkMapCellRenderer from './LinkMapCellRenderer';\nimport LoadingCellRenderer from './LoadingCellRenderer';\nimport MapBarCellRenderer from './MapBarCellRenderer';\nimport MultiLevelCellRenderer from './MultiLevelCellRenderer';\nimport RankCellRenderer from './RankCellRenderer';\nimport SelectionRenderer from './SelectionRenderer';\nimport SetCellRenderer from './SetCellRenderer';\nimport SparklineCellRenderer from './SparklineCellRenderer';\nimport StringCellRenderer from './StringCellRenderer';\nimport TableCellRenderer from './TableCellRenderer';\nimport UpSetCellRenderer from './UpSetCellRenderer';\nimport VerticalBarCellRenderer from './VerticalBarCellRenderer';\nimport {noRenderer, wideEnough, wideEnoughCat, adaptTextColorToBgColor, adaptDynamicColorToBgColor} from './utils';\n\nexport const rendererClasses = {\n  AAggregatedGroupRenderer,\n  ANumbersCellRenderer,\n  ActionRenderer,\n  AggregateGroupRenderer,\n  AnnotationRenderer,\n  BarCellRenderer,\n  BooleanCellRenderer,\n  BoxplotCellRenderer,\n  BrightnessCellRenderer,\n  CategoricalCellRenderer,\n  CategoricalHeatmapCellRenderer,\n  CategoricalStackedDistributionlCellRenderer,\n  CircleCellRenderer,\n  DateCellRenderer,\n  DateHistogramCellRenderer,\n  DefaultCellRenderer,\n  DotCellRenderer,\n  GroupCellRenderer,\n  HeatmapCellRenderer,\n  HistogramCellRenderer,\n  ImageCellRenderer,\n  InterleavingCellRenderer,\n  LinkCellRenderer,\n  LinkMapCellRenderer,\n  LoadingCellRenderer,\n  MapBarCellRenderer,\n  MultiLevelCellRenderer,\n  RankCellRenderer,\n  SelectionRenderer,\n  SetCellRenderer,\n  SparklineCellRenderer,\n  StringCellRenderer,\n  TableCellRenderer,\n  UpSetCellRenderer,\n  VerticalBarCellRenderer\n};\n\nexport const rendererUtils = {\n  toHeatMapColor,\n  noRenderer,\n  wideEnough,\n  wideEnoughCat,\n  adaptTextColorToBgColor,\n  adaptDynamicColorToBgColor,\n};\n","/**\n * main module of LineUp.js containing the main class and exposes all other modules\n */\n\nimport {IColumnDesc} from './model';\nimport {DataProvider, LocalDataProvider, ILocalDataProviderOptions} from './provider';\nimport {LineUp, Taggle} from './ui';\nimport {ILineUpOptions, ITaggleOptions} from './config';\n\n\nexport * from './builder';\nexport * from './config';\nexport * from './internal/mathInterfaces';\nexport * from './model';\nexport * from './provider';\nexport * from './renderer';\nexport * from './ui';\nexport {LineUp as default} from './ui';\n\n\nexport function createLocalDataProvider(data: any[], columns: IColumnDesc[], options: Partial<ILocalDataProviderOptions> = {}) {\n  return new LocalDataProvider(data, columns, options);\n}\n\n/**\n *\n * @param container the html element lineup should be built in\n * @param data {DataProvider} the data providier\n * @param config {Partial<ILineUpOptions>} lineup configuration overrides\n * @returns {LineUp} the created lineup instance\n */\nexport function createLineUp(container: HTMLElement, data: DataProvider, config: Partial<ILineUpOptions> = {}) {\n  return new LineUp(container, data, config);\n}\n\nexport function createTaggle(container: HTMLElement, data: DataProvider, config: Partial<ITaggleOptions> = {}) {\n  return new Taggle(container, data, config);\n}\n","export * from './';\nexport {default} from './';\nimport '!file-loader?name=schema.4.0.0.json!./provider/schema.json';\nimport './style.scss';\n\ndeclare const __VERSION__: string;\ndeclare const __BUILD_ID__: string;\ndeclare const __LICENSE__: string;\n\n/**\n * LineUp version\n * @type {string}\n */\nexport const version = __VERSION__;\n/**\n * LineUp unique build id\n * @type {string}\n */\nexport const buildId = __BUILD_ID__;\n/**\n * LineUp license type\n * @type {string}\n */\nexport const license = __LICENSE__;\n"],"sourceRoot":""}